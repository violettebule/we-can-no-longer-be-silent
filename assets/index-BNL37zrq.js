const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/components-CyP6Hwio.js","assets/vendor-CZJs0MCY.js"])))=>i.map(i=>d[i]);
import{r as u,F as R,a as C,b as N,c as D,d as O,e as U,j as s,Q as q,f as A,g as _,h as Q,C as b,i as I,B as $,R as z,k as S}from"./vendor-CZJs0MCY.js";import{f as B,t as k,h as K,a as T,c as W,R as w,g as X,b as H}from"./components-CyP6Hwio.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))f(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const n of e.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&f(n)}).observe(document,{childList:!0,subtree:!0});function c(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function f(t){if(t.ep)return;t.ep=!0;const e=c(t);fetch(t.href,e)}})();const V="modulepreload",J=function(o){return"/we-can-no-longer-be-silent/"+o},P={},Y=function(a,c,f){let t=Promise.resolve();if(c&&c.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=(e==null?void 0:e.nonce)||(e==null?void 0:e.getAttribute("nonce"));t=Promise.all(c.map(l=>{if(l=J(l),l in P)return;P[l]=!0;const m=l.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${g}`))return;const i=document.createElement("link");if(i.rel=m?"stylesheet":V,m||(i.as="script",i.crossOrigin=""),i.href=l,n&&i.setAttribute("nonce",n),document.head.appendChild(i),m)return new Promise((j,p)=>{i.addEventListener("load",j),i.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}return t.then(()=>a()).catch(e=>{const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=e,window.dispatchEvent(n),!n.defaultPrevented)throw e})},G=()=>{const[o,a]=u.useState(!1),[c,f]=u.useState([]);return u.useEffect(()=>{const t=B.map(({fontName:e})=>new R(e).load("",5e3).then(()=>({fontName:e,loaded:!0})).catch(()=>(console.error(`Failed to load font: ${e}`),{fontName:e,loaded:!1})));Promise.all(t).then(e=>{const n=e.filter(l=>!l.loaded).map(l=>l.fontName);n.length>0?(f(n),console.error("Fonts that failed to load:",n)):(a(!0),window.dispatchEvent(new Event("resize")))}).catch(e=>{console.error("Error during font loading process:",e)})},[]),{isFontsLoaded:o,failedFonts:c}},E=(o,a)=>{C(o,a),u.useEffect(()=>()=>{},[o])},M=(o,a,c)=>{E("form-submissions",t=>{const e=k(t);K(e,o,a,c,1e4)})},Z=()=>{const o=N();E("sheet-update",()=>{o.invalidateQueries({queryKey:["data"]})})},ee=u.lazy(()=>Y(()=>import("./components-CyP6Hwio.js").then(o=>o.D),__vite__mapDeps([0,1])));function F(){const[o,a]=D(),[c,f]=u.useState(o.get("lang")||"en");u.useEffect(()=>{a(r=>(r.set("lang",c),r))},[c,a]);const t=O(),e=new URLSearchParams(t.search),n=e.get("show"),l=e.get("show-desc"),[m,g]=u.useState([]),[i,j]=u.useState(new Set),p=u.useRef({}),{isLoading:L,error:v}=U({queryKey:["data"],queryFn:()=>H(g),staleTime:1/0});if(M(g,j,n),Z(),!G())return s.jsx("div",{className:"w-screen h-screen flex items-center justify-center",children:s.jsx("p",{className:"text-xl",children:"Fonts loading..."})});if(L)return s.jsx("div",{children:"Loading..."});if(v)return s.jsxs("div",{children:["Error: ",v.message]});const x=T(m,n),y=W(x.length,!!i.size),h=X(l);return s.jsxs("div",{className:"flex w-screen h-screen items-center flex-col",children:[h?s.jsx(u.Suspense,{fallback:s.jsx("div",{children:"Loading description..."}),children:s.jsx(ee,{languagePref:c,setLanguagePref:f})}):null,s.jsx("div",{className:`flex grow p-0 bg-feminicidio bg-repeat ${h?"w-[80%] border-4 border-gray-100 max-h-[70%]":"w-full h-full"}`,children:s.jsxs("li",{className:`flex flex-col ${h?"w-full h-full":"w-screen h-screen"}`,children:[n==="monitor-2"?null:s.jsx("div",{className:"flex grow flex-wrap",children:x.filter((r,d)=>d%2===0&&!i.has(r.timestamp)).map((r,d)=>s.jsx(w,{item:r,index:d,fontSize:y,textfitRefs:p,showDescription:h,isFeatured:!1},r.timestamp))}),s.jsx("div",{className:`flex justify-around flex-wrap ${i.size>0?"min-h-[40%]":""}`,children:x.filter(r=>i.has(r.timestamp)).map((r,d)=>s.jsx(w,{item:r,index:d,fontSize:y,textfitRefs:p,showDescription:h,isFeatured:!0},r.timestamp))}),n==="monitor-2"?s.jsx("div",{className:"flex grow flex-wrap",children:x.filter((r,d)=>d%2===0&&!i.has(r.timestamp)).map((r,d)=>s.jsx(w,{item:r,index:d,fontSize:y,textfitRefs:p,showDescription:h,isFeatured:!1},r.timestamp))}):null,s.jsx("div",{className:"flex grow flex-wrap",children:x.filter((r,d)=>d%2===1&&!i.has(r.timestamp)).map((r,d)=>s.jsx(w,{item:r,index:d,fontSize:y,textfitRefs:p,showDescription:h,isFeatured:!1},r.timestamp))})]})})]})}const se=new q,te=new A.Realtime({key:"dDoULg.CBlbwg:iYgskWpW5sI4puyUDfHXAOfJ17X_DuyKVPb_QelkXNQ"});_(document.getElementById("root")).render(s.jsx(u.StrictMode,{children:s.jsx(Q,{client:te,children:s.jsx(b,{channelName:"test-updates",children:s.jsx(b,{channelName:"sheet-update",children:s.jsx(b,{channelName:"form-submissions",children:s.jsx(I,{client:se,children:s.jsx($,{children:s.jsxs(z,{children:[s.jsx(S,{path:"/",element:s.jsx(F,{})}),s.jsx(S,{path:"/*",element:s.jsx(F,{})})]})})})})})})})}));
