const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/components-COidjH1w.js","assets/vendor-CZJs0MCY.js"])))=>i.map(i=>d[i]);
import{r as u,F as R,a as C,b as N,c as D,d as O,e as U,j as s,Q as q,f as A,g as _,h as Q,C as b,i as I,B as z,R as $,k as S}from"./vendor-CZJs0MCY.js";import{f as B,t as k,h as K,a as T,c as W,R as w,g as X,b as H}from"./components-COidjH1w.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))f(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const n of e.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&f(n)}).observe(document,{childList:!0,subtree:!0});function c(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function f(t){if(t.ep)return;t.ep=!0;const e=c(t);fetch(t.href,e)}})();const V="modulepreload",J=function(o){return"/we-can-no-longer-be-silent/"+o},P={},Y=function(i,c,f){let t=Promise.resolve();if(c&&c.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=(e==null?void 0:e.nonce)||(e==null?void 0:e.getAttribute("nonce"));t=Promise.all(c.map(l=>{if(l=J(l),l in P)return;P[l]=!0;const m=l.endsWith(".css"),x=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${x}`))return;const a=document.createElement("link");if(a.rel=m?"stylesheet":V,m||(a.as="script",a.crossOrigin=""),a.href=l,n&&a.setAttribute("nonce",n),document.head.appendChild(a),m)return new Promise((j,p)=>{a.addEventListener("load",j),a.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}return t.then(()=>i()).catch(e=>{const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=e,window.dispatchEvent(n),!n.defaultPrevented)throw e})},G=()=>{const[o,i]=u.useState(!1),[c,f]=u.useState([]);return u.useEffect(()=>{const t=B.map(({fontName:e})=>new R(e).load("",5e3).then(()=>({fontName:e,loaded:!0})).catch(()=>({fontName:e,loaded:!1})));Promise.all(t).then(e=>{const n=e.filter(l=>!l.loaded).map(l=>l.fontName);n.length>0?f(n):(i(!0),window.dispatchEvent(new Event("resize")))}).catch(e=>{console.error("Error during font loading process:",e)})},[]),{isFontsLoaded:o,failedFonts:c}},F=(o,i)=>{C(o,i),u.useEffect(()=>()=>{},[o])},M=(o,i,c)=>{F("form-submissions",t=>{const e=k(t);K(e,o,i,c,1e4)})},Z=()=>{const o=N();F("sheet-update",()=>{o.invalidateQueries({queryKey:["data"]})})},ee=u.lazy(()=>Y(()=>import("./components-COidjH1w.js").then(o=>o.D),__vite__mapDeps([0,1])));function E(){const[o,i]=D(),[c,f]=u.useState(o.get("lang")||"en");u.useEffect(()=>{i(r=>(r.set("lang",c),r))},[c,i]);const t=O(),e=new URLSearchParams(t.search),n=e.get("show"),l=e.get("show-desc"),[m,x]=u.useState([]),[a,j]=u.useState(new Set);console.log(a);const p=u.useRef({}),{isLoading:L,error:v}=U({queryKey:["data"],queryFn:()=>H(x),staleTime:1/0});if(M(x,j,n),Z(),!G())return s.jsx("div",{className:"w-screen h-screen flex items-center justify-center",children:s.jsx("p",{className:"text-xl",children:"Fonts loading..."})});if(L)return s.jsx("div",{children:"Loading..."});if(v)return s.jsxs("div",{children:["Error: ",v.message]});const g=T(m,n),y=W(g.length,!!a.size),h=X(l);return s.jsxs("div",{className:"flex w-screen h-screen items-center flex-col",children:[h?s.jsx(u.Suspense,{fallback:s.jsx("div",{children:"Loading description..."}),children:s.jsx(ee,{languagePref:c,setLanguagePref:f})}):null,s.jsx("div",{className:`flex grow p-0 bg-feminicidio bg-repeat ${h?"w-[80%] border-4 border-gray-100 max-h-[70%]":"w-full h-full"}`,children:s.jsxs("li",{className:`flex flex-col ${h?"w-full h-full":"w-screen h-screen"}`,children:[n==="monitor-2"?null:s.jsx("div",{className:"flex grow flex-wrap",children:g.filter((r,d)=>d%2===0&&!a.has(r.timestamp)).map((r,d)=>s.jsx(w,{item:r,index:d,fontSize:y,textfitRefs:p,showDescription:h,isFeatured:!1},r.timestamp))}),s.jsx("div",{className:`flex justify-around flex-wrap ${a.size>0?"min-h-[40%]":""}`,children:g.filter(r=>a.has(r.timestamp)).map((r,d)=>s.jsx(w,{item:r,index:d,fontSize:y,textfitRefs:p,showDescription:h,isFeatured:!0},r.timestamp))}),n==="monitor-2"?s.jsx("div",{className:"flex grow flex-wrap",children:g.filter((r,d)=>d%2===0&&!a.has(r.timestamp)).map((r,d)=>s.jsx(w,{item:r,index:d,fontSize:y,textfitRefs:p,showDescription:h,isFeatured:!1},r.timestamp))}):null,s.jsx("div",{className:"flex grow flex-wrap",children:g.filter((r,d)=>d%2===1&&!a.has(r.timestamp)).map((r,d)=>s.jsx(w,{item:r,index:d,fontSize:y,textfitRefs:p,showDescription:h,isFeatured:!1},r.timestamp))})]})})]})}const se=new q,te=new A.Realtime({key:"dDoULg.CBlbwg:iYgskWpW5sI4puyUDfHXAOfJ17X_DuyKVPb_QelkXNQ"});_(document.getElementById("root")).render(s.jsx(u.StrictMode,{children:s.jsx(Q,{client:te,children:s.jsx(b,{channelName:"test-updates",children:s.jsx(b,{channelName:"sheet-update",children:s.jsx(b,{channelName:"form-submissions",children:s.jsx(I,{client:se,children:s.jsx(z,{children:s.jsxs($,{children:[s.jsx(S,{path:"/",element:s.jsx(E,{})}),s.jsx(S,{path:"/*",element:s.jsx(E,{})})]})})})})})})})}));
