var qm=e=>{throw TypeError(e)};var jc=(e,t,n)=>t.has(e)||qm("Cannot "+n);var M=(e,t,n)=>(jc(e,t,"read from private field"),n?n.call(e):t.get(e)),he=(e,t,n)=>t.has(e)?qm("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Y=(e,t,n,r)=>(jc(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ye=(e,t,n)=>(jc(e,t,"access private method"),n);var dl=(e,t,n,r)=>({set _(s){Y(e,t,s,n)},get _(){return M(e,t,r)}});function rE(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var Yn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function a0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var l0={exports:{}},Iu={},u0={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ga=Symbol.for("react.element"),iE=Symbol.for("react.portal"),sE=Symbol.for("react.fragment"),oE=Symbol.for("react.strict_mode"),aE=Symbol.for("react.profiler"),lE=Symbol.for("react.provider"),uE=Symbol.for("react.context"),cE=Symbol.for("react.forward_ref"),hE=Symbol.for("react.suspense"),fE=Symbol.for("react.memo"),dE=Symbol.for("react.lazy"),$m=Symbol.iterator;function pE(e){return e===null||typeof e!="object"?null:(e=$m&&e[$m]||e["@@iterator"],typeof e=="function"?e:null)}var c0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h0=Object.assign,f0={};function io(e,t,n){this.props=e,this.context=t,this.refs=f0,this.updater=n||c0}io.prototype.isReactComponent={};io.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};io.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function d0(){}d0.prototype=io.prototype;function md(e,t,n){this.props=e,this.context=t,this.refs=f0,this.updater=n||c0}var gd=md.prototype=new d0;gd.constructor=md;h0(gd,io.prototype);gd.isPureReactComponent=!0;var Km=Array.isArray,p0=Object.prototype.hasOwnProperty,yd={current:null},m0={key:!0,ref:!0,__self:!0,__source:!0};function g0(e,t,n){var r,s={},a=null,u=null;if(t!=null)for(r in t.ref!==void 0&&(u=t.ref),t.key!==void 0&&(a=""+t.key),t)p0.call(t,r)&&!m0.hasOwnProperty(r)&&(s[r]=t[r]);var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){for(var f=Array(h),p=0;p<h;p++)f[p]=arguments[p+2];s.children=f}if(e&&e.defaultProps)for(r in h=e.defaultProps,h)s[r]===void 0&&(s[r]=h[r]);return{$$typeof:Ga,type:e,key:a,ref:u,props:s,_owner:yd.current}}function mE(e,t){return{$$typeof:Ga,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function vd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ga}function gE(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Qm=/\/+/g;function zc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?gE(""+e.key):t.toString(36)}function Ul(e,t,n,r,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var u=!1;if(e===null)u=!0;else switch(a){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case Ga:case iE:u=!0}}if(u)return u=e,s=s(u),e=r===""?"."+zc(u,0):r,Km(s)?(n="",e!=null&&(n=e.replace(Qm,"$&/")+"/"),Ul(s,t,n,"",function(p){return p})):s!=null&&(vd(s)&&(s=mE(s,n+(!s.key||u&&u.key===s.key?"":(""+s.key).replace(Qm,"$&/")+"/")+e)),t.push(s)),1;if(u=0,r=r===""?".":r+":",Km(e))for(var h=0;h<e.length;h++){a=e[h];var f=r+zc(a,h);u+=Ul(a,t,n,f,s)}else if(f=pE(e),typeof f=="function")for(e=f.call(e),h=0;!(a=e.next()).done;)a=a.value,f=r+zc(a,h++),u+=Ul(a,t,n,f,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function pl(e,t,n){if(e==null)return e;var r=[],s=0;return Ul(e,r,"","",function(a){return t.call(n,a,s++)}),r}function yE(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var xt={current:null},Fl={transition:null},vE={ReactCurrentDispatcher:xt,ReactCurrentBatchConfig:Fl,ReactCurrentOwner:yd};function y0(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:pl,forEach:function(e,t,n){pl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return pl(e,function(){t++}),t},toArray:function(e){return pl(e,function(t){return t})||[]},only:function(e){if(!vd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ge.Component=io;ge.Fragment=sE;ge.Profiler=aE;ge.PureComponent=md;ge.StrictMode=oE;ge.Suspense=hE;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vE;ge.act=y0;ge.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=h0({},e.props),s=e.key,a=e.ref,u=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,u=yd.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var h=e.type.defaultProps;for(f in t)p0.call(t,f)&&!m0.hasOwnProperty(f)&&(r[f]=t[f]===void 0&&h!==void 0?h[f]:t[f])}var f=arguments.length-2;if(f===1)r.children=n;else if(1<f){h=Array(f);for(var p=0;p<f;p++)h[p]=arguments[p+2];r.children=h}return{$$typeof:Ga,type:e.type,key:s,ref:a,props:r,_owner:u}};ge.createContext=function(e){return e={$$typeof:uE,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:lE,_context:e},e.Consumer=e};ge.createElement=g0;ge.createFactory=function(e){var t=g0.bind(null,e);return t.type=e,t};ge.createRef=function(){return{current:null}};ge.forwardRef=function(e){return{$$typeof:cE,render:e}};ge.isValidElement=vd;ge.lazy=function(e){return{$$typeof:dE,_payload:{_status:-1,_result:e},_init:yE}};ge.memo=function(e,t){return{$$typeof:fE,type:e,compare:t===void 0?null:t}};ge.startTransition=function(e){var t=Fl.transition;Fl.transition={};try{e()}finally{Fl.transition=t}};ge.unstable_act=y0;ge.useCallback=function(e,t){return xt.current.useCallback(e,t)};ge.useContext=function(e){return xt.current.useContext(e)};ge.useDebugValue=function(){};ge.useDeferredValue=function(e){return xt.current.useDeferredValue(e)};ge.useEffect=function(e,t){return xt.current.useEffect(e,t)};ge.useId=function(){return xt.current.useId()};ge.useImperativeHandle=function(e,t,n){return xt.current.useImperativeHandle(e,t,n)};ge.useInsertionEffect=function(e,t){return xt.current.useInsertionEffect(e,t)};ge.useLayoutEffect=function(e,t){return xt.current.useLayoutEffect(e,t)};ge.useMemo=function(e,t){return xt.current.useMemo(e,t)};ge.useReducer=function(e,t,n){return xt.current.useReducer(e,t,n)};ge.useRef=function(e){return xt.current.useRef(e)};ge.useState=function(e){return xt.current.useState(e)};ge.useSyncExternalStore=function(e,t,n){return xt.current.useSyncExternalStore(e,t,n)};ge.useTransition=function(){return xt.current.useTransition()};ge.version="18.3.1";u0.exports=ge;var D=u0.exports;const so=a0(D),wE=rE({__proto__:null,default:so},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SE=D,CE=Symbol.for("react.element"),TE=Symbol.for("react.fragment"),RE=Object.prototype.hasOwnProperty,EE=SE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,PE={key:!0,ref:!0,__self:!0,__source:!0};function v0(e,t,n){var r,s={},a=null,u=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(u=t.ref);for(r in t)RE.call(t,r)&&!PE.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:CE,type:e,key:a,ref:u,props:s,_owner:EE.current}}Iu.Fragment=TE;Iu.jsx=v0;Iu.jsxs=v0;l0.exports=Iu;var de=l0.exports,w0={exports:{}},Yt={},S0={exports:{}},C0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(W,se){var ie=W.length;W.push(se);e:for(;0<ie;){var ne=ie-1>>>1,re=W[ne];if(0<s(re,se))W[ne]=se,W[ie]=re,ie=ne;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var se=W[0],ie=W.pop();if(ie!==se){W[0]=ie;e:for(var ne=0,re=W.length,ke=re>>>1;ne<ke;){var jt=2*(ne+1)-1,Pe=W[jt],Ct=jt+1,fn=W[Ct];if(0>s(Pe,ie))Ct<re&&0>s(fn,Pe)?(W[ne]=fn,W[Ct]=ie,ne=Ct):(W[ne]=Pe,W[jt]=ie,ne=jt);else if(Ct<re&&0>s(fn,ie))W[ne]=fn,W[Ct]=ie,ne=Ct;else break e}}return se}function s(W,se){var ie=W.sortIndex-se.sortIndex;return ie!==0?ie:W.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var u=Date,h=u.now();e.unstable_now=function(){return u.now()-h}}var f=[],p=[],v=1,y=null,w=3,P=!1,_=!1,A=!1,k=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(W){for(var se=n(p);se!==null;){if(se.callback===null)r(p);else if(se.startTime<=W)r(p),se.sortIndex=se.expirationTime,t(f,se);else break;se=n(p)}}function T(W){if(A=!1,E(W),!_)if(n(f)!==null)_=!0,Ee(I);else{var se=n(p);se!==null&&Z(T,se.startTime-W)}}function I(W,se){_=!1,A&&(A=!1,C(F),F=-1),P=!0;var ie=w;try{for(E(se),y=n(f);y!==null&&(!(y.expirationTime>se)||W&&!m());){var ne=y.callback;if(typeof ne=="function"){y.callback=null,w=y.priorityLevel;var re=ne(y.expirationTime<=se);se=e.unstable_now(),typeof re=="function"?y.callback=re:y===n(f)&&r(f),E(se)}else r(f);y=n(f)}if(y!==null)var ke=!0;else{var jt=n(p);jt!==null&&Z(T,jt.startTime-se),ke=!1}return ke}finally{y=null,w=ie,P=!1}}var V=!1,H=null,F=-1,J=5,X=-1;function m(){return!(e.unstable_now()-X<J)}function _e(){if(H!==null){var W=e.unstable_now();X=W;var se=!0;try{se=H(!0,W)}finally{se?Ne():(V=!1,H=null)}}else V=!1}var Ne;if(typeof S=="function")Ne=function(){S(_e)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,ue=N.port2;N.port1.onmessage=_e,Ne=function(){ue.postMessage(null)}}else Ne=function(){k(_e,0)};function Ee(W){H=W,V||(V=!0,Ne())}function Z(W,se){F=k(function(){W(e.unstable_now())},se)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_continueExecution=function(){_||P||(_=!0,Ee(I))},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_getFirstCallbackNode=function(){return n(f)},e.unstable_next=function(W){switch(w){case 1:case 2:case 3:var se=3;break;default:se=w}var ie=w;w=se;try{return W()}finally{w=ie}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(W,se){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ie=w;w=W;try{return se()}finally{w=ie}},e.unstable_scheduleCallback=function(W,se,ie){var ne=e.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?ne+ie:ne):ie=ne,W){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=ie+re,W={id:v++,callback:se,priorityLevel:W,startTime:ie,expirationTime:re,sortIndex:-1},ie>ne?(W.sortIndex=ie,t(p,W),n(f)===null&&W===n(p)&&(A?(C(F),F=-1):A=!0,Z(T,ie-ne))):(W.sortIndex=re,t(f,W),_||P||(_=!0,Ee(I))),W},e.unstable_shouldYield=m,e.unstable_wrapCallback=function(W){var se=w;return function(){var ie=w;w=se;try{return W.apply(this,arguments)}finally{w=ie}}}})(C0);S0.exports=C0;var AE=S0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _E=D,Kt=AE;function z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var T0=new Set,da={};function Bi(e,t){$s(e,t),$s(e+"Capture",t)}function $s(e,t){for(da[e]=t,e=0;e<t.length;e++)T0.add(t[e])}var hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uh=Object.prototype.hasOwnProperty,xE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xm={},Ym={};function OE(e){return Uh.call(Ym,e)?!0:Uh.call(Xm,e)?!1:xE.test(e)?Ym[e]=!0:(Xm[e]=!0,!1)}function kE(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ME(e,t,n,r){if(t===null||typeof t>"u"||kE(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ot(e,t,n,r,s,a,u){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=u}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ct[e]=new Ot(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ct[t]=new Ot(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ct[e]=new Ot(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ct[e]=new Ot(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ct[e]=new Ot(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ct[e]=new Ot(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ct[e]=new Ot(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ct[e]=new Ot(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ct[e]=new Ot(e,5,!1,e.toLowerCase(),null,!1,!1)});var wd=/[\-:]([a-z])/g;function Sd(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(wd,Sd);ct[t]=new Ot(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(wd,Sd);ct[t]=new Ot(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(wd,Sd);ct[t]=new Ot(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ct[e]=new Ot(e,1,!1,e.toLowerCase(),null,!1,!1)});ct.xlinkHref=new Ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ct[e]=new Ot(e,1,!1,e.toLowerCase(),null,!0,!0)});function Cd(e,t,n,r){var s=ct.hasOwnProperty(t)?ct[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(ME(t,n,s,r)&&(n=null),r||s===null?OE(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var gr=_E.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ml=Symbol.for("react.element"),ls=Symbol.for("react.portal"),us=Symbol.for("react.fragment"),Td=Symbol.for("react.strict_mode"),Fh=Symbol.for("react.profiler"),R0=Symbol.for("react.provider"),E0=Symbol.for("react.context"),Rd=Symbol.for("react.forward_ref"),Bh=Symbol.for("react.suspense"),Vh=Symbol.for("react.suspense_list"),Ed=Symbol.for("react.memo"),Or=Symbol.for("react.lazy"),P0=Symbol.for("react.offscreen"),Jm=Symbol.iterator;function Mo(e){return e===null||typeof e!="object"?null:(e=Jm&&e[Jm]||e["@@iterator"],typeof e=="function"?e:null)}var Ve=Object.assign,Gc;function Wo(e){if(Gc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Gc=t&&t[1]||""}return`
`+Gc+e}var Hc=!1;function Wc(e,t){if(!e||Hc)return"";Hc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(p){var r=p}Reflect.construct(e,[],t)}else{try{t.call()}catch(p){r=p}e.call(t.prototype)}else{try{throw Error()}catch(p){r=p}e()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var s=p.stack.split(`
`),a=r.stack.split(`
`),u=s.length-1,h=a.length-1;1<=u&&0<=h&&s[u]!==a[h];)h--;for(;1<=u&&0<=h;u--,h--)if(s[u]!==a[h]){if(u!==1||h!==1)do if(u--,h--,0>h||s[u]!==a[h]){var f=`
`+s[u].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=u&&0<=h);break}}}finally{Hc=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Wo(e):""}function bE(e){switch(e.tag){case 5:return Wo(e.type);case 16:return Wo("Lazy");case 13:return Wo("Suspense");case 19:return Wo("SuspenseList");case 0:case 2:case 15:return e=Wc(e.type,!1),e;case 11:return e=Wc(e.type.render,!1),e;case 1:return e=Wc(e.type,!0),e;default:return""}}function jh(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case us:return"Fragment";case ls:return"Portal";case Fh:return"Profiler";case Td:return"StrictMode";case Bh:return"Suspense";case Vh:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case E0:return(e.displayName||"Context")+".Consumer";case R0:return(e._context.displayName||"Context")+".Provider";case Rd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ed:return t=e.displayName||null,t!==null?t:jh(e.type)||"Memo";case Or:t=e._payload,e=e._init;try{return jh(e(t))}catch{}}return null}function IE(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jh(t);case 8:return t===Td?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Yr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function A0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function LE(e){var t=A0(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(u){r=""+u,a.call(this,u)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(u){r=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function gl(e){e._valueTracker||(e._valueTracker=LE(e))}function _0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=A0(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function tu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function zh(e,t){var n=t.checked;return Ve({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Zm(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Yr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function x0(e,t){t=t.checked,t!=null&&Cd(e,"checked",t,!1)}function Gh(e,t){x0(e,t);var n=Yr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Hh(e,t.type,n):t.hasOwnProperty("defaultValue")&&Hh(e,t.type,Yr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function eg(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Hh(e,t,n){(t!=="number"||tu(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var qo=Array.isArray;function Ps(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Yr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Wh(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ve({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function tg(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(z(92));if(qo(n)){if(1<n.length)throw Error(z(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Yr(n)}}function O0(e,t){var n=Yr(t.value),r=Yr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ng(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function k0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?k0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var yl,M0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(yl=yl||document.createElement("div"),yl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=yl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function pa(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ea={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},NE=["Webkit","ms","Moz","O"];Object.keys(ea).forEach(function(e){NE.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ea[t]=ea[e]})});function b0(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ea.hasOwnProperty(e)&&ea[e]?(""+t).trim():t+"px"}function I0(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=b0(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var DE=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $h(e,t){if(t){if(DE[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(z(62))}}function Kh(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qh=null;function Pd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Xh=null,As=null,_s=null;function rg(e){if(e=qa(e)){if(typeof Xh!="function")throw Error(z(280));var t=e.stateNode;t&&(t=Fu(t),Xh(e.stateNode,e.type,t))}}function L0(e){As?_s?_s.push(e):_s=[e]:As=e}function N0(){if(As){var e=As,t=_s;if(_s=As=null,rg(e),t)for(e=0;e<t.length;e++)rg(t[e])}}function D0(e,t){return e(t)}function U0(){}var qc=!1;function F0(e,t,n){if(qc)return e(t,n);qc=!0;try{return D0(e,t,n)}finally{qc=!1,(As!==null||_s!==null)&&(U0(),N0())}}function ma(e,t){var n=e.stateNode;if(n===null)return null;var r=Fu(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(z(231,t,typeof n));return n}var Yh=!1;if(hr)try{var bo={};Object.defineProperty(bo,"passive",{get:function(){Yh=!0}}),window.addEventListener("test",bo,bo),window.removeEventListener("test",bo,bo)}catch{Yh=!1}function UE(e,t,n,r,s,a,u,h,f){var p=Array.prototype.slice.call(arguments,3);try{t.apply(n,p)}catch(v){this.onError(v)}}var ta=!1,nu=null,ru=!1,Jh=null,FE={onError:function(e){ta=!0,nu=e}};function BE(e,t,n,r,s,a,u,h,f){ta=!1,nu=null,UE.apply(FE,arguments)}function VE(e,t,n,r,s,a,u,h,f){if(BE.apply(this,arguments),ta){if(ta){var p=nu;ta=!1,nu=null}else throw Error(z(198));ru||(ru=!0,Jh=p)}}function Vi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function B0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ig(e){if(Vi(e)!==e)throw Error(z(188))}function jE(e){var t=e.alternate;if(!t){if(t=Vi(e),t===null)throw Error(z(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return ig(s),e;if(a===r)return ig(s),t;a=a.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=a;else{for(var u=!1,h=s.child;h;){if(h===n){u=!0,n=s,r=a;break}if(h===r){u=!0,r=s,n=a;break}h=h.sibling}if(!u){for(h=a.child;h;){if(h===n){u=!0,n=a,r=s;break}if(h===r){u=!0,r=a,n=s;break}h=h.sibling}if(!u)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?e:t}function V0(e){return e=jE(e),e!==null?j0(e):null}function j0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=j0(e);if(t!==null)return t;e=e.sibling}return null}var z0=Kt.unstable_scheduleCallback,sg=Kt.unstable_cancelCallback,zE=Kt.unstable_shouldYield,GE=Kt.unstable_requestPaint,We=Kt.unstable_now,HE=Kt.unstable_getCurrentPriorityLevel,Ad=Kt.unstable_ImmediatePriority,G0=Kt.unstable_UserBlockingPriority,iu=Kt.unstable_NormalPriority,WE=Kt.unstable_LowPriority,H0=Kt.unstable_IdlePriority,Lu=null,Vn=null;function qE(e){if(Vn&&typeof Vn.onCommitFiberRoot=="function")try{Vn.onCommitFiberRoot(Lu,e,void 0,(e.current.flags&128)===128)}catch{}}var Cn=Math.clz32?Math.clz32:QE,$E=Math.log,KE=Math.LN2;function QE(e){return e>>>=0,e===0?32:31-($E(e)/KE|0)|0}var vl=64,wl=4194304;function $o(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function su(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes,u=n&268435455;if(u!==0){var h=u&~s;h!==0?r=$o(h):(a&=u,a!==0&&(r=$o(a)))}else u=n&~s,u!==0?r=$o(u):a!==0&&(r=$o(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Cn(t),s=1<<n,r|=e[n],t&=~s;return r}function XE(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YE(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var u=31-Cn(a),h=1<<u,f=s[u];f===-1?(!(h&n)||h&r)&&(s[u]=XE(h,t)):f<=t&&(e.expiredLanes|=h),a&=~h}}function Zh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function W0(){var e=vl;return vl<<=1,!(vl&4194240)&&(vl=64),e}function $c(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ha(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Cn(t),e[t]=n}function JE(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Cn(n),a=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~a}}function _d(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Cn(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Re=0;function q0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var $0,xd,K0,Q0,X0,ef=!1,Sl=[],Gr=null,Hr=null,Wr=null,ga=new Map,ya=new Map,br=[],ZE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function og(e,t){switch(e){case"focusin":case"focusout":Gr=null;break;case"dragenter":case"dragleave":Hr=null;break;case"mouseover":case"mouseout":Wr=null;break;case"pointerover":case"pointerout":ga.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ya.delete(t.pointerId)}}function Io(e,t,n,r,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},t!==null&&(t=qa(t),t!==null&&xd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function eP(e,t,n,r,s){switch(t){case"focusin":return Gr=Io(Gr,e,t,n,r,s),!0;case"dragenter":return Hr=Io(Hr,e,t,n,r,s),!0;case"mouseover":return Wr=Io(Wr,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return ga.set(a,Io(ga.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,ya.set(a,Io(ya.get(a)||null,e,t,n,r,s)),!0}return!1}function Y0(e){var t=vi(e.target);if(t!==null){var n=Vi(t);if(n!==null){if(t=n.tag,t===13){if(t=B0(n),t!==null){e.blockedOn=t,X0(e.priority,function(){K0(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Bl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=tf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Qh=r,n.target.dispatchEvent(r),Qh=null}else return t=qa(n),t!==null&&xd(t),e.blockedOn=n,!1;t.shift()}return!0}function ag(e,t,n){Bl(e)&&n.delete(t)}function tP(){ef=!1,Gr!==null&&Bl(Gr)&&(Gr=null),Hr!==null&&Bl(Hr)&&(Hr=null),Wr!==null&&Bl(Wr)&&(Wr=null),ga.forEach(ag),ya.forEach(ag)}function Lo(e,t){e.blockedOn===t&&(e.blockedOn=null,ef||(ef=!0,Kt.unstable_scheduleCallback(Kt.unstable_NormalPriority,tP)))}function va(e){function t(s){return Lo(s,e)}if(0<Sl.length){Lo(Sl[0],e);for(var n=1;n<Sl.length;n++){var r=Sl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Gr!==null&&Lo(Gr,e),Hr!==null&&Lo(Hr,e),Wr!==null&&Lo(Wr,e),ga.forEach(t),ya.forEach(t),n=0;n<br.length;n++)r=br[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<br.length&&(n=br[0],n.blockedOn===null);)Y0(n),n.blockedOn===null&&br.shift()}var xs=gr.ReactCurrentBatchConfig,ou=!0;function nP(e,t,n,r){var s=Re,a=xs.transition;xs.transition=null;try{Re=1,Od(e,t,n,r)}finally{Re=s,xs.transition=a}}function rP(e,t,n,r){var s=Re,a=xs.transition;xs.transition=null;try{Re=4,Od(e,t,n,r)}finally{Re=s,xs.transition=a}}function Od(e,t,n,r){if(ou){var s=tf(e,t,n,r);if(s===null)rh(e,t,r,au,n),og(e,r);else if(eP(s,e,t,n,r))r.stopPropagation();else if(og(e,r),t&4&&-1<ZE.indexOf(e)){for(;s!==null;){var a=qa(s);if(a!==null&&$0(a),a=tf(e,t,n,r),a===null&&rh(e,t,r,au,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else rh(e,t,r,null,n)}}var au=null;function tf(e,t,n,r){if(au=null,e=Pd(r),e=vi(e),e!==null)if(t=Vi(e),t===null)e=null;else if(n=t.tag,n===13){if(e=B0(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return au=e,null}function J0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(HE()){case Ad:return 1;case G0:return 4;case iu:case WE:return 16;case H0:return 536870912;default:return 16}default:return 16}}var Vr=null,kd=null,Vl=null;function Z0(){if(Vl)return Vl;var e,t=kd,n=t.length,r,s="value"in Vr?Vr.value:Vr.textContent,a=s.length;for(e=0;e<n&&t[e]===s[e];e++);var u=n-e;for(r=1;r<=u&&t[n-r]===s[a-r];r++);return Vl=s.slice(e,1<r?1-r:void 0)}function jl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Cl(){return!0}function lg(){return!1}function Jt(e){function t(n,r,s,a,u){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=u,this.currentTarget=null;for(var h in e)e.hasOwnProperty(h)&&(n=e[h],this[h]=n?n(a):a[h]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Cl:lg,this.isPropagationStopped=lg,this}return Ve(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cl)},persist:function(){},isPersistent:Cl}),t}var oo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Md=Jt(oo),Wa=Ve({},oo,{view:0,detail:0}),iP=Jt(Wa),Kc,Qc,No,Nu=Ve({},Wa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==No&&(No&&e.type==="mousemove"?(Kc=e.screenX-No.screenX,Qc=e.screenY-No.screenY):Qc=Kc=0,No=e),Kc)},movementY:function(e){return"movementY"in e?e.movementY:Qc}}),ug=Jt(Nu),sP=Ve({},Nu,{dataTransfer:0}),oP=Jt(sP),aP=Ve({},Wa,{relatedTarget:0}),Xc=Jt(aP),lP=Ve({},oo,{animationName:0,elapsedTime:0,pseudoElement:0}),uP=Jt(lP),cP=Ve({},oo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hP=Jt(cP),fP=Ve({},oo,{data:0}),cg=Jt(fP),dP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gP(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=mP[e])?!!t[e]:!1}function bd(){return gP}var yP=Ve({},Wa,{key:function(e){if(e.key){var t=dP[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=jl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pP[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bd,charCode:function(e){return e.type==="keypress"?jl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?jl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),vP=Jt(yP),wP=Ve({},Nu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hg=Jt(wP),SP=Ve({},Wa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bd}),CP=Jt(SP),TP=Ve({},oo,{propertyName:0,elapsedTime:0,pseudoElement:0}),RP=Jt(TP),EP=Ve({},Nu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),PP=Jt(EP),AP=[9,13,27,32],Id=hr&&"CompositionEvent"in window,na=null;hr&&"documentMode"in document&&(na=document.documentMode);var _P=hr&&"TextEvent"in window&&!na,ew=hr&&(!Id||na&&8<na&&11>=na),fg=" ",dg=!1;function tw(e,t){switch(e){case"keyup":return AP.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nw(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var cs=!1;function xP(e,t){switch(e){case"compositionend":return nw(t);case"keypress":return t.which!==32?null:(dg=!0,fg);case"textInput":return e=t.data,e===fg&&dg?null:e;default:return null}}function OP(e,t){if(cs)return e==="compositionend"||!Id&&tw(e,t)?(e=Z0(),Vl=kd=Vr=null,cs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ew&&t.locale!=="ko"?null:t.data;default:return null}}var kP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!kP[e.type]:t==="textarea"}function rw(e,t,n,r){L0(r),t=lu(t,"onChange"),0<t.length&&(n=new Md("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ra=null,wa=null;function MP(e){pw(e,0)}function Du(e){var t=ds(e);if(_0(t))return e}function bP(e,t){if(e==="change")return t}var iw=!1;if(hr){var Yc;if(hr){var Jc="oninput"in document;if(!Jc){var mg=document.createElement("div");mg.setAttribute("oninput","return;"),Jc=typeof mg.oninput=="function"}Yc=Jc}else Yc=!1;iw=Yc&&(!document.documentMode||9<document.documentMode)}function gg(){ra&&(ra.detachEvent("onpropertychange",sw),wa=ra=null)}function sw(e){if(e.propertyName==="value"&&Du(wa)){var t=[];rw(t,wa,e,Pd(e)),F0(MP,t)}}function IP(e,t,n){e==="focusin"?(gg(),ra=t,wa=n,ra.attachEvent("onpropertychange",sw)):e==="focusout"&&gg()}function LP(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Du(wa)}function NP(e,t){if(e==="click")return Du(t)}function DP(e,t){if(e==="input"||e==="change")return Du(t)}function UP(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Rn=typeof Object.is=="function"?Object.is:UP;function Sa(e,t){if(Rn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Uh.call(t,s)||!Rn(e[s],t[s]))return!1}return!0}function yg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vg(e,t){var n=yg(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=yg(n)}}function ow(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ow(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function aw(){for(var e=window,t=tu();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=tu(e.document)}return t}function Ld(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function FP(e){var t=aw(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ow(n.ownerDocument.documentElement,n)){if(r!==null&&Ld(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!e.extend&&a>r&&(s=r,r=a,a=s),s=vg(n,a);var u=vg(n,r);s&&u&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(u.node,u.offset)):(t.setEnd(u.node,u.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var BP=hr&&"documentMode"in document&&11>=document.documentMode,hs=null,nf=null,ia=null,rf=!1;function wg(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rf||hs==null||hs!==tu(r)||(r=hs,"selectionStart"in r&&Ld(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ia&&Sa(ia,r)||(ia=r,r=lu(nf,"onSelect"),0<r.length&&(t=new Md("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=hs)))}function Tl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var fs={animationend:Tl("Animation","AnimationEnd"),animationiteration:Tl("Animation","AnimationIteration"),animationstart:Tl("Animation","AnimationStart"),transitionend:Tl("Transition","TransitionEnd")},Zc={},lw={};hr&&(lw=document.createElement("div").style,"AnimationEvent"in window||(delete fs.animationend.animation,delete fs.animationiteration.animation,delete fs.animationstart.animation),"TransitionEvent"in window||delete fs.transitionend.transition);function Uu(e){if(Zc[e])return Zc[e];if(!fs[e])return e;var t=fs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in lw)return Zc[e]=t[n];return e}var uw=Uu("animationend"),cw=Uu("animationiteration"),hw=Uu("animationstart"),fw=Uu("transitionend"),dw=new Map,Sg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ti(e,t){dw.set(e,t),Bi(t,[e])}for(var eh=0;eh<Sg.length;eh++){var th=Sg[eh],VP=th.toLowerCase(),jP=th[0].toUpperCase()+th.slice(1);ti(VP,"on"+jP)}ti(uw,"onAnimationEnd");ti(cw,"onAnimationIteration");ti(hw,"onAnimationStart");ti("dblclick","onDoubleClick");ti("focusin","onFocus");ti("focusout","onBlur");ti(fw,"onTransitionEnd");$s("onMouseEnter",["mouseout","mouseover"]);$s("onMouseLeave",["mouseout","mouseover"]);$s("onPointerEnter",["pointerout","pointerover"]);$s("onPointerLeave",["pointerout","pointerover"]);Bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ko));function Cg(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,VE(r,t,void 0,e),e.currentTarget=null}function pw(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var u=r.length-1;0<=u;u--){var h=r[u],f=h.instance,p=h.currentTarget;if(h=h.listener,f!==a&&s.isPropagationStopped())break e;Cg(s,h,p),a=f}else for(u=0;u<r.length;u++){if(h=r[u],f=h.instance,p=h.currentTarget,h=h.listener,f!==a&&s.isPropagationStopped())break e;Cg(s,h,p),a=f}}}if(ru)throw e=Jh,ru=!1,Jh=null,e}function be(e,t){var n=t[uf];n===void 0&&(n=t[uf]=new Set);var r=e+"__bubble";n.has(r)||(mw(t,e,2,!1),n.add(r))}function nh(e,t,n){var r=0;t&&(r|=4),mw(n,e,r,t)}var Rl="_reactListening"+Math.random().toString(36).slice(2);function Ca(e){if(!e[Rl]){e[Rl]=!0,T0.forEach(function(n){n!=="selectionchange"&&(zP.has(n)||nh(n,!1,e),nh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Rl]||(t[Rl]=!0,nh("selectionchange",!1,t))}}function mw(e,t,n,r){switch(J0(t)){case 1:var s=nP;break;case 4:s=rP;break;default:s=Od}n=s.bind(null,t,n,e),s=void 0,!Yh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function rh(e,t,n,r,s){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var u=r.tag;if(u===3||u===4){var h=r.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(u===4)for(u=r.return;u!==null;){var f=u.tag;if((f===3||f===4)&&(f=u.stateNode.containerInfo,f===s||f.nodeType===8&&f.parentNode===s))return;u=u.return}for(;h!==null;){if(u=vi(h),u===null)return;if(f=u.tag,f===5||f===6){r=a=u;continue e}h=h.parentNode}}r=r.return}F0(function(){var p=a,v=Pd(n),y=[];e:{var w=dw.get(e);if(w!==void 0){var P=Md,_=e;switch(e){case"keypress":if(jl(n)===0)break e;case"keydown":case"keyup":P=vP;break;case"focusin":_="focus",P=Xc;break;case"focusout":_="blur",P=Xc;break;case"beforeblur":case"afterblur":P=Xc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=ug;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=oP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=CP;break;case uw:case cw:case hw:P=uP;break;case fw:P=RP;break;case"scroll":P=iP;break;case"wheel":P=PP;break;case"copy":case"cut":case"paste":P=hP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=hg}var A=(t&4)!==0,k=!A&&e==="scroll",C=A?w!==null?w+"Capture":null:w;A=[];for(var S=p,E;S!==null;){E=S;var T=E.stateNode;if(E.tag===5&&T!==null&&(E=T,C!==null&&(T=ma(S,C),T!=null&&A.push(Ta(S,T,E)))),k)break;S=S.return}0<A.length&&(w=new P(w,_,null,n,v),y.push({event:w,listeners:A}))}}if(!(t&7)){e:{if(w=e==="mouseover"||e==="pointerover",P=e==="mouseout"||e==="pointerout",w&&n!==Qh&&(_=n.relatedTarget||n.fromElement)&&(vi(_)||_[fr]))break e;if((P||w)&&(w=v.window===v?v:(w=v.ownerDocument)?w.defaultView||w.parentWindow:window,P?(_=n.relatedTarget||n.toElement,P=p,_=_?vi(_):null,_!==null&&(k=Vi(_),_!==k||_.tag!==5&&_.tag!==6)&&(_=null)):(P=null,_=p),P!==_)){if(A=ug,T="onMouseLeave",C="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(A=hg,T="onPointerLeave",C="onPointerEnter",S="pointer"),k=P==null?w:ds(P),E=_==null?w:ds(_),w=new A(T,S+"leave",P,n,v),w.target=k,w.relatedTarget=E,T=null,vi(v)===p&&(A=new A(C,S+"enter",_,n,v),A.target=E,A.relatedTarget=k,T=A),k=T,P&&_)t:{for(A=P,C=_,S=0,E=A;E;E=ss(E))S++;for(E=0,T=C;T;T=ss(T))E++;for(;0<S-E;)A=ss(A),S--;for(;0<E-S;)C=ss(C),E--;for(;S--;){if(A===C||C!==null&&A===C.alternate)break t;A=ss(A),C=ss(C)}A=null}else A=null;P!==null&&Tg(y,w,P,A,!1),_!==null&&k!==null&&Tg(y,k,_,A,!0)}}e:{if(w=p?ds(p):window,P=w.nodeName&&w.nodeName.toLowerCase(),P==="select"||P==="input"&&w.type==="file")var I=bP;else if(pg(w))if(iw)I=DP;else{I=LP;var V=IP}else(P=w.nodeName)&&P.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(I=NP);if(I&&(I=I(e,p))){rw(y,I,n,v);break e}V&&V(e,w,p),e==="focusout"&&(V=w._wrapperState)&&V.controlled&&w.type==="number"&&Hh(w,"number",w.value)}switch(V=p?ds(p):window,e){case"focusin":(pg(V)||V.contentEditable==="true")&&(hs=V,nf=p,ia=null);break;case"focusout":ia=nf=hs=null;break;case"mousedown":rf=!0;break;case"contextmenu":case"mouseup":case"dragend":rf=!1,wg(y,n,v);break;case"selectionchange":if(BP)break;case"keydown":case"keyup":wg(y,n,v)}var H;if(Id)e:{switch(e){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else cs?tw(e,n)&&(F="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(F="onCompositionStart");F&&(ew&&n.locale!=="ko"&&(cs||F!=="onCompositionStart"?F==="onCompositionEnd"&&cs&&(H=Z0()):(Vr=v,kd="value"in Vr?Vr.value:Vr.textContent,cs=!0)),V=lu(p,F),0<V.length&&(F=new cg(F,e,null,n,v),y.push({event:F,listeners:V}),H?F.data=H:(H=nw(n),H!==null&&(F.data=H)))),(H=_P?xP(e,n):OP(e,n))&&(p=lu(p,"onBeforeInput"),0<p.length&&(v=new cg("onBeforeInput","beforeinput",null,n,v),y.push({event:v,listeners:p}),v.data=H))}pw(y,t)})}function Ta(e,t,n){return{instance:e,listener:t,currentTarget:n}}function lu(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=ma(e,n),a!=null&&r.unshift(Ta(e,a,s)),a=ma(e,t),a!=null&&r.push(Ta(e,a,s))),e=e.return}return r}function ss(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Tg(e,t,n,r,s){for(var a=t._reactName,u=[];n!==null&&n!==r;){var h=n,f=h.alternate,p=h.stateNode;if(f!==null&&f===r)break;h.tag===5&&p!==null&&(h=p,s?(f=ma(n,a),f!=null&&u.unshift(Ta(n,f,h))):s||(f=ma(n,a),f!=null&&u.push(Ta(n,f,h)))),n=n.return}u.length!==0&&e.push({event:t,listeners:u})}var GP=/\r\n?/g,HP=/\u0000|\uFFFD/g;function Rg(e){return(typeof e=="string"?e:""+e).replace(GP,`
`).replace(HP,"")}function El(e,t,n){if(t=Rg(t),Rg(e)!==t&&n)throw Error(z(425))}function uu(){}var sf=null,of=null;function af(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lf=typeof setTimeout=="function"?setTimeout:void 0,WP=typeof clearTimeout=="function"?clearTimeout:void 0,Eg=typeof Promise=="function"?Promise:void 0,qP=typeof queueMicrotask=="function"?queueMicrotask:typeof Eg<"u"?function(e){return Eg.resolve(null).then(e).catch($P)}:lf;function $P(e){setTimeout(function(){throw e})}function ih(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),va(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);va(t)}function qr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Pg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ao=Math.random().toString(36).slice(2),Bn="__reactFiber$"+ao,Ra="__reactProps$"+ao,fr="__reactContainer$"+ao,uf="__reactEvents$"+ao,KP="__reactListeners$"+ao,QP="__reactHandles$"+ao;function vi(e){var t=e[Bn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fr]||n[Bn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Pg(e);e!==null;){if(n=e[Bn])return n;e=Pg(e)}return t}e=n,n=e.parentNode}return null}function qa(e){return e=e[Bn]||e[fr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ds(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(z(33))}function Fu(e){return e[Ra]||null}var cf=[],ps=-1;function ni(e){return{current:e}}function Ie(e){0>ps||(e.current=cf[ps],cf[ps]=null,ps--)}function Oe(e,t){ps++,cf[ps]=e.current,e.current=t}var Jr={},St=ni(Jr),Ft=ni(!1),Li=Jr;function Ks(e,t){var n=e.type.contextTypes;if(!n)return Jr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Bt(e){return e=e.childContextTypes,e!=null}function cu(){Ie(Ft),Ie(St)}function Ag(e,t,n){if(St.current!==Jr)throw Error(z(168));Oe(St,t),Oe(Ft,n)}function gw(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(z(108,IE(e)||"Unknown",s));return Ve({},n,r)}function hu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Jr,Li=St.current,Oe(St,e),Oe(Ft,Ft.current),!0}function _g(e,t,n){var r=e.stateNode;if(!r)throw Error(z(169));n?(e=gw(e,t,Li),r.__reactInternalMemoizedMergedChildContext=e,Ie(Ft),Ie(St),Oe(St,e)):Ie(Ft),Oe(Ft,n)}var er=null,Bu=!1,sh=!1;function yw(e){er===null?er=[e]:er.push(e)}function XP(e){Bu=!0,yw(e)}function ri(){if(!sh&&er!==null){sh=!0;var e=0,t=Re;try{var n=er;for(Re=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}er=null,Bu=!1}catch(s){throw er!==null&&(er=er.slice(e+1)),z0(Ad,ri),s}finally{Re=t,sh=!1}}return null}var ms=[],gs=0,fu=null,du=0,sn=[],on=0,Ni=null,tr=1,nr="";function di(e,t){ms[gs++]=du,ms[gs++]=fu,fu=e,du=t}function vw(e,t,n){sn[on++]=tr,sn[on++]=nr,sn[on++]=Ni,Ni=e;var r=tr;e=nr;var s=32-Cn(r)-1;r&=~(1<<s),n+=1;var a=32-Cn(t)+s;if(30<a){var u=s-s%5;a=(r&(1<<u)-1).toString(32),r>>=u,s-=u,tr=1<<32-Cn(t)+s|n<<s|r,nr=a+e}else tr=1<<a|n<<s|r,nr=e}function Nd(e){e.return!==null&&(di(e,1),vw(e,1,0))}function Dd(e){for(;e===fu;)fu=ms[--gs],ms[gs]=null,du=ms[--gs],ms[gs]=null;for(;e===Ni;)Ni=sn[--on],sn[on]=null,nr=sn[--on],sn[on]=null,tr=sn[--on],sn[on]=null}var $t=null,qt=null,Le=!1,wn=null;function ww(e,t){var n=an(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function xg(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,$t=e,qt=qr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,$t=e,qt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ni!==null?{id:tr,overflow:nr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=an(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,$t=e,qt=null,!0):!1;default:return!1}}function hf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ff(e){if(Le){var t=qt;if(t){var n=t;if(!xg(e,t)){if(hf(e))throw Error(z(418));t=qr(n.nextSibling);var r=$t;t&&xg(e,t)?ww(r,n):(e.flags=e.flags&-4097|2,Le=!1,$t=e)}}else{if(hf(e))throw Error(z(418));e.flags=e.flags&-4097|2,Le=!1,$t=e}}}function Og(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;$t=e}function Pl(e){if(e!==$t)return!1;if(!Le)return Og(e),Le=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!af(e.type,e.memoizedProps)),t&&(t=qt)){if(hf(e))throw Sw(),Error(z(418));for(;t;)ww(e,t),t=qr(t.nextSibling)}if(Og(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){qt=qr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}qt=null}}else qt=$t?qr(e.stateNode.nextSibling):null;return!0}function Sw(){for(var e=qt;e;)e=qr(e.nextSibling)}function Qs(){qt=$t=null,Le=!1}function Ud(e){wn===null?wn=[e]:wn.push(e)}var YP=gr.ReactCurrentBatchConfig;function Do(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,e));var s=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(u){var h=s.refs;u===null?delete h[a]:h[a]=u},t._stringRef=a,t)}if(typeof e!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,e))}return e}function Al(e,t){throw e=Object.prototype.toString.call(t),Error(z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function kg(e){var t=e._init;return t(e._payload)}function Cw(e){function t(C,S){if(e){var E=C.deletions;E===null?(C.deletions=[S],C.flags|=16):E.push(S)}}function n(C,S){if(!e)return null;for(;S!==null;)t(C,S),S=S.sibling;return null}function r(C,S){for(C=new Map;S!==null;)S.key!==null?C.set(S.key,S):C.set(S.index,S),S=S.sibling;return C}function s(C,S){return C=Xr(C,S),C.index=0,C.sibling=null,C}function a(C,S,E){return C.index=E,e?(E=C.alternate,E!==null?(E=E.index,E<S?(C.flags|=2,S):E):(C.flags|=2,S)):(C.flags|=1048576,S)}function u(C){return e&&C.alternate===null&&(C.flags|=2),C}function h(C,S,E,T){return S===null||S.tag!==6?(S=fh(E,C.mode,T),S.return=C,S):(S=s(S,E),S.return=C,S)}function f(C,S,E,T){var I=E.type;return I===us?v(C,S,E.props.children,T,E.key):S!==null&&(S.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Or&&kg(I)===S.type)?(T=s(S,E.props),T.ref=Do(C,S,E),T.return=C,T):(T=Kl(E.type,E.key,E.props,null,C.mode,T),T.ref=Do(C,S,E),T.return=C,T)}function p(C,S,E,T){return S===null||S.tag!==4||S.stateNode.containerInfo!==E.containerInfo||S.stateNode.implementation!==E.implementation?(S=dh(E,C.mode,T),S.return=C,S):(S=s(S,E.children||[]),S.return=C,S)}function v(C,S,E,T,I){return S===null||S.tag!==7?(S=Mi(E,C.mode,T,I),S.return=C,S):(S=s(S,E),S.return=C,S)}function y(C,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return S=fh(""+S,C.mode,E),S.return=C,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ml:return E=Kl(S.type,S.key,S.props,null,C.mode,E),E.ref=Do(C,null,S),E.return=C,E;case ls:return S=dh(S,C.mode,E),S.return=C,S;case Or:var T=S._init;return y(C,T(S._payload),E)}if(qo(S)||Mo(S))return S=Mi(S,C.mode,E,null),S.return=C,S;Al(C,S)}return null}function w(C,S,E,T){var I=S!==null?S.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return I!==null?null:h(C,S,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ml:return E.key===I?f(C,S,E,T):null;case ls:return E.key===I?p(C,S,E,T):null;case Or:return I=E._init,w(C,S,I(E._payload),T)}if(qo(E)||Mo(E))return I!==null?null:v(C,S,E,T,null);Al(C,E)}return null}function P(C,S,E,T,I){if(typeof T=="string"&&T!==""||typeof T=="number")return C=C.get(E)||null,h(S,C,""+T,I);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ml:return C=C.get(T.key===null?E:T.key)||null,f(S,C,T,I);case ls:return C=C.get(T.key===null?E:T.key)||null,p(S,C,T,I);case Or:var V=T._init;return P(C,S,E,V(T._payload),I)}if(qo(T)||Mo(T))return C=C.get(E)||null,v(S,C,T,I,null);Al(S,T)}return null}function _(C,S,E,T){for(var I=null,V=null,H=S,F=S=0,J=null;H!==null&&F<E.length;F++){H.index>F?(J=H,H=null):J=H.sibling;var X=w(C,H,E[F],T);if(X===null){H===null&&(H=J);break}e&&H&&X.alternate===null&&t(C,H),S=a(X,S,F),V===null?I=X:V.sibling=X,V=X,H=J}if(F===E.length)return n(C,H),Le&&di(C,F),I;if(H===null){for(;F<E.length;F++)H=y(C,E[F],T),H!==null&&(S=a(H,S,F),V===null?I=H:V.sibling=H,V=H);return Le&&di(C,F),I}for(H=r(C,H);F<E.length;F++)J=P(H,C,F,E[F],T),J!==null&&(e&&J.alternate!==null&&H.delete(J.key===null?F:J.key),S=a(J,S,F),V===null?I=J:V.sibling=J,V=J);return e&&H.forEach(function(m){return t(C,m)}),Le&&di(C,F),I}function A(C,S,E,T){var I=Mo(E);if(typeof I!="function")throw Error(z(150));if(E=I.call(E),E==null)throw Error(z(151));for(var V=I=null,H=S,F=S=0,J=null,X=E.next();H!==null&&!X.done;F++,X=E.next()){H.index>F?(J=H,H=null):J=H.sibling;var m=w(C,H,X.value,T);if(m===null){H===null&&(H=J);break}e&&H&&m.alternate===null&&t(C,H),S=a(m,S,F),V===null?I=m:V.sibling=m,V=m,H=J}if(X.done)return n(C,H),Le&&di(C,F),I;if(H===null){for(;!X.done;F++,X=E.next())X=y(C,X.value,T),X!==null&&(S=a(X,S,F),V===null?I=X:V.sibling=X,V=X);return Le&&di(C,F),I}for(H=r(C,H);!X.done;F++,X=E.next())X=P(H,C,F,X.value,T),X!==null&&(e&&X.alternate!==null&&H.delete(X.key===null?F:X.key),S=a(X,S,F),V===null?I=X:V.sibling=X,V=X);return e&&H.forEach(function(_e){return t(C,_e)}),Le&&di(C,F),I}function k(C,S,E,T){if(typeof E=="object"&&E!==null&&E.type===us&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case ml:e:{for(var I=E.key,V=S;V!==null;){if(V.key===I){if(I=E.type,I===us){if(V.tag===7){n(C,V.sibling),S=s(V,E.props.children),S.return=C,C=S;break e}}else if(V.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Or&&kg(I)===V.type){n(C,V.sibling),S=s(V,E.props),S.ref=Do(C,V,E),S.return=C,C=S;break e}n(C,V);break}else t(C,V);V=V.sibling}E.type===us?(S=Mi(E.props.children,C.mode,T,E.key),S.return=C,C=S):(T=Kl(E.type,E.key,E.props,null,C.mode,T),T.ref=Do(C,S,E),T.return=C,C=T)}return u(C);case ls:e:{for(V=E.key;S!==null;){if(S.key===V)if(S.tag===4&&S.stateNode.containerInfo===E.containerInfo&&S.stateNode.implementation===E.implementation){n(C,S.sibling),S=s(S,E.children||[]),S.return=C,C=S;break e}else{n(C,S);break}else t(C,S);S=S.sibling}S=dh(E,C.mode,T),S.return=C,C=S}return u(C);case Or:return V=E._init,k(C,S,V(E._payload),T)}if(qo(E))return _(C,S,E,T);if(Mo(E))return A(C,S,E,T);Al(C,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,S!==null&&S.tag===6?(n(C,S.sibling),S=s(S,E),S.return=C,C=S):(n(C,S),S=fh(E,C.mode,T),S.return=C,C=S),u(C)):n(C,S)}return k}var Xs=Cw(!0),Tw=Cw(!1),pu=ni(null),mu=null,ys=null,Fd=null;function Bd(){Fd=ys=mu=null}function Vd(e){var t=pu.current;Ie(pu),e._currentValue=t}function df(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Os(e,t){mu=e,Fd=ys=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ut=!0),e.firstContext=null)}function un(e){var t=e._currentValue;if(Fd!==e)if(e={context:e,memoizedValue:t,next:null},ys===null){if(mu===null)throw Error(z(308));ys=e,mu.dependencies={lanes:0,firstContext:e}}else ys=ys.next=e;return t}var wi=null;function jd(e){wi===null?wi=[e]:wi.push(e)}function Rw(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,jd(t)):(n.next=s.next,s.next=n),t.interleaved=n,dr(e,r)}function dr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var kr=!1;function zd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ew(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function sr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $r(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,dr(e,n)}return s=r.interleaved,s===null?(t.next=t,jd(r)):(t.next=s.next,s.next=t),r.interleaved=t,dr(e,n)}function zl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,_d(e,n)}}function Mg(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var u={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=u:a=a.next=u,n=n.next}while(n!==null);a===null?s=a=t:a=a.next=t}else s=a=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function gu(e,t,n,r){var s=e.updateQueue;kr=!1;var a=s.firstBaseUpdate,u=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var f=h,p=f.next;f.next=null,u===null?a=p:u.next=p,u=f;var v=e.alternate;v!==null&&(v=v.updateQueue,h=v.lastBaseUpdate,h!==u&&(h===null?v.firstBaseUpdate=p:h.next=p,v.lastBaseUpdate=f))}if(a!==null){var y=s.baseState;u=0,v=p=f=null,h=a;do{var w=h.lane,P=h.eventTime;if((r&w)===w){v!==null&&(v=v.next={eventTime:P,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var _=e,A=h;switch(w=t,P=n,A.tag){case 1:if(_=A.payload,typeof _=="function"){y=_.call(P,y,w);break e}y=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=A.payload,w=typeof _=="function"?_.call(P,y,w):_,w==null)break e;y=Ve({},y,w);break e;case 2:kr=!0}}h.callback!==null&&h.lane!==0&&(e.flags|=64,w=s.effects,w===null?s.effects=[h]:w.push(h))}else P={eventTime:P,lane:w,tag:h.tag,payload:h.payload,callback:h.callback,next:null},v===null?(p=v=P,f=y):v=v.next=P,u|=w;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;w=h,h=w.next,w.next=null,s.lastBaseUpdate=w,s.shared.pending=null}}while(!0);if(v===null&&(f=y),s.baseState=f,s.firstBaseUpdate=p,s.lastBaseUpdate=v,t=s.shared.interleaved,t!==null){s=t;do u|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);Ui|=u,e.lanes=u,e.memoizedState=y}}function bg(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var $a={},jn=ni($a),Ea=ni($a),Pa=ni($a);function Si(e){if(e===$a)throw Error(z(174));return e}function Gd(e,t){switch(Oe(Pa,t),Oe(Ea,e),Oe(jn,$a),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:qh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=qh(t,e)}Ie(jn),Oe(jn,t)}function Ys(){Ie(jn),Ie(Ea),Ie(Pa)}function Pw(e){Si(Pa.current);var t=Si(jn.current),n=qh(t,e.type);t!==n&&(Oe(Ea,e),Oe(jn,n))}function Hd(e){Ea.current===e&&(Ie(jn),Ie(Ea))}var Ue=ni(0);function yu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var oh=[];function Wd(){for(var e=0;e<oh.length;e++)oh[e]._workInProgressVersionPrimary=null;oh.length=0}var Gl=gr.ReactCurrentDispatcher,ah=gr.ReactCurrentBatchConfig,Di=0,Be=null,Ze=null,rt=null,vu=!1,sa=!1,Aa=0,JP=0;function dt(){throw Error(z(321))}function qd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Rn(e[n],t[n]))return!1;return!0}function $d(e,t,n,r,s,a){if(Di=a,Be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Gl.current=e===null||e.memoizedState===null?nA:rA,e=n(r,s),sa){a=0;do{if(sa=!1,Aa=0,25<=a)throw Error(z(301));a+=1,rt=Ze=null,t.updateQueue=null,Gl.current=iA,e=n(r,s)}while(sa)}if(Gl.current=wu,t=Ze!==null&&Ze.next!==null,Di=0,rt=Ze=Be=null,vu=!1,t)throw Error(z(300));return e}function Kd(){var e=Aa!==0;return Aa=0,e}function bn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Be.memoizedState=rt=e:rt=rt.next=e,rt}function cn(){if(Ze===null){var e=Be.alternate;e=e!==null?e.memoizedState:null}else e=Ze.next;var t=rt===null?Be.memoizedState:rt.next;if(t!==null)rt=t,Ze=e;else{if(e===null)throw Error(z(310));Ze=e,e={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},rt===null?Be.memoizedState=rt=e:rt=rt.next=e}return rt}function _a(e,t){return typeof t=="function"?t(e):t}function lh(e){var t=cn(),n=t.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=e;var r=Ze,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var u=s.next;s.next=a.next,a.next=u}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var h=u=null,f=null,p=a;do{var v=p.lane;if((Di&v)===v)f!==null&&(f=f.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:e(r,p.action);else{var y={lane:v,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};f===null?(h=f=y,u=r):f=f.next=y,Be.lanes|=v,Ui|=v}p=p.next}while(p!==null&&p!==a);f===null?u=r:f.next=h,Rn(r,t.memoizedState)||(Ut=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=f,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do a=s.lane,Be.lanes|=a,Ui|=a,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function uh(e){var t=cn(),n=t.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(s!==null){n.pending=null;var u=s=s.next;do a=e(a,u.action),u=u.next;while(u!==s);Rn(a,t.memoizedState)||(Ut=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Aw(){}function _w(e,t){var n=Be,r=cn(),s=t(),a=!Rn(r.memoizedState,s);if(a&&(r.memoizedState=s,Ut=!0),r=r.queue,Qd(kw.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||rt!==null&&rt.memoizedState.tag&1){if(n.flags|=2048,xa(9,Ow.bind(null,n,r,s,t),void 0,null),it===null)throw Error(z(349));Di&30||xw(n,t,s)}return s}function xw(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Be.updateQueue,t===null?(t={lastEffect:null,stores:null},Be.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ow(e,t,n,r){t.value=n,t.getSnapshot=r,Mw(t)&&bw(e)}function kw(e,t,n){return n(function(){Mw(t)&&bw(e)})}function Mw(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Rn(e,n)}catch{return!0}}function bw(e){var t=dr(e,1);t!==null&&Tn(t,e,1,-1)}function Ig(e){var t=bn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:e},t.queue=e,e=e.dispatch=tA.bind(null,Be,e),[t.memoizedState,e]}function xa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Be.updateQueue,t===null?(t={lastEffect:null,stores:null},Be.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Iw(){return cn().memoizedState}function Hl(e,t,n,r){var s=bn();Be.flags|=e,s.memoizedState=xa(1|t,n,void 0,r===void 0?null:r)}function Vu(e,t,n,r){var s=cn();r=r===void 0?null:r;var a=void 0;if(Ze!==null){var u=Ze.memoizedState;if(a=u.destroy,r!==null&&qd(r,u.deps)){s.memoizedState=xa(t,n,a,r);return}}Be.flags|=e,s.memoizedState=xa(1|t,n,a,r)}function Lg(e,t){return Hl(8390656,8,e,t)}function Qd(e,t){return Vu(2048,8,e,t)}function Lw(e,t){return Vu(4,2,e,t)}function Nw(e,t){return Vu(4,4,e,t)}function Dw(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Uw(e,t,n){return n=n!=null?n.concat([e]):null,Vu(4,4,Dw.bind(null,t,e),n)}function Xd(){}function Fw(e,t){var n=cn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&qd(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Bw(e,t){var n=cn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&qd(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Vw(e,t,n){return Di&21?(Rn(n,t)||(n=W0(),Be.lanes|=n,Ui|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ut=!0),e.memoizedState=n)}function ZP(e,t){var n=Re;Re=n!==0&&4>n?n:4,e(!0);var r=ah.transition;ah.transition={};try{e(!1),t()}finally{Re=n,ah.transition=r}}function jw(){return cn().memoizedState}function eA(e,t,n){var r=Qr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zw(e))Gw(t,n);else if(n=Rw(e,t,n,r),n!==null){var s=At();Tn(n,e,r,s),Hw(n,t,r)}}function tA(e,t,n){var r=Qr(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zw(e))Gw(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var u=t.lastRenderedState,h=a(u,n);if(s.hasEagerState=!0,s.eagerState=h,Rn(h,u)){var f=t.interleaved;f===null?(s.next=s,jd(t)):(s.next=f.next,f.next=s),t.interleaved=s;return}}catch{}finally{}n=Rw(e,t,s,r),n!==null&&(s=At(),Tn(n,e,r,s),Hw(n,t,r))}}function zw(e){var t=e.alternate;return e===Be||t!==null&&t===Be}function Gw(e,t){sa=vu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Hw(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,_d(e,n)}}var wu={readContext:un,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useInsertionEffect:dt,useLayoutEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useMutableSource:dt,useSyncExternalStore:dt,useId:dt,unstable_isNewReconciler:!1},nA={readContext:un,useCallback:function(e,t){return bn().memoizedState=[e,t===void 0?null:t],e},useContext:un,useEffect:Lg,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Hl(4194308,4,Dw.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Hl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Hl(4,2,e,t)},useMemo:function(e,t){var n=bn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=bn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=eA.bind(null,Be,e),[r.memoizedState,e]},useRef:function(e){var t=bn();return e={current:e},t.memoizedState=e},useState:Ig,useDebugValue:Xd,useDeferredValue:function(e){return bn().memoizedState=e},useTransition:function(){var e=Ig(!1),t=e[0];return e=ZP.bind(null,e[1]),bn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Be,s=bn();if(Le){if(n===void 0)throw Error(z(407));n=n()}else{if(n=t(),it===null)throw Error(z(349));Di&30||xw(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,Lg(kw.bind(null,r,a,e),[e]),r.flags|=2048,xa(9,Ow.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=bn(),t=it.identifierPrefix;if(Le){var n=nr,r=tr;n=(r&~(1<<32-Cn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Aa++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=JP++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},rA={readContext:un,useCallback:Fw,useContext:un,useEffect:Qd,useImperativeHandle:Uw,useInsertionEffect:Lw,useLayoutEffect:Nw,useMemo:Bw,useReducer:lh,useRef:Iw,useState:function(){return lh(_a)},useDebugValue:Xd,useDeferredValue:function(e){var t=cn();return Vw(t,Ze.memoizedState,e)},useTransition:function(){var e=lh(_a)[0],t=cn().memoizedState;return[e,t]},useMutableSource:Aw,useSyncExternalStore:_w,useId:jw,unstable_isNewReconciler:!1},iA={readContext:un,useCallback:Fw,useContext:un,useEffect:Qd,useImperativeHandle:Uw,useInsertionEffect:Lw,useLayoutEffect:Nw,useMemo:Bw,useReducer:uh,useRef:Iw,useState:function(){return uh(_a)},useDebugValue:Xd,useDeferredValue:function(e){var t=cn();return Ze===null?t.memoizedState=e:Vw(t,Ze.memoizedState,e)},useTransition:function(){var e=uh(_a)[0],t=cn().memoizedState;return[e,t]},useMutableSource:Aw,useSyncExternalStore:_w,useId:jw,unstable_isNewReconciler:!1};function gn(e,t){if(e&&e.defaultProps){t=Ve({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function pf(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ve({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ju={isMounted:function(e){return(e=e._reactInternals)?Vi(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=At(),s=Qr(e),a=sr(r,s);a.payload=t,n!=null&&(a.callback=n),t=$r(e,a,s),t!==null&&(Tn(t,e,s,r),zl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=At(),s=Qr(e),a=sr(r,s);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=$r(e,a,s),t!==null&&(Tn(t,e,s,r),zl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=At(),r=Qr(e),s=sr(n,r);s.tag=2,t!=null&&(s.callback=t),t=$r(e,s,r),t!==null&&(Tn(t,e,r,n),zl(t,e,r))}};function Ng(e,t,n,r,s,a,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,u):t.prototype&&t.prototype.isPureReactComponent?!Sa(n,r)||!Sa(s,a):!0}function Ww(e,t,n){var r=!1,s=Jr,a=t.contextType;return typeof a=="object"&&a!==null?a=un(a):(s=Bt(t)?Li:St.current,r=t.contextTypes,a=(r=r!=null)?Ks(e,s):Jr),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ju,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function Dg(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ju.enqueueReplaceState(t,t.state,null)}function mf(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},zd(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=un(a):(a=Bt(t)?Li:St.current,s.context=Ks(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(pf(e,t,a,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&ju.enqueueReplaceState(s,s.state,null),gu(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Js(e,t){try{var n="",r=t;do n+=bE(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function ch(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function gf(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var sA=typeof WeakMap=="function"?WeakMap:Map;function qw(e,t,n){n=sr(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Cu||(Cu=!0,Af=r),gf(e,t)},n}function $w(e,t,n){n=sr(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){gf(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){gf(e,t),typeof r!="function"&&(Kr===null?Kr=new Set([this]):Kr.add(this));var u=t.stack;this.componentDidCatch(t.value,{componentStack:u!==null?u:""})}),n}function Ug(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new sA;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=wA.bind(null,e,t,n),t.then(e,e))}function Fg(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Bg(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=sr(-1,1),t.tag=2,$r(n,t,1))),n.lanes|=1),e)}var oA=gr.ReactCurrentOwner,Ut=!1;function Pt(e,t,n,r){t.child=e===null?Tw(t,null,n,r):Xs(t,e.child,n,r)}function Vg(e,t,n,r,s){n=n.render;var a=t.ref;return Os(t,s),r=$d(e,t,n,r,a,s),n=Kd(),e!==null&&!Ut?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,pr(e,t,s)):(Le&&n&&Nd(t),t.flags|=1,Pt(e,t,r,s),t.child)}function jg(e,t,n,r,s){if(e===null){var a=n.type;return typeof a=="function"&&!ip(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,Kw(e,t,a,r,s)):(e=Kl(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var u=a.memoizedProps;if(n=n.compare,n=n!==null?n:Sa,n(u,r)&&e.ref===t.ref)return pr(e,t,s)}return t.flags|=1,e=Xr(a,r),e.ref=t.ref,e.return=t,t.child=e}function Kw(e,t,n,r,s){if(e!==null){var a=e.memoizedProps;if(Sa(a,r)&&e.ref===t.ref)if(Ut=!1,t.pendingProps=r=a,(e.lanes&s)!==0)e.flags&131072&&(Ut=!0);else return t.lanes=e.lanes,pr(e,t,s)}return yf(e,t,n,r,s)}function Qw(e,t,n){var r=t.pendingProps,s=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(ws,Wt),Wt|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Oe(ws,Wt),Wt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Oe(ws,Wt),Wt|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,Oe(ws,Wt),Wt|=r;return Pt(e,t,s,n),t.child}function Xw(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function yf(e,t,n,r,s){var a=Bt(n)?Li:St.current;return a=Ks(t,a),Os(t,s),n=$d(e,t,n,r,a,s),r=Kd(),e!==null&&!Ut?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,pr(e,t,s)):(Le&&r&&Nd(t),t.flags|=1,Pt(e,t,n,s),t.child)}function zg(e,t,n,r,s){if(Bt(n)){var a=!0;hu(t)}else a=!1;if(Os(t,s),t.stateNode===null)Wl(e,t),Ww(t,n,r),mf(t,n,r,s),r=!0;else if(e===null){var u=t.stateNode,h=t.memoizedProps;u.props=h;var f=u.context,p=n.contextType;typeof p=="object"&&p!==null?p=un(p):(p=Bt(n)?Li:St.current,p=Ks(t,p));var v=n.getDerivedStateFromProps,y=typeof v=="function"||typeof u.getSnapshotBeforeUpdate=="function";y||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==r||f!==p)&&Dg(t,u,r,p),kr=!1;var w=t.memoizedState;u.state=w,gu(t,r,u,s),f=t.memoizedState,h!==r||w!==f||Ft.current||kr?(typeof v=="function"&&(pf(t,n,v,r),f=t.memoizedState),(h=kr||Ng(t,n,h,r,w,f,p))?(y||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=f),u.props=r,u.state=f,u.context=p,r=h):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{u=t.stateNode,Ew(e,t),h=t.memoizedProps,p=t.type===t.elementType?h:gn(t.type,h),u.props=p,y=t.pendingProps,w=u.context,f=n.contextType,typeof f=="object"&&f!==null?f=un(f):(f=Bt(n)?Li:St.current,f=Ks(t,f));var P=n.getDerivedStateFromProps;(v=typeof P=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==y||w!==f)&&Dg(t,u,r,f),kr=!1,w=t.memoizedState,u.state=w,gu(t,r,u,s);var _=t.memoizedState;h!==y||w!==_||Ft.current||kr?(typeof P=="function"&&(pf(t,n,P,r),_=t.memoizedState),(p=kr||Ng(t,n,p,r,w,_,f)||!1)?(v||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,_,f),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,_,f)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=_),u.props=r,u.state=_,u.context=f,r=p):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),r=!1)}return vf(e,t,n,r,a,s)}function vf(e,t,n,r,s,a){Xw(e,t);var u=(t.flags&128)!==0;if(!r&&!u)return s&&_g(t,n,!1),pr(e,t,a);r=t.stateNode,oA.current=t;var h=u&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&u?(t.child=Xs(t,e.child,null,a),t.child=Xs(t,null,h,a)):Pt(e,t,h,a),t.memoizedState=r.state,s&&_g(t,n,!0),t.child}function Yw(e){var t=e.stateNode;t.pendingContext?Ag(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ag(e,t.context,!1),Gd(e,t.containerInfo)}function Gg(e,t,n,r,s){return Qs(),Ud(s),t.flags|=256,Pt(e,t,n,r),t.child}var wf={dehydrated:null,treeContext:null,retryLane:0};function Sf(e){return{baseLanes:e,cachePool:null,transitions:null}}function Jw(e,t,n){var r=t.pendingProps,s=Ue.current,a=!1,u=(t.flags&128)!==0,h;if((h=u)||(h=e!==null&&e.memoizedState===null?!1:(s&2)!==0),h?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Oe(Ue,s&1),e===null)return ff(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(u=r.children,e=r.fallback,a?(r=t.mode,a=t.child,u={mode:"hidden",children:u},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=u):a=Hu(u,r,0,null),e=Mi(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Sf(n),t.memoizedState=wf,e):Yd(t,u));if(s=e.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return aA(e,t,u,r,h,s,n);if(a){a=r.fallback,u=t.mode,s=e.child,h=s.sibling;var f={mode:"hidden",children:r.children};return!(u&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=f,t.deletions=null):(r=Xr(s,f),r.subtreeFlags=s.subtreeFlags&14680064),h!==null?a=Xr(h,a):(a=Mi(a,u,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,u=e.child.memoizedState,u=u===null?Sf(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},a.memoizedState=u,a.childLanes=e.childLanes&~n,t.memoizedState=wf,r}return a=e.child,e=a.sibling,r=Xr(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Yd(e,t){return t=Hu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function _l(e,t,n,r){return r!==null&&Ud(r),Xs(t,e.child,null,n),e=Yd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function aA(e,t,n,r,s,a,u){if(n)return t.flags&256?(t.flags&=-257,r=ch(Error(z(422))),_l(e,t,u,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Hu({mode:"visible",children:r.children},s,0,null),a=Mi(a,s,u,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&Xs(t,e.child,null,u),t.child.memoizedState=Sf(u),t.memoizedState=wf,a);if(!(t.mode&1))return _l(e,t,u,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var h=r.dgst;return r=h,a=Error(z(419)),r=ch(a,r,void 0),_l(e,t,u,r)}if(h=(u&e.childLanes)!==0,Ut||h){if(r=it,r!==null){switch(u&-u){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|u)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,dr(e,s),Tn(r,e,s,-1))}return rp(),r=ch(Error(z(421))),_l(e,t,u,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=SA.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,qt=qr(s.nextSibling),$t=t,Le=!0,wn=null,e!==null&&(sn[on++]=tr,sn[on++]=nr,sn[on++]=Ni,tr=e.id,nr=e.overflow,Ni=t),t=Yd(t,r.children),t.flags|=4096,t)}function Hg(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),df(e.return,t,n)}function hh(e,t,n,r,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function Zw(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;if(Pt(e,t,r.children,n),r=Ue.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Hg(e,n,t);else if(e.tag===19)Hg(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Oe(Ue,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&yu(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),hh(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&yu(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}hh(t,!0,n,null,a);break;case"together":hh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function pr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ui|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(z(153));if(t.child!==null){for(e=t.child,n=Xr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Xr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function lA(e,t,n){switch(t.tag){case 3:Yw(t),Qs();break;case 5:Pw(t);break;case 1:Bt(t.type)&&hu(t);break;case 4:Gd(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Oe(pu,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Oe(Ue,Ue.current&1),t.flags|=128,null):n&t.child.childLanes?Jw(e,t,n):(Oe(Ue,Ue.current&1),e=pr(e,t,n),e!==null?e.sibling:null);Oe(Ue,Ue.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Zw(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Oe(Ue,Ue.current),r)break;return null;case 22:case 23:return t.lanes=0,Qw(e,t,n)}return pr(e,t,n)}var eS,Cf,tS,nS;eS=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Cf=function(){};tS=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Si(jn.current);var a=null;switch(n){case"input":s=zh(e,s),r=zh(e,r),a=[];break;case"select":s=Ve({},s,{value:void 0}),r=Ve({},r,{value:void 0}),a=[];break;case"textarea":s=Wh(e,s),r=Wh(e,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=uu)}$h(n,r);var u;n=null;for(p in s)if(!r.hasOwnProperty(p)&&s.hasOwnProperty(p)&&s[p]!=null)if(p==="style"){var h=s[p];for(u in h)h.hasOwnProperty(u)&&(n||(n={}),n[u]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(da.hasOwnProperty(p)?a||(a=[]):(a=a||[]).push(p,null));for(p in r){var f=r[p];if(h=s!=null?s[p]:void 0,r.hasOwnProperty(p)&&f!==h&&(f!=null||h!=null))if(p==="style")if(h){for(u in h)!h.hasOwnProperty(u)||f&&f.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in f)f.hasOwnProperty(u)&&h[u]!==f[u]&&(n||(n={}),n[u]=f[u])}else n||(a||(a=[]),a.push(p,n)),n=f;else p==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,h=h?h.__html:void 0,f!=null&&h!==f&&(a=a||[]).push(p,f)):p==="children"?typeof f!="string"&&typeof f!="number"||(a=a||[]).push(p,""+f):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(da.hasOwnProperty(p)?(f!=null&&p==="onScroll"&&be("scroll",e),a||h===f||(a=[])):(a=a||[]).push(p,f))}n&&(a=a||[]).push("style",n);var p=a;(t.updateQueue=p)&&(t.flags|=4)}};nS=function(e,t,n,r){n!==r&&(t.flags|=4)};function Uo(e,t){if(!Le)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function pt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function uA(e,t,n){var r=t.pendingProps;switch(Dd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(t),null;case 1:return Bt(t.type)&&cu(),pt(t),null;case 3:return r=t.stateNode,Ys(),Ie(Ft),Ie(St),Wd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Pl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,wn!==null&&(Of(wn),wn=null))),Cf(e,t),pt(t),null;case 5:Hd(t);var s=Si(Pa.current);if(n=t.type,e!==null&&t.stateNode!=null)tS(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(z(166));return pt(t),null}if(e=Si(jn.current),Pl(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Bn]=t,r[Ra]=a,e=(t.mode&1)!==0,n){case"dialog":be("cancel",r),be("close",r);break;case"iframe":case"object":case"embed":be("load",r);break;case"video":case"audio":for(s=0;s<Ko.length;s++)be(Ko[s],r);break;case"source":be("error",r);break;case"img":case"image":case"link":be("error",r),be("load",r);break;case"details":be("toggle",r);break;case"input":Zm(r,a),be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},be("invalid",r);break;case"textarea":tg(r,a),be("invalid",r)}$h(n,a),s=null;for(var u in a)if(a.hasOwnProperty(u)){var h=a[u];u==="children"?typeof h=="string"?r.textContent!==h&&(a.suppressHydrationWarning!==!0&&El(r.textContent,h,e),s=["children",h]):typeof h=="number"&&r.textContent!==""+h&&(a.suppressHydrationWarning!==!0&&El(r.textContent,h,e),s=["children",""+h]):da.hasOwnProperty(u)&&h!=null&&u==="onScroll"&&be("scroll",r)}switch(n){case"input":gl(r),eg(r,a,!0);break;case"textarea":gl(r),ng(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=uu)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{u=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=k0(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),n==="select"&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[Bn]=t,e[Ra]=r,eS(e,t,!1,!1),t.stateNode=e;e:{switch(u=Kh(n,r),n){case"dialog":be("cancel",e),be("close",e),s=r;break;case"iframe":case"object":case"embed":be("load",e),s=r;break;case"video":case"audio":for(s=0;s<Ko.length;s++)be(Ko[s],e);s=r;break;case"source":be("error",e),s=r;break;case"img":case"image":case"link":be("error",e),be("load",e),s=r;break;case"details":be("toggle",e),s=r;break;case"input":Zm(e,r),s=zh(e,r),be("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ve({},r,{value:void 0}),be("invalid",e);break;case"textarea":tg(e,r),s=Wh(e,r),be("invalid",e);break;default:s=r}$h(n,s),h=s;for(a in h)if(h.hasOwnProperty(a)){var f=h[a];a==="style"?I0(e,f):a==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&M0(e,f)):a==="children"?typeof f=="string"?(n!=="textarea"||f!=="")&&pa(e,f):typeof f=="number"&&pa(e,""+f):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(da.hasOwnProperty(a)?f!=null&&a==="onScroll"&&be("scroll",e):f!=null&&Cd(e,a,f,u))}switch(n){case"input":gl(e),eg(e,r,!1);break;case"textarea":gl(e),ng(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Yr(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?Ps(e,!!r.multiple,a,!1):r.defaultValue!=null&&Ps(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=uu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return pt(t),null;case 6:if(e&&t.stateNode!=null)nS(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(z(166));if(n=Si(Pa.current),Si(jn.current),Pl(t)){if(r=t.stateNode,n=t.memoizedProps,r[Bn]=t,(a=r.nodeValue!==n)&&(e=$t,e!==null))switch(e.tag){case 3:El(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&El(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bn]=t,t.stateNode=r}return pt(t),null;case 13:if(Ie(Ue),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Le&&qt!==null&&t.mode&1&&!(t.flags&128))Sw(),Qs(),t.flags|=98560,a=!1;else if(a=Pl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(z(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(z(317));a[Bn]=t}else Qs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;pt(t),a=!1}else wn!==null&&(Of(wn),wn=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ue.current&1?et===0&&(et=3):rp())),t.updateQueue!==null&&(t.flags|=4),pt(t),null);case 4:return Ys(),Cf(e,t),e===null&&Ca(t.stateNode.containerInfo),pt(t),null;case 10:return Vd(t.type._context),pt(t),null;case 17:return Bt(t.type)&&cu(),pt(t),null;case 19:if(Ie(Ue),a=t.memoizedState,a===null)return pt(t),null;if(r=(t.flags&128)!==0,u=a.rendering,u===null)if(r)Uo(a,!1);else{if(et!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(u=yu(e),u!==null){for(t.flags|=128,Uo(a,!1),r=u.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,u=a.alternate,u===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,e=u.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Oe(Ue,Ue.current&1|2),t.child}e=e.sibling}a.tail!==null&&We()>Zs&&(t.flags|=128,r=!0,Uo(a,!1),t.lanes=4194304)}else{if(!r)if(e=yu(u),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Uo(a,!0),a.tail===null&&a.tailMode==="hidden"&&!u.alternate&&!Le)return pt(t),null}else 2*We()-a.renderingStartTime>Zs&&n!==1073741824&&(t.flags|=128,r=!0,Uo(a,!1),t.lanes=4194304);a.isBackwards?(u.sibling=t.child,t.child=u):(n=a.last,n!==null?n.sibling=u:t.child=u,a.last=u)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=We(),t.sibling=null,n=Ue.current,Oe(Ue,r?n&1|2:n&1),t):(pt(t),null);case 22:case 23:return np(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Wt&1073741824&&(pt(t),t.subtreeFlags&6&&(t.flags|=8192)):pt(t),null;case 24:return null;case 25:return null}throw Error(z(156,t.tag))}function cA(e,t){switch(Dd(t),t.tag){case 1:return Bt(t.type)&&cu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ys(),Ie(Ft),Ie(St),Wd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Hd(t),null;case 13:if(Ie(Ue),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(z(340));Qs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ie(Ue),null;case 4:return Ys(),null;case 10:return Vd(t.type._context),null;case 22:case 23:return np(),null;case 24:return null;default:return null}}var xl=!1,yt=!1,hA=typeof WeakSet=="function"?WeakSet:Set,$=null;function vs(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ze(e,t,r)}else n.current=null}function Tf(e,t,n){try{n()}catch(r){ze(e,t,r)}}var Wg=!1;function fA(e,t){if(sf=ou,e=aw(),Ld(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var u=0,h=-1,f=-1,p=0,v=0,y=e,w=null;t:for(;;){for(var P;y!==n||s!==0&&y.nodeType!==3||(h=u+s),y!==a||r!==0&&y.nodeType!==3||(f=u+r),y.nodeType===3&&(u+=y.nodeValue.length),(P=y.firstChild)!==null;)w=y,y=P;for(;;){if(y===e)break t;if(w===n&&++p===s&&(h=u),w===a&&++v===r&&(f=u),(P=y.nextSibling)!==null)break;y=w,w=y.parentNode}y=P}n=h===-1||f===-1?null:{start:h,end:f}}else n=null}n=n||{start:0,end:0}}else n=null;for(of={focusedElem:e,selectionRange:n},ou=!1,$=t;$!==null;)if(t=$,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$=e;else for(;$!==null;){t=$;try{var _=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var A=_.memoizedProps,k=_.memoizedState,C=t.stateNode,S=C.getSnapshotBeforeUpdate(t.elementType===t.type?A:gn(t.type,A),k);C.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var E=t.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(T){ze(t,t.return,T)}if(e=t.sibling,e!==null){e.return=t.return,$=e;break}$=t.return}return _=Wg,Wg=!1,_}function oa(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&Tf(t,n,a)}s=s.next}while(s!==r)}}function zu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Rf(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function rS(e){var t=e.alternate;t!==null&&(e.alternate=null,rS(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Bn],delete t[Ra],delete t[uf],delete t[KP],delete t[QP])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function iS(e){return e.tag===5||e.tag===3||e.tag===4}function qg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||iS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ef(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=uu));else if(r!==4&&(e=e.child,e!==null))for(Ef(e,t,n),e=e.sibling;e!==null;)Ef(e,t,n),e=e.sibling}function Pf(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Pf(e,t,n),e=e.sibling;e!==null;)Pf(e,t,n),e=e.sibling}var ot=null,vn=!1;function Pr(e,t,n){for(n=n.child;n!==null;)sS(e,t,n),n=n.sibling}function sS(e,t,n){if(Vn&&typeof Vn.onCommitFiberUnmount=="function")try{Vn.onCommitFiberUnmount(Lu,n)}catch{}switch(n.tag){case 5:yt||vs(n,t);case 6:var r=ot,s=vn;ot=null,Pr(e,t,n),ot=r,vn=s,ot!==null&&(vn?(e=ot,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ot.removeChild(n.stateNode));break;case 18:ot!==null&&(vn?(e=ot,n=n.stateNode,e.nodeType===8?ih(e.parentNode,n):e.nodeType===1&&ih(e,n),va(e)):ih(ot,n.stateNode));break;case 4:r=ot,s=vn,ot=n.stateNode.containerInfo,vn=!0,Pr(e,t,n),ot=r,vn=s;break;case 0:case 11:case 14:case 15:if(!yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,u=a.destroy;a=a.tag,u!==void 0&&(a&2||a&4)&&Tf(n,t,u),s=s.next}while(s!==r)}Pr(e,t,n);break;case 1:if(!yt&&(vs(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(h){ze(n,t,h)}Pr(e,t,n);break;case 21:Pr(e,t,n);break;case 22:n.mode&1?(yt=(r=yt)||n.memoizedState!==null,Pr(e,t,n),yt=r):Pr(e,t,n);break;default:Pr(e,t,n)}}function $g(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new hA),t.forEach(function(r){var s=CA.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function pn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,u=t,h=u;e:for(;h!==null;){switch(h.tag){case 5:ot=h.stateNode,vn=!1;break e;case 3:ot=h.stateNode.containerInfo,vn=!0;break e;case 4:ot=h.stateNode.containerInfo,vn=!0;break e}h=h.return}if(ot===null)throw Error(z(160));sS(a,u,s),ot=null,vn=!1;var f=s.alternate;f!==null&&(f.return=null),s.return=null}catch(p){ze(s,t,p)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)oS(t,e),t=t.sibling}function oS(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pn(t,e),Mn(e),r&4){try{oa(3,e,e.return),zu(3,e)}catch(A){ze(e,e.return,A)}try{oa(5,e,e.return)}catch(A){ze(e,e.return,A)}}break;case 1:pn(t,e),Mn(e),r&512&&n!==null&&vs(n,n.return);break;case 5:if(pn(t,e),Mn(e),r&512&&n!==null&&vs(n,n.return),e.flags&32){var s=e.stateNode;try{pa(s,"")}catch(A){ze(e,e.return,A)}}if(r&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,u=n!==null?n.memoizedProps:a,h=e.type,f=e.updateQueue;if(e.updateQueue=null,f!==null)try{h==="input"&&a.type==="radio"&&a.name!=null&&x0(s,a),Kh(h,u);var p=Kh(h,a);for(u=0;u<f.length;u+=2){var v=f[u],y=f[u+1];v==="style"?I0(s,y):v==="dangerouslySetInnerHTML"?M0(s,y):v==="children"?pa(s,y):Cd(s,v,y,p)}switch(h){case"input":Gh(s,a);break;case"textarea":O0(s,a);break;case"select":var w=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var P=a.value;P!=null?Ps(s,!!a.multiple,P,!1):w!==!!a.multiple&&(a.defaultValue!=null?Ps(s,!!a.multiple,a.defaultValue,!0):Ps(s,!!a.multiple,a.multiple?[]:"",!1))}s[Ra]=a}catch(A){ze(e,e.return,A)}}break;case 6:if(pn(t,e),Mn(e),r&4){if(e.stateNode===null)throw Error(z(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(A){ze(e,e.return,A)}}break;case 3:if(pn(t,e),Mn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{va(t.containerInfo)}catch(A){ze(e,e.return,A)}break;case 4:pn(t,e),Mn(e);break;case 13:pn(t,e),Mn(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(ep=We())),r&4&&$g(e);break;case 22:if(v=n!==null&&n.memoizedState!==null,e.mode&1?(yt=(p=yt)||v,pn(t,e),yt=p):pn(t,e),Mn(e),r&8192){if(p=e.memoizedState!==null,(e.stateNode.isHidden=p)&&!v&&e.mode&1)for($=e,v=e.child;v!==null;){for(y=$=v;$!==null;){switch(w=$,P=w.child,w.tag){case 0:case 11:case 14:case 15:oa(4,w,w.return);break;case 1:vs(w,w.return);var _=w.stateNode;if(typeof _.componentWillUnmount=="function"){r=w,n=w.return;try{t=r,_.props=t.memoizedProps,_.state=t.memoizedState,_.componentWillUnmount()}catch(A){ze(r,n,A)}}break;case 5:vs(w,w.return);break;case 22:if(w.memoizedState!==null){Qg(y);continue}}P!==null?(P.return=w,$=P):Qg(y)}v=v.sibling}e:for(v=null,y=e;;){if(y.tag===5){if(v===null){v=y;try{s=y.stateNode,p?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(h=y.stateNode,f=y.memoizedProps.style,u=f!=null&&f.hasOwnProperty("display")?f.display:null,h.style.display=b0("display",u))}catch(A){ze(e,e.return,A)}}}else if(y.tag===6){if(v===null)try{y.stateNode.nodeValue=p?"":y.memoizedProps}catch(A){ze(e,e.return,A)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===e)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break e;for(;y.sibling===null;){if(y.return===null||y.return===e)break e;v===y&&(v=null),y=y.return}v===y&&(v=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:pn(t,e),Mn(e),r&4&&$g(e);break;case 21:break;default:pn(t,e),Mn(e)}}function Mn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(iS(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(pa(s,""),r.flags&=-33);var a=qg(e);Pf(e,a,s);break;case 3:case 4:var u=r.stateNode.containerInfo,h=qg(e);Ef(e,h,u);break;default:throw Error(z(161))}}catch(f){ze(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function dA(e,t,n){$=e,aS(e)}function aS(e,t,n){for(var r=(e.mode&1)!==0;$!==null;){var s=$,a=s.child;if(s.tag===22&&r){var u=s.memoizedState!==null||xl;if(!u){var h=s.alternate,f=h!==null&&h.memoizedState!==null||yt;h=xl;var p=yt;if(xl=u,(yt=f)&&!p)for($=s;$!==null;)u=$,f=u.child,u.tag===22&&u.memoizedState!==null?Xg(s):f!==null?(f.return=u,$=f):Xg(s);for(;a!==null;)$=a,aS(a),a=a.sibling;$=s,xl=h,yt=p}Kg(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,$=a):Kg(e)}}function Kg(e){for(;$!==null;){var t=$;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:yt||zu(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!yt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:gn(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&bg(t,a,r);break;case 3:var u=t.updateQueue;if(u!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}bg(t,u,n)}break;case 5:var h=t.stateNode;if(n===null&&t.flags&4){n=h;var f=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&n.focus();break;case"img":f.src&&(n.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var p=t.alternate;if(p!==null){var v=p.memoizedState;if(v!==null){var y=v.dehydrated;y!==null&&va(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}yt||t.flags&512&&Rf(t)}catch(w){ze(t,t.return,w)}}if(t===e){$=null;break}if(n=t.sibling,n!==null){n.return=t.return,$=n;break}$=t.return}}function Qg(e){for(;$!==null;){var t=$;if(t===e){$=null;break}var n=t.sibling;if(n!==null){n.return=t.return,$=n;break}$=t.return}}function Xg(e){for(;$!==null;){var t=$;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{zu(4,t)}catch(f){ze(t,n,f)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(f){ze(t,s,f)}}var a=t.return;try{Rf(t)}catch(f){ze(t,a,f)}break;case 5:var u=t.return;try{Rf(t)}catch(f){ze(t,u,f)}}}catch(f){ze(t,t.return,f)}if(t===e){$=null;break}var h=t.sibling;if(h!==null){h.return=t.return,$=h;break}$=t.return}}var pA=Math.ceil,Su=gr.ReactCurrentDispatcher,Jd=gr.ReactCurrentOwner,ln=gr.ReactCurrentBatchConfig,we=0,it=null,Ke=null,ut=0,Wt=0,ws=ni(0),et=0,Oa=null,Ui=0,Gu=0,Zd=0,aa=null,Dt=null,ep=0,Zs=1/0,Zn=null,Cu=!1,Af=null,Kr=null,Ol=!1,jr=null,Tu=0,la=0,_f=null,ql=-1,$l=0;function At(){return we&6?We():ql!==-1?ql:ql=We()}function Qr(e){return e.mode&1?we&2&&ut!==0?ut&-ut:YP.transition!==null?($l===0&&($l=W0()),$l):(e=Re,e!==0||(e=window.event,e=e===void 0?16:J0(e.type)),e):1}function Tn(e,t,n,r){if(50<la)throw la=0,_f=null,Error(z(185));Ha(e,n,r),(!(we&2)||e!==it)&&(e===it&&(!(we&2)&&(Gu|=n),et===4&&Ir(e,ut)),Vt(e,r),n===1&&we===0&&!(t.mode&1)&&(Zs=We()+500,Bu&&ri()))}function Vt(e,t){var n=e.callbackNode;YE(e,t);var r=su(e,e===it?ut:0);if(r===0)n!==null&&sg(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&sg(n),t===1)e.tag===0?XP(Yg.bind(null,e)):yw(Yg.bind(null,e)),qP(function(){!(we&6)&&ri()}),n=null;else{switch(q0(r)){case 1:n=Ad;break;case 4:n=G0;break;case 16:n=iu;break;case 536870912:n=H0;break;default:n=iu}n=mS(n,lS.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function lS(e,t){if(ql=-1,$l=0,we&6)throw Error(z(327));var n=e.callbackNode;if(ks()&&e.callbackNode!==n)return null;var r=su(e,e===it?ut:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ru(e,r);else{t=r;var s=we;we|=2;var a=cS();(it!==e||ut!==t)&&(Zn=null,Zs=We()+500,ki(e,t));do try{yA();break}catch(h){uS(e,h)}while(!0);Bd(),Su.current=a,we=s,Ke!==null?t=0:(it=null,ut=0,t=et)}if(t!==0){if(t===2&&(s=Zh(e),s!==0&&(r=s,t=xf(e,s))),t===1)throw n=Oa,ki(e,0),Ir(e,r),Vt(e,We()),n;if(t===6)Ir(e,r);else{if(s=e.current.alternate,!(r&30)&&!mA(s)&&(t=Ru(e,r),t===2&&(a=Zh(e),a!==0&&(r=a,t=xf(e,a))),t===1))throw n=Oa,ki(e,0),Ir(e,r),Vt(e,We()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(z(345));case 2:pi(e,Dt,Zn);break;case 3:if(Ir(e,r),(r&130023424)===r&&(t=ep+500-We(),10<t)){if(su(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){At(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=lf(pi.bind(null,e,Dt,Zn),t);break}pi(e,Dt,Zn);break;case 4:if(Ir(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var u=31-Cn(r);a=1<<u,u=t[u],u>s&&(s=u),r&=~a}if(r=s,r=We()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*pA(r/1960))-r,10<r){e.timeoutHandle=lf(pi.bind(null,e,Dt,Zn),r);break}pi(e,Dt,Zn);break;case 5:pi(e,Dt,Zn);break;default:throw Error(z(329))}}}return Vt(e,We()),e.callbackNode===n?lS.bind(null,e):null}function xf(e,t){var n=aa;return e.current.memoizedState.isDehydrated&&(ki(e,t).flags|=256),e=Ru(e,t),e!==2&&(t=Dt,Dt=n,t!==null&&Of(t)),e}function Of(e){Dt===null?Dt=e:Dt.push.apply(Dt,e)}function mA(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!Rn(a(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ir(e,t){for(t&=~Zd,t&=~Gu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Cn(t),r=1<<n;e[n]=-1,t&=~r}}function Yg(e){if(we&6)throw Error(z(327));ks();var t=su(e,0);if(!(t&1))return Vt(e,We()),null;var n=Ru(e,t);if(e.tag!==0&&n===2){var r=Zh(e);r!==0&&(t=r,n=xf(e,r))}if(n===1)throw n=Oa,ki(e,0),Ir(e,t),Vt(e,We()),n;if(n===6)throw Error(z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,pi(e,Dt,Zn),Vt(e,We()),null}function tp(e,t){var n=we;we|=1;try{return e(t)}finally{we=n,we===0&&(Zs=We()+500,Bu&&ri())}}function Fi(e){jr!==null&&jr.tag===0&&!(we&6)&&ks();var t=we;we|=1;var n=ln.transition,r=Re;try{if(ln.transition=null,Re=1,e)return e()}finally{Re=r,ln.transition=n,we=t,!(we&6)&&ri()}}function np(){Wt=ws.current,Ie(ws)}function ki(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,WP(n)),Ke!==null)for(n=Ke.return;n!==null;){var r=n;switch(Dd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&cu();break;case 3:Ys(),Ie(Ft),Ie(St),Wd();break;case 5:Hd(r);break;case 4:Ys();break;case 13:Ie(Ue);break;case 19:Ie(Ue);break;case 10:Vd(r.type._context);break;case 22:case 23:np()}n=n.return}if(it=e,Ke=e=Xr(e.current,null),ut=Wt=t,et=0,Oa=null,Zd=Gu=Ui=0,Dt=aa=null,wi!==null){for(t=0;t<wi.length;t++)if(n=wi[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var u=a.next;a.next=s,r.next=u}n.pending=r}wi=null}return e}function uS(e,t){do{var n=Ke;try{if(Bd(),Gl.current=wu,vu){for(var r=Be.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}vu=!1}if(Di=0,rt=Ze=Be=null,sa=!1,Aa=0,Jd.current=null,n===null||n.return===null){et=1,Oa=t,Ke=null;break}e:{var a=e,u=n.return,h=n,f=t;if(t=ut,h.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var p=f,v=h,y=v.tag;if(!(v.mode&1)&&(y===0||y===11||y===15)){var w=v.alternate;w?(v.updateQueue=w.updateQueue,v.memoizedState=w.memoizedState,v.lanes=w.lanes):(v.updateQueue=null,v.memoizedState=null)}var P=Fg(u);if(P!==null){P.flags&=-257,Bg(P,u,h,a,t),P.mode&1&&Ug(a,p,t),t=P,f=p;var _=t.updateQueue;if(_===null){var A=new Set;A.add(f),t.updateQueue=A}else _.add(f);break e}else{if(!(t&1)){Ug(a,p,t),rp();break e}f=Error(z(426))}}else if(Le&&h.mode&1){var k=Fg(u);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Bg(k,u,h,a,t),Ud(Js(f,h));break e}}a=f=Js(f,h),et!==4&&(et=2),aa===null?aa=[a]:aa.push(a),a=u;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var C=qw(a,f,t);Mg(a,C);break e;case 1:h=f;var S=a.type,E=a.stateNode;if(!(a.flags&128)&&(typeof S.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Kr===null||!Kr.has(E)))){a.flags|=65536,t&=-t,a.lanes|=t;var T=$w(a,h,t);Mg(a,T);break e}}a=a.return}while(a!==null)}fS(n)}catch(I){t=I,Ke===n&&n!==null&&(Ke=n=n.return);continue}break}while(!0)}function cS(){var e=Su.current;return Su.current=wu,e===null?wu:e}function rp(){(et===0||et===3||et===2)&&(et=4),it===null||!(Ui&268435455)&&!(Gu&268435455)||Ir(it,ut)}function Ru(e,t){var n=we;we|=2;var r=cS();(it!==e||ut!==t)&&(Zn=null,ki(e,t));do try{gA();break}catch(s){uS(e,s)}while(!0);if(Bd(),we=n,Su.current=r,Ke!==null)throw Error(z(261));return it=null,ut=0,et}function gA(){for(;Ke!==null;)hS(Ke)}function yA(){for(;Ke!==null&&!zE();)hS(Ke)}function hS(e){var t=pS(e.alternate,e,Wt);e.memoizedProps=e.pendingProps,t===null?fS(e):Ke=t,Jd.current=null}function fS(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=cA(n,t),n!==null){n.flags&=32767,Ke=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{et=6,Ke=null;return}}else if(n=uA(n,t,Wt),n!==null){Ke=n;return}if(t=t.sibling,t!==null){Ke=t;return}Ke=t=e}while(t!==null);et===0&&(et=5)}function pi(e,t,n){var r=Re,s=ln.transition;try{ln.transition=null,Re=1,vA(e,t,n,r)}finally{ln.transition=s,Re=r}return null}function vA(e,t,n,r){do ks();while(jr!==null);if(we&6)throw Error(z(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(z(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(JE(e,a),e===it&&(Ke=it=null,ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ol||(Ol=!0,mS(iu,function(){return ks(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=ln.transition,ln.transition=null;var u=Re;Re=1;var h=we;we|=4,Jd.current=null,fA(e,n),oS(n,e),FP(of),ou=!!sf,of=sf=null,e.current=n,dA(n),GE(),we=h,Re=u,ln.transition=a}else e.current=n;if(Ol&&(Ol=!1,jr=e,Tu=s),a=e.pendingLanes,a===0&&(Kr=null),qE(n.stateNode),Vt(e,We()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Cu)throw Cu=!1,e=Af,Af=null,e;return Tu&1&&e.tag!==0&&ks(),a=e.pendingLanes,a&1?e===_f?la++:(la=0,_f=e):la=0,ri(),null}function ks(){if(jr!==null){var e=q0(Tu),t=ln.transition,n=Re;try{if(ln.transition=null,Re=16>e?16:e,jr===null)var r=!1;else{if(e=jr,jr=null,Tu=0,we&6)throw Error(z(331));var s=we;for(we|=4,$=e.current;$!==null;){var a=$,u=a.child;if($.flags&16){var h=a.deletions;if(h!==null){for(var f=0;f<h.length;f++){var p=h[f];for($=p;$!==null;){var v=$;switch(v.tag){case 0:case 11:case 15:oa(8,v,a)}var y=v.child;if(y!==null)y.return=v,$=y;else for(;$!==null;){v=$;var w=v.sibling,P=v.return;if(rS(v),v===p){$=null;break}if(w!==null){w.return=P,$=w;break}$=P}}}var _=a.alternate;if(_!==null){var A=_.child;if(A!==null){_.child=null;do{var k=A.sibling;A.sibling=null,A=k}while(A!==null)}}$=a}}if(a.subtreeFlags&2064&&u!==null)u.return=a,$=u;else e:for(;$!==null;){if(a=$,a.flags&2048)switch(a.tag){case 0:case 11:case 15:oa(9,a,a.return)}var C=a.sibling;if(C!==null){C.return=a.return,$=C;break e}$=a.return}}var S=e.current;for($=S;$!==null;){u=$;var E=u.child;if(u.subtreeFlags&2064&&E!==null)E.return=u,$=E;else e:for(u=S;$!==null;){if(h=$,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:zu(9,h)}}catch(I){ze(h,h.return,I)}if(h===u){$=null;break e}var T=h.sibling;if(T!==null){T.return=h.return,$=T;break e}$=h.return}}if(we=s,ri(),Vn&&typeof Vn.onPostCommitFiberRoot=="function")try{Vn.onPostCommitFiberRoot(Lu,e)}catch{}r=!0}return r}finally{Re=n,ln.transition=t}}return!1}function Jg(e,t,n){t=Js(n,t),t=qw(e,t,1),e=$r(e,t,1),t=At(),e!==null&&(Ha(e,1,t),Vt(e,t))}function ze(e,t,n){if(e.tag===3)Jg(e,e,n);else for(;t!==null;){if(t.tag===3){Jg(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Kr===null||!Kr.has(r))){e=Js(n,e),e=$w(t,e,1),t=$r(t,e,1),e=At(),t!==null&&(Ha(t,1,e),Vt(t,e));break}}t=t.return}}function wA(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=At(),e.pingedLanes|=e.suspendedLanes&n,it===e&&(ut&n)===n&&(et===4||et===3&&(ut&130023424)===ut&&500>We()-ep?ki(e,0):Zd|=n),Vt(e,t)}function dS(e,t){t===0&&(e.mode&1?(t=wl,wl<<=1,!(wl&130023424)&&(wl=4194304)):t=1);var n=At();e=dr(e,t),e!==null&&(Ha(e,t,n),Vt(e,n))}function SA(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),dS(e,n)}function CA(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(t),dS(e,n)}var pS;pS=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ft.current)Ut=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ut=!1,lA(e,t,n);Ut=!!(e.flags&131072)}else Ut=!1,Le&&t.flags&1048576&&vw(t,du,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wl(e,t),e=t.pendingProps;var s=Ks(t,St.current);Os(t,n),s=$d(null,t,r,e,s,n);var a=Kd();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Bt(r)?(a=!0,hu(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,zd(t),s.updater=ju,t.stateNode=s,s._reactInternals=t,mf(t,r,e,n),t=vf(null,t,r,!0,a,n)):(t.tag=0,Le&&a&&Nd(t),Pt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wl(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=RA(r),e=gn(r,e),s){case 0:t=yf(null,t,r,e,n);break e;case 1:t=zg(null,t,r,e,n);break e;case 11:t=Vg(null,t,r,e,n);break e;case 14:t=jg(null,t,r,gn(r.type,e),n);break e}throw Error(z(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:gn(r,s),yf(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:gn(r,s),zg(e,t,r,s,n);case 3:e:{if(Yw(t),e===null)throw Error(z(387));r=t.pendingProps,a=t.memoizedState,s=a.element,Ew(e,t),gu(t,r,null,n);var u=t.memoizedState;if(r=u.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=Js(Error(z(423)),t),t=Gg(e,t,r,n,s);break e}else if(r!==s){s=Js(Error(z(424)),t),t=Gg(e,t,r,n,s);break e}else for(qt=qr(t.stateNode.containerInfo.firstChild),$t=t,Le=!0,wn=null,n=Tw(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qs(),r===s){t=pr(e,t,n);break e}Pt(e,t,r,n)}t=t.child}return t;case 5:return Pw(t),e===null&&ff(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,u=s.children,af(r,s)?u=null:a!==null&&af(r,a)&&(t.flags|=32),Xw(e,t),Pt(e,t,u,n),t.child;case 6:return e===null&&ff(t),null;case 13:return Jw(e,t,n);case 4:return Gd(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Xs(t,null,r,n):Pt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:gn(r,s),Vg(e,t,r,s,n);case 7:return Pt(e,t,t.pendingProps,n),t.child;case 8:return Pt(e,t,t.pendingProps.children,n),t.child;case 12:return Pt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,u=s.value,Oe(pu,r._currentValue),r._currentValue=u,a!==null)if(Rn(a.value,u)){if(a.children===s.children&&!Ft.current){t=pr(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var h=a.dependencies;if(h!==null){u=a.child;for(var f=h.firstContext;f!==null;){if(f.context===r){if(a.tag===1){f=sr(-1,n&-n),f.tag=2;var p=a.updateQueue;if(p!==null){p=p.shared;var v=p.pending;v===null?f.next=f:(f.next=v.next,v.next=f),p.pending=f}}a.lanes|=n,f=a.alternate,f!==null&&(f.lanes|=n),df(a.return,n,t),h.lanes|=n;break}f=f.next}}else if(a.tag===10)u=a.type===t.type?null:a.child;else if(a.tag===18){if(u=a.return,u===null)throw Error(z(341));u.lanes|=n,h=u.alternate,h!==null&&(h.lanes|=n),df(u,n,t),u=a.sibling}else u=a.child;if(u!==null)u.return=a;else for(u=a;u!==null;){if(u===t){u=null;break}if(a=u.sibling,a!==null){a.return=u.return,u=a;break}u=u.return}a=u}Pt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Os(t,n),s=un(s),r=r(s),t.flags|=1,Pt(e,t,r,n),t.child;case 14:return r=t.type,s=gn(r,t.pendingProps),s=gn(r.type,s),jg(e,t,r,s,n);case 15:return Kw(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:gn(r,s),Wl(e,t),t.tag=1,Bt(r)?(e=!0,hu(t)):e=!1,Os(t,n),Ww(t,r,s),mf(t,r,s,n),vf(null,t,r,!0,e,n);case 19:return Zw(e,t,n);case 22:return Qw(e,t,n)}throw Error(z(156,t.tag))};function mS(e,t){return z0(e,t)}function TA(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(e,t,n,r){return new TA(e,t,n,r)}function ip(e){return e=e.prototype,!(!e||!e.isReactComponent)}function RA(e){if(typeof e=="function")return ip(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Rd)return 11;if(e===Ed)return 14}return 2}function Xr(e,t){var n=e.alternate;return n===null?(n=an(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Kl(e,t,n,r,s,a){var u=2;if(r=e,typeof e=="function")ip(e)&&(u=1);else if(typeof e=="string")u=5;else e:switch(e){case us:return Mi(n.children,s,a,t);case Td:u=8,s|=8;break;case Fh:return e=an(12,n,t,s|2),e.elementType=Fh,e.lanes=a,e;case Bh:return e=an(13,n,t,s),e.elementType=Bh,e.lanes=a,e;case Vh:return e=an(19,n,t,s),e.elementType=Vh,e.lanes=a,e;case P0:return Hu(n,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case R0:u=10;break e;case E0:u=9;break e;case Rd:u=11;break e;case Ed:u=14;break e;case Or:u=16,r=null;break e}throw Error(z(130,e==null?e:typeof e,""))}return t=an(u,n,t,s),t.elementType=e,t.type=r,t.lanes=a,t}function Mi(e,t,n,r){return e=an(7,e,r,t),e.lanes=n,e}function Hu(e,t,n,r){return e=an(22,e,r,t),e.elementType=P0,e.lanes=n,e.stateNode={isHidden:!1},e}function fh(e,t,n){return e=an(6,e,null,t),e.lanes=n,e}function dh(e,t,n){return t=an(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function EA(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$c(0),this.expirationTimes=$c(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$c(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function sp(e,t,n,r,s,a,u,h,f){return e=new EA(e,t,n,h,f),t===1?(t=1,a===!0&&(t|=8)):t=0,a=an(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zd(a),e}function PA(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ls,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function gS(e){if(!e)return Jr;e=e._reactInternals;e:{if(Vi(e)!==e||e.tag!==1)throw Error(z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Bt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(z(171))}if(e.tag===1){var n=e.type;if(Bt(n))return gw(e,n,t)}return t}function yS(e,t,n,r,s,a,u,h,f){return e=sp(n,r,!0,e,s,a,u,h,f),e.context=gS(null),n=e.current,r=At(),s=Qr(n),a=sr(r,s),a.callback=t??null,$r(n,a,s),e.current.lanes=s,Ha(e,s,r),Vt(e,r),e}function Wu(e,t,n,r){var s=t.current,a=At(),u=Qr(s);return n=gS(n),t.context===null?t.context=n:t.pendingContext=n,t=sr(a,u),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=$r(s,t,u),e!==null&&(Tn(e,s,u,a),zl(e,s,u)),u}function Eu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Zg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function op(e,t){Zg(e,t),(e=e.alternate)&&Zg(e,t)}function AA(){return null}var vS=typeof reportError=="function"?reportError:function(e){console.error(e)};function ap(e){this._internalRoot=e}qu.prototype.render=ap.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(z(409));Wu(e,t,null,null)};qu.prototype.unmount=ap.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fi(function(){Wu(null,e,null,null)}),t[fr]=null}};function qu(e){this._internalRoot=e}qu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Q0();e={blockedOn:null,target:e,priority:t};for(var n=0;n<br.length&&t!==0&&t<br[n].priority;n++);br.splice(n,0,e),n===0&&Y0(e)}};function lp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function $u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ey(){}function _A(e,t,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var p=Eu(u);a.call(p)}}var u=yS(t,r,e,0,null,!1,!1,"",ey);return e._reactRootContainer=u,e[fr]=u.current,Ca(e.nodeType===8?e.parentNode:e),Fi(),u}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var h=r;r=function(){var p=Eu(f);h.call(p)}}var f=sp(e,0,!1,null,null,!1,!1,"",ey);return e._reactRootContainer=f,e[fr]=f.current,Ca(e.nodeType===8?e.parentNode:e),Fi(function(){Wu(t,f,n,r)}),f}function Ku(e,t,n,r,s){var a=n._reactRootContainer;if(a){var u=a;if(typeof s=="function"){var h=s;s=function(){var f=Eu(u);h.call(f)}}Wu(t,u,e,s)}else u=_A(n,t,e,s,r);return Eu(u)}$0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=$o(t.pendingLanes);n!==0&&(_d(t,n|1),Vt(t,We()),!(we&6)&&(Zs=We()+500,ri()))}break;case 13:Fi(function(){var r=dr(e,1);if(r!==null){var s=At();Tn(r,e,1,s)}}),op(e,1)}};xd=function(e){if(e.tag===13){var t=dr(e,134217728);if(t!==null){var n=At();Tn(t,e,134217728,n)}op(e,134217728)}};K0=function(e){if(e.tag===13){var t=Qr(e),n=dr(e,t);if(n!==null){var r=At();Tn(n,e,t,r)}op(e,t)}};Q0=function(){return Re};X0=function(e,t){var n=Re;try{return Re=e,t()}finally{Re=n}};Xh=function(e,t,n){switch(t){case"input":if(Gh(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Fu(r);if(!s)throw Error(z(90));_0(r),Gh(r,s)}}}break;case"textarea":O0(e,n);break;case"select":t=n.value,t!=null&&Ps(e,!!n.multiple,t,!1)}};D0=tp;U0=Fi;var xA={usingClientEntryPoint:!1,Events:[qa,ds,Fu,L0,N0,tp]},Fo={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},OA={bundleType:Fo.bundleType,version:Fo.version,rendererPackageName:Fo.rendererPackageName,rendererConfig:Fo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=V0(e),e===null?null:e.stateNode},findFiberByHostInstance:Fo.findFiberByHostInstance||AA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kl.isDisabled&&kl.supportsFiber)try{Lu=kl.inject(OA),Vn=kl}catch{}}Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xA;Yt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lp(t))throw Error(z(200));return PA(e,t,null,n)};Yt.createRoot=function(e,t){if(!lp(e))throw Error(z(299));var n=!1,r="",s=vS;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=sp(e,1,!1,null,null,n,!1,r,s),e[fr]=t.current,Ca(e.nodeType===8?e.parentNode:e),new ap(t)};Yt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(z(188)):(e=Object.keys(e).join(","),Error(z(268,e)));return e=V0(t),e=e===null?null:e.stateNode,e};Yt.flushSync=function(e){return Fi(e)};Yt.hydrate=function(e,t,n){if(!$u(t))throw Error(z(200));return Ku(null,e,t,!0,n)};Yt.hydrateRoot=function(e,t,n){if(!lp(e))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",u=vS;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),t=yS(t,null,e,1,n??null,s,!1,a,u),e[fr]=t.current,Ca(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new qu(t)};Yt.render=function(e,t,n){if(!$u(t))throw Error(z(200));return Ku(null,e,t,!1,n)};Yt.unmountComponentAtNode=function(e){if(!$u(e))throw Error(z(40));return e._reactRootContainer?(Fi(function(){Ku(null,null,e,!1,function(){e._reactRootContainer=null,e[fr]=null})}),!0):!1};Yt.unstable_batchedUpdates=tp;Yt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$u(n))throw Error(z(200));if(e==null||e._reactInternals===void 0)throw Error(z(38));return Ku(e,t,n,!1,r)};Yt.version="18.3.1-next-f1338f8080-20240426";function wS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wS)}catch(e){console.error(e)}}wS(),w0.exports=Yt;var kA=w0.exports,SS,ty=kA;SS=ty.createRoot,ty.hydrateRoot;/**
 * @remix-run/router v1.19.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ka(){return ka=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ka.apply(this,arguments)}var zr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(zr||(zr={}));const ny="popstate";function MA(e){e===void 0&&(e={});function t(r,s){let{pathname:a,search:u,hash:h}=r.location;return kf("",{pathname:a,search:u,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:TS(s)}return IA(t,n,null,e)}function tt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function CS(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function bA(){return Math.random().toString(36).substr(2,8)}function ry(e,t){return{usr:e.state,key:e.key,idx:t}}function kf(e,t,n,r){return n===void 0&&(n=null),ka({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?lo(t):t,{state:n,key:t&&t.key||r||bA()})}function TS(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function lo(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function IA(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,u=s.history,h=zr.Pop,f=null,p=v();p==null&&(p=0,u.replaceState(ka({},u.state,{idx:p}),""));function v(){return(u.state||{idx:null}).idx}function y(){h=zr.Pop;let k=v(),C=k==null?null:k-p;p=k,f&&f({action:h,location:A.location,delta:C})}function w(k,C){h=zr.Push;let S=kf(A.location,k,C);p=v()+1;let E=ry(S,p),T=A.createHref(S);try{u.pushState(E,"",T)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;s.location.assign(T)}a&&f&&f({action:h,location:A.location,delta:1})}function P(k,C){h=zr.Replace;let S=kf(A.location,k,C);p=v();let E=ry(S,p),T=A.createHref(S);u.replaceState(E,"",T),a&&f&&f({action:h,location:A.location,delta:0})}function _(k){let C=s.location.origin!=="null"?s.location.origin:s.location.href,S=typeof k=="string"?k:TS(k);return S=S.replace(/ $/,"%20"),tt(C,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,C)}let A={get action(){return h},get location(){return e(s,u)},listen(k){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(ny,y),f=k,()=>{s.removeEventListener(ny,y),f=null}},createHref(k){return t(s,k)},createURL:_,encodeLocation(k){let C=_(k);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:w,replace:P,go(k){return u.go(k)}};return A}var iy;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(iy||(iy={}));function LA(e,t,n){return n===void 0&&(n="/"),NA(e,t,n,!1)}function NA(e,t,n,r){let s=typeof t=="string"?lo(t):t,a=PS(s.pathname||"/",n);if(a==null)return null;let u=RS(e);DA(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let p=$A(a);h=WA(u[f],p,r)}return h}function RS(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,u,h)=>{let f={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(tt(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let p=bi([r,f.relativePath]),v=n.concat(f);a.children&&a.children.length>0&&(tt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),RS(a.children,t,v,p)),!(a.path==null&&!a.index)&&t.push({path:p,score:GA(p,a.index),routesMeta:v})};return e.forEach((a,u)=>{var h;if(a.path===""||!((h=a.path)!=null&&h.includes("?")))s(a,u);else for(let f of ES(a.path))s(a,u,f)}),t}function ES(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let u=ES(r.join("/")),h=[];return h.push(...u.map(f=>f===""?a:[a,f].join("/"))),s&&h.push(...u),h.map(f=>e.startsWith("/")&&f===""?"/":f)}function DA(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:HA(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const UA=/^:[\w-]+$/,FA=3,BA=2,VA=1,jA=10,zA=-2,sy=e=>e==="*";function GA(e,t){let n=e.split("/"),r=n.length;return n.some(sy)&&(r+=zA),t&&(r+=BA),n.filter(s=>!sy(s)).reduce((s,a)=>s+(UA.test(a)?FA:a===""?VA:jA),r)}function HA(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function WA(e,t,n){let{routesMeta:r}=e,s={},a="/",u=[];for(let h=0;h<r.length;++h){let f=r[h],p=h===r.length-1,v=a==="/"?t:t.slice(a.length)||"/",y=oy({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},v),w=f.route;if(!y&&p&&n&&!r[r.length-1].route.index&&(y=oy({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},v)),!y)return null;Object.assign(s,y.params),u.push({params:s,pathname:bi([a,y.pathname]),pathnameBase:ZA(bi([a,y.pathnameBase])),route:w}),y.pathnameBase!=="/"&&(a=bi([a,y.pathnameBase]))}return u}function oy(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=qA(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],u=a.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:r.reduce((p,v,y)=>{let{paramName:w,isOptional:P}=v;if(w==="*"){let A=h[y]||"";u=a.slice(0,a.length-A.length).replace(/(.)\/+$/,"$1")}const _=h[y];return P&&!_?p[w]=void 0:p[w]=(_||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:u,pattern:e}}function qA(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),CS(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(r.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function $A(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return CS(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function PS(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function KA(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?lo(e):e;return{pathname:n?n.startsWith("/")?n:QA(n,t):t,search:e_(r),hash:t_(s)}}function QA(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function ph(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function XA(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function YA(e,t){let n=XA(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function JA(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=lo(e):(s=ka({},e),tt(!s.pathname||!s.pathname.includes("?"),ph("?","pathname","search",s)),tt(!s.pathname||!s.pathname.includes("#"),ph("#","pathname","hash",s)),tt(!s.search||!s.search.includes("#"),ph("#","search","hash",s)));let a=e===""||s.pathname==="",u=a?"/":s.pathname,h;if(u==null)h=n;else{let y=t.length-1;if(!r&&u.startsWith("..")){let w=u.split("/");for(;w[0]==="..";)w.shift(),y-=1;s.pathname=w.join("/")}h=y>=0?t[y]:"/"}let f=KA(s,h),p=u&&u!=="/"&&u.endsWith("/"),v=(a||u===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(p||v)&&(f.pathname+="/"),f}const bi=e=>e.join("/").replace(/\/\/+/g,"/"),ZA=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),e_=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,t_=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function n_(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const AS=["post","put","patch","delete"];new Set(AS);const r_=["get",...AS];new Set(r_);/**
 * React Router v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ma(){return Ma=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ma.apply(this,arguments)}const up=D.createContext(null),i_=D.createContext(null),Qu=D.createContext(null),Xu=D.createContext(null),uo=D.createContext({outlet:null,matches:[],isDataRoute:!1}),_S=D.createContext(null);function Yu(){return D.useContext(Xu)!=null}function Ju(){return Yu()||tt(!1),D.useContext(Xu).location}function xS(e){D.useContext(Qu).static||D.useLayoutEffect(e)}function s_(){let{isDataRoute:e}=D.useContext(uo);return e?v_():o_()}function o_(){Yu()||tt(!1);let e=D.useContext(up),{basename:t,future:n,navigator:r}=D.useContext(Qu),{matches:s}=D.useContext(uo),{pathname:a}=Ju(),u=JSON.stringify(YA(s,n.v7_relativeSplatPath)),h=D.useRef(!1);return xS(()=>{h.current=!0}),D.useCallback(function(p,v){if(v===void 0&&(v={}),!h.current)return;if(typeof p=="number"){r.go(p);return}let y=JA(p,JSON.parse(u),a,v.relative==="path");e==null&&t!=="/"&&(y.pathname=y.pathname==="/"?t:bi([t,y.pathname])),(v.replace?r.replace:r.push)(y,v.state,v)},[t,r,u,a,e])}function a_(e,t){return l_(e,t)}function l_(e,t,n,r){Yu()||tt(!1);let{navigator:s}=D.useContext(Qu),{matches:a}=D.useContext(uo),u=a[a.length-1],h=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let p=Ju(),v;if(t){var y;let k=typeof t=="string"?lo(t):t;f==="/"||(y=k.pathname)!=null&&y.startsWith(f)||tt(!1),v=k}else v=p;let w=v.pathname||"/",P=w;if(f!=="/"){let k=f.replace(/^\//,"").split("/");P="/"+w.replace(/^\//,"").split("/").slice(k.length).join("/")}let _=LA(e,{pathname:P}),A=d_(_&&_.map(k=>Object.assign({},k,{params:Object.assign({},h,k.params),pathname:bi([f,s.encodeLocation?s.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?f:bi([f,s.encodeLocation?s.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),a,n,r);return t&&A?D.createElement(Xu.Provider,{value:{location:Ma({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:zr.Pop}},A):A}function u_(){let e=y_(),t=n_(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},t),n?D.createElement("pre",{style:s},n):null,null)}const c_=D.createElement(u_,null);class h_ extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?D.createElement(uo.Provider,{value:this.props.routeContext},D.createElement(_S.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function f_(e){let{routeContext:t,match:n,children:r}=e,s=D.useContext(up);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(uo.Provider,{value:t},r)}function d_(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var a;if(!n)return null;if(n.errors)e=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let u=e,h=(s=n)==null?void 0:s.errors;if(h!=null){let v=u.findIndex(y=>y.route.id&&(h==null?void 0:h[y.route.id])!==void 0);v>=0||tt(!1),u=u.slice(0,Math.min(u.length,v+1))}let f=!1,p=-1;if(n&&r&&r.v7_partialHydration)for(let v=0;v<u.length;v++){let y=u[v];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=v),y.route.id){let{loaderData:w,errors:P}=n,_=y.route.loader&&w[y.route.id]===void 0&&(!P||P[y.route.id]===void 0);if(y.route.lazy||_){f=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}return u.reduceRight((v,y,w)=>{let P,_=!1,A=null,k=null;n&&(P=h&&y.route.id?h[y.route.id]:void 0,A=y.route.errorElement||c_,f&&(p<0&&w===0?(_=!0,k=null):p===w&&(_=!0,k=y.route.hydrateFallbackElement||null)));let C=t.concat(u.slice(0,w+1)),S=()=>{let E;return P?E=A:_?E=k:y.route.Component?E=D.createElement(y.route.Component,null):y.route.element?E=y.route.element:E=v,D.createElement(f_,{match:y,routeContext:{outlet:v,matches:C,isDataRoute:n!=null},children:E})};return n&&(y.route.ErrorBoundary||y.route.errorElement||w===0)?D.createElement(h_,{location:n.location,revalidation:n.revalidation,component:A,error:P,children:S(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):S()},null)}var OS=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(OS||{}),Pu=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Pu||{});function p_(e){let t=D.useContext(up);return t||tt(!1),t}function m_(e){let t=D.useContext(i_);return t||tt(!1),t}function g_(e){let t=D.useContext(uo);return t||tt(!1),t}function kS(e){let t=g_(),n=t.matches[t.matches.length-1];return n.route.id||tt(!1),n.route.id}function y_(){var e;let t=D.useContext(_S),n=m_(Pu.UseRouteError),r=kS(Pu.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function v_(){let{router:e}=p_(OS.UseNavigateStable),t=kS(Pu.UseNavigateStable),n=D.useRef(!1);return xS(()=>{n.current=!0}),D.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Ma({fromRouteId:t},a)))},[e,t])}function Mf(e){tt(!1)}function w_(e){let{basename:t="/",children:n=null,location:r,navigationType:s=zr.Pop,navigator:a,static:u=!1,future:h}=e;Yu()&&tt(!1);let f=t.replace(/^\/*/,"/"),p=D.useMemo(()=>({basename:f,navigator:a,static:u,future:Ma({v7_relativeSplatPath:!1},h)}),[f,h,a,u]);typeof r=="string"&&(r=lo(r));let{pathname:v="/",search:y="",hash:w="",state:P=null,key:_="default"}=r,A=D.useMemo(()=>{let k=PS(v,f);return k==null?null:{location:{pathname:k,search:y,hash:w,state:P,key:_},navigationType:s}},[f,v,y,w,P,_,s]);return A==null?null:D.createElement(Qu.Provider,{value:p},D.createElement(Xu.Provider,{children:n,value:A}))}function S_(e){let{children:t,location:n}=e;return a_(bf(t),n)}new Promise(()=>{});function bf(e,t){t===void 0&&(t=[]);let n=[];return D.Children.forEach(e,(r,s)=>{if(!D.isValidElement(r))return;let a=[...t,s];if(r.type===D.Fragment){n.push.apply(n,bf(r.props.children,a));return}r.type!==Mf&&tt(!1),!r.props.index||!r.props.children||tt(!1);let u={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=bf(r.props.children,a)),n.push(u)}),n}/**
 * React Router DOM v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function If(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function C_(e,t){let n=If(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(a=>{n.append(s,a)})}),n}const T_="6";try{window.__reactRouterVersion=T_}catch{}const R_="startTransition",ay=wE[R_];function E_(e){let{basename:t,children:n,future:r,window:s}=e,a=D.useRef();a.current==null&&(a.current=MA({window:s,v5Compat:!0}));let u=a.current,[h,f]=D.useState({action:u.action,location:u.location}),{v7_startTransition:p}=r||{},v=D.useCallback(y=>{p&&ay?ay(()=>f(y)):f(y)},[f,p]);return D.useLayoutEffect(()=>u.listen(v),[u,v]),D.createElement(w_,{basename:t,children:n,location:h.location,navigationType:h.action,navigator:u,future:r})}var ly;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ly||(ly={}));var uy;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(uy||(uy={}));function P_(e){let t=D.useRef(If(e)),n=D.useRef(!1),r=Ju(),s=D.useMemo(()=>C_(r.search,n.current?null:t.current),[r.search]),a=s_(),u=D.useCallback((h,f)=>{const p=If(typeof h=="function"?h(s):h);n.current=!0,a("?"+p,f)},[a,s]);return[s,u]}const A_="modulepreload",__=function(e){return"/we-can-no-longer-be-silent/"+e},cy={},x_=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),u=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.all(n.map(h=>{if(h=__(h),h in cy)return;cy[h]=!0;const f=h.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${p}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":A_,f||(v.as="script",v.crossOrigin=""),v.href=h,u&&v.setAttribute("nonce",u),document.head.appendChild(v),f)return new Promise((y,w)=>{v.addEventListener("load",y),v.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${h}`)))})}))}return s.then(()=>t()).catch(a=>{const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=a,window.dispatchEvent(u),!u.defaultPrevented)throw a})},MS=[{className:"font-bebas",fontName:"Bebas Neue"},{className:"font-josefin",fontName:"Josefin Sans"},{className:"font-rubik",fontName:"Rubik Mono One"},{className:"font-xanh",fontName:"Xanh Mono"},{className:"font-viaoda",fontName:"Viaoda Libre"},{className:"font-actayCondensed",fontName:"Actay Condensed"},{className:"font-actayWide",fontName:"Actay Wide"},{className:"font-cucurucho",fontName:"Cucurucho"},{className:"font-missionControl",fontName:"Mission Control"},{className:"font-ultraprint",fontName:"Ultraprint"},{className:"font-ztFormom",fontName:"ZT Formom"}],hy=MS.map(e=>e.className);/*! @license DOMPurify 3.1.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.6/LICENSE */const{entries:bS,setPrototypeOf:fy,isFrozen:O_,getPrototypeOf:k_,getOwnPropertyDescriptor:M_}=Object;let{freeze:_t,seal:hn,create:IS}=Object,{apply:Lf,construct:Nf}=typeof Reflect<"u"&&Reflect;_t||(_t=function(t){return t});hn||(hn=function(t){return t});Lf||(Lf=function(t,n,r){return t.apply(n,r)});Nf||(Nf=function(t,n){return new t(...n)});const Ml=Qt(Array.prototype.forEach),dy=Qt(Array.prototype.pop),Bo=Qt(Array.prototype.push),Ql=Qt(String.prototype.toLowerCase),mh=Qt(String.prototype.toString),py=Qt(String.prototype.match),Vo=Qt(String.prototype.replace),b_=Qt(String.prototype.indexOf),I_=Qt(String.prototype.trim),mn=Qt(Object.prototype.hasOwnProperty),Tt=Qt(RegExp.prototype.test),jo=L_(TypeError);function Qt(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return Lf(e,t,r)}}function L_(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Nf(e,n)}}function me(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ql;fy&&fy(e,null);let r=t.length;for(;r--;){let s=t[r];if(typeof s=="string"){const a=n(s);a!==s&&(O_(t)||(t[r]=a),s=a)}e[s]=!0}return e}function N_(e){for(let t=0;t<e.length;t++)mn(e,t)||(e[t]=null);return e}function mi(e){const t=IS(null);for(const[n,r]of bS(e))mn(e,n)&&(Array.isArray(r)?t[n]=N_(r):r&&typeof r=="object"&&r.constructor===Object?t[n]=mi(r):t[n]=r);return t}function zo(e,t){for(;e!==null;){const r=M_(e,t);if(r){if(r.get)return Qt(r.get);if(typeof r.value=="function")return Qt(r.value)}e=k_(e)}function n(){return null}return n}const my=_t(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),gh=_t(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),yh=_t(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),D_=_t(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),vh=_t(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),U_=_t(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),gy=_t(["#text"]),yy=_t(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),wh=_t(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),vy=_t(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),bl=_t(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),F_=hn(/\{\{[\w\W]*|[\w\W]*\}\}/gm),B_=hn(/<%[\w\W]*|[\w\W]*%>/gm),V_=hn(/\${[\w\W]*}/gm),j_=hn(/^data-[\-\w.\u00B7-\uFFFF]/),z_=hn(/^aria-[\-\w]+$/),LS=hn(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),G_=hn(/^(?:\w+script|data):/i),H_=hn(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),NS=hn(/^html$/i),W_=hn(/^[a-z][.\w]*(-[.\w]+)+$/i);var wy=Object.freeze({__proto__:null,MUSTACHE_EXPR:F_,ERB_EXPR:B_,TMPLIT_EXPR:V_,DATA_ATTR:j_,ARIA_ATTR:z_,IS_ALLOWED_URI:LS,IS_SCRIPT_OR_DATA:G_,ATTR_WHITESPACE:H_,DOCTYPE_NAME:NS,CUSTOM_ELEMENT:W_});const Go={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},q_=function(){return typeof window>"u"?null:window},$_=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const s="data-tt-policy-suffix";n&&n.hasAttribute(s)&&(r=n.getAttribute(s));const a="dompurify"+(r?"#"+r:"");try{return t.createPolicy(a,{createHTML(u){return u},createScriptURL(u){return u}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}};function DS(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:q_();const t=te=>DS(te);if(t.version="3.1.6",t.removed=[],!e||!e.document||e.document.nodeType!==Go.document)return t.isSupported=!1,t;let{document:n}=e;const r=n,s=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:u,Node:h,Element:f,NodeFilter:p,NamedNodeMap:v=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:y,DOMParser:w,trustedTypes:P}=e,_=f.prototype,A=zo(_,"cloneNode"),k=zo(_,"remove"),C=zo(_,"nextSibling"),S=zo(_,"childNodes"),E=zo(_,"parentNode");if(typeof u=="function"){const te=n.createElement("template");te.content&&te.content.ownerDocument&&(n=te.content.ownerDocument)}let T,I="";const{implementation:V,createNodeIterator:H,createDocumentFragment:F,getElementsByTagName:J}=n,{importNode:X}=r;let m={};t.isSupported=typeof bS=="function"&&typeof E=="function"&&V&&V.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:_e,ERB_EXPR:Ne,TMPLIT_EXPR:N,DATA_ATTR:ue,ARIA_ATTR:Ee,IS_SCRIPT_OR_DATA:Z,ATTR_WHITESPACE:W,CUSTOM_ELEMENT:se}=wy;let{IS_ALLOWED_URI:ie}=wy,ne=null;const re=me({},[...my,...gh,...yh,...vh,...gy]);let ke=null;const jt=me({},[...yy,...wh,...vy,...bl]);let Pe=Object.seal(IS(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ct=null,fn=null,ho=!0,zi=!0,Za=!1,fo=!0,vr=!1,Gn=!0,En=!1,Gi=!1,Hi=!1,Hn=!1,wr=!1,Pn=!1,oi=!0,Wi=!1;const Me="user-content-";let qi=!0,Sr=!1,An={},Wn=null;const po=me({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let nt=null;const kt=me({},["audio","video","img","source","image","track"]);let Mt=null;const $i=me({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ai="http://www.w3.org/1998/Math/MathML",li="http://www.w3.org/2000/svg",Zt="http://www.w3.org/1999/xhtml";let _n=Zt,ui=!1,Ki=null;const el=me({},[ai,li,Zt],mh);let xn=null;const tl=["application/xhtml+xml","text/html"],Qi="text/html";let Se=null,qn=null;const nl=n.createElement("form"),rl=function(O){return O instanceof RegExp||O instanceof Function},$e=function(){let O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(qn&&qn===O)){if((!O||typeof O!="object")&&(O={}),O=mi(O),xn=tl.indexOf(O.PARSER_MEDIA_TYPE)===-1?Qi:O.PARSER_MEDIA_TYPE,Se=xn==="application/xhtml+xml"?mh:Ql,ne=mn(O,"ALLOWED_TAGS")?me({},O.ALLOWED_TAGS,Se):re,ke=mn(O,"ALLOWED_ATTR")?me({},O.ALLOWED_ATTR,Se):jt,Ki=mn(O,"ALLOWED_NAMESPACES")?me({},O.ALLOWED_NAMESPACES,mh):el,Mt=mn(O,"ADD_URI_SAFE_ATTR")?me(mi($i),O.ADD_URI_SAFE_ATTR,Se):$i,nt=mn(O,"ADD_DATA_URI_TAGS")?me(mi(kt),O.ADD_DATA_URI_TAGS,Se):kt,Wn=mn(O,"FORBID_CONTENTS")?me({},O.FORBID_CONTENTS,Se):po,Ct=mn(O,"FORBID_TAGS")?me({},O.FORBID_TAGS,Se):{},fn=mn(O,"FORBID_ATTR")?me({},O.FORBID_ATTR,Se):{},An=mn(O,"USE_PROFILES")?O.USE_PROFILES:!1,ho=O.ALLOW_ARIA_ATTR!==!1,zi=O.ALLOW_DATA_ATTR!==!1,Za=O.ALLOW_UNKNOWN_PROTOCOLS||!1,fo=O.ALLOW_SELF_CLOSE_IN_ATTR!==!1,vr=O.SAFE_FOR_TEMPLATES||!1,Gn=O.SAFE_FOR_XML!==!1,En=O.WHOLE_DOCUMENT||!1,Hn=O.RETURN_DOM||!1,wr=O.RETURN_DOM_FRAGMENT||!1,Pn=O.RETURN_TRUSTED_TYPE||!1,Hi=O.FORCE_BODY||!1,oi=O.SANITIZE_DOM!==!1,Wi=O.SANITIZE_NAMED_PROPS||!1,qi=O.KEEP_CONTENT!==!1,Sr=O.IN_PLACE||!1,ie=O.ALLOWED_URI_REGEXP||LS,_n=O.NAMESPACE||Zt,Pe=O.CUSTOM_ELEMENT_HANDLING||{},O.CUSTOM_ELEMENT_HANDLING&&rl(O.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Pe.tagNameCheck=O.CUSTOM_ELEMENT_HANDLING.tagNameCheck),O.CUSTOM_ELEMENT_HANDLING&&rl(O.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Pe.attributeNameCheck=O.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),O.CUSTOM_ELEMENT_HANDLING&&typeof O.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Pe.allowCustomizedBuiltInElements=O.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),vr&&(zi=!1),wr&&(Hn=!0),An&&(ne=me({},gy),ke=[],An.html===!0&&(me(ne,my),me(ke,yy)),An.svg===!0&&(me(ne,gh),me(ke,wh),me(ke,bl)),An.svgFilters===!0&&(me(ne,yh),me(ke,wh),me(ke,bl)),An.mathMl===!0&&(me(ne,vh),me(ke,vy),me(ke,bl))),O.ADD_TAGS&&(ne===re&&(ne=mi(ne)),me(ne,O.ADD_TAGS,Se)),O.ADD_ATTR&&(ke===jt&&(ke=mi(ke)),me(ke,O.ADD_ATTR,Se)),O.ADD_URI_SAFE_ATTR&&me(Mt,O.ADD_URI_SAFE_ATTR,Se),O.FORBID_CONTENTS&&(Wn===po&&(Wn=mi(Wn)),me(Wn,O.FORBID_CONTENTS,Se)),qi&&(ne["#text"]=!0),En&&me(ne,["html","head","body"]),ne.table&&(me(ne,["tbody"]),delete Ct.tbody),O.TRUSTED_TYPES_POLICY){if(typeof O.TRUSTED_TYPES_POLICY.createHTML!="function")throw jo('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof O.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw jo('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');T=O.TRUSTED_TYPES_POLICY,I=T.createHTML("")}else T===void 0&&(T=$_(P,s)),T!==null&&typeof I=="string"&&(I=T.createHTML(""));_t&&_t(O),qn=O}},mo=me({},["mi","mo","mn","ms","mtext"]),il=me({},["foreignobject","annotation-xml"]),uc=me({},["title","style","font","a","script"]),go=me({},[...gh,...yh,...D_]),yo=me({},[...vh,...U_]),cc=function(O){let G=E(O);(!G||!G.tagName)&&(G={namespaceURI:_n,tagName:"template"});const Q=Ql(O.tagName),le=Ql(G.tagName);return Ki[O.namespaceURI]?O.namespaceURI===li?G.namespaceURI===Zt?Q==="svg":G.namespaceURI===ai?Q==="svg"&&(le==="annotation-xml"||mo[le]):!!go[Q]:O.namespaceURI===ai?G.namespaceURI===Zt?Q==="math":G.namespaceURI===li?Q==="math"&&il[le]:!!yo[Q]:O.namespaceURI===Zt?G.namespaceURI===li&&!il[le]||G.namespaceURI===ai&&!mo[le]?!1:!yo[Q]&&(uc[Q]||!go[Q]):!!(xn==="application/xhtml+xml"&&Ki[O.namespaceURI]):!1},zt=function(O){Bo(t.removed,{element:O});try{E(O).removeChild(O)}catch{k(O)}},Xi=function(O,G){try{Bo(t.removed,{attribute:G.getAttributeNode(O),from:G})}catch{Bo(t.removed,{attribute:null,from:G})}if(G.removeAttribute(O),O==="is"&&!ke[O])if(Hn||wr)try{zt(G)}catch{}else try{G.setAttribute(O,"")}catch{}},sl=function(O){let G=null,Q=null;if(Hi)O="<remove></remove>"+O;else{const Xe=py(O,/^[\r\n\t ]+/);Q=Xe&&Xe[0]}xn==="application/xhtml+xml"&&_n===Zt&&(O='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+O+"</body></html>");const le=T?T.createHTML(O):O;if(_n===Zt)try{G=new w().parseFromString(le,xn)}catch{}if(!G||!G.documentElement){G=V.createDocument(_n,"template",null);try{G.documentElement.innerHTML=ui?I:le}catch{}}const Qe=G.body||G.documentElement;return O&&Q&&Qe.insertBefore(n.createTextNode(Q),Qe.childNodes[0]||null),_n===Zt?J.call(G,En?"html":"body")[0]:En?G.documentElement:Qe},Yi=function(O){return H.call(O.ownerDocument||O,O,p.SHOW_ELEMENT|p.SHOW_COMMENT|p.SHOW_TEXT|p.SHOW_PROCESSING_INSTRUCTION|p.SHOW_CDATA_SECTION,null)},ol=function(O){return O instanceof y&&(typeof O.nodeName!="string"||typeof O.textContent!="string"||typeof O.removeChild!="function"||!(O.attributes instanceof v)||typeof O.removeAttribute!="function"||typeof O.setAttribute!="function"||typeof O.namespaceURI!="string"||typeof O.insertBefore!="function"||typeof O.hasChildNodes!="function")},al=function(O){return typeof h=="function"&&O instanceof h},bt=function(O,G,Q){m[O]&&Ml(m[O],le=>{le.call(t,G,Q,qn)})},vo=function(O){let G=null;if(bt("beforeSanitizeElements",O,null),ol(O))return zt(O),!0;const Q=Se(O.nodeName);if(bt("uponSanitizeElement",O,{tagName:Q,allowedTags:ne}),O.hasChildNodes()&&!al(O.firstElementChild)&&Tt(/<[/\w]/g,O.innerHTML)&&Tt(/<[/\w]/g,O.textContent)||O.nodeType===Go.progressingInstruction||Gn&&O.nodeType===Go.comment&&Tt(/<[/\w]/g,O.data))return zt(O),!0;if(!ne[Q]||Ct[Q]){if(!Ct[Q]&&ll(Q)&&(Pe.tagNameCheck instanceof RegExp&&Tt(Pe.tagNameCheck,Q)||Pe.tagNameCheck instanceof Function&&Pe.tagNameCheck(Q)))return!1;if(qi&&!Wn[Q]){const le=E(O)||O.parentNode,Qe=S(O)||O.childNodes;if(Qe&&le){const Xe=Qe.length;for(let Ye=Xe-1;Ye>=0;--Ye){const It=A(Qe[Ye],!0);It.__removalCount=(O.__removalCount||0)+1,le.insertBefore(It,C(O))}}}return zt(O),!0}return O instanceof f&&!cc(O)||(Q==="noscript"||Q==="noembed"||Q==="noframes")&&Tt(/<\/no(script|embed|frames)/i,O.innerHTML)?(zt(O),!0):(vr&&O.nodeType===Go.text&&(G=O.textContent,Ml([_e,Ne,N],le=>{G=Vo(G,le," ")}),O.textContent!==G&&(Bo(t.removed,{element:O.cloneNode()}),O.textContent=G)),bt("afterSanitizeElements",O,null),!1)},ci=function(O,G,Q){if(oi&&(G==="id"||G==="name")&&(Q in n||Q in nl))return!1;if(!(zi&&!fn[G]&&Tt(ue,G))){if(!(ho&&Tt(Ee,G))){if(!ke[G]||fn[G]){if(!(ll(O)&&(Pe.tagNameCheck instanceof RegExp&&Tt(Pe.tagNameCheck,O)||Pe.tagNameCheck instanceof Function&&Pe.tagNameCheck(O))&&(Pe.attributeNameCheck instanceof RegExp&&Tt(Pe.attributeNameCheck,G)||Pe.attributeNameCheck instanceof Function&&Pe.attributeNameCheck(G))||G==="is"&&Pe.allowCustomizedBuiltInElements&&(Pe.tagNameCheck instanceof RegExp&&Tt(Pe.tagNameCheck,Q)||Pe.tagNameCheck instanceof Function&&Pe.tagNameCheck(Q))))return!1}else if(!Mt[G]){if(!Tt(ie,Vo(Q,W,""))){if(!((G==="src"||G==="xlink:href"||G==="href")&&O!=="script"&&b_(Q,"data:")===0&&nt[O])){if(!(Za&&!Tt(Z,Vo(Q,W,"")))){if(Q)return!1}}}}}}return!0},ll=function(O){return O!=="annotation-xml"&&py(O,se)},ul=function(O){bt("beforeSanitizeAttributes",O,null);const{attributes:G}=O;if(!G)return;const Q={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ke};let le=G.length;for(;le--;){const Qe=G[le],{name:Xe,namespaceURI:Ye,value:It}=Qe,hi=Se(Xe);let st=Xe==="value"?It:I_(It);if(Q.attrName=hi,Q.attrValue=st,Q.keepAttr=!0,Q.forceKeepAttr=void 0,bt("uponSanitizeAttribute",O,Q),st=Q.attrValue,Gn&&Tt(/((--!?|])>)|<\/(style|title)/i,st)){Xi(Xe,O);continue}if(Q.forceKeepAttr||(Xi(Xe,O),!Q.keepAttr))continue;if(!fo&&Tt(/\/>/i,st)){Xi(Xe,O);continue}vr&&Ml([_e,Ne,N],cl=>{st=Vo(st,cl," ")});const wo=Se(O.nodeName);if(ci(wo,hi,st)){if(Wi&&(hi==="id"||hi==="name")&&(Xi(Xe,O),st=Me+st),T&&typeof P=="object"&&typeof P.getAttributeType=="function"&&!Ye)switch(P.getAttributeType(wo,hi)){case"TrustedHTML":{st=T.createHTML(st);break}case"TrustedScriptURL":{st=T.createScriptURL(st);break}}try{Ye?O.setAttributeNS(Ye,Xe,st):O.setAttribute(Xe,st),ol(O)?zt(O):dy(t.removed)}catch{}}}bt("afterSanitizeAttributes",O,null)},ae=function te(O){let G=null;const Q=Yi(O);for(bt("beforeSanitizeShadowDOM",O,null);G=Q.nextNode();)bt("uponSanitizeShadowNode",G,null),!vo(G)&&(G.content instanceof a&&te(G.content),ul(G));bt("afterSanitizeShadowDOM",O,null)};return t.sanitize=function(te){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},G=null,Q=null,le=null,Qe=null;if(ui=!te,ui&&(te="<!-->"),typeof te!="string"&&!al(te))if(typeof te.toString=="function"){if(te=te.toString(),typeof te!="string")throw jo("dirty is not a string, aborting")}else throw jo("toString is not a function");if(!t.isSupported)return te;if(Gi||$e(O),t.removed=[],typeof te=="string"&&(Sr=!1),Sr){if(te.nodeName){const It=Se(te.nodeName);if(!ne[It]||Ct[It])throw jo("root node is forbidden and cannot be sanitized in-place")}}else if(te instanceof h)G=sl("<!---->"),Q=G.ownerDocument.importNode(te,!0),Q.nodeType===Go.element&&Q.nodeName==="BODY"||Q.nodeName==="HTML"?G=Q:G.appendChild(Q);else{if(!Hn&&!vr&&!En&&te.indexOf("<")===-1)return T&&Pn?T.createHTML(te):te;if(G=sl(te),!G)return Hn?null:Pn?I:""}G&&Hi&&zt(G.firstChild);const Xe=Yi(Sr?te:G);for(;le=Xe.nextNode();)vo(le)||(le.content instanceof a&&ae(le.content),ul(le));if(Sr)return te;if(Hn){if(wr)for(Qe=F.call(G.ownerDocument);G.firstChild;)Qe.appendChild(G.firstChild);else Qe=G;return(ke.shadowroot||ke.shadowrootmode)&&(Qe=X.call(r,Qe,!0)),Qe}let Ye=En?G.outerHTML:G.innerHTML;return En&&ne["!doctype"]&&G.ownerDocument&&G.ownerDocument.doctype&&G.ownerDocument.doctype.name&&Tt(NS,G.ownerDocument.doctype.name)&&(Ye="<!DOCTYPE "+G.ownerDocument.doctype.name+`>
`+Ye),vr&&Ml([_e,Ne,N],It=>{Ye=Vo(Ye,It," ")}),T&&Pn?T.createHTML(Ye):Ye},t.setConfig=function(){let te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$e(te),Gi=!0},t.clearConfig=function(){qn=null,Gi=!1},t.isValidAttribute=function(te,O,G){qn||$e({});const Q=Se(te),le=Se(O);return ci(Q,le,G)},t.addHook=function(te,O){typeof O=="function"&&(m[te]=m[te]||[],Bo(m[te],O))},t.removeHook=function(te){if(m[te])return dy(m[te])},t.removeHooks=function(te){m[te]&&(m[te]=[])},t.removeAllHooks=function(){m={}},t}var Ms=DS();async function K_(e){const t=await fetch("https://script.google.com/macros/s/AKfycbxiTg8e9K17GaHf0INJzTndQ5hsHBG9yrtzkE0N8sa165I1m2I2emoNi6-ShrKZ_9MTvw/exec");if(!t.ok)throw new Error("Network response was not ok");const n=await t.json();console.log(n);const r=n.map(s=>({name:Ms.sanitize(s["Name / Nombre"]),timestamp:Ms.sanitize(s.Timestamp),response:Ms.sanitize(s["What would you say about Femicide? ¿Qué dirías sobre feminicidio?"])}));return e(r),r}function Q_(e){const{data:t}=e,n=JSON.parse(t).event.namedValues;return{name:Ms.sanitize(n["Name / Nombre"][0])||"",timestamp:Ms.sanitize(n.Timestamp[0])||"",response:Ms.sanitize(n["What would you say about Femicide? ¿Qué dirías sobre feminicidio?"][0])||""}}const X_=e=>hy[e%hy.length],Y_=(e,t)=>t==="monitor-1"?e.filter((n,r)=>r%2===0):t==="monitor-2"?e.filter((n,r)=>r%2!==0):e;function J_(e,t){const n=window.innerWidth*.8,r=window.innerHeight*.75,s=16,a=8,u=(e<55?400:200)*(t?3:1),h=e*u,f=s*1.5,p=Math.floor(r/f),v=Math.ceil(h/p);return n/v/a*s}const Z_=e=>e==="1";function ex(){return new Date().toISOString()}var Ka=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},eo=typeof window>"u"||"Deno"in globalThis;function rn(){}function tx(e,t){return typeof e=="function"?e(t):e}function Df(e){return typeof e=="number"&&e>=0&&e!==1/0}function US(e,t){return Math.max(e+(t||0)-Date.now(),0)}function bs(e,t){return typeof e=="function"?e(t):e}function Sn(e,t){return typeof e=="function"?e(t):e}function Sy(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:u,stale:h}=e;if(u){if(r){if(t.queryHash!==cp(u,t.options))return!1}else if(!Ia(t.queryKey,u))return!1}if(n!=="all"){const f=t.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof h=="boolean"&&t.isStale()!==h||s&&s!==t.state.fetchStatus||a&&!a(t))}function Cy(e,t){const{exact:n,status:r,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(ba(t.options.mutationKey)!==ba(a))return!1}else if(!Ia(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function cp(e,t){return((t==null?void 0:t.queryKeyHashFn)||ba)(e)}function ba(e){return JSON.stringify(e,(t,n)=>Ff(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Ia(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!Ia(e[n],t[n])):!1}function FS(e,t){if(e===t)return e;const n=Ty(e)&&Ty(t);if(n||Ff(e)&&Ff(t)){const r=n?e:Object.keys(e),s=r.length,a=n?t:Object.keys(t),u=a.length,h=n?[]:{};let f=0;for(let p=0;p<u;p++){const v=n?p:a[p];(!n&&r.includes(v)||n)&&e[v]===void 0&&t[v]===void 0?(h[v]=void 0,f++):(h[v]=FS(e[v],t[v]),h[v]===e[v]&&e[v]!==void 0&&f++)}return s===u&&f===s?e:h}return t}function Uf(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Ty(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Ff(e){if(!Ry(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Ry(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Ry(e){return Object.prototype.toString.call(e)==="[object Object]"}function nx(e){return new Promise(t=>{setTimeout(t,e)})}function Bf(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?FS(e,t):t}function rx(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function ix(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var BS=Symbol();function VS(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===BS?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Ri,Lr,Ls,Jv,sx=(Jv=class extends Ka{constructor(){super();he(this,Ri);he(this,Lr);he(this,Ls);Y(this,Ls,t=>{if(!eo&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){M(this,Lr)||this.setEventListener(M(this,Ls))}onUnsubscribe(){var t;this.hasListeners()||((t=M(this,Lr))==null||t.call(this),Y(this,Lr,void 0))}setEventListener(t){var n;Y(this,Ls,t),(n=M(this,Lr))==null||n.call(this),Y(this,Lr,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){M(this,Ri)!==t&&(Y(this,Ri,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof M(this,Ri)=="boolean"?M(this,Ri):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Ri=new WeakMap,Lr=new WeakMap,Ls=new WeakMap,Jv),hp=new sx,Ns,Nr,Ds,Zv,ox=(Zv=class extends Ka{constructor(){super();he(this,Ns,!0);he(this,Nr);he(this,Ds);Y(this,Ds,t=>{if(!eo&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){M(this,Nr)||this.setEventListener(M(this,Ds))}onUnsubscribe(){var t;this.hasListeners()||((t=M(this,Nr))==null||t.call(this),Y(this,Nr,void 0))}setEventListener(t){var n;Y(this,Ds,t),(n=M(this,Nr))==null||n.call(this),Y(this,Nr,t(this.setOnline.bind(this)))}setOnline(t){M(this,Ns)!==t&&(Y(this,Ns,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return M(this,Ns)}},Ns=new WeakMap,Nr=new WeakMap,Ds=new WeakMap,Zv),Au=new ox;function ax(e){return Math.min(1e3*2**e,3e4)}function jS(e){return(e??"online")==="online"?Au.isOnline():!0}var zS=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Sh(e){return e instanceof zS}function GS(e){let t=!1,n=0,r=!1,s,a,u;const h=new Promise((C,S)=>{a=C,u=S}),f=C=>{var S;r||(_(new zS(C)),(S=e.abort)==null||S.call(e))},p=()=>{t=!0},v=()=>{t=!1},y=()=>hp.isFocused()&&(e.networkMode==="always"||Au.isOnline())&&e.canRun(),w=()=>jS(e.networkMode)&&e.canRun(),P=C=>{var S;r||(r=!0,(S=e.onSuccess)==null||S.call(e,C),s==null||s(),a(C))},_=C=>{var S;r||(r=!0,(S=e.onError)==null||S.call(e,C),s==null||s(),u(C))},A=()=>new Promise(C=>{var S;s=E=>{(r||y())&&C(E)},(S=e.onPause)==null||S.call(e)}).then(()=>{var C;s=void 0,r||(C=e.onContinue)==null||C.call(e)}),k=()=>{if(r)return;let C;const S=n===0?e.initialPromise:void 0;try{C=S??e.fn()}catch(E){C=Promise.reject(E)}Promise.resolve(C).then(P).catch(E=>{var F;if(r)return;const T=e.retry??(eo?0:3),I=e.retryDelay??ax,V=typeof I=="function"?I(n,E):I,H=T===!0||typeof T=="number"&&n<T||typeof T=="function"&&T(n,E);if(t||!H){_(E);return}n++,(F=e.onFail)==null||F.call(e,n,E),nx(V).then(()=>y()?void 0:A()).then(()=>{t?_(E):k()})})};return{promise:h,cancel:f,continue:()=>(s==null||s(),h),cancelRetry:p,continueRetry:v,canStart:w,start:()=>(w()?k():A().then(k),h)}}function lx(){let e=[],t=0,n=w=>{w()},r=w=>{w()},s=w=>setTimeout(w,0);const a=w=>{s=w},u=w=>{let P;t++;try{P=w()}finally{t--,t||p()}return P},h=w=>{t?e.push(w):s(()=>{n(w)})},f=w=>(...P)=>{h(()=>{w(...P)})},p=()=>{const w=e;e=[],w.length&&s(()=>{r(()=>{w.forEach(P=>{n(P)})})})};return{batch:u,batchCalls:f,schedule:h,setNotifyFunction:w=>{n=w},setBatchNotifyFunction:w=>{r=w},setScheduler:a}}var lt=lx(),Ei,e0,HS=(e0=class{constructor(){he(this,Ei)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Df(this.gcTime)&&Y(this,Ei,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(eo?1/0:5*60*1e3))}clearGcTimeout(){M(this,Ei)&&(clearTimeout(M(this,Ei)),Y(this,Ei,void 0))}},Ei=new WeakMap,e0),Us,Fs,nn,mt,Ba,Pi,yn,Jn,t0,ux=(t0=class extends HS{constructor(t){super();he(this,yn);he(this,Us);he(this,Fs);he(this,nn);he(this,mt);he(this,Ba);he(this,Pi);Y(this,Pi,!1),Y(this,Ba,t.defaultOptions),this.setOptions(t.options),this.observers=[],Y(this,nn,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Y(this,Us,cx(this.options)),this.state=t.state??M(this,Us),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=M(this,mt))==null?void 0:t.promise}setOptions(t){this.options={...M(this,Ba),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&M(this,nn).remove(this)}setData(t,n){const r=Bf(this.state.data,t,this.options);return ye(this,yn,Jn).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){ye(this,yn,Jn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=M(this,mt))==null?void 0:r.promise;return(s=M(this,mt))==null||s.cancel(t),n?n.then(rn).catch(rn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(M(this,Us))}isActive(){return this.observers.some(t=>Sn(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!US(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=M(this,mt))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=M(this,mt))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),M(this,nn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(M(this,mt)&&(M(this,Pi)?M(this,mt).cancel({revert:!0}):M(this,mt).cancelRetry()),this.scheduleGc()),M(this,nn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ye(this,yn,Jn).call(this,{type:"invalidate"})}fetch(t,n){var f,p,v;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(M(this,mt))return M(this,mt).continueRetry(),M(this,mt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const y=this.observers.find(w=>w.options.queryFn);y&&this.setOptions(y.options)}const r=new AbortController,s=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(Y(this,Pi,!0),r.signal)})},a=()=>{const y=VS(this.options,n),w={queryKey:this.queryKey,meta:this.meta};return s(w),Y(this,Pi,!1),this.options.persister?this.options.persister(y,w,this):y(w)},u={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};s(u),(f=this.options.behavior)==null||f.onFetch(u,this),Y(this,Fs,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((p=u.fetchOptions)==null?void 0:p.meta))&&ye(this,yn,Jn).call(this,{type:"fetch",meta:(v=u.fetchOptions)==null?void 0:v.meta});const h=y=>{var w,P,_,A;Sh(y)&&y.silent||ye(this,yn,Jn).call(this,{type:"error",error:y}),Sh(y)||((P=(w=M(this,nn).config).onError)==null||P.call(w,y,this),(A=(_=M(this,nn).config).onSettled)==null||A.call(_,this.state.data,y,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return Y(this,mt,GS({initialPromise:n==null?void 0:n.initialPromise,fn:u.fetchFn,abort:r.abort.bind(r),onSuccess:y=>{var w,P,_,A;if(y===void 0){h(new Error(`${this.queryHash} data is undefined`));return}this.setData(y),(P=(w=M(this,nn).config).onSuccess)==null||P.call(w,y,this),(A=(_=M(this,nn).config).onSettled)==null||A.call(_,y,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:h,onFail:(y,w)=>{ye(this,yn,Jn).call(this,{type:"failed",failureCount:y,error:w})},onPause:()=>{ye(this,yn,Jn).call(this,{type:"pause"})},onContinue:()=>{ye(this,yn,Jn).call(this,{type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0})),M(this,mt).start()}},Us=new WeakMap,Fs=new WeakMap,nn=new WeakMap,mt=new WeakMap,Ba=new WeakMap,Pi=new WeakMap,yn=new WeakSet,Jn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...WS(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return Sh(s)&&s.revert&&M(this,Fs)?{...M(this,Fs),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),lt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),M(this,nn).notify({query:this,type:"updated",action:t})})},t0);function WS(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:jS(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function cx(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Nn,n0,hx=(n0=class extends Ka{constructor(t={}){super();he(this,Nn);this.config=t,Y(this,Nn,new Map)}build(t,n,r){const s=n.queryKey,a=n.queryHash??cp(s,n);let u=this.get(a);return u||(u=new ux({cache:this,queryKey:s,queryHash:a,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(u)),u}add(t){M(this,Nn).has(t.queryHash)||(M(this,Nn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=M(this,Nn).get(t.queryHash);n&&(t.destroy(),n===t&&M(this,Nn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){lt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return M(this,Nn).get(t)}getAll(){return[...M(this,Nn).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Sy(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>Sy(t,r)):n}notify(t){lt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){lt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){lt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Nn=new WeakMap,n0),Dn,Rt,Ai,Un,_r,r0,fx=(r0=class extends HS{constructor(t){super();he(this,Un);he(this,Dn);he(this,Rt);he(this,Ai);this.mutationId=t.mutationId,Y(this,Rt,t.mutationCache),Y(this,Dn,[]),this.state=t.state||dx(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){M(this,Dn).includes(t)||(M(this,Dn).push(t),this.clearGcTimeout(),M(this,Rt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Y(this,Dn,M(this,Dn).filter(n=>n!==t)),this.scheduleGc(),M(this,Rt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){M(this,Dn).length||(this.state.status==="pending"?this.scheduleGc():M(this,Rt).remove(this))}continue(){var t;return((t=M(this,Ai))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,a,u,h,f,p,v,y,w,P,_,A,k,C,S,E,T,I,V,H;Y(this,Ai,GS({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(F,J)=>{ye(this,Un,_r).call(this,{type:"failed",failureCount:F,error:J})},onPause:()=>{ye(this,Un,_r).call(this,{type:"pause"})},onContinue:()=>{ye(this,Un,_r).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>M(this,Rt).canRun(this)}));const n=this.state.status==="pending",r=!M(this,Ai).canStart();try{if(!n){ye(this,Un,_r).call(this,{type:"pending",variables:t,isPaused:r}),await((a=(s=M(this,Rt).config).onMutate)==null?void 0:a.call(s,t,this));const J=await((h=(u=this.options).onMutate)==null?void 0:h.call(u,t));J!==this.state.context&&ye(this,Un,_r).call(this,{type:"pending",context:J,variables:t,isPaused:r})}const F=await M(this,Ai).start();return await((p=(f=M(this,Rt).config).onSuccess)==null?void 0:p.call(f,F,t,this.state.context,this)),await((y=(v=this.options).onSuccess)==null?void 0:y.call(v,F,t,this.state.context)),await((P=(w=M(this,Rt).config).onSettled)==null?void 0:P.call(w,F,null,this.state.variables,this.state.context,this)),await((A=(_=this.options).onSettled)==null?void 0:A.call(_,F,null,t,this.state.context)),ye(this,Un,_r).call(this,{type:"success",data:F}),F}catch(F){try{throw await((C=(k=M(this,Rt).config).onError)==null?void 0:C.call(k,F,t,this.state.context,this)),await((E=(S=this.options).onError)==null?void 0:E.call(S,F,t,this.state.context)),await((I=(T=M(this,Rt).config).onSettled)==null?void 0:I.call(T,void 0,F,this.state.variables,this.state.context,this)),await((H=(V=this.options).onSettled)==null?void 0:H.call(V,void 0,F,t,this.state.context)),F}finally{ye(this,Un,_r).call(this,{type:"error",error:F})}}finally{M(this,Rt).runNext(this)}}},Dn=new WeakMap,Rt=new WeakMap,Ai=new WeakMap,Un=new WeakSet,_r=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),lt.batch(()=>{M(this,Dn).forEach(r=>{r.onMutationUpdate(t)}),M(this,Rt).notify({mutation:this,type:"updated",action:t})})},r0);function dx(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ht,Va,i0,px=(i0=class extends Ka{constructor(t={}){super();he(this,Ht);he(this,Va);this.config=t,Y(this,Ht,new Map),Y(this,Va,Date.now())}build(t,n,r){const s=new fx({mutationCache:this,mutationId:++dl(this,Va)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){const n=Il(t),r=M(this,Ht).get(n)??[];r.push(t),M(this,Ht).set(n,r),this.notify({type:"added",mutation:t})}remove(t){var r;const n=Il(t);if(M(this,Ht).has(n)){const s=(r=M(this,Ht).get(n))==null?void 0:r.filter(a=>a!==t);s&&(s.length===0?M(this,Ht).delete(n):M(this,Ht).set(n,s))}this.notify({type:"removed",mutation:t})}canRun(t){var r;const n=(r=M(this,Ht).get(Il(t)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===t}runNext(t){var r;const n=(r=M(this,Ht).get(Il(t)))==null?void 0:r.find(s=>s!==t&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){lt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...M(this,Ht).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Cy(n,r))}findAll(t={}){return this.getAll().filter(n=>Cy(t,n))}notify(t){lt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return lt.batch(()=>Promise.all(t.map(n=>n.continue().catch(rn))))}},Ht=new WeakMap,Va=new WeakMap,i0);function Il(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function mx(e){return{onFetch:(t,n)=>{const r=async()=>{var _,A,k,C,S;const s=t.options,a=(k=(A=(_=t.fetchOptions)==null?void 0:_.meta)==null?void 0:A.fetchMore)==null?void 0:k.direction,u=((C=t.state.data)==null?void 0:C.pages)||[],h=((S=t.state.data)==null?void 0:S.pageParams)||[],f={pages:[],pageParams:[]};let p=!1;const v=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(t.signal.aborted?p=!0:t.signal.addEventListener("abort",()=>{p=!0}),t.signal)})},y=VS(t.options,t.fetchOptions),w=async(E,T,I)=>{if(p)return Promise.reject();if(T==null&&E.pages.length)return Promise.resolve(E);const V={queryKey:t.queryKey,pageParam:T,direction:I?"backward":"forward",meta:t.options.meta};v(V);const H=await y(V),{maxPages:F}=t.options,J=I?ix:rx;return{pages:J(E.pages,H,F),pageParams:J(E.pageParams,T,F)}};let P;if(a&&u.length){const E=a==="backward",T=E?gx:Ey,I={pages:u,pageParams:h},V=T(s,I);P=await w(I,V,E)}else{P=await w(f,h[0]??s.initialPageParam);const E=e??u.length;for(let T=1;T<E;T++){const I=Ey(s,P);if(I==null)break;P=await w(P,I)}}return P};t.options.persister?t.fetchFn=()=>{var s,a;return(a=(s=t.options).persister)==null?void 0:a.call(s,r,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=r}}}function Ey(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function gx(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var je,Dr,Ur,Bs,Vs,Fr,js,zs,s0,yx=(s0=class{constructor(e={}){he(this,je);he(this,Dr);he(this,Ur);he(this,Bs);he(this,Vs);he(this,Fr);he(this,js);he(this,zs);Y(this,je,e.queryCache||new hx),Y(this,Dr,e.mutationCache||new px),Y(this,Ur,e.defaultOptions||{}),Y(this,Bs,new Map),Y(this,Vs,new Map),Y(this,Fr,0)}mount(){dl(this,Fr)._++,M(this,Fr)===1&&(Y(this,js,hp.subscribe(async e=>{e&&(await this.resumePausedMutations(),M(this,je).onFocus())})),Y(this,zs,Au.subscribe(async e=>{e&&(await this.resumePausedMutations(),M(this,je).onOnline())})))}unmount(){var e,t;dl(this,Fr)._--,M(this,Fr)===0&&((e=M(this,js))==null||e.call(this),Y(this,js,void 0),(t=M(this,zs))==null||t.call(this),Y(this,zs,void 0))}isFetching(e){return M(this,je).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return M(this,Dr).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=M(this,je).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=M(this,je).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(bs(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return M(this,je).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=M(this,je).get(r.queryHash),a=s==null?void 0:s.state.data,u=tx(t,a);if(u!==void 0)return M(this,je).build(this,r).setData(u,{...n,manual:!0})}setQueriesData(e,t,n){return lt.batch(()=>M(this,je).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=M(this,je).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=M(this,je);lt.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=M(this,je),r={type:"active",...e};return lt.batch(()=>(n.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=lt.batch(()=>M(this,je).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(rn).catch(rn)}invalidateQueries(e={},t={}){return lt.batch(()=>{if(M(this,je).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},r=lt.batch(()=>M(this,je).findAll(e).filter(s=>!s.isDisabled()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(rn)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(rn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=M(this,je).build(this,t);return n.isStaleByTime(bs(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(rn).catch(rn)}fetchInfiniteQuery(e){return e.behavior=mx(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(rn).catch(rn)}resumePausedMutations(){return Au.isOnline()?M(this,Dr).resumePausedMutations():Promise.resolve()}getQueryCache(){return M(this,je)}getMutationCache(){return M(this,Dr)}getDefaultOptions(){return M(this,Ur)}setDefaultOptions(e){Y(this,Ur,e)}setQueryDefaults(e,t){M(this,Bs).set(ba(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...M(this,Bs).values()];let n={};return t.forEach(r=>{Ia(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){M(this,Vs).set(ba(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...M(this,Vs).values()];let n={};return t.forEach(r=>{Ia(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...M(this,Ur).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=cp(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===BS&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...M(this,Ur).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){M(this,je).clear(),M(this,Dr).clear()}},je=new WeakMap,Dr=new WeakMap,Ur=new WeakMap,Bs=new WeakMap,Vs=new WeakMap,Fr=new WeakMap,js=new WeakMap,zs=new WeakMap,s0),Nt,ve,ja,Et,_i,Gs,Fn,za,Hs,Ws,xi,Oi,Br,qs,Ce,Qo,Vf,jf,zf,Gf,Hf,Wf,qf,qS,o0,vx=(o0=class extends Ka{constructor(t,n){super();he(this,Ce);he(this,Nt);he(this,ve);he(this,ja);he(this,Et);he(this,_i);he(this,Gs);he(this,Fn);he(this,za);he(this,Hs);he(this,Ws);he(this,xi);he(this,Oi);he(this,Br);he(this,qs,new Set);this.options=n,Y(this,Nt,t),Y(this,Fn,null),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(M(this,ve).addObserver(this),Py(M(this,ve),this.options)?ye(this,Ce,Qo).call(this):this.updateResult(),ye(this,Ce,Gf).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return $f(M(this,ve),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return $f(M(this,ve),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ye(this,Ce,Hf).call(this),ye(this,Ce,Wf).call(this),M(this,ve).removeObserver(this)}setOptions(t,n){const r=this.options,s=M(this,ve);if(this.options=M(this,Nt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Sn(this.options.enabled,M(this,ve))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ye(this,Ce,qf).call(this),M(this,ve).setOptions(this.options),r._defaulted&&!Uf(this.options,r)&&M(this,Nt).getQueryCache().notify({type:"observerOptionsUpdated",query:M(this,ve),observer:this});const a=this.hasListeners();a&&Ay(M(this,ve),s,this.options,r)&&ye(this,Ce,Qo).call(this),this.updateResult(n),a&&(M(this,ve)!==s||Sn(this.options.enabled,M(this,ve))!==Sn(r.enabled,M(this,ve))||bs(this.options.staleTime,M(this,ve))!==bs(r.staleTime,M(this,ve)))&&ye(this,Ce,Vf).call(this);const u=ye(this,Ce,jf).call(this);a&&(M(this,ve)!==s||Sn(this.options.enabled,M(this,ve))!==Sn(r.enabled,M(this,ve))||u!==M(this,Br))&&ye(this,Ce,zf).call(this,u)}getOptimisticResult(t){const n=M(this,Nt).getQueryCache().build(M(this,Nt),t),r=this.createResult(n,t);return Sx(this,r)&&(Y(this,Et,r),Y(this,Gs,this.options),Y(this,_i,M(this,ve).state)),r}getCurrentResult(){return M(this,Et)}trackResult(t,n){const r={};return Object.keys(t).forEach(s=>{Object.defineProperty(r,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),n==null||n(s),t[s])})}),r}trackProp(t){M(this,qs).add(t)}getCurrentQuery(){return M(this,ve)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=M(this,Nt).defaultQueryOptions(t),r=M(this,Nt).getQueryCache().build(M(this,Nt),n);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,n))}fetch(t){return ye(this,Ce,Qo).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),M(this,Et)))}createResult(t,n){var H;const r=M(this,ve),s=this.options,a=M(this,Et),u=M(this,_i),h=M(this,Gs),p=t!==r?t.state:M(this,ja),{state:v}=t;let y={...v},w=!1,P;if(n._optimisticResults){const F=this.hasListeners(),J=!F&&Py(t,n),X=F&&Ay(t,r,n,s);(J||X)&&(y={...y,...WS(v.data,t.options)}),n._optimisticResults==="isRestoring"&&(y.fetchStatus="idle")}let{error:_,errorUpdatedAt:A,status:k}=y;if(n.select&&y.data!==void 0)if(a&&y.data===(u==null?void 0:u.data)&&n.select===M(this,za))P=M(this,Hs);else try{Y(this,za,n.select),P=n.select(y.data),P=Bf(a==null?void 0:a.data,P,n),Y(this,Hs,P),Y(this,Fn,null)}catch(F){Y(this,Fn,F)}else P=y.data;if(n.placeholderData!==void 0&&P===void 0&&k==="pending"){let F;if(a!=null&&a.isPlaceholderData&&n.placeholderData===(h==null?void 0:h.placeholderData))F=a.data;else if(F=typeof n.placeholderData=="function"?n.placeholderData((H=M(this,Ws))==null?void 0:H.state.data,M(this,Ws)):n.placeholderData,n.select&&F!==void 0)try{F=n.select(F),Y(this,Fn,null)}catch(J){Y(this,Fn,J)}F!==void 0&&(k="success",P=Bf(a==null?void 0:a.data,F,n),w=!0)}M(this,Fn)&&(_=M(this,Fn),P=M(this,Hs),A=Date.now(),k="error");const C=y.fetchStatus==="fetching",S=k==="pending",E=k==="error",T=S&&C,I=P!==void 0;return{status:k,fetchStatus:y.fetchStatus,isPending:S,isSuccess:k==="success",isError:E,isInitialLoading:T,isLoading:T,data:P,dataUpdatedAt:y.dataUpdatedAt,error:_,errorUpdatedAt:A,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>p.dataUpdateCount||y.errorUpdateCount>p.errorUpdateCount,isFetching:C,isRefetching:C&&!S,isLoadingError:E&&!I,isPaused:y.fetchStatus==="paused",isPlaceholderData:w,isRefetchError:E&&I,isStale:fp(t,n),refetch:this.refetch}}updateResult(t){const n=M(this,Et),r=this.createResult(M(this,ve),this.options);if(Y(this,_i,M(this,ve).state),Y(this,Gs,this.options),M(this,_i).data!==void 0&&Y(this,Ws,M(this,ve)),Uf(r,n))return;Y(this,Et,r);const s={},a=()=>{if(!n)return!0;const{notifyOnChangeProps:u}=this.options,h=typeof u=="function"?u():u;if(h==="all"||!h&&!M(this,qs).size)return!0;const f=new Set(h??M(this,qs));return this.options.throwOnError&&f.add("error"),Object.keys(M(this,Et)).some(p=>{const v=p;return M(this,Et)[v]!==n[v]&&f.has(v)})};(t==null?void 0:t.listeners)!==!1&&a()&&(s.listeners=!0),ye(this,Ce,qS).call(this,{...s,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ye(this,Ce,Gf).call(this)}},Nt=new WeakMap,ve=new WeakMap,ja=new WeakMap,Et=new WeakMap,_i=new WeakMap,Gs=new WeakMap,Fn=new WeakMap,za=new WeakMap,Hs=new WeakMap,Ws=new WeakMap,xi=new WeakMap,Oi=new WeakMap,Br=new WeakMap,qs=new WeakMap,Ce=new WeakSet,Qo=function(t){ye(this,Ce,qf).call(this);let n=M(this,ve).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(rn)),n},Vf=function(){ye(this,Ce,Hf).call(this);const t=bs(this.options.staleTime,M(this,ve));if(eo||M(this,Et).isStale||!Df(t))return;const r=US(M(this,Et).dataUpdatedAt,t)+1;Y(this,xi,setTimeout(()=>{M(this,Et).isStale||this.updateResult()},r))},jf=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(M(this,ve)):this.options.refetchInterval)??!1},zf=function(t){ye(this,Ce,Wf).call(this),Y(this,Br,t),!(eo||Sn(this.options.enabled,M(this,ve))===!1||!Df(M(this,Br))||M(this,Br)===0)&&Y(this,Oi,setInterval(()=>{(this.options.refetchIntervalInBackground||hp.isFocused())&&ye(this,Ce,Qo).call(this)},M(this,Br)))},Gf=function(){ye(this,Ce,Vf).call(this),ye(this,Ce,zf).call(this,ye(this,Ce,jf).call(this))},Hf=function(){M(this,xi)&&(clearTimeout(M(this,xi)),Y(this,xi,void 0))},Wf=function(){M(this,Oi)&&(clearInterval(M(this,Oi)),Y(this,Oi,void 0))},qf=function(){const t=M(this,Nt).getQueryCache().build(M(this,Nt),this.options);if(t===M(this,ve))return;const n=M(this,ve);Y(this,ve,t),Y(this,ja,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},qS=function(t){lt.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(M(this,Et))}),M(this,Nt).getQueryCache().notify({query:M(this,ve),type:"observerResultsUpdated"})})},o0);function wx(e,t){return Sn(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Py(e,t){return wx(e,t)||e.state.data!==void 0&&$f(e,t,t.refetchOnMount)}function $f(e,t,n){if(Sn(t.enabled,e)!==!1){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&fp(e,t)}return!1}function Ay(e,t,n,r){return(e!==t||Sn(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&fp(e,n)}function fp(e,t){return Sn(t.enabled,e)!==!1&&e.isStaleByTime(bs(t.staleTime,e))}function Sx(e,t){return!Uf(e.getCurrentResult(),t)}var $S=D.createContext(void 0),KS=e=>{const t=D.useContext($S);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Cx=({client:e,children:t})=>(D.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),de.jsx($S.Provider,{value:e,children:t})),QS=D.createContext(!1),Tx=()=>D.useContext(QS);QS.Provider;function Rx(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Ex=D.createContext(Rx()),Px=()=>D.useContext(Ex);function Ax(e,t){return typeof e=="function"?e(...t):!!e}var _x=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},xx=e=>{D.useEffect(()=>{e.clearReset()},[e])},Ox=({result:e,errorResetBoundary:t,throwOnError:n,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&Ax(n,[e.error,r]),kx=e=>{e.suspense&&(typeof e.staleTime!="number"&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},Mx=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,bx=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Ix(e,t,n){var p,v,y,w;const r=KS(),s=Tx(),a=Px(),u=r.defaultQueryOptions(e);(v=(p=r.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||v.call(p,u),u._optimisticResults=s?"isRestoring":"optimistic",kx(u),_x(u,a),xx(a);const[h]=D.useState(()=>new t(r,u)),f=h.getOptimisticResult(u);if(D.useSyncExternalStore(D.useCallback(P=>{const _=s?()=>{}:h.subscribe(lt.batchCalls(P));return h.updateResult(),_},[h,s]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),D.useEffect(()=>{h.setOptions(u,{listeners:!1})},[u,h]),Mx(u,f))throw bx(u,h,a);if(Ox({result:f,errorResetBoundary:a,throwOnError:u.throwOnError,query:r.getQueryCache().get(u.queryHash)}))throw f.error;return(w=(y=r.getDefaultOptions().queries)==null?void 0:y._experimental_afterQuery)==null||w.call(y,u,f),u.notifyOnChangeProps?f:h.trackResult(f)}function Lx(e,t){return Ix(e,vx)}const XS=D.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Zu=D.createContext({}),dp=D.createContext(null),pp=typeof window<"u",Nx=pp?D.useLayoutEffect:D.useEffect,YS=D.createContext({strict:!1}),ec=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Dx="framerAppearId",JS="data-"+ec(Dx),Ux={skipAnimations:!1,useManualTiming:!1};function Fx(e){let t=new Set,n=new Set,r=!1,s=!1;const a=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function h(p){a.has(p)&&(f.schedule(p),e()),p(u)}const f={schedule:(p,v=!1,y=!1)=>{const P=y&&r?t:n;return v&&a.add(p),P.has(p)||P.add(p),p},cancel:p=>{n.delete(p),a.delete(p)},process:p=>{if(u=p,r){s=!0;return}r=!0,[t,n]=[n,t],n.clear(),t.forEach(h),r=!1,s&&(s=!1,f.process(p))}};return f}const Ll=["read","resolveKeyframes","update","preRender","render","postRender"],Bx=40;function ZS(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,u=Ll.reduce((C,S)=>(C[S]=Fx(a),C),{}),{read:h,resolveKeyframes:f,update:p,preRender:v,render:y,postRender:w}=u,P=()=>{const C=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(C-s.timestamp,Bx),1),s.timestamp=C,s.isProcessing=!0,h.process(s),f.process(s),p.process(s),v.process(s),y.process(s),w.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(P))},_=()=>{n=!0,r=!0,s.isProcessing||e(P)};return{schedule:Ll.reduce((C,S)=>{const E=u[S];return C[S]=(T,I=!1,V=!1)=>(n||_(),E.schedule(T,I,V)),C},{}),cancel:C=>{for(let S=0;S<Ll.length;S++)u[Ll[S]].cancel(C)},state:s,steps:u}}const{schedule:mp,cancel:oL}=ZS(queueMicrotask,!1);function Ss(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}const eC=D.createContext({});let _y=!1;function Vx(e,t,n,r,s){var a;const{visualElement:u}=D.useContext(Zu),h=D.useContext(YS),f=D.useContext(dp),p=D.useContext(XS).reducedMotion,v=D.useRef();r=r||h.renderer,!v.current&&r&&(v.current=r(e,{visualState:t,parent:u,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:p}));const y=v.current,w=D.useContext(eC);y&&!y.projection&&s&&(y.type==="html"||y.type==="svg")&&zx(v.current,n,s,w),D.useInsertionEffect(()=>{y&&y.update(n,f)});const P=n[JS],_=D.useRef(!!P&&!window.MotionHandoffIsComplete&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,P)));return Nx(()=>{y&&(y.updateFeatures(),mp.render(y.render),_.current&&y.animationState&&y.animationState.animateChanges())}),D.useEffect(()=>{y&&(!_.current&&y.animationState&&y.animationState.animateChanges(),_.current=!1,_y||(_y=!0,queueMicrotask(jx)))}),y}function jx(){window.MotionHandoffIsComplete=!0}function zx(e,t,n,r){const{layoutId:s,layout:a,drag:u,dragConstraints:h,layoutScroll:f,layoutRoot:p}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:tC(e.parent)),e.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!u||h&&Ss(h),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:f,layoutRoot:p})}function tC(e){if(e)return e.options.allowProjection!==!1?e.projection:tC(e.parent)}function Gx(e,t,n){return D.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Ss(n)&&(n.current=r))},[t])}function La(e){return typeof e=="string"||Array.isArray(e)}function Na(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const gp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],yp=["initial",...gp];function tc(e){return Na(e.animate)||yp.some(t=>La(e[t]))}function nC(e){return!!(tc(e)||e.variants)}function Hx(e,t){if(tc(e)){const{initial:n,animate:r}=e;return{initial:n===!1||La(n)?n:void 0,animate:La(r)?r:void 0}}return e.inherit!==!1?t:{}}function Wx(e){const{initial:t,animate:n}=Hx(e,D.useContext(Zu));return D.useMemo(()=>({initial:t,animate:n}),[xy(t),xy(n)])}function xy(e){return Array.isArray(e)?e.join(" "):e}const Oy={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},to={};for(const e in Oy)to[e]={isEnabled:t=>Oy[e].some(n=>!!t[n])};function qx(e){for(const t in e)to[t]={...to[t],...e[t]}}const rC=D.createContext({}),$x=Symbol.for("motionComponentSymbol"),wt=e=>e;let Kf=wt;function Kx({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:s}){e&&qx(e);function a(h,f){let p;const v={...D.useContext(XS),...h,layoutId:Qx(h)},{isStatic:y}=v,w=Wx(h),P=r(h,y);if(!y&&pp){Xx();const _=Yx(v);p=_.MeasureLayout,w.visualElement=Vx(s,P,v,t,_.ProjectionNode)}return de.jsxs(Zu.Provider,{value:w,children:[p&&w.visualElement?de.jsx(p,{visualElement:w.visualElement,...v}):null,n(s,h,Gx(P,w.visualElement,f),P,y,w.visualElement)]})}const u=D.forwardRef(a);return u[$x]=s,u}function Qx({layoutId:e}){const t=D.useContext(rC).id;return t&&e!==void 0?t+"-"+e:e}function Xx(e,t){D.useContext(YS).strict}function Yx(e){const{drag:t,layout:n}=to;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Jx(e){function t(r,s={}){return Kx(e(r,s))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,s)=>(n.has(s)||n.set(s,t(s)),n.get(s))})}const Zx=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function vp(e){return typeof e!="string"||e.includes("-")?!1:!!(Zx.indexOf(e)>-1||/[A-Z]/u.test(e))}const _u={};function eO(e){Object.assign(_u,e)}const Qa=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ii=new Set(Qa);function iC(e,{layout:t,layoutId:n}){return ii.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!_u[e]||e==="opacity")}const vt=e=>!!(e&&e.getVelocity),sC=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Zr=(e,t,n)=>n>t?t:n<e?e:n,co={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ua={...co,transform:e=>Zr(0,1,e)},Nl={...co,default:1},ca=e=>Math.round(e*1e5)/1e5,wp=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,tO=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,nO=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu;function Xa(e){return typeof e=="string"}function rO(e){return e==null}const Ya=e=>({test:t=>Xa(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),xr=Ya("deg"),zn=Ya("%"),oe=Ya("px"),iO=Ya("vh"),sO=Ya("vw"),ky={...zn,parse:e=>zn.parse(e)/100,transform:e=>zn.transform(e*100)},My={...co,transform:Math.round},Sp={borderWidth:oe,borderTopWidth:oe,borderRightWidth:oe,borderBottomWidth:oe,borderLeftWidth:oe,borderRadius:oe,radius:oe,borderTopLeftRadius:oe,borderTopRightRadius:oe,borderBottomRightRadius:oe,borderBottomLeftRadius:oe,width:oe,maxWidth:oe,height:oe,maxHeight:oe,size:oe,top:oe,right:oe,bottom:oe,left:oe,padding:oe,paddingTop:oe,paddingRight:oe,paddingBottom:oe,paddingLeft:oe,margin:oe,marginTop:oe,marginRight:oe,marginBottom:oe,marginLeft:oe,rotate:xr,rotateX:xr,rotateY:xr,rotateZ:xr,scale:Nl,scaleX:Nl,scaleY:Nl,scaleZ:Nl,skew:xr,skewX:xr,skewY:xr,distance:oe,translateX:oe,translateY:oe,translateZ:oe,x:oe,y:oe,z:oe,perspective:oe,transformPerspective:oe,opacity:ua,originX:ky,originY:ky,originZ:oe,zIndex:My,backgroundPositionX:oe,backgroundPositionY:oe,fillOpacity:ua,strokeOpacity:ua,numOctaves:My},oO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},aO=Qa.length;function lO(e,t,n){let r="",s=!0;for(let a=0;a<aO;a++){const u=Qa[a],h=e[u];if(h===void 0)continue;let f=!0;if(typeof h=="number"?f=h===(u.startsWith("scale")?1:0):f=parseFloat(h)===0,!f||n){const p=sC(h,Sp[u]);if(!f){s=!1;const v=oO[u]||u;r+=`${v}(${p}) `}n&&(t[u]=p)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}const oC=e=>t=>typeof t=="string"&&t.startsWith(e),aC=oC("--"),uO=oC("var(--"),Cp=e=>uO(e)?cO.test(e.split("/*")[0].trim()):!1,cO=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function Tp(e,t,n){const{style:r,vars:s,transformOrigin:a}=e;let u=!1,h=!1;for(const f in t){const p=t[f];if(ii.has(f)){u=!0;continue}else if(aC(f)){s[f]=p;continue}else{const v=sC(p,Sp[f]);f.startsWith("origin")?(h=!0,a[f]=v):r[f]=v}}if(t.transform||(u||n?r.transform=lO(t,e.transform,n):r.transform&&(r.transform="none")),h){const{originX:f="50%",originY:p="50%",originZ:v=0}=a;r.transformOrigin=`${f} ${p} ${v}`}}const Rp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function lC(e,t,n){for(const r in t)!vt(t[r])&&!iC(r,n)&&(e[r]=t[r])}function hO({transformTemplate:e},t){return D.useMemo(()=>{const n=Rp();return Tp(n,t,e),Object.assign({},n.vars,n.style)},[t])}function fO(e,t){const n=e.style||{},r={};return lC(r,n,e),Object.assign(r,hO(e,t)),r}function dO(e,t){const n={},r=fO(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const pO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function xu(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||pO.has(e)}let uC=e=>!xu(e);function mO(e){e&&(uC=t=>t.startsWith("on")?!xu(t):e(t))}try{mO(require("@emotion/is-prop-valid").default)}catch{}function gO(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(uC(s)||n===!0&&xu(s)||!t&&!xu(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}function by(e,t,n){return typeof e=="string"?e:oe.transform(t+n*e)}function yO(e,t,n){const r=by(t,e.x,e.width),s=by(n,e.y,e.height);return`${r} ${s}`}const vO={offset:"stroke-dashoffset",array:"stroke-dasharray"},wO={offset:"strokeDashoffset",array:"strokeDasharray"};function SO(e,t,n=1,r=0,s=!0){e.pathLength=1;const a=s?vO:wO;e[a.offset]=oe.transform(-r);const u=oe.transform(t),h=oe.transform(n);e[a.array]=`${u} ${h}`}function Ep(e,{attrX:t,attrY:n,attrScale:r,originX:s,originY:a,pathLength:u,pathSpacing:h=1,pathOffset:f=0,...p},v,y){if(Tp(e,p,y),v){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:w,style:P,dimensions:_}=e;w.transform&&(_&&(P.transform=w.transform),delete w.transform),_&&(s!==void 0||a!==void 0||P.transform)&&(P.transformOrigin=yO(_,s!==void 0?s:.5,a!==void 0?a:.5)),t!==void 0&&(w.x=t),n!==void 0&&(w.y=n),r!==void 0&&(w.scale=r),u!==void 0&&SO(w,u,h,f,!1)}const cC=()=>({...Rp(),attrs:{}}),Pp=e=>typeof e=="string"&&e.toLowerCase()==="svg";function CO(e,t,n,r){const s=D.useMemo(()=>{const a=cC();return Ep(a,t,Pp(r),e.transformTemplate),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};lC(a,e.style,e),s.style={...a,...s.style}}return s}function TO(e=!1){return(n,r,s,{latestValues:a},u)=>{const f=(vp(n)?CO:dO)(r,a,u,n),p=gO(r,typeof n=="string",e),v=n!==D.Fragment?{...p,...f,ref:s}:{},{children:y}=r,w=D.useMemo(()=>vt(y)?y.get():y,[y]);return D.createElement(n,{...v,children:w})}}function hC(e,{style:t,vars:n},r,s){Object.assign(e.style,t,s&&s.getProjectionStyles(r));for(const a in n)e.style.setProperty(a,n[a])}const fC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function dC(e,t,n,r){hC(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(fC.has(s)?s:ec(s),t.attrs[s])}function Ap(e,t,n){var r;const{style:s}=e,a={};for(const u in s)(vt(s[u])||t.style&&vt(t.style[u])||iC(u,e)||((r=n==null?void 0:n.getValue(u))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[u]=s[u]);return n&&s&&typeof s.willChange=="string"&&(n.applyWillChange=!1),a}function pC(e,t,n){const r=Ap(e,t,n);for(const s in e)if(vt(e[s])||vt(t[s])){const a=Qa.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=e[s]}return r}function Iy(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function _p(e,t,n,r){if(typeof t=="function"){const[s,a]=Iy(r);t=t(n!==void 0?n:e.custom,s,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,a]=Iy(r);t=t(n!==void 0?n:e.custom,s,a)}return t}function RO(e){const t=D.useRef(null);return t.current===null&&(t.current=e()),t.current}const Qf=e=>Array.isArray(e),EO=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),PO=e=>Qf(e)?e[e.length-1]||0:e;function Xl(e){const t=vt(e)?e.get():e;return EO(t)?t.toValue():t}const mC=new Set(["opacity","clipPath","filter","transform"]);function gC(e){if(ii.has(e))return"transform";if(mC.has(e))return ec(e)}function nc(e,t){e.indexOf(t)===-1&&e.push(t)}function rc(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function AO({applyWillChange:e=!1,scrapeMotionValuesFromProps:t,createRenderState:n,onMount:r},s,a,u,h){const f={latestValues:xO(s,a,u,h?!1:e,t),renderState:n()};return r&&(f.mount=p=>r(s,p,f)),f}const yC=e=>(t,n)=>{const r=D.useContext(Zu),s=D.useContext(dp),a=()=>AO(e,t,r,s,n);return n?a():RO(a)};function _O(e,t){const n=gC(t);n&&nc(e,n)}function Ly(e,t,n){const r=Array.isArray(t)?t:[t];for(let s=0;s<r.length;s++){const a=_p(e,r[s]);if(a){const{transitionEnd:u,transition:h,...f}=a;n(f,u)}}}function xO(e,t,n,r,s){var a;const u={},h=[],f=r&&((a=e.style)===null||a===void 0?void 0:a.willChange)===void 0,p=s(e,{});for(const k in p)u[k]=Xl(p[k]);let{initial:v,animate:y}=e;const w=tc(e),P=nC(e);t&&P&&!w&&e.inherit!==!1&&(v===void 0&&(v=t.initial),y===void 0&&(y=t.animate));let _=n?n.initial===!1:!1;_=_||v===!1;const A=_?y:v;return A&&typeof A!="boolean"&&!Na(A)&&Ly(e,A,(k,C)=>{for(const S in k){let E=k[S];if(Array.isArray(E)){const T=_?E.length-1:0;E=E[T]}E!==null&&(u[S]=E)}for(const S in C)u[S]=C[S]}),f&&(y&&v!==!1&&!Na(y)&&Ly(e,y,k=>{for(const C in k)_O(h,C)}),h.length&&(u.willChange=h.join(","))),u}const{schedule:Te,cancel:mr,state:at,steps:Ch}=ZS(typeof requestAnimationFrame<"u"?requestAnimationFrame:wt,!0),OO={useVisualState:yC({scrapeMotionValuesFromProps:pC,createRenderState:cC,onMount:(e,t,{renderState:n,latestValues:r})=>{Te.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Te.render(()=>{Ep(n,r,Pp(t.tagName),e.transformTemplate),dC(t,n)})}})},kO={useVisualState:yC({applyWillChange:!0,scrapeMotionValuesFromProps:Ap,createRenderState:Rp})};function MO(e,{forwardMotionProps:t=!1},n,r){return{...vp(e)?OO:kO,preloadedFeatures:n,useRender:TO(t),createVisualElement:r,Component:e}}function rr(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const vC=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function ic(e,t="page"){return{point:{x:e[`${t}X`],y:e[`${t}Y`]}}}const bO=e=>t=>vC(t)&&e(t,ic(t));function or(e,t,n,r){return rr(e,t,bO(n),r)}const IO=(e,t)=>n=>t(e(n)),ar=(...e)=>e.reduce(IO);function wC(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const Ny=wC("dragHorizontal"),Dy=wC("dragVertical");function SC(e){let t=!1;if(e==="y")t=Dy();else if(e==="x")t=Ny();else{const n=Ny(),r=Dy();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function CC(){const e=SC(!0);return e?(e(),!1):!0}class si{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Uy(e,t){const n=t?"pointerenter":"pointerleave",r=t?"onHoverStart":"onHoverEnd",s=(a,u)=>{if(a.pointerType==="touch"||CC())return;const h=e.getProps();e.animationState&&h.whileHover&&e.animationState.setActive("whileHover",t);const f=h[r];f&&Te.postRender(()=>f(a,u))};return or(e.current,n,s,{passive:!e.getProps()[r]})}class LO extends si{mount(){this.unmount=ar(Uy(this.node,!0),Uy(this.node,!1))}unmount(){}}class NO extends si{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ar(rr(this.node.current,"focus",()=>this.onFocus()),rr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const TC=(e,t)=>t?e===t?!0:TC(e,t.parentElement):!1;function Th(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,ic(n))}class DO extends si{constructor(){super(...arguments),this.removeStartListeners=wt,this.removeEndListeners=wt,this.removeAccessibleListeners=wt,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),a=or(window,"pointerup",(h,f)=>{if(!this.checkPressEnd())return;const{onTap:p,onTapCancel:v,globalTapTarget:y}=this.node.getProps(),w=!y&&!TC(this.node.current,h.target)?v:p;w&&Te.update(()=>w(h,f))},{passive:!(r.onTap||r.onPointerUp)}),u=or(window,"pointercancel",(h,f)=>this.cancelPress(h,f),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=ar(a,u),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=a=>{if(a.key!=="Enter"||this.isPressing)return;const u=h=>{h.key!=="Enter"||!this.checkPressEnd()||Th("up",(f,p)=>{const{onTap:v}=this.node.getProps();v&&Te.postRender(()=>v(f,p))})};this.removeEndListeners(),this.removeEndListeners=rr(this.node.current,"keyup",u),Th("down",(h,f)=>{this.startPress(h,f)})},n=rr(this.node.current,"keydown",t),r=()=>{this.isPressing&&Th("cancel",(a,u)=>this.cancelPress(a,u))},s=rr(this.node.current,"blur",r);this.removeAccessibleListeners=ar(n,s)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Te.postRender(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!CC()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Te.postRender(()=>r(t,n))}mount(){const t=this.node.getProps(),n=or(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=rr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ar(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Xf=new WeakMap,Rh=new WeakMap,UO=e=>{const t=Xf.get(e.target);t&&t(e)},FO=e=>{e.forEach(UO)};function BO({root:e,...t}){const n=e||document;Rh.has(n)||Rh.set(n,{});const r=Rh.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(FO,{root:e,...t})),r[s]}function VO(e,t,n){const r=BO(t);return Xf.set(e,n),r.observe(e),()=>{Xf.delete(e),r.unobserve(e)}}const jO={some:0,all:1};class zO extends si{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:a}=t,u={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:jO[s]},h=f=>{const{isIntersecting:p}=f;if(this.isInView===p||(this.isInView=p,a&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:v,onViewportLeave:y}=this.node.getProps(),w=p?v:y;w&&w(f)};return VO(this.node.current,u,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(GO(t,n))&&this.startObserver()}unmount(){}}function GO({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const HO={inView:{Feature:zO},tap:{Feature:DO},focus:{Feature:NO},hover:{Feature:LO}};function RC(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function sc(e,t,n){const r=e.getProps();return _p(r,t,n!==void 0?n:r.custom,e)}const lr=e=>e*1e3,ur=e=>e/1e3,WO={type:"spring",stiffness:500,damping:25,restSpeed:10},qO=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),$O={type:"keyframes",duration:.8},KO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},QO=(e,{keyframes:t})=>t.length>2?$O:ii.has(e)?e.startsWith("scale")?qO(t[1]):WO:KO;function XO({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:u,repeatDelay:h,from:f,elapsed:p,...v}){return!!Object.keys(v).length}function xp(e,t){return e[t]||e.default||e}const YO=e=>e!==null;function oc(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(YO),a=t&&n!=="loop"&&t%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const EC=e=>/^0[^.\s]+$/u.test(e);function JO(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||EC(e):!0}const PC=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),ZO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ek(e){const t=ZO.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function AC(e,t,n=1){const[r,s]=ek(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const u=a.trim();return PC(u)?parseFloat(u):u}return Cp(s)?AC(s,t,n+1):s}const tk=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Fy=e=>e===co||e===oe,By=(e,t)=>parseFloat(e.split(", ")[t]),Vy=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return By(s[1],t);{const a=r.match(/^matrix\((.+)\)$/u);return a?By(a[1],e):0}},nk=new Set(["x","y","z"]),rk=Qa.filter(e=>!nk.has(e));function ik(e){const t=[];return rk.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const no={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Vy(4,13),y:Vy(5,14)};no.translateX=no.x;no.translateY=no.y;const _C=e=>t=>t.test(e),sk={test:e=>e==="auto",parse:e=>e},xC=[co,oe,zn,xr,sO,iO,sk],jy=e=>xC.find(_C(e)),Ii=new Set;let Yf=!1,Jf=!1;function OC(){if(Jf){const e=Array.from(Ii).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=ik(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([a,u])=>{var h;(h=r.getValue(a))===null||h===void 0||h.set(u)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Jf=!1,Yf=!1,Ii.forEach(e=>e.complete()),Ii.clear()}function kC(){Ii.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Jf=!0)})}function ok(){kC(),OC()}class Op{constructor(t,n,r,s,a,u=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=a,this.isAsync=u}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ii.add(this),Yf||(Yf=!0,Te.read(kC),Te.resolveKeyframes(OC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;for(let a=0;a<t.length;a++)if(t[a]===null)if(a===0){const u=s==null?void 0:s.get(),h=t[t.length-1];if(u!==void 0)t[0]=u;else if(r&&n){const f=r.readValue(n,h);f!=null&&(t[0]=f)}t[0]===void 0&&(t[0]=h),s&&u===void 0&&s.set(t[0])}else t[a]=t[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ii.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ii.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const kp=(e,t)=>n=>!!(Xa(n)&&nO.test(n)&&n.startsWith(e)||t&&!rO(n)&&Object.prototype.hasOwnProperty.call(n,t)),MC=(e,t,n)=>r=>{if(!Xa(r))return r;const[s,a,u,h]=r.match(wp);return{[e]:parseFloat(s),[t]:parseFloat(a),[n]:parseFloat(u),alpha:h!==void 0?parseFloat(h):1}},ak=e=>Zr(0,255,e),Eh={...co,transform:e=>Math.round(ak(e))},Ci={test:kp("rgb","red"),parse:MC("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Eh.transform(e)+", "+Eh.transform(t)+", "+Eh.transform(n)+", "+ca(ua.transform(r))+")"};function lk(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Zf={test:kp("#"),parse:lk,transform:Ci.transform},Cs={test:kp("hsl","hue"),parse:MC("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+zn.transform(ca(t))+", "+zn.transform(ca(n))+", "+ca(ua.transform(r))+")"},gt={test:e=>Ci.test(e)||Zf.test(e)||Cs.test(e),parse:e=>Ci.test(e)?Ci.parse(e):Cs.test(e)?Cs.parse(e):Zf.parse(e),transform:e=>Xa(e)?e:e.hasOwnProperty("red")?Ci.transform(e):Cs.transform(e)};function uk(e){var t,n;return isNaN(e)&&Xa(e)&&(((t=e.match(wp))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(tO))===null||n===void 0?void 0:n.length)||0)>0}const bC="number",IC="color",ck="var",hk="var(",zy="${}",fk=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Da(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const h=t.replace(fk,f=>(gt.test(f)?(r.color.push(a),s.push(IC),n.push(gt.parse(f))):f.startsWith(hk)?(r.var.push(a),s.push(ck),n.push(f)):(r.number.push(a),s.push(bC),n.push(parseFloat(f))),++a,zy)).split(zy);return{values:n,split:h,indexes:r,types:s}}function LC(e){return Da(e).values}function NC(e){const{split:t,types:n}=Da(e),r=t.length;return s=>{let a="";for(let u=0;u<r;u++)if(a+=t[u],s[u]!==void 0){const h=n[u];h===bC?a+=ca(s[u]):h===IC?a+=gt.transform(s[u]):a+=s[u]}return a}}const dk=e=>typeof e=="number"?0:e;function pk(e){const t=LC(e);return NC(e)(t.map(dk))}const ei={test:uk,parse:LC,createTransformer:NC,getAnimatableNone:pk},mk=new Set(["brightness","contrast","saturate","opacity"]);function gk(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(wp)||[];if(!r)return e;const s=n.replace(r,"");let a=mk.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+s+")"}const yk=/\b([a-z-]*)\(.*?\)/gu,ed={...ei,getAnimatableNone:e=>{const t=e.match(yk);return t?t.map(gk).join(" "):e}},vk={...Sp,color:gt,backgroundColor:gt,outlineColor:gt,fill:gt,stroke:gt,borderColor:gt,borderTopColor:gt,borderRightColor:gt,borderBottomColor:gt,borderLeftColor:gt,filter:ed,WebkitFilter:ed},Mp=e=>vk[e];function DC(e,t){let n=Mp(e);return n!==ed&&(n=ei),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const wk=new Set(["auto","none","0"]);function Sk(e,t,n){let r=0,s;for(;r<e.length&&!s;){const a=e[r];typeof a=="string"&&!wk.has(a)&&Da(a).values.length&&(s=e[r]),r++}if(s&&n)for(const a of t)e[a]=DC(n,s)}class UC extends Op{constructor(t,n,r,s,a){super(t,n,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<t.length;f++){let p=t[f];if(typeof p=="string"&&(p=p.trim(),Cp(p))){const v=AC(p,n.current);v!==void 0&&(t[f]=v),f===t.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!tk.has(r)||t.length!==2)return;const[s,a]=t,u=jy(s),h=jy(a);if(u!==h)if(Fy(u)&&Fy(h))for(let f=0;f<t.length;f++){const p=t[f];typeof p=="string"&&(t[f]=parseFloat(p))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)JO(t[s])&&r.push(s);r.length&&Sk(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=no[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var t;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const a=n.getValue(r);a&&a.jump(this.measuredOrigin,!1);const u=s.length-1,h=s[u];s[u]=no[r](n.measureViewportBox(),window.getComputedStyle(n.current)),h!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=h),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([f,p])=>{n.getValue(f).set(p)}),this.resolveNoneKeyframes()}}function FC(e){let t;return()=>(t===void 0&&(t=e()),t)}let Yl;function Ck(){Yl=void 0}const cr={now:()=>(Yl===void 0&&cr.set(at.isProcessing||Ux.useManualTiming?at.timestamp:performance.now()),Yl),set:e=>{Yl=e,queueMicrotask(Ck)}},Gy=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ei.test(e)||e==="0")&&!e.startsWith("url("));function Tk(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function Rk(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],u=Gy(s,t),h=Gy(a,t);return!u||!h?!1:Tk(e)||n==="spring"&&r}const Ek=40;class BC{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:u="loop",...h}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=cr.now(),this.options={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:a,repeatType:u,...h},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Ek?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&ok(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=cr.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:a,delay:u,onComplete:h,onUpdate:f,isGenerator:p}=this.options;if(!p&&!Rk(t,r,s,a))if(u)this.options.duration=0;else{f==null||f(oc(t,this.options,n)),h==null||h(),this.resolveFinishedPromise();return}const v=this.initPlayback(t,n);v!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...v},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}function VC(e,t){return t?e*(1e3/t):0}const Pk=5;function jC(e,t,n){const r=Math.max(t-Pk,0);return VC(n-e(r),t-r)}const Ph=.001,Ak=.01,_k=10,xk=.05,Ok=1;function kk({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let s,a,u=1-t;u=Zr(xk,Ok,u),e=Zr(Ak,_k,ur(e)),u<1?(s=p=>{const v=p*u,y=v*e,w=v-n,P=td(p,u),_=Math.exp(-y);return Ph-w/P*_},a=p=>{const y=p*u*e,w=y*n+n,P=Math.pow(u,2)*Math.pow(p,2)*e,_=Math.exp(-y),A=td(Math.pow(p,2),u);return(-s(p)+Ph>0?-1:1)*((w-P)*_)/A}):(s=p=>{const v=Math.exp(-p*e),y=(p-n)*e+1;return-Ph+v*y},a=p=>{const v=Math.exp(-p*e),y=(n-p)*(e*e);return v*y});const h=5/e,f=bk(s,a,h);if(e=lr(e),isNaN(f))return{stiffness:100,damping:10,duration:e};{const p=Math.pow(f,2)*r;return{stiffness:p,damping:u*2*Math.sqrt(r*p),duration:e}}}const Mk=12;function bk(e,t,n){let r=n;for(let s=1;s<Mk;s++)r=r-e(r)/t(r);return r}function td(e,t){return e*Math.sqrt(1-t*t)}const Ik=["duration","bounce"],Lk=["stiffness","damping","mass"];function Hy(e,t){return t.some(n=>e[n]!==void 0)}function Nk(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Hy(e,Lk)&&Hy(e,Ik)){const n=kk(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function zC({keyframes:e,restDelta:t,restSpeed:n,...r}){const s=e[0],a=e[e.length-1],u={done:!1,value:s},{stiffness:h,damping:f,mass:p,duration:v,velocity:y,isResolvedFromDuration:w}=Nk({...r,velocity:-ur(r.velocity||0)}),P=y||0,_=f/(2*Math.sqrt(h*p)),A=a-s,k=ur(Math.sqrt(h/p)),C=Math.abs(A)<5;n||(n=C?.01:2),t||(t=C?.005:.5);let S;if(_<1){const E=td(k,_);S=T=>{const I=Math.exp(-_*k*T);return a-I*((P+_*k*A)/E*Math.sin(E*T)+A*Math.cos(E*T))}}else if(_===1)S=E=>a-Math.exp(-k*E)*(A+(P+k*A)*E);else{const E=k*Math.sqrt(_*_-1);S=T=>{const I=Math.exp(-_*k*T),V=Math.min(E*T,300);return a-I*((P+_*k*A)*Math.sinh(V)+E*A*Math.cosh(V))/E}}return{calculatedDuration:w&&v||null,next:E=>{const T=S(E);if(w)u.done=E>=v;else{let I=0;_<1&&(I=E===0?lr(P):jC(S,E,T));const V=Math.abs(I)<=n,H=Math.abs(a-T)<=t;u.done=V&&H}return u.value=u.done?a:T,u}}}function Wy({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:u,min:h,max:f,restDelta:p=.5,restSpeed:v}){const y=e[0],w={done:!1,value:y},P=F=>h!==void 0&&F<h||f!==void 0&&F>f,_=F=>h===void 0?f:f===void 0||Math.abs(h-F)<Math.abs(f-F)?h:f;let A=n*t;const k=y+A,C=u===void 0?k:u(k);C!==k&&(A=C-y);const S=F=>-A*Math.exp(-F/r),E=F=>C+S(F),T=F=>{const J=S(F),X=E(F);w.done=Math.abs(J)<=p,w.value=w.done?C:X};let I,V;const H=F=>{P(w.value)&&(I=F,V=zC({keyframes:[w.value,_(w.value)],velocity:jC(E,F,w.value),damping:s,stiffness:a,restDelta:p,restSpeed:v}))};return H(0),{calculatedDuration:null,next:F=>{let J=!1;return!V&&I===void 0&&(J=!0,T(F),H(F)),I!==void 0&&F>=I?V.next(F-I):(!J&&T(F),w)}}}const GC=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Dk=1e-7,Uk=12;function Fk(e,t,n,r,s){let a,u,h=0;do u=t+(n-t)/2,a=GC(u,r,s)-e,a>0?n=u:t=u;while(Math.abs(a)>Dk&&++h<Uk);return u}function Ja(e,t,n,r){if(e===t&&n===r)return wt;const s=a=>Fk(a,0,1,e,n);return a=>a===0||a===1?a:GC(s(a),t,r)}const Bk=Ja(.42,0,1,1),Vk=Ja(0,0,.58,1),HC=Ja(.42,0,.58,1),jk=e=>Array.isArray(e)&&typeof e[0]!="number",WC=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,qC=e=>t=>1-e(1-t),bp=e=>1-Math.sin(Math.acos(e)),$C=qC(bp),zk=WC(bp),KC=Ja(.33,1.53,.69,.99),Ip=qC(KC),Gk=WC(Ip),Hk=e=>(e*=2)<1?.5*Ip(e):.5*(2-Math.pow(2,-10*(e-1))),qy={linear:wt,easeIn:Bk,easeInOut:HC,easeOut:Vk,circIn:bp,circInOut:zk,circOut:$C,backIn:Ip,backInOut:Gk,backOut:KC,anticipate:Hk},$y=e=>{if(Array.isArray(e)){Kf(e.length===4);const[t,n,r,s]=e;return Ja(t,n,r,s)}else if(typeof e=="string")return Kf(qy[e]!==void 0),qy[e];return e},Ua=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},Fe=(e,t,n)=>e+(t-e)*n;function Ah(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Wk({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,a=0,u=0;if(!t)s=a=u=n;else{const h=n<.5?n*(1+t):n+t-n*t,f=2*n-h;s=Ah(f,h,e+1/3),a=Ah(f,h,e),u=Ah(f,h,e-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(u*255),alpha:r}}function Ou(e,t){return n=>n>0?t:e}const _h=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},qk=[Zf,Ci,Cs],$k=e=>qk.find(t=>t.test(e));function Ky(e){const t=$k(e);if(!t)return!1;let n=t.parse(e);return t===Cs&&(n=Wk(n)),n}const Qy=(e,t)=>{const n=Ky(e),r=Ky(t);if(!n||!r)return Ou(e,t);const s={...n};return a=>(s.red=_h(n.red,r.red,a),s.green=_h(n.green,r.green,a),s.blue=_h(n.blue,r.blue,a),s.alpha=Fe(n.alpha,r.alpha,a),Ci.transform(s))},nd=new Set(["none","hidden"]);function Kk(e,t){return nd.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function Qk(e,t){return n=>Fe(e,t,n)}function Lp(e){return typeof e=="number"?Qk:typeof e=="string"?Cp(e)?Ou:gt.test(e)?Qy:Jk:Array.isArray(e)?QC:typeof e=="object"?gt.test(e)?Qy:Xk:Ou}function QC(e,t){const n=[...e],r=n.length,s=e.map((a,u)=>Lp(a)(a,t[u]));return a=>{for(let u=0;u<r;u++)n[u]=s[u](a);return n}}function Xk(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=Lp(e[s])(e[s],t[s]));return s=>{for(const a in r)n[a]=r[a](s);return n}}function Yk(e,t){var n;const r=[],s={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const u=t.types[a],h=e.indexes[u][s[u]],f=(n=e.values[h])!==null&&n!==void 0?n:0;r[a]=f,s[u]++}return r}const Jk=(e,t)=>{const n=ei.createTransformer(t),r=Da(e),s=Da(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?nd.has(e)&&!s.values.length||nd.has(t)&&!r.values.length?Kk(e,t):ar(QC(Yk(r,s),s.values),n):Ou(e,t)};function XC(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Fe(e,t,n):Lp(e)(e,t)}function Zk(e,t,n){const r=[],s=n||XC,a=e.length-1;for(let u=0;u<a;u++){let h=s(e[u],e[u+1]);if(t){const f=Array.isArray(t)?t[u]||wt:t;h=ar(f,h)}r.push(h)}return r}function eM(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const a=e.length;if(Kf(a===t.length),a===1)return()=>t[0];if(a===2&&e[0]===e[1])return()=>t[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const u=Zk(t,r,s),h=u.length,f=p=>{let v=0;if(h>1)for(;v<e.length-2&&!(p<e[v+1]);v++);const y=Ua(e[v],e[v+1],p);return u[v](y)};return n?p=>f(Zr(e[0],e[a-1],p)):f}function tM(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=Ua(0,t,r);e.push(Fe(n,1,s))}}function nM(e){const t=[0];return tM(t,e.length-1),t}function rM(e,t){return e.map(n=>n*t)}function iM(e,t){return e.map(()=>t||HC).splice(0,e.length-1)}function ku({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=jk(r)?r.map($y):$y(r),a={done:!1,value:t[0]},u=rM(n&&n.length===t.length?n:nM(t),e),h=eM(u,t,{ease:Array.isArray(s)?s:iM(t,s)});return{calculatedDuration:e,next:f=>(a.value=h(f),a.done=f>=e,a)}}const Xy=2e4;function sM(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Xy;)t+=n,r=e.next(t);return t>=Xy?1/0:t}const oM=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Te.update(t,!0),stop:()=>mr(t),now:()=>at.isProcessing?at.timestamp:cr.now()}},aM={decay:Wy,inertia:Wy,tween:ku,keyframes:ku,spring:zC},lM=e=>e/100;class Np extends BC{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:f}=this.options;f&&f()};const{name:n,motionValue:r,element:s,keyframes:a}=this.options,u=(s==null?void 0:s.KeyframeResolver)||Op,h=(f,p)=>this.onKeyframesResolved(f,p);this.resolver=new u(a,h,n,r,s),this.resolver.scheduleResolve()}initPlayback(t){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:u=0}=this.options,h=aM[n]||ku;let f,p;h!==ku&&typeof t[0]!="number"&&(f=ar(lM,XC(t[0],t[1])),t=[0,100]);const v=h({...this.options,keyframes:t});a==="mirror"&&(p=h({...this.options,keyframes:[...t].reverse(),velocity:-u})),v.calculatedDuration===null&&(v.calculatedDuration=sM(v));const{calculatedDuration:y}=v,w=y+s,P=w*(r+1)-s;return{generator:v,mirroredGenerator:p,mapPercentToKeyframes:f,calculatedDuration:y,resolvedDuration:w,totalDuration:P}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:r}=this;if(!r){const{keyframes:F}=this.options;return{done:!0,value:F[F.length-1]}}const{finalKeyframe:s,generator:a,mirroredGenerator:u,mapPercentToKeyframes:h,keyframes:f,calculatedDuration:p,totalDuration:v,resolvedDuration:y}=r;if(this.startTime===null)return a.next(0);const{delay:w,repeat:P,repeatType:_,repeatDelay:A,onUpdate:k}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-v/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const C=this.currentTime-w*(this.speed>=0?1:-1),S=this.speed>=0?C<0:C>v;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=v);let E=this.currentTime,T=a;if(P){const F=Math.min(this.currentTime,v)/y;let J=Math.floor(F),X=F%1;!X&&F>=1&&(X=1),X===1&&J--,J=Math.min(J,P+1),!!(J%2)&&(_==="reverse"?(X=1-X,A&&(X-=A/y)):_==="mirror"&&(T=u)),E=Zr(0,1,X)*y}const I=S?{done:!1,value:f[0]}:T.next(E);h&&(I.value=h(I.value));let{done:V}=I;!S&&p!==null&&(V=this.speed>=0?this.currentTime>=v:this.currentTime<=0);const H=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&V);return H&&s!==void 0&&(I.value=oc(f,this.options,s)),k&&k(I.value),H&&this.finish(),I}get duration(){const{resolved:t}=this;return t?ur(t.calculatedDuration):0}get time(){return ur(this.currentTime)}set time(t){t=lr(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=ur(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=oM,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const YC=e=>Array.isArray(e)&&typeof e[0]=="number";function JC(e){return!!(!e||typeof e=="string"&&e in Dp||YC(e)||Array.isArray(e)&&e.every(JC))}const Xo=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Dp={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Xo([0,.65,.55,1]),circOut:Xo([.55,0,1,.45]),backIn:Xo([.31,.01,.66,-.59]),backOut:Xo([.33,1.53,.69,.99])};function uM(e){return ZC(e)||Dp.easeOut}function ZC(e){if(e)return YC(e)?Xo(e):Array.isArray(e)?e.map(uM):Dp[e]}function cM(e,t,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:u="loop",ease:h,times:f}={}){const p={[t]:n};f&&(p.offset=f);const v=ZC(h);return Array.isArray(v)&&(p.easing=v),e.animate(p,{delay:r,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:a+1,direction:u==="reverse"?"alternate":"normal"})}const hM=FC(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Mu=10,fM=2e4;function dM(e){return e.type==="spring"||!JC(e.ease)}function pM(e,t){const n=new Np({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const s=[];let a=0;for(;!r.done&&a<fM;)r=n.sample(a),s.push(r.value),a+=Mu;return{times:void 0,keyframes:s,duration:a-Mu,ease:"linear"}}class Yy extends BC{constructor(t){super(t);const{name:n,motionValue:r,element:s,keyframes:a}=this.options;this.resolver=new UC(a,(u,h)=>this.onKeyframesResolved(u,h),n,r,s),this.resolver.scheduleResolve()}initPlayback(t,n){var r;let{duration:s=300,times:a,ease:u,type:h,motionValue:f,name:p,startTime:v}=this.options;if(!(!((r=f.owner)===null||r===void 0)&&r.current))return!1;if(dM(this.options)){const{onComplete:w,onUpdate:P,motionValue:_,element:A,...k}=this.options,C=pM(t,k);t=C.keyframes,t.length===1&&(t[1]=t[0]),s=C.duration,a=C.times,u=C.ease,h="keyframes"}const y=cM(f.owner.current,p,t,{...this.options,duration:s,times:a,ease:u});return y.startTime=v??this.calcStartTime(),this.pendingTimeline?(y.timeline=this.pendingTimeline,this.pendingTimeline=void 0):y.onfinish=()=>{const{onComplete:w}=this.options;f.set(oc(t,this.options,n)),w&&w(),this.cancel(),this.resolveFinishedPromise()},{animation:y,duration:s,times:a,type:h,ease:u,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return ur(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return ur(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=lr(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return wt;const{animation:r}=n;r.timeline=t,r.onfinish=null}return wt}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:r,duration:s,type:a,ease:u,times:h}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:p,onUpdate:v,onComplete:y,element:w,...P}=this.options,_=new Np({...P,keyframes:r,duration:s,type:a,ease:u,times:h,isGenerator:!0}),A=lr(this.time);p.setWithVelocity(_.sample(A-Mu).value,_.sample(A).value,Mu)}const{onStop:f}=this.options;f&&f(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:r,repeatDelay:s,repeatType:a,damping:u,type:h}=t;return hM()&&r&&mC.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!s&&a!=="mirror"&&u!==0&&h!=="inertia"}}function mM(e,t){let n;const r=()=>{const{currentTime:s}=t,u=(s===null?0:s.value)/100;n!==u&&e(u),n=u};return Te.update(r,!0),()=>mr(r)}const gM=FC(()=>window.ScrollTimeline!==void 0);class yM{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,n){return Promise.all(this.animations).then(t).catch(n)}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t){const n=this.animations.map(r=>{if(gM()&&r.attachTimeline)r.attachTimeline(t);else return r.pause(),mM(s=>{r.time=r.duration*s},t)});return()=>{n.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}const Up=(e,t,n,r={},s,a,u)=>h=>{const f=xp(r,e)||{},p=f.delay||r.delay||0;let{elapsed:v=0}=r;v=v-lr(p);let y={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...f,delay:-v,onUpdate:P=>{t.set(P),f.onUpdate&&f.onUpdate(P)},onComplete:()=>{h(),f.onComplete&&f.onComplete(),u&&u()},onStop:u,name:e,motionValue:t,element:a?void 0:s};XO(f)||(y={...y,...QO(e,y)}),y.duration&&(y.duration=lr(y.duration)),y.repeatDelay&&(y.repeatDelay=lr(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let w=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(y.duration=0,y.delay===0&&(w=!0)),w&&!a&&t.get()!==void 0){const P=oc(y.keyframes,f);if(P!==void 0)return Te.update(()=>{y.onUpdate(P),y.onComplete()}),new yM([])}return!a&&Yy.supports(y)?new Yy(y):new Np(y)};class Fp{constructor(){this.subscriptions=[]}add(t){return nc(this.subscriptions,t),()=>rc(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let a=0;a<s;a++){const u=this.subscriptions[a];u&&u(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Jy=30,vM=e=>!isNaN(parseFloat(e));class e1{constructor(t,n={}){this.version="11.3.31",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const a=cr.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=cr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=vM(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Fp);const r=this.events[t].add(n);return t==="change"?()=>{r(),Te.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=cr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Jy)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Jy);return VC(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Fa(e,t){return new e1(e,t)}function wM(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Fa(n))}function SM(e,t){const n=sc(e,t);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const u in a){const h=PO(a[u]);wM(e,u,h)}}function t1(e){return e.props[JS]}class CM extends e1{constructor(){super(...arguments),this.output=[],this.counts=new Map}add(t){const n=gC(t);if(!n)return;const r=this.counts.get(n)||0;this.counts.set(n,r+1),r===0&&(this.output.push(n),this.update());let s=!1;return()=>{if(s)return;s=!0;const a=this.counts.get(n)-1;this.counts.set(n,a),a===0&&(rc(this.output,n),this.update())}}update(){this.set(this.output.length?this.output.join(", "):"auto")}}function TM(e){return!!(vt(e)&&e.add)}function rd(e,t){var n;if(!e.applyWillChange)return;let r=e.getValue("willChange");if(!r&&!(!((n=e.props.style)===null||n===void 0)&&n.willChange)&&(r=new CM("auto"),e.addValue("willChange",r)),TM(r))return r.add(t)}function RM({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function n1(e,t,{delay:n=0,transitionOverride:r,type:s}={}){var a;let{transition:u=e.getDefaultTransition(),transitionEnd:h,...f}=t;r&&(u=r);const p=[],v=s&&e.animationState&&e.animationState.getState()[s];for(const y in f){const w=e.getValue(y,(a=e.latestValues[y])!==null&&a!==void 0?a:null),P=f[y];if(P===void 0||v&&RM(v,y))continue;const _={delay:n,...xp(u||{},y)};let A=!1;if(window.MotionHandoffAnimation){const C=t1(e);if(C){const S=window.MotionHandoffAnimation(C,y,Te);S!==null&&(_.startTime=S,A=!0)}}w.start(Up(y,w,P,e.shouldReduceMotion&&ii.has(y)?{type:!1}:_,e,A,rd(e,y)));const k=w.animation;k&&p.push(k)}return h&&Promise.all(p).then(()=>{Te.update(()=>{h&&SM(e,h)})}),p}function id(e,t,n={}){var r;const s=sc(e,t,n.type==="exit"?(r=e.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(a=n.transitionOverride);const u=s?()=>Promise.all(n1(e,s,n)):()=>Promise.resolve(),h=e.variantChildren&&e.variantChildren.size?(p=0)=>{const{delayChildren:v=0,staggerChildren:y,staggerDirection:w}=a;return EM(e,t,v+p,y,w,n)}:()=>Promise.resolve(),{when:f}=a;if(f){const[p,v]=f==="beforeChildren"?[u,h]:[h,u];return p().then(()=>v())}else return Promise.all([u(),h(n.delay)])}function EM(e,t,n=0,r=0,s=1,a){const u=[],h=(e.variantChildren.size-1)*r,f=s===1?(p=0)=>p*r:(p=0)=>h-p*r;return Array.from(e.variantChildren).sort(PM).forEach((p,v)=>{p.notify("AnimationStart",t),u.push(id(p,t,{...a,delay:n+f(v)}).then(()=>p.notify("AnimationComplete",t)))}),Promise.all(u)}function PM(e,t){return e.sortNodePosition(t)}function AM(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(a=>id(e,a,n));r=Promise.all(s)}else if(typeof t=="string")r=id(e,t,n);else{const s=typeof t=="function"?sc(e,t,n.custom):t;r=Promise.all(n1(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const _M=[...gp].reverse(),xM=gp.length;function OM(e){return t=>Promise.all(t.map(({animation:n,options:r})=>AM(e,n,r)))}function kM(e){let t=OM(e),n=Zy(),r=!0;const s=f=>(p,v)=>{var y;const w=sc(e,v,f==="exit"?(y=e.presenceContext)===null||y===void 0?void 0:y.custom:void 0);if(w){const{transition:P,transitionEnd:_,...A}=w;p={...p,...A,..._}}return p};function a(f){t=f(e)}function u(f){const p=e.getProps(),v=e.getVariantContext(!0)||{},y=[],w=new Set;let P={},_=1/0;for(let k=0;k<xM;k++){const C=_M[k],S=n[C],E=p[C]!==void 0?p[C]:v[C],T=La(E),I=C===f?S.isActive:null;I===!1&&(_=k);let V=E===v[C]&&E!==p[C]&&T;if(V&&r&&e.manuallyAnimateOnMount&&(V=!1),S.protectedKeys={...P},!S.isActive&&I===null||!E&&!S.prevProp||Na(E)||typeof E=="boolean")continue;let F=MM(S.prevProp,E)||C===f&&S.isActive&&!V&&T||k>_&&T,J=!1;const X=Array.isArray(E)?E:[E];let m=X.reduce(s(C),{});I===!1&&(m={});const{prevResolvedValues:_e={}}=S,Ne={..._e,...m},N=ue=>{F=!0,w.has(ue)&&(J=!0,w.delete(ue)),S.needsAnimating[ue]=!0;const Ee=e.getValue(ue);Ee&&(Ee.liveStyle=!1)};for(const ue in Ne){const Ee=m[ue],Z=_e[ue];if(P.hasOwnProperty(ue))continue;let W=!1;Qf(Ee)&&Qf(Z)?W=!RC(Ee,Z):W=Ee!==Z,W?Ee!=null?N(ue):w.add(ue):Ee!==void 0&&w.has(ue)?N(ue):S.protectedKeys[ue]=!0}S.prevProp=E,S.prevResolvedValues=m,S.isActive&&(P={...P,...m}),r&&e.blockInitialAnimation&&(F=!1),F&&(!V||J)&&y.push(...X.map(ue=>({animation:ue,options:{type:C}})))}if(w.size){const k={};w.forEach(C=>{const S=e.getBaseTarget(C),E=e.getValue(C);E&&(E.liveStyle=!0),k[C]=S??null}),y.push({animation:k})}let A=!!y.length;return r&&(p.initial===!1||p.initial===p.animate)&&!e.manuallyAnimateOnMount&&(A=!1),r=!1,A?t(y):Promise.resolve()}function h(f,p){var v;if(n[f].isActive===p)return Promise.resolve();(v=e.variantChildren)===null||v===void 0||v.forEach(w=>{var P;return(P=w.animationState)===null||P===void 0?void 0:P.setActive(f,p)}),n[f].isActive=p;const y=u(f);for(const w in n)n[w].protectedKeys={};return y}return{animateChanges:u,setActive:h,setAnimateFunction:a,getState:()=>n,reset:()=>{n=Zy(),r=!0}}}function MM(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!RC(t,e):!1}function fi(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Zy(){return{animate:fi(!0),whileInView:fi(),whileHover:fi(),whileTap:fi(),whileDrag:fi(),whileFocus:fi(),exit:fi()}}class bM extends si{constructor(t){super(t),t.animationState||(t.animationState=kM(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Na(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let IM=0;class LM extends si{constructor(){super(...arguments),this.id=IM++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const NM={animation:{Feature:bM},exit:{Feature:LM}},ev=(e,t)=>Math.abs(e-t);function DM(e,t){const n=ev(e.x,t.x),r=ev(e.y,t.y);return Math.sqrt(n**2+r**2)}class r1{constructor(t,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Oh(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,P=DM(y.offset,{x:0,y:0})>=3;if(!w&&!P)return;const{point:_}=y,{timestamp:A}=at;this.history.push({..._,timestamp:A});const{onStart:k,onMove:C}=this.handlers;w||(k&&k(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,y)},this.handlePointerMove=(y,w)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=xh(w,this.transformPagePoint),Te.update(this.updatePoint,!0)},this.handlePointerUp=(y,w)=>{this.end();const{onEnd:P,onSessionEnd:_,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=Oh(y.type==="pointercancel"?this.lastMoveEventInfo:xh(w,this.transformPagePoint),this.history);this.startEvent&&P&&P(y,k),_&&_(y,k)},!vC(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const u=ic(t),h=xh(u,this.transformPagePoint),{point:f}=h,{timestamp:p}=at;this.history=[{...f,timestamp:p}];const{onSessionStart:v}=n;v&&v(t,Oh(h,this.history)),this.removeListeners=ar(or(this.contextWindow,"pointermove",this.handlePointerMove),or(this.contextWindow,"pointerup",this.handlePointerUp),or(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),mr(this.updatePoint)}}function xh(e,t){return t?{point:t(e.point)}:e}function tv(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Oh({point:e},t){return{point:e,delta:tv(e,i1(t)),offset:tv(e,UM(t)),velocity:FM(t,.1)}}function UM(e){return e[0]}function i1(e){return e[e.length-1]}function FM(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=i1(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>lr(t)));)n--;if(!r)return{x:0,y:0};const a=ur(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const u={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}const s1=1e-4,BM=1-s1,VM=1+s1,o1=.01,jM=0-o1,zM=0+o1;function Xt(e){return e.max-e.min}function GM(e,t,n){return Math.abs(e-t)<=n}function nv(e,t,n,r=.5){e.origin=r,e.originPoint=Fe(t.min,t.max,e.origin),e.scale=Xt(n)/Xt(t),e.translate=Fe(n.min,n.max,e.origin)-e.originPoint,(e.scale>=BM&&e.scale<=VM||isNaN(e.scale))&&(e.scale=1),(e.translate>=jM&&e.translate<=zM||isNaN(e.translate))&&(e.translate=0)}function ha(e,t,n,r){nv(e.x,t.x,n.x,r?r.originX:void 0),nv(e.y,t.y,n.y,r?r.originY:void 0)}function rv(e,t,n){e.min=n.min+t.min,e.max=e.min+Xt(t)}function HM(e,t,n){rv(e.x,t.x,n.x),rv(e.y,t.y,n.y)}function iv(e,t,n){e.min=t.min-n.min,e.max=e.min+Xt(t)}function fa(e,t,n){iv(e.x,t.x,n.x),iv(e.y,t.y,n.y)}function WM(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Fe(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Fe(n,e,r.max):Math.min(e,n)),e}function sv(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function qM(e,{top:t,left:n,bottom:r,right:s}){return{x:sv(e.x,n,s),y:sv(e.y,t,r)}}function ov(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function $M(e,t){return{x:ov(e.x,t.x),y:ov(e.y,t.y)}}function KM(e,t){let n=.5;const r=Xt(e),s=Xt(t);return s>r?n=Ua(t.min,t.max-r,e.min):r>s&&(n=Ua(e.min,e.max-s,t.min)),Zr(0,1,n)}function QM(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const sd=.35;function XM(e=sd){return e===!1?e=0:e===!0&&(e=sd),{x:av(e,"left","right"),y:av(e,"top","bottom")}}function av(e,t,n){return{min:lv(e,t),max:lv(e,n)}}function lv(e,t){return typeof e=="number"?e:e[t]||0}const uv=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ts=()=>({x:uv(),y:uv()}),cv=()=>({min:0,max:0}),He=()=>({x:cv(),y:cv()});function tn(e){return[e("x"),e("y")]}function a1({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function YM({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function JM(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function kh(e){return e===void 0||e===1}function od({scale:e,scaleX:t,scaleY:n}){return!kh(e)||!kh(t)||!kh(n)}function gi(e){return od(e)||l1(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function l1(e){return hv(e.x)||hv(e.y)}function hv(e){return e&&e!=="0%"}function bu(e,t,n){const r=e-n,s=t*r;return n+s}function fv(e,t,n,r,s){return s!==void 0&&(e=bu(e,s,r)),bu(e,n,r)+t}function ad(e,t=0,n=1,r,s){e.min=fv(e.min,t,n,r,s),e.max=fv(e.max,t,n,r,s)}function u1(e,{x:t,y:n}){ad(e.x,t.translate,t.scale,t.originPoint),ad(e.y,n.translate,n.scale,n.originPoint)}const dv=.999999999999,pv=1.0000000000001;function ZM(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let a,u;for(let h=0;h<s;h++){a=n[h],u=a.projectionDelta;const{visualElement:f}=a.options;f&&f.props.style&&f.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Es(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),u&&(t.x*=u.x.scale,t.y*=u.y.scale,u1(e,u)),r&&gi(a.latestValues)&&Es(e,a.latestValues))}t.x<pv&&t.x>dv&&(t.x=1),t.y<pv&&t.y>dv&&(t.y=1)}function Rs(e,t){e.min=e.min+t,e.max=e.max+t}function mv(e,t,n,r,s=.5){const a=Fe(e.min,e.max,s);ad(e,t,n,a,r)}function Es(e,t){mv(e.x,t.x,t.scaleX,t.scale,t.originX),mv(e.y,t.y,t.scaleY,t.scale,t.originY)}function c1(e,t){return a1(JM(e.getBoundingClientRect(),t))}function eb(e,t,n){const r=c1(e,n),{scroll:s}=t;return s&&(Rs(r.x,s.offset.x),Rs(r.y,s.offset.y)),r}const h1=({current:e})=>e?e.ownerDocument.defaultView:null,tb=new WeakMap;class nb{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=He(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=v=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ic(v,"page").point)},a=(v,y)=>{var w;const{drag:P,dragPropagation:_,onDragStart:A}=this.getProps();if(P&&!_&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=SC(P),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),tn(C=>{let S=this.getAxisMotionValue(C).get()||0;if(zn.test(S)){const{projection:E}=this.visualElement;if(E&&E.layout){const T=E.layout.layoutBox[C];T&&(S=Xt(T)*(parseFloat(S)/100))}}this.originPoint[C]=S}),A&&Te.postRender(()=>A(v,y)),(w=this.removeWillChange)===null||w===void 0||w.call(this),this.removeWillChange=rd(this.visualElement,"transform");const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},u=(v,y)=>{const{dragPropagation:w,dragDirectionLock:P,onDirectionLock:_,onDrag:A}=this.getProps();if(!w&&!this.openGlobalLock)return;const{offset:k}=y;if(P&&this.currentDirection===null){this.currentDirection=rb(k),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",y.point,k),this.updateAxis("y",y.point,k),this.visualElement.render(),A&&A(v,y)},h=(v,y)=>this.stop(v,y),f=()=>tn(v=>{var y;return this.getAnimationState(v)==="paused"&&((y=this.getAxisMotionValue(v).animation)===null||y===void 0?void 0:y.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new r1(t,{onSessionStart:s,onStart:a,onMove:u,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,contextWindow:h1(this.visualElement)})}stop(t,n){var r;(r=this.removeWillChange)===null||r===void 0||r.call(this);const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:u}=this.getProps();u&&Te.postRender(()=>u(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!Dl(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let u=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(u=WM(u,this.constraints[t],this.elastic[t])),a.set(u)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,a=this.constraints;n&&Ss(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=qM(s.layoutBox,n):this.constraints=!1,this.elastic=XM(r),a!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&tn(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=QM(s.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Ss(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=eb(r,s.root,this.visualElement.getTransformPagePoint());let u=$M(s.layout.layoutBox,a);if(n){const h=n(YM(u));this.hasMutatedConstraints=!!h,h&&(u=a1(h))}return u}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:u,onDragTransitionEnd:h}=this.getProps(),f=this.constraints||{},p=tn(v=>{if(!Dl(v,n,this.currentDirection))return;let y=f&&f[v]||{};u&&(y={min:0,max:0});const w=s?200:1e6,P=s?40:1e7,_={type:"inertia",velocity:r?t[v]:0,bounceStiffness:w,bounceDamping:P,timeConstant:750,restDelta:1,restSpeed:10,...a,...y};return this.startAxisValueAnimation(v,_)});return Promise.all(p).then(h)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return r.start(Up(t,r,0,n,this.visualElement,!1,rd(this.visualElement,t)))}stopAnimation(){tn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){tn(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){tn(n=>{const{drag:r}=this.getProps();if(!Dl(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(n);if(s&&s.layout){const{min:u,max:h}=s.layout.layoutBox[n];a.set(t[n]-Fe(u,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ss(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};tn(u=>{const h=this.getAxisMotionValue(u);if(h&&this.constraints!==!1){const f=h.get();s[u]=KM({min:f,max:f},this.constraints[u])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),tn(u=>{if(!Dl(u,t,null))return;const h=this.getAxisMotionValue(u),{min:f,max:p}=this.constraints[u];h.set(Fe(f,p,s[u]))})}addListeners(){if(!this.visualElement.current)return;tb.set(this.visualElement,this);const t=this.visualElement.current,n=or(t,"pointerdown",f=>{const{drag:p,dragListener:v=!0}=this.getProps();p&&v&&this.start(f)}),r=()=>{const{dragConstraints:f}=this.getProps();Ss(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Te.read(r);const u=rr(window,"resize",()=>this.scalePositionWithinConstraints()),h=s.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p})=>{this.isDragging&&p&&(tn(v=>{const y=this.getAxisMotionValue(v);y&&(this.originPoint[v]+=f[v].translate,y.set(y.get()+f[v].translate))}),this.visualElement.render())});return()=>{u(),n(),a(),h&&h()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:u=sd,dragMomentum:h=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:u,dragMomentum:h}}}function Dl(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function rb(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class ib extends si{constructor(t){super(t),this.removeGroupControls=wt,this.removeListeners=wt,this.controls=new nb(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||wt}unmount(){this.removeGroupControls(),this.removeListeners()}}const gv=e=>(t,n)=>{e&&Te.postRender(()=>e(t,n))};class sb extends si{constructor(){super(...arguments),this.removePointerDownListener=wt}onPointerDown(t){this.session=new r1(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:h1(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:gv(t),onStart:gv(n),onMove:r,onEnd:(a,u)=>{delete this.session,s&&Te.postRender(()=>s(a,u))}}}mount(){this.removePointerDownListener=or(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function ob(){const e=D.useContext(dp);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,s=D.useId();D.useEffect(()=>r(s),[]);const a=D.useCallback(()=>n&&n(s),[s,n]);return!t&&n?[!1,a]:[!0]}const Jl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function yv(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ho={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(oe.test(e))e=parseFloat(e);else return e;const n=yv(e,t.target.x),r=yv(e,t.target.y);return`${n}% ${r}%`}},ab={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=ei.parse(e);if(s.length>5)return r;const a=ei.createTransformer(e),u=typeof s[0]!="number"?1:0,h=n.x.scale*t.x,f=n.y.scale*t.y;s[0+u]/=h,s[1+u]/=f;const p=Fe(h,f,.5);return typeof s[2+u]=="number"&&(s[2+u]/=p),typeof s[3+u]=="number"&&(s[3+u]/=p),a(s)}};class lb extends D.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=t;eO(ub),a&&(n.group&&n.group.add(a),r&&r.register&&s&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Jl.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:a}=this.props,u=r.projection;return u&&(u.isPresent=a,s||t.layoutDependency!==n||n===void 0?u.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?u.promote():u.relegate()||Te.postRender(()=>{const h=u.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),mp.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function f1(e){const[t,n]=ob(),r=D.useContext(rC);return de.jsx(lb,{...e,layoutGroup:r,switchLayoutGroup:D.useContext(eC),isPresent:t,safeToRemove:n})}const ub={borderRadius:{...Ho,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ho,borderTopRightRadius:Ho,borderBottomLeftRadius:Ho,borderBottomRightRadius:Ho,boxShadow:ab},d1=["TopLeft","TopRight","BottomLeft","BottomRight"],cb=d1.length,vv=e=>typeof e=="string"?parseFloat(e):e,wv=e=>typeof e=="number"||oe.test(e);function hb(e,t,n,r,s,a){s?(e.opacity=Fe(0,n.opacity!==void 0?n.opacity:1,fb(r)),e.opacityExit=Fe(t.opacity!==void 0?t.opacity:1,0,db(r))):a&&(e.opacity=Fe(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let u=0;u<cb;u++){const h=`border${d1[u]}Radius`;let f=Sv(t,h),p=Sv(n,h);if(f===void 0&&p===void 0)continue;f||(f=0),p||(p=0),f===0||p===0||wv(f)===wv(p)?(e[h]=Math.max(Fe(vv(f),vv(p),r),0),(zn.test(p)||zn.test(f))&&(e[h]+="%")):e[h]=p}(t.rotate||n.rotate)&&(e.rotate=Fe(t.rotate||0,n.rotate||0,r))}function Sv(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const fb=p1(0,.5,$C),db=p1(.5,.95,wt);function p1(e,t,n){return r=>r<e?0:r>t?1:n(Ua(e,t,r))}function Cv(e,t){e.min=t.min,e.max=t.max}function en(e,t){Cv(e.x,t.x),Cv(e.y,t.y)}function Tv(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Rv(e,t,n,r,s){return e-=t,e=bu(e,1/n,r),s!==void 0&&(e=bu(e,1/s,r)),e}function pb(e,t=0,n=1,r=.5,s,a=e,u=e){if(zn.test(t)&&(t=parseFloat(t),t=Fe(u.min,u.max,t/100)-u.min),typeof t!="number")return;let h=Fe(a.min,a.max,r);e===a&&(h-=t),e.min=Rv(e.min,t,n,h,s),e.max=Rv(e.max,t,n,h,s)}function Ev(e,t,[n,r,s],a,u){pb(e,t[n],t[r],t[s],t.scale,a,u)}const mb=["x","scaleX","originX"],gb=["y","scaleY","originY"];function Pv(e,t,n,r){Ev(e.x,t,mb,n?n.x:void 0,r?r.x:void 0),Ev(e.y,t,gb,n?n.y:void 0,r?r.y:void 0)}function Av(e){return e.translate===0&&e.scale===1}function m1(e){return Av(e.x)&&Av(e.y)}function _v(e,t){return e.min===t.min&&e.max===t.max}function yb(e,t){return _v(e.x,t.x)&&_v(e.y,t.y)}function xv(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function g1(e,t){return xv(e.x,t.x)&&xv(e.y,t.y)}function Ov(e){return Xt(e.x)/Xt(e.y)}function kv(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class vb{constructor(){this.members=[]}add(t){nc(this.members,t),t.scheduleRender()}remove(t){if(rc(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function wb(e,t,n){let r="";const s=e.x.translate/t.x,a=e.y.translate/t.y,u=(n==null?void 0:n.z)||0;if((s||a||u)&&(r=`translate3d(${s}px, ${a}px, ${u}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:p,rotate:v,rotateX:y,rotateY:w,skewX:P,skewY:_}=n;p&&(r=`perspective(${p}px) ${r}`),v&&(r+=`rotate(${v}deg) `),y&&(r+=`rotateX(${y}deg) `),w&&(r+=`rotateY(${w}deg) `),P&&(r+=`skewX(${P}deg) `),_&&(r+=`skewY(${_}deg) `)}const h=e.x.scale*t.x,f=e.y.scale*t.y;return(h!==1||f!==1)&&(r+=`scale(${h}, ${f})`),r||"none"}const Sb=(e,t)=>e.depth-t.depth;class Cb{constructor(){this.children=[],this.isDirty=!1}add(t){nc(this.children,t),this.isDirty=!0}remove(t){rc(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Sb),this.isDirty=!1,this.children.forEach(t)}}function Tb(e,t){const n=cr.now(),r=({timestamp:s})=>{const a=s-n;a>=t&&(mr(r),e(a-t))};return Te.read(r,!0),()=>mr(r)}function Rb(e){return e instanceof SVGElement&&e.tagName!=="svg"}function Eb(e,t,n){const r=vt(e)?e:Fa(e);return r.start(Up("",r,t,n)),r.animation}const yi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Yo=typeof window<"u"&&window.MotionDebug!==void 0,Mh=["","X","Y","Z"],Pb={visibility:"hidden"},Mv=1e3;let Ab=0;function bh(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function y1(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=t1(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Te,!(s||a))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&y1(r)}function v1({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(u={},h=t==null?void 0:t()){this.id=Ab++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Yo&&(yi.totalNodes=yi.resolvedTargetDeltas=yi.recalculatedProjection=0),this.nodes.forEach(Ob),this.nodes.forEach(Lb),this.nodes.forEach(Nb),this.nodes.forEach(kb),Yo&&window.MotionDebug.record(yi)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new Cb)}addEventListener(u,h){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new Fp),this.eventHandlers.get(u).add(h)}notifyListeners(u,...h){const f=this.eventHandlers.get(u);f&&f.notify(...h)}hasListeners(u){return this.eventHandlers.has(u)}mount(u,h=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Rb(u),this.instance=u;const{layoutId:f,layout:p,visualElement:v}=this.options;if(v&&!v.current&&v.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),h&&(p||f)&&(this.isLayoutDirty=!0),e){let y;const w=()=>this.root.updateBlockedByResize=!1;e(u,()=>{this.root.updateBlockedByResize=!0,y&&y(),y=Tb(w,250),Jl.hasAnimatedSinceResize&&(Jl.hasAnimatedSinceResize=!1,this.nodes.forEach(Iv))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&v&&(f||p)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:w,hasRelativeTargetChanged:P,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||v.getDefaultTransition()||Vb,{onLayoutAnimationStart:k,onLayoutAnimationComplete:C}=v.getProps(),S=!this.targetLayout||!g1(this.targetLayout,_)||P,E=!w&&P;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||E||w&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(y,E);const T={...xp(A,"layout"),onPlay:k,onComplete:C};(v.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T)}else w||Iv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,mr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Db),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&y1(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let v=0;v<this.path.length;v++){const y=this.path[v];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:h,layout:f}=this.options;if(h===void 0&&!f)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(bv);return}this.isUpdating||this.nodes.forEach(bb),this.isUpdating=!1,this.nodes.forEach(Ib),this.nodes.forEach(_b),this.nodes.forEach(xb),this.clearAllSnapshots();const h=cr.now();at.delta=Zr(0,1e3/60,h-at.timestamp),at.timestamp=h,at.isProcessing=!0,Ch.update.process(at),Ch.preRender.process(at),Ch.render.process(at),at.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,mp.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Mb),this.sharedNodes.forEach(Ub)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Te.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Te.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=He(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(h=!1),h){const f=r(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!s)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!m1(this.projectionDelta),f=this.getTransformTemplate(),p=f?f(this.latestValues,""):void 0,v=p!==this.prevTransformTemplateValue;u&&(h||gi(this.latestValues)||v)&&(s(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const h=this.measurePageBox();let f=this.removeElementScroll(h);return u&&(f=this.removeTransform(f)),jb(f),{animationId:this.root.animationId,measuredBox:h,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:h}=this.options;if(!h)return He();const f=h.measureViewportBox();if(!(((u=this.scroll)===null||u===void 0?void 0:u.wasRoot)||this.path.some(zb))){const{scroll:v}=this.root;v&&(Rs(f.x,v.offset.x),Rs(f.y,v.offset.y))}return f}removeElementScroll(u){var h;const f=He();if(en(f,u),!((h=this.scroll)===null||h===void 0)&&h.wasRoot)return f;for(let p=0;p<this.path.length;p++){const v=this.path[p],{scroll:y,options:w}=v;v!==this.root&&y&&w.layoutScroll&&(y.wasRoot&&en(f,u),Rs(f.x,y.offset.x),Rs(f.y,y.offset.y))}return f}applyTransform(u,h=!1){const f=He();en(f,u);for(let p=0;p<this.path.length;p++){const v=this.path[p];!h&&v.options.layoutScroll&&v.scroll&&v!==v.root&&Es(f,{x:-v.scroll.offset.x,y:-v.scroll.offset.y}),gi(v.latestValues)&&Es(f,v.latestValues)}return gi(this.latestValues)&&Es(f,this.latestValues),f}removeTransform(u){const h=He();en(h,u);for(let f=0;f<this.path.length;f++){const p=this.path[f];if(!p.instance||!gi(p.latestValues))continue;od(p.latestValues)&&p.updateSnapshot();const v=He(),y=p.measurePageBox();en(v,y),Pv(h,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,v)}return gi(this.latestValues)&&Pv(h,this.latestValues),h}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==at.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var h;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==f;if(!(u||p&&this.isSharedProjectionDirty||this.isProjectionDirty||!((h=this.parent)===null||h===void 0)&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:w}=this.options;if(!(!this.layout||!(y||w))){if(this.resolvedRelativeTargetAt=at.timestamp,!this.targetDelta&&!this.relativeTarget){const P=this.getClosestProjectingParent();P&&P.layout&&this.animationProgress!==1?(this.relativeParent=P,this.forceRelativeParentToResolveTarget(),this.relativeTarget=He(),this.relativeTargetOrigin=He(),fa(this.relativeTargetOrigin,this.layout.layoutBox,P.layout.layoutBox),en(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=He(),this.targetWithTransforms=He()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),HM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):en(this.target,this.layout.layoutBox),u1(this.target,this.targetDelta)):en(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const P=this.getClosestProjectingParent();P&&!!P.resumingFrom==!!this.resumingFrom&&!P.options.layoutScroll&&P.target&&this.animationProgress!==1?(this.relativeParent=P,this.forceRelativeParentToResolveTarget(),this.relativeTarget=He(),this.relativeTargetOrigin=He(),fa(this.relativeTargetOrigin,this.target,P.target),en(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Yo&&yi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||od(this.parent.latestValues)||l1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var u;const h=this.getLead(),f=!!this.resumingFrom||this!==h;let p=!0;if((this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty)&&(p=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===at.timestamp&&(p=!1),p)return;const{layout:v,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(v||y))return;en(this.layoutCorrected,this.layout.layoutBox);const w=this.treeScale.x,P=this.treeScale.y;ZM(this.layoutCorrected,this.treeScale,this.path,f),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox,h.targetWithTransforms=He());const{target:_}=h;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Tv(this.prevProjectionDelta.x,this.projectionDelta.x),Tv(this.prevProjectionDelta.y,this.projectionDelta.y)),ha(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==w||this.treeScale.y!==P||!kv(this.projectionDelta.x,this.prevProjectionDelta.x)||!kv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_)),Yo&&yi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var h;if((h=this.options.visualElement)===null||h===void 0||h.scheduleRender(),u){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ts(),this.projectionDelta=Ts(),this.projectionDeltaWithTransform=Ts()}setAnimationOrigin(u,h=!1){const f=this.snapshot,p=f?f.latestValues:{},v={...this.latestValues},y=Ts();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const w=He(),P=f?f.source:void 0,_=this.layout?this.layout.source:void 0,A=P!==_,k=this.getStack(),C=!k||k.members.length<=1,S=!!(A&&!C&&this.options.crossfade===!0&&!this.path.some(Bb));this.animationProgress=0;let E;this.mixTargetDelta=T=>{const I=T/1e3;Lv(y.x,u.x,I),Lv(y.y,u.y,I),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(fa(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Fb(this.relativeTarget,this.relativeTargetOrigin,w,I),E&&yb(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=He()),en(E,this.relativeTarget)),A&&(this.animationValues=v,hb(v,p,this.latestValues,I,S,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=I},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(mr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Te.update(()=>{Jl.hasAnimatedSinceResize=!0,this.currentAnimation=Eb(0,Mv,{...u,onUpdate:h=>{this.mixTargetDelta(h),u.onUpdate&&u.onUpdate(h)},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Mv),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:h,target:f,layout:p,latestValues:v}=u;if(!(!h||!f||!p)){if(this!==u&&this.layout&&p&&w1(this.options.animationType,this.layout.layoutBox,p.layoutBox)){f=this.target||He();const y=Xt(this.layout.layoutBox.x);f.x.min=u.target.x.min,f.x.max=f.x.min+y;const w=Xt(this.layout.layoutBox.y);f.y.min=u.target.y.min,f.y.max=f.y.min+w}en(h,f),Es(h,v),ha(this.projectionDeltaWithTransform,this.layoutCorrected,h,v)}}registerSharedNode(u,h){this.sharedNodes.has(u)||this.sharedNodes.set(u,new vb),this.sharedNodes.get(u).add(h);const p=h.options.initialPromotionConfig;h.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(h):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var u;const{layoutId:h}=this.options;return h?((u=this.getStack())===null||u===void 0?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:h}=this.options;return h?(u=this.getStack())===null||u===void 0?void 0:u.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:h,preserveFollowOpacity:f}={}){const p=this.getStack();p&&p.promote(this,f),u&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let h=!1;const{latestValues:f}=u;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(h=!0),!h)return;const p={};f.z&&bh("z",u,p,this.animationValues);for(let v=0;v<Mh.length;v++)bh(`rotate${Mh[v]}`,u,p,this.animationValues),bh(`skew${Mh[v]}`,u,p,this.animationValues);u.render();for(const v in p)u.setStaticValue(v,p[v]),this.animationValues&&(this.animationValues[v]=p[v]);u.scheduleRender()}getProjectionStyles(u){var h,f;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Pb;const p={visibility:""},v=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,p.opacity="",p.pointerEvents=Xl(u==null?void 0:u.pointerEvents)||"",p.transform=v?v(this.latestValues,""):"none",p;const y=this.getLead();if(!this.projectionDelta||!this.layout||!y.target){const A={};return this.options.layoutId&&(A.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,A.pointerEvents=Xl(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!gi(this.latestValues)&&(A.transform=v?v({},""):"none",this.hasProjected=!1),A}const w=y.animationValues||y.latestValues;this.applyTransformsToTarget(),p.transform=wb(this.projectionDeltaWithTransform,this.treeScale,w),v&&(p.transform=v(w,p.transform));const{x:P,y:_}=this.projectionDelta;p.transformOrigin=`${P.origin*100}% ${_.origin*100}% 0`,y.animationValues?p.opacity=y===this?(f=(h=w.opacity)!==null&&h!==void 0?h:this.latestValues.opacity)!==null&&f!==void 0?f:1:this.preserveOpacity?this.latestValues.opacity:w.opacityExit:p.opacity=y===this?w.opacity!==void 0?w.opacity:"":w.opacityExit!==void 0?w.opacityExit:0;for(const A in _u){if(w[A]===void 0)continue;const{correct:k,applyTo:C}=_u[A],S=p.transform==="none"?w[A]:k(w[A],y);if(C){const E=C.length;for(let T=0;T<E;T++)p[C[T]]=S}else p[A]=S}return this.options.layoutId&&(p.pointerEvents=y===this?Xl(u==null?void 0:u.pointerEvents)||"":"none"),p}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var h;return(h=u.currentAnimation)===null||h===void 0?void 0:h.stop()}),this.root.nodes.forEach(bv),this.root.sharedNodes.clear()}}}function _b(e){e.updateLayout()}function xb(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:a}=e.options,u=n.source!==e.layout.source;a==="size"?tn(y=>{const w=u?n.measuredBox[y]:n.layoutBox[y],P=Xt(w);w.min=r[y].min,w.max=w.min+P}):w1(a,n.layoutBox,r)&&tn(y=>{const w=u?n.measuredBox[y]:n.layoutBox[y],P=Xt(r[y]);w.max=w.min+P,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[y].max=e.relativeTarget[y].min+P)});const h=Ts();ha(h,r,n.layoutBox);const f=Ts();u?ha(f,e.applyTransform(s,!0),n.measuredBox):ha(f,r,n.layoutBox);const p=!m1(h);let v=!1;if(!e.resumeFrom){const y=e.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:w,layout:P}=y;if(w&&P){const _=He();fa(_,n.layoutBox,w.layoutBox);const A=He();fa(A,r,P.layoutBox),g1(_,A)||(v=!0),y.options.layoutRoot&&(e.relativeTarget=A,e.relativeTargetOrigin=_,e.relativeParent=y)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:f,layoutDelta:h,hasLayoutChanged:p,hasRelativeTargetChanged:v})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function Ob(e){Yo&&yi.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function kb(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Mb(e){e.clearSnapshot()}function bv(e){e.clearMeasurements()}function bb(e){e.isLayoutDirty=!1}function Ib(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Iv(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Lb(e){e.resolveTargetDelta()}function Nb(e){e.calcProjection()}function Db(e){e.resetSkewAndRotation()}function Ub(e){e.removeLeadSnapshot()}function Lv(e,t,n){e.translate=Fe(t.translate,0,n),e.scale=Fe(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Nv(e,t,n,r){e.min=Fe(t.min,n.min,r),e.max=Fe(t.max,n.max,r)}function Fb(e,t,n,r){Nv(e.x,t.x,n.x,r),Nv(e.y,t.y,n.y,r)}function Bb(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Vb={duration:.45,ease:[.4,0,.1,1]},Dv=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Uv=Dv("applewebkit/")&&!Dv("chrome/")?Math.round:wt;function Fv(e){e.min=Uv(e.min),e.max=Uv(e.max)}function jb(e){Fv(e.x),Fv(e.y)}function w1(e,t,n){return e==="position"||e==="preserve-aspect"&&!GM(Ov(t),Ov(n),.2)}function zb(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const Gb=v1({attachResizeListener:(e,t)=>rr(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ih={current:void 0},S1=v1({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Ih.current){const e=new Gb({});e.mount(window),e.setOptions({layoutScroll:!0}),Ih.current=e}return Ih.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Hb={pan:{Feature:sb},drag:{Feature:ib,ProjectionNode:S1,MeasureLayout:f1}},ld={current:null},C1={current:!1};function Wb(){if(C1.current=!0,!!pp)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>ld.current=e.matches;e.addListener(t),t()}else ld.current=!1}function qb(e,t,n){for(const r in t){const s=t[r],a=n[r];if(vt(s))e.addValue(r,s);else if(vt(a))e.addValue(r,Fa(s,{owner:e}));else if(a!==s)if(e.hasValue(r)){const u=e.getValue(r);u.liveStyle===!0?u.jump(s):u.hasAnimated||u.set(s)}else{const u=e.getStaticValue(r);e.addValue(r,Fa(u!==void 0?u:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Bv=new WeakMap,$b=[...xC,gt,ei],Kb=e=>$b.find(_C(e)),Vv=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Qb=yp.length;class Xb{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:u},h={}){this.applyWillChange=!1,this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Op,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.isRenderScheduled=!1,this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.isRenderScheduled=!1,this.scheduleRender=()=>{this.isRenderScheduled||(this.isRenderScheduled=!0,Te.render(this.render,!1,!0))};const{latestValues:f,renderState:p}=u;this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=p,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=h,this.blockInitialAnimation=!!a,this.isControllingVariants=tc(n),this.isVariantNode=nC(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:v,...y}=this.scrapeMotionValuesFromProps(n,{},this);for(const w in y){const P=y[w];f[w]!==void 0&&vt(P)&&P.set(f[w],!1)}}mount(t){this.current=t,Bv.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),C1.current||Wb(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ld.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Bv.delete(this.current),this.projection&&this.projection.unmount(),mr(this.notifyUpdate),mr(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=ii.has(t),s=n.on("change",h=>{this.latestValues[t]=h,this.props.onUpdate&&Te.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),a(),u&&u(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in to){const n=to[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):He()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Vv.length;r++){const s=Vv[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,u=t[a];u&&(this.propEventSubscriptions[s]=this.on(s,u))}this.prevMotionValues=qb(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<Qb;r++){const s=yp[r],a=this.props[s];(La(a)||a===!1)&&(n[s]=a)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Fa(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){var r;let s=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options);return s!=null&&(typeof s=="string"&&(PC(s)||EC(s))?s=parseFloat(s):!Kb(s)&&ei.test(n)&&(s=DC(t,n)),this.setBaseTarget(t,vt(s)?s.get():s)),vt(s)?s.get():s}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const u=_p(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);u&&(s=u[t])}if(r&&s!==void 0)return s;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!vt(a)?a:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Fp),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class T1 extends Xb{constructor(){super(...arguments),this.KeyframeResolver=UC}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}}function Yb(e){return window.getComputedStyle(e)}class Jb extends T1{constructor(){super(...arguments),this.type="html",this.applyWillChange=!0,this.renderInstance=hC}readValueFromInstance(t,n){if(ii.has(n)){const r=Mp(n);return r&&r.default||0}else{const r=Yb(t),s=(aC(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return c1(t,n)}build(t,n,r){Tp(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return Ap(t,n,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;vt(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class Zb extends T1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=He}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(ii.has(n)){const r=Mp(n);return r&&r.default||0}return n=fC.has(n)?n:ec(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return pC(t,n,r)}build(t,n,r){Ep(t,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,r,s){dC(t,n,r,s)}mount(t){this.isSVGTag=Pp(t.tagName),super.mount(t)}}const eI=(e,t)=>vp(e)?new Zb(t):new Jb(t,{allowProjection:e!==D.Fragment}),tI={layout:{ProjectionNode:S1,MeasureLayout:f1}},nI={...NM,...HO,...Hb,...tI},Mr=Jx((e,t)=>MO(e,t,nI,eI));var R1={exports:{}};(function(e){(function(){function t(A,k){document.addEventListener?A.addEventListener("scroll",k,!1):A.attachEvent("scroll",k)}function n(A){document.body?A():document.addEventListener?document.addEventListener("DOMContentLoaded",function k(){document.removeEventListener("DOMContentLoaded",k),A()}):document.attachEvent("onreadystatechange",function k(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",k),A())})}function r(A){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(A)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function s(A,k){A.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+k+";"}function a(A){var k=A.g.offsetWidth,C=k+100;return A.j.style.width=C+"px",A.i.scrollLeft=C,A.h.scrollLeft=A.h.scrollWidth+100,A.l!==k?(A.l=k,!0):!1}function u(A,k){function C(){var E=S;a(E)&&E.g.parentNode!==null&&k(E.l)}var S=A;t(A.h,C),t(A.i,C),a(A)}function h(A,k,C){k=k||{},C=C||window,this.family=A,this.style=k.style||"normal",this.weight=k.weight||"normal",this.stretch=k.stretch||"normal",this.context=C}var f=null,p=null,v=null,y=null;function w(A){return p===null&&(P(A)&&/Apple/.test(window.navigator.vendor)?(A=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),p=!!A&&603>parseInt(A[1],10)):p=!1),p}function P(A){return y===null&&(y=!!A.document.fonts),y}function _(A,k){var C=A.style,S=A.weight;if(v===null){var E=document.createElement("div");try{E.style.font="condensed 100px sans-serif"}catch{}v=E.style.font!==""}return[C,S,v?A.stretch:"","100px",k].join(" ")}h.prototype.load=function(A,k){var C=this,S=A||"BESbswy",E=0,T=k||3e3,I=new Date().getTime();return new Promise(function(V,H){if(P(C.context)&&!w(C.context)){var F=new Promise(function(X,m){function _e(){new Date().getTime()-I>=T?m(Error(""+T+"ms timeout exceeded")):C.context.document.fonts.load(_(C,'"'+C.family+'"'),S).then(function(Ne){1<=Ne.length?X():setTimeout(_e,25)},m)}_e()}),J=new Promise(function(X,m){E=setTimeout(function(){m(Error(""+T+"ms timeout exceeded"))},T)});Promise.race([J,F]).then(function(){clearTimeout(E),V(C)},H)}else n(function(){function X(){var re;(re=ue!=-1&&Ee!=-1||ue!=-1&&Z!=-1||Ee!=-1&&Z!=-1)&&((re=ue!=Ee&&ue!=Z&&Ee!=Z)||(f===null&&(re=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),f=!!re&&(536>parseInt(re[1],10)||parseInt(re[1],10)===536&&11>=parseInt(re[2],10))),re=f&&(ue==W&&Ee==W&&Z==W||ue==se&&Ee==se&&Z==se||ue==ie&&Ee==ie&&Z==ie)),re=!re),re&&(ne.parentNode!==null&&ne.parentNode.removeChild(ne),clearTimeout(E),V(C))}function m(){if(new Date().getTime()-I>=T)ne.parentNode!==null&&ne.parentNode.removeChild(ne),H(Error(""+T+"ms timeout exceeded"));else{var re=C.context.document.hidden;(re===!0||re===void 0)&&(ue=_e.g.offsetWidth,Ee=Ne.g.offsetWidth,Z=N.g.offsetWidth,X()),E=setTimeout(m,50)}}var _e=new r(S),Ne=new r(S),N=new r(S),ue=-1,Ee=-1,Z=-1,W=-1,se=-1,ie=-1,ne=document.createElement("div");ne.dir="ltr",s(_e,_(C,"sans-serif")),s(Ne,_(C,"serif")),s(N,_(C,"monospace")),ne.appendChild(_e.g),ne.appendChild(Ne.g),ne.appendChild(N.g),C.context.document.body.appendChild(ne),W=_e.g.offsetWidth,se=Ne.g.offsetWidth,ie=N.g.offsetWidth,m(),u(_e,function(re){ue=re,X()}),s(_e,_(C,'"'+C.family+'",sans-serif')),u(Ne,function(re){Ee=re,X()}),s(Ne,_(C,'"'+C.family+'",serif')),u(N,function(re){Z=re,X()}),s(N,_(C,'"'+C.family+'",monospace'))})})},e.exports=h})()})(R1);var rI=R1.exports;const iI=a0(rI),sI=()=>{const[e,t]=D.useState(!1);return D.useEffect(()=>{const n=MS.map(({fontName:r})=>new iI(r).load());Promise.all(n).then(()=>{window.dispatchEvent(new Event("resize")),t(!0)}).catch(r=>{console.error("Error loading fonts:",r)})},[]),e},oI="2.3.1";function aI(e){return Object.assign(Object.assign({},e),{params:Object.assign(Object.assign({},e==null?void 0:e.params),{agent:`react-hooks/${oI}`})})}const jv=Symbol.for("__ABLY_CONTEXT__"),zv=typeof globalThis<"u"?globalThis:{};function lI(){let e=zv[jv];return e||(e=zv[jv]=so.createContext({})),e}const ro=lI();function E1(e="default"){const t=so.useContext(ro)[e].client;if(!t)throw new Error("Could not find ably client in context. Make sure your ably hooks are called inside an <AblyProvider>");return t}function P1(e,t,n){const r=D.useRef(t);D.useEffect(()=>{r.current=t},[t]),D.useEffect(()=>(n?e.on(n,r.current):e.on(t),()=>{n?e.off(n,t):e.off(t)}),[e,n,t])}function Gv(e,t,n="default"){const s=E1(typeof t=="string"?t:n),a=typeof t=="function"?t:e,u=typeof e!="function"?e:void 0;P1(s.connection,a,u)}function A1(e="default",t){const n=so.useContext(ro)[e]._channelNameToChannelContext[t];if(!n)throw new Error(`Could not find a parent ChannelProvider in the component tree for channelName="${t}". Make sure your channel based hooks (usePresence, useChannel, useChannelStateListener) are called inside a <ChannelProvider> component`);return n}function Hv(e,t,n){const r=typeof e=="object"?e:{channelName:e},{ablyId:s,channelName:a}=r,{channel:u}=A1(s,a);P1(u,typeof n=="function"?n:t,typeof t!="function"?t:void 0)}function uI(e){const[t,n]=D.useState(null),[r,s]=D.useState(null);return Gv(["suspended","failed","disconnected"],a=>{var u;a.reason&&((u=e.onConnectionError)===null||u===void 0||u.call(e,a.reason),n(a.reason))},e.ablyId),Gv(["connected","closed"],()=>{n(null)},e.ablyId),Hv(e,["suspended","failed","detached"],a=>{var u;a.reason&&((u=e.onChannelError)===null||u===void 0||u.call(e,a.reason),s(a.reason))}),Hv(e,["attached"],()=>{s(null)}),{connectionError:t,channelError:r}}function cI(e,t,n){const r=typeof e=="object"?e:{channelName:e},s=E1(r.ablyId),{channelName:a,skip:u}=r,{channel:h,derived:f}=A1(r.ablyId,a),p=D.useMemo(()=>{if(!f)return h.publish.bind(h);const A=s.channels.get(a);return A.publish.bind(A)},[s.channels,f,h,a]),v=typeof t=="string"?t:null,y=typeof t=="string"?n:t,w=D.useRef(y),{connectionError:P,channelError:_}=uI(r);return D.useEffect(()=>{w.current=y},[y]),D.useEffect(()=>{const A=w.current?C=>{w.current&&w.current(C)}:null,k=A?v===null?[A]:[v,A]:null;return!u&&k&&hI(h,...k),()=>{!u&&k&&fI(h,...k)}},[v,h,u]),{channel:h,publish:p,ably:s,connectionError:P,channelError:_}}async function hI(e,...t){await e.subscribe(...t)}async function fI(e,...t){await e.unsubscribe(...t)}const dI=({client:e,children:t,ablyId:n="default"})=>{if(!e)throw new Error("AblyProvider: the `client` prop is required");const r=so.useContext(ro),s=D.useMemo(()=>Object.assign(Object.assign({},r),{[n]:{client:e,_channelNameToChannelContext:{}}}),[r,e,n]);return de.jsx(ro.Provider,Object.assign({value:s},{children:t}))},Lh=({ablyId:e="default",channelName:t,options:n,deriveOptions:r,children:s})=>{const a=so.useContext(ro),{client:u,_channelNameToChannelContext:h}=a[e];if(h[t])throw new Error("You can not use more than one `ChannelProvider` with the same channel name");const f=!!r,p=f?u.channels.getDerived(t,r):u.channels.get(t),v=D.useMemo(()=>Object.assign(Object.assign({},a),{[e]:{client:u,_channelNameToChannelContext:Object.assign(Object.assign({},h),{[t]:{channel:p,derived:f}})}}),[f,u,p,t,h,e,a]);return D.useLayoutEffect(()=>{p.setOptions(aI(n))},[p,n]),de.jsx(ro.Provider,Object.assign({value:v},{children:s}))},Bp=(e,t)=>{cI(e,t),D.useEffect(()=>()=>{},[e])},pI=(e,t)=>{Bp("form-submissions",r=>{const s=Q_(r);e(a=>[...a,s]),t(a=>{const u=new Set(a);return u.add(s.timestamp),u}),setTimeout(()=>{t(a=>{const u=new Set(a);return u.delete(s.timestamp),u})},1e4)})},mI=(e,t)=>{Bp("test-updates",()=>{const r={name:"Teresa",response:"This is my test response This is my test response This is my test response This is my test response",timestamp:ex()};e(s=>[...s,r]),t(s=>{const a=new Set(s);return a.add(r.timestamp),a}),setTimeout(()=>{t(s=>{const a=new Set(s);return a.delete(r.timestamp),a})},5e3)})},gI=()=>{const e=KS();Bp("sheet-update",()=>{e.invalidateQueries({queryKey:["data"]})})};var ac={},Vp={},_1={exports:{}},yI="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",vI=yI,wI=vI;function x1(){}function O1(){}O1.resetWarningCache=x1;var SI=function(){function e(r,s,a,u,h,f){if(f!==wI){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:O1,resetWarningCache:x1};return n.PropTypes=n,n};_1.exports=SI();var CI=_1.exports,jp={};Object.defineProperty(jp,"__esModule",{value:!0});jp.default=TI;function TI(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var s=Object.prototype.hasOwnProperty,a=0;a<n.length;a++)if(!s.call(t,n[a])||e[n[a]]!==t[n[a]])return!1;return!0}var zp={},k1={exports:{}},qe=k1.exports={},In,Ln;function ud(){throw new Error("setTimeout has not been defined")}function cd(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?In=setTimeout:In=ud}catch{In=ud}try{typeof clearTimeout=="function"?Ln=clearTimeout:Ln=cd}catch{Ln=cd}})();function M1(e){if(In===setTimeout)return setTimeout(e,0);if((In===ud||!In)&&setTimeout)return In=setTimeout,setTimeout(e,0);try{return In(e,0)}catch{try{return In.call(null,e,0)}catch{return In.call(this,e,0)}}}function RI(e){if(Ln===clearTimeout)return clearTimeout(e);if((Ln===cd||!Ln)&&clearTimeout)return Ln=clearTimeout,clearTimeout(e);try{return Ln(e)}catch{try{return Ln.call(null,e)}catch{return Ln.call(this,e)}}}var ir=[],Is=!1,Ti,Zl=-1;function EI(){!Is||!Ti||(Is=!1,Ti.length?ir=Ti.concat(ir):Zl=-1,ir.length&&b1())}function b1(){if(!Is){var e=M1(EI);Is=!0;for(var t=ir.length;t;){for(Ti=ir,ir=[];++Zl<t;)Ti&&Ti[Zl].run();Zl=-1,t=ir.length}Ti=null,Is=!1,RI(e)}}qe.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];ir.push(new I1(e,t)),ir.length===1&&!Is&&M1(b1)};function I1(e,t){this.fun=e,this.array=t}I1.prototype.run=function(){this.fun.apply(null,this.array)};qe.title="browser";qe.browser=!0;qe.env={};qe.argv=[];qe.version="";qe.versions={};function yr(){}qe.on=yr;qe.addListener=yr;qe.once=yr;qe.off=yr;qe.removeListener=yr;qe.removeAllListeners=yr;qe.emit=yr;qe.prependListener=yr;qe.prependOnceListener=yr;qe.listeners=function(e){return[]};qe.binding=function(e){throw new Error("process.binding is not supported")};qe.cwd=function(){return"/"};qe.chdir=function(e){throw new Error("process.chdir is not supported")};qe.umask=function(){return 0};var PI=k1.exports;Object.defineProperty(zp,"__esModule",{value:!0});zp.default=OI;var AI=PI,_I=xI(AI);function xI(e){return e&&e.__esModule?e:{default:e}}function OI(e,t){var n=[],r=0,s=!0;function a(h){function f(){t&&t(h,n)}s?_I.default.nextTick(f):f()}function u(h,f){n.push(f),++r>=e.length||h?a(h):e[r](u)}e.length>0?e[0](u):a(null),s=!1}var Gp={};Object.defineProperty(Gp,"__esModule",{value:!0});Gp.default=MI;var kI=function(){};function MI(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:kI;e()?t(function r(s){for(var a=arguments.length,u=Array(a>1?a-1:0),h=1;h<a;h++)u[h-1]=arguments[h];s?n(s):e.apply(this,u)?t(r):n(null)}):n(null)}var Hp={};Object.defineProperty(Hp,"__esModule",{value:!0});Hp.default=bI;function bI(e,t){var n=void 0,r=void 0,s=void 0,a=void 0,u=0;function h(){a=0,u=+new Date,s=e.apply(n,r),n=null,r=null}return function(){n=this,r=arguments;var p=new Date-u;return a||(p>=t?h():a=setTimeout(h,t-p)),s}}var Wp={};Object.defineProperty(Wp,"__esModule",{value:!0});Wp.default=LI;var II=0;function LI(){return II++}var lc={};Object.defineProperty(lc,"__esModule",{value:!0});lc.innerHeight=NI;lc.innerWidth=DI;function NI(e){var t=window.getComputedStyle(e,null);return t?e.clientHeight-parseInt(t.getPropertyValue("padding-top"),10)-parseInt(t.getPropertyValue("padding-bottom"),10):e.clientHeight}function DI(e){var t=window.getComputedStyle(e,null);return t?e.clientWidth-parseInt(t.getPropertyValue("padding-left"),10)-parseInt(t.getPropertyValue("padding-right"),10):e.clientWidth}Object.defineProperty(Vp,"__esModule",{value:!0});var Wv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UI=function(){function e(t,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),FI=D,Nh=ji(FI),BI=CI,Ar=ji(BI),VI=jp,jI=ji(VI),zI=zp,GI=ji(zI),HI=Gp,qv=ji(HI),WI=Hp,qI=ji(WI),$I=Wp,$v=ji($I),Kv=lc;function ji(e){return e&&e.__esModule?e:{default:e}}function KI(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function QI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XI(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function YI(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Qv(e,t){return e.scrollWidth-1<=t}function Xv(e,t){return e.scrollHeight-1<=t}function JI(){}var qp=function(e){YI(t,e);function t(n){QI(this,t);var r=XI(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return r.state={fontSize:null,ready:!1},r.handleWindowResize=function(){r.process()},"perfectFit"in n&&console.warn("TextFit property perfectFit has been removed."),r.handleWindowResize=(0,qI.default)(r.handleWindowResize,n.throttle),r}return UI(t,[{key:"componentDidMount",value:function(){var r=this.props.autoResize;r&&window.addEventListener("resize",this.handleWindowResize),this.process()}},{key:"componentDidUpdate",value:function(r){var s=this.state.ready;s&&((0,jI.default)(this.props,r)||this.process())}},{key:"componentWillUnmount",value:function(){var r=this.props.autoResize;r&&window.removeEventListener("resize",this.handleWindowResize),this.pid=(0,$v.default)()}},{key:"process",value:function(){var r=this,s=this.props,a=s.min,u=s.max,h=s.mode,f=s.forceSingleModeWidth,p=s.onReady,v=this._parent,y=this._child,w=(0,Kv.innerWidth)(v),P=(0,Kv.innerHeight)(v);if(P<=0||isNaN(P)){console.warn("Can not process element without height. Make sure the element is displayed and has a static height.");return}if(w<=0||isNaN(w)){console.warn("Can not process element without width. Make sure the element is displayed and has a static width.");return}var _=(0,$v.default)();this.pid=_;var A=function(){return _!==r.pid},k=h==="multi"?function(){return Xv(y,P)}:function(){return Qv(y,w)},C=h==="multi"?function(){return Qv(y,w)}:function(){return Xv(y,P)},S=void 0,E=a,T=u;this.setState({ready:!1}),(0,GI.default)([function(I){return(0,qv.default)(function(){return E<=T},function(V){if(A())return V(!0);S=parseInt((E+T)/2,10),r.setState({fontSize:S},function(){return A()?V(!0):(k()?E=S+1:T=S-1,V())})},I)},function(I){return h==="single"&&f||C()?I():(E=a,T=S,(0,qv.default)(function(){return E<T},function(V){if(A())return V(!0);S=parseInt((E+T)/2,10),r.setState({fontSize:S},function(){return _!==r.pid?V(!0):(C()?E=S+1:T=S-1,V())})},I))},function(I){if(S=Math.min(E,T),S=Math.max(S,a),S=Math.min(S,u),S=Math.max(S,0),A())return I(!0);r.setState({fontSize:S},I)}],function(I){I||A()||r.setState({ready:!0},function(){return p(S)})})}},{key:"render",value:function(){var r=this,s=this.props,a=s.children,u=s.text,h=s.style;s.min,s.max;var f=s.mode;s.forceWidth,s.forceSingleModeWidth,s.throttle,s.autoResize,s.onReady;var p=KI(s,["children","text","style","min","max","mode","forceWidth","forceSingleModeWidth","throttle","autoResize","onReady"]),v=this.state,y=v.fontSize,w=v.ready,P=Wv({},h,{fontSize:y}),_={display:w?"block":"inline-block"};return f==="single"&&(_.whiteSpace="nowrap"),Nh.default.createElement("div",Wv({ref:function(k){return r._parent=k},style:P},p),Nh.default.createElement("div",{ref:function(k){return r._child=k},style:_},u&&typeof a=="function"?w?a(u):u:a))}}]),t}(Nh.default.Component);qp.propTypes={children:Ar.default.node,text:Ar.default.string,min:Ar.default.number,max:Ar.default.number,mode:Ar.default.oneOf(["single","multi"]),forceSingleModeWidth:Ar.default.bool,throttle:Ar.default.number,onReady:Ar.default.func};qp.defaultProps={min:1,max:100,mode:"multi",forceSingleModeWidth:!0,throttle:50,autoResize:!0,onReady:JI};Vp.default=qp;Object.defineProperty(ac,"__esModule",{value:!0});var L1=ac.Textfit=void 0,ZI=Vp,N1=eL(ZI);function eL(e){return e&&e.__esModule?e:{default:e}}L1=ac.Textfit=N1.default;ac.default=N1.default;const Dh=({item:e,index:t,fontSize:n,textfitRefs:r,showText:s,showDescription:a,isFeatured:u})=>de.jsxs(Mr.ul,{layout:!0,className:`flex flex-col grow ${u?"bg-opacity-60 bg-white w-full m-3 max-w-[30%] p-3":"m-1 items-end"}`,style:{fontSize:`${n}px`},children:[de.jsxs("div",{className:`relative grow ${a?"max-w-52":u?"max-w-72":"bg-white bg-opacity-60"}`,children:[de.jsx("div",{className:"text-transparent",children:e.response}),de.jsx("div",{className:`absolute inset-0 text-balance ${X_(t)}`,ref:h=>h&&(r.current[e.timestamp]=h),children:de.jsx(L1,{className:"flex w-full h-full items-end",children:s?de.jsx(Mr.p,{initial:{opacity:0},transition:{duration:.3},animate:{opacity:1},children:e.response}):null},e.timestamp+"_response_text")})]}),de.jsx("div",{className:`flex w-full justify-end ${u?"":"bg-white bg-opacity-60"}`,children:de.jsx("p",{className:"text-gray-600 underline",children:e.name})})]},e.timestamp+"_response_item"),tL=D.lazy(()=>x_(()=>import("./Description-ClydY9Qr.js"),[]));function Yv(){const[e,t]=P_(),[n,r]=D.useState(e.get("lang")||"en");D.useEffect(()=>{t(I=>(I.set("lang",n),I))},[n,t]);const s=Ju(),a=new URLSearchParams(s.search),u=a.get("show"),h=a.get("show-desc"),[f,p]=D.useState([]),[v,y]=D.useState(new Set),w=D.useRef({}),{isLoading:P,error:_}=Lx({queryKey:["data"],queryFn:()=>K_(p),staleTime:1/0}),[A,k]=D.useState(!0);if(pI(p,y),mI(p,y),gI(),!sI())return de.jsx("div",{className:"w-screen h-screen flex items-center justify-center",children:de.jsx("p",{className:"text-xl",children:"Fonts loading..."})});if(P)return de.jsx("div",{children:"Loading..."});if(_)return de.jsxs("div",{children:["Error: ",_.message]});const S=Y_(f,u),E=J_(S.length,!!v.size),T=Z_(h);return de.jsxs(Mr.div,{layout:!0,className:"flex w-screen h-screen items-center flex-col",children:[T?de.jsx(D.Suspense,{fallback:de.jsx("div",{children:"Loading description..."}),children:de.jsx(tL,{languagePref:n,setLanguagePref:r})}):null,de.jsx(Mr.div,{layout:!0,className:`flex grow p-0 bg-feminicidio bg-repeat ${T?"w-[80%] border-4 border-gray-100 max-h-[70%]":"w-full h-full"}`,children:de.jsxs(Mr.li,{layout:!0,className:`flex flex-col ${T?"w-full h-full":"w-screen h-screen"}`,children:[de.jsx(Mr.div,{layout:!0,className:"flex grow flex-wrap",onLayoutAnimationStart:()=>k(!1),onLayoutAnimationComplete:()=>k(!0),children:S.filter((I,V)=>V%2===0&&!v.has(I.timestamp)).map((I,V)=>de.jsx(Dh,{item:I,index:V,fontSize:E,textfitRefs:w,showText:A,showDescription:T,isFeatured:!1},I.timestamp))}),de.jsx(Mr.div,{layout:!0,className:`flex justify-around flex-wrap ${v.size>0?"min-h-[30%]":""}`,children:S.filter(I=>v.has(I.timestamp)).map((I,V)=>de.jsx(Dh,{item:I,index:V,fontSize:E,textfitRefs:w,showText:A,showDescription:T,isFeatured:!0},I.timestamp))}),de.jsx(Mr.div,{layout:!0,className:"flex grow flex-wrap",children:S.filter((I,V)=>V%2===1&&!v.has(I.timestamp)).map((I,V)=>de.jsx(Dh,{item:I,index:V,fontSize:E,textfitRefs:w,showText:A,showDescription:T,isFeatured:!1},I.timestamp))})]})})]})}var D1={exports:{}};/*@license Copyright 2015-2022 Ably Real-time Ltd (ably.com)

Ably JavaScript Library v2.3.1
https://github.com/ably/ably-js

Released under the Apache Licence v2.0*/(function(e,t){(function(n,r){e.exports=r()})(Yn,()=>{var n={},r={exports:n},s=Object.defineProperty,a=Object.defineProperties,u=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,w=(i,o,l)=>o in i?s(i,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):i[o]=l,P=(i,o)=>{for(var l in o||(o={}))v.call(o,l)&&w(i,l,o[l]);if(p)for(var l of p(o))y.call(o,l)&&w(i,l,o[l]);return i},_=(i,o)=>a(i,h(o)),A=(i,o)=>{var l={};for(var c in i)v.call(i,c)&&o.indexOf(c)<0&&(l[c]=i[c]);if(i!=null&&p)for(var c of p(i))o.indexOf(c)<0&&y.call(i,c)&&(l[c]=i[c]);return l},k=(i,o)=>{for(var l in o)s(i,l,{get:o[l],enumerable:!0})},C=(i,o,l,c)=>{if(o&&typeof o=="object"||typeof o=="function")for(let d of f(o))!v.call(i,d)&&d!==l&&s(i,d,{get:()=>o[d],enumerable:!(c=u(o,d))||c.enumerable});return i},S=i=>C(s({},"__esModule",{value:!0}),i),E={};k(E,{ErrorInfo:()=>N,Realtime:()=>kc,Rest:()=>wc,default:()=>tE,msgpack:()=>Bc,protocolMessageFromDeserialized:()=>UT}),r.exports=S(E);var T=class{},I=typeof Yn<"u"?Yn:typeof window<"u"?window:self;function V(i,o){return`${i}`.padStart(o?3:2,"0")}function H(i){return T.Config.logTimestamps?function(o){const l=new Date;i(V(l.getHours())+":"+V(l.getMinutes())+":"+V(l.getSeconds())+"."+V(l.getMilliseconds(),1)+" "+o)}:function(o){i(o)}}var F=()=>{var i;let o,l;return typeof((i=I==null?void 0:I.console)==null?void 0:i.log)=="function"?(o=function(...c){console.log.apply(console,c)},l=console.warn?function(...c){console.warn.apply(console,c)}:o):o=l=function(){},[o,l].map(H)},J=class Jo{constructor(){this.deprecated=(o,l)=>{this.deprecationWarning(`${o} is deprecated and will be removed in a future version. ${l}`)},this.shouldLog=o=>o<=this.logLevel,this.setLog=(o,l)=>{o!==void 0&&(this.logLevel=o),l!==void 0&&(this.logHandler=this.logErrorHandler=l)},this.logLevel=Jo.defaultLogLevel,this.logHandler=Jo.defaultLogHandler,this.logErrorHandler=Jo.defaultLogErrorHandler}static initLogHandlers(){const[o,l]=F();this.defaultLogHandler=o,this.defaultLogErrorHandler=l,this.defaultLogger=new Jo}static logActionNoStrip(o,l,c,d){o.logAction(l,c,d)}logAction(o,l,c){this.shouldLog(o)&&(o===1?this.logErrorHandler:this.logHandler)("Ably: "+l+": "+c,o)}renamedClientOption(o,l){this.deprecationWarning(`The \`${o}\` client option has been renamed to \`${l}\`. Please update your code to use \`${l}\` instead. \`${o}\` will be removed in a future version.`)}renamedMethod(o,l,c){this.deprecationWarning(`\`${o}\`’s \`${l}\` method has been renamed to \`${c}\`. Please update your code to use \`${c}\` instead. \`${l}\` will be removed in a future version.`)}deprecationWarning(o){this.shouldLog(1)&&this.logErrorHandler(`Ably: Deprecation warning - ${o}`,1)}};J.defaultLogLevel=1,J.LOG_NONE=0,J.LOG_ERROR=1,J.LOG_MAJOR=2,J.LOG_MINOR=3,J.LOG_MICRO=4,J.logAction=(i,o,l,c)=>{J.logActionNoStrip(i,o,l,c)};var X=J,m=X,_e={};k(_e,{Format:()=>Hn,allSame:()=>Hi,allToLowerCase:()=>$i,allToUpperCase:()=>ai,arrChooseN:()=>po,arrDeleteValue:()=>fo,arrEquals:()=>tl,arrIntersect:()=>ho,arrIntersectOb:()=>zi,arrPopRandomElement:()=>wr,arrSubtract:()=>Za,arrWithoutValue:()=>vr,cheapRandStr:()=>An,containsValue:()=>Ct,copy:()=>W,createMissingPluginError:()=>Qi,dataSizeBytes:()=>Sr,decodeBody:()=>kt,encodeBody:()=>Mt,ensureArray:()=>se,forInOwnNonNullProperties:()=>Gi,getBackoffCoefficient:()=>li,getGlobalObject:()=>ui,getJitterCoefficient:()=>Zt,getRetryTime:()=>_n,inherits:()=>Pe,inspectBody:()=>qi,inspectError:()=>Me,intersect:()=>fn,isEmpty:()=>ne,isErrorInfoOrPartialErrorInfo:()=>Wi,isNil:()=>re,isObject:()=>ie,keysArray:()=>Gn,matchDerivedChannel:()=>el,mixin:()=>Z,parseQueryString:()=>oi,prototypicalClone:()=>jt,randomString:()=>Wn,shallowClone:()=>ke,shallowEquals:()=>Ki,throwMissingPluginError:()=>Se,toBase64:()=>xn,toQueryString:()=>Pn,valuesArray:()=>En,whenPromiseSettles:()=>nt,withTimeoutAsync:()=>qn});function Ne(i){let o="["+i.constructor.name;return i.message&&(o+=": "+i.message),i.statusCode&&(o+="; statusCode="+i.statusCode),i.code&&(o+="; code="+i.code),i.cause&&(o+="; cause="+Me(i.cause)),i.href&&!(i.message&&i.message.indexOf("help.ably.io")>-1)&&(o+="; see "+i.href+" "),o+="]",o}var N=class hd extends Error{constructor(o,l,c,d){super(o),typeof Object.setPrototypeOf<"u"&&Object.setPrototypeOf(this,hd.prototype),this.code=l,this.statusCode=c,this.cause=d}toString(){return Ne(this)}static fromValues(o){const{message:l,code:c,statusCode:d}=o;if(typeof l!="string"||typeof c!="number"||typeof d!="number")throw new Error("ErrorInfo.fromValues(): invalid values: "+T.Config.inspect(o));const g=Object.assign(new hd(l,c,d),o);return g.code&&!g.href&&(g.href="https://help.ably.io/error/"+g.code),g}},ue=class fd extends Error{constructor(o,l,c,d){super(o),typeof Object.setPrototypeOf<"u"&&Object.setPrototypeOf(this,fd.prototype),this.code=l,this.statusCode=c,this.cause=d}toString(){return Ne(this)}static fromValues(o){const{message:l,code:c,statusCode:d}=o;if(typeof l!="string"||!re(c)&&typeof c!="number"||!re(d)&&typeof d!="number")throw new Error("PartialErrorInfo.fromValues(): invalid values: "+T.Config.inspect(o));const g=Object.assign(new fd(l,c,d),o);return g.code&&!g.href&&(g.href="https://help.ably.io/error/"+g.code),g}};function Ee(i){return Math.floor(Math.random()*i.length)}function Z(i,...o){for(let l=0;l<o.length;l++){const c=o[l];if(!c)break;for(const d in c)Object.prototype.hasOwnProperty.call(c,d)&&(i[d]=c[d])}return i}function W(i){return Z({},i)}function se(i){return re(i)?[]:Array.isArray(i)?i:[i]}function ie(i){return Object.prototype.toString.call(i)=="[object Object]"}function ne(i){for(const o in i)return!1;return!0}function re(i){return i==null}function ke(i){const o=new Object;for(const l in i)o[l]=i[l];return o}function jt(i,o){class l{}l.prototype=i;const c=new l;return o&&Z(c,o),c}var Pe=function(i,o){if(T.Config.inherits){T.Config.inherits(i,o);return}i.super_=o,i.prototype=jt(o.prototype,{constructor:i})};function Ct(i,o){for(const l in i)if(i[l]==o)return!0;return!1}function fn(i,o){return Array.isArray(o)?ho(i,o):zi(i,o)}function ho(i,o){const l=[];for(let c=0;c<i.length;c++){const d=i[c];o.indexOf(d)!=-1&&l.push(d)}return l}function zi(i,o){const l=[];for(let c=0;c<i.length;c++){const d=i[c];d in o&&l.push(d)}return l}function Za(i,o){const l=[];for(let c=0;c<i.length;c++){const d=i[c];o.indexOf(d)==-1&&l.push(d)}return l}function fo(i,o){const l=i.indexOf(o),c=l!=-1;return c&&i.splice(l,1),c}function vr(i,o){const l=i.slice();return fo(l,o),l}function Gn(i,o){const l=[];for(const c in i)o&&!Object.prototype.hasOwnProperty.call(i,c)||l.push(c);return l}function En(i,o){const l=[];for(const c in i)o&&!Object.prototype.hasOwnProperty.call(i,c)||l.push(i[c]);return l}function Gi(i,o){for(const l in i)Object.prototype.hasOwnProperty.call(i,l)&&i[l]&&o(l)}function Hi(i,o){if(i.length===0)return!0;const l=i[0][o];return i.every(function(c){return c[o]===l})}var Hn=(i=>(i.msgpack="msgpack",i.json="json",i))(Hn||{});function wr(i){return i.splice(Ee(i),1)[0]}function Pn(i){const o=[];if(i)for(const l in i)o.push(encodeURIComponent(l)+"="+encodeURIComponent(i[l]));return o.length?"?"+o.join("&"):""}function oi(i){let o;const l=/([^?&=]+)=?([^&]*)/g,c={};for(;o=l.exec(i);)c[decodeURIComponent(o[1])]=decodeURIComponent(o[2]);return c}function Wi(i){return typeof i=="object"&&i!==null&&(i instanceof N||i instanceof ue)}function Me(i){var o,l;return i instanceof Error||((o=i==null?void 0:i.constructor)==null?void 0:o.name)==="ErrorInfo"||((l=i==null?void 0:i.constructor)==null?void 0:l.name)==="PartialErrorInfo"?i.toString():T.Config.inspect(i)}function qi(i){return T.BufferUtils.isBuffer(i)?i.toString():typeof i=="string"?i:T.Config.inspect(i)}function Sr(i){if(T.BufferUtils.isBuffer(i))return T.BufferUtils.byteLength(i);if(typeof i=="string")return T.Config.stringByteSize(i);throw new Error("Expected input of Utils.dataSizeBytes to be a buffer or string, but was: "+typeof i)}function An(){return String(Math.random()).substr(2)}var Wn=async i=>{const o=await T.Config.getRandomArrayBuffer(i);return T.BufferUtils.base64Encode(o)};function po(i,o){const l=Math.min(o,i.length),c=i.slice(),d=[];for(let g=0;g<l;g++)d.push(wr(c));return d}function nt(i,o){i.then(l=>{o==null||o(null,l)}).catch(l=>{o==null||o(l)})}function kt(i,o,l){return l=="msgpack"?(o||Se("MsgPack"),o.decode(i)):JSON.parse(String(i))}function Mt(i,o,l){return l=="msgpack"?(o||Se("MsgPack"),o.encode(i,!0)):JSON.stringify(i)}function $i(i){return i.map(function(o){return o&&o.toLowerCase()})}function ai(i){return i.map(function(o){return o&&o.toUpperCase()})}function li(i){return Math.min((i+2)/3,2)}function Zt(){return 1-Math.random()*.2}function _n(i,o){return i*li(o)*Zt()}function ui(){return typeof Yn<"u"?Yn:typeof window<"u"?window:self}function Ki(i,o){return Object.keys(i).every(l=>i[l]===o[l])&&Object.keys(o).every(l=>o[l]===i[l])}function el(i){const o=/^(\[([^?]*)(?:(.*))\])?(.+)$/,l=i.match(o);if(!l||!l.length||l.length<5)throw new N("regex match failed",400,40010);if(l[2])throw new N(`cannot use a derived option with a ${l[2]} channel`,400,40010);return{qualifierParam:l[3]||"",channelName:l[4]}}function xn(i){const o=T.BufferUtils,l=o.utf8Encode(i);return o.base64Encode(l)}function tl(i,o){return i.length===o.length&&i.every(function(l,c){return l===o[c]})}function Qi(i){return new N(`${i} plugin not provided`,40019,400)}function Se(i){throw Qi(i)}async function qn(i,o=5e3,l="Timeout expired"){const c=new N(l,5e4,500);return Promise.race([i,new Promise((d,g)=>setTimeout(()=>g(c),o))])}var nl="2.3.1",rl="ably-js/"+nl,$e={ENVIRONMENT:"",REST_HOST:"rest.ably.io",REALTIME_HOST:"realtime.ably.io",FALLBACK_HOSTS:["A.ably-realtime.com","B.ably-realtime.com","C.ably-realtime.com","D.ably-realtime.com","E.ably-realtime.com"],PORT:80,TLS_PORT:443,TIMEOUTS:{disconnectedRetryTimeout:15e3,suspendedRetryTimeout:3e4,httpRequestTimeout:1e4,httpMaxRetryDuration:15e3,channelRetryTimeout:15e3,fallbackRetryTimeout:6e5,connectionStateTtl:12e4,realtimeRequestTimeout:1e4,recvTimeout:9e4,webSocketConnectTimeout:1e4,webSocketSlowTimeout:4e3},httpMaxRetryCount:3,maxMessageSize:65536,version:nl,protocolVersion:3,agent:rl,getHost:mo,getPort:il,getHttpScheme:uc,environmentFallbackHosts:go,getFallbackHosts:yo,getHosts:cc,checkHost:zt,objectifyOptions:ol,normaliseOptions:al,defaultGetHeaders:ll,defaultPostHeaders:ul};function mo(i,o,l){return l?o=o==i.restHost&&i.realtimeHost||o||i.realtimeHost:o=o||i.restHost,o}function il(i,o){return o||i.tls?i.tlsPort:i.port}function uc(i){return i.tls?"https://":"http://"}function go(i){return[i+"-a-fallback.ably-realtime.com",i+"-b-fallback.ably-realtime.com",i+"-c-fallback.ably-realtime.com",i+"-d-fallback.ably-realtime.com",i+"-e-fallback.ably-realtime.com"]}function yo(i){const o=i.fallbackHosts,l=typeof i.httpMaxRetryCount<"u"?i.httpMaxRetryCount:$e.httpMaxRetryCount;return o?po(o,l):[]}function cc(i,o){const l=[i.restHost].concat(yo(i));return o?l.map(c=>mo(i,c,!0)):l}function zt(i){if(typeof i!="string")throw new N("host must be a string; was a "+typeof i,4e4,400);if(!i.length)throw new N("host must not be zero-length",4e4,400)}function Xi(i,o,l,c){return i.realtimeHost?i.realtimeHost:i.restHost?(m.logAction(c,m.LOG_MINOR,"Defaults.normaliseOptions",'restHost is set to "'+i.restHost+'" but realtimeHost is not set, so setting realtimeHost to "'+i.restHost+'" too. If this is not what you want, please set realtimeHost explicitly.'),i.restHost):o?$e.REALTIME_HOST:l+"-"+$e.REALTIME_HOST}function sl(i){const o={};for(const l in $e.TIMEOUTS)o[l]=i[l]||$e.TIMEOUTS[l];return o}function Yi(i){let o=$e.agent;if(i.agents)for(var l in i.agents)o+=" "+l+"/"+i.agents[l];return o}function ol(i,o,l,c,d){if(i===void 0){const R=o?`${l} must be initialized with either a client options object, an Ably API key, or an Ably Token`:`${l} must be initialized with a client options object`;throw m.logAction(c,m.LOG_ERROR,`${l}()`,R),new Error(R)}let g;if(typeof i=="string")if(i.indexOf(":")==-1){if(!o){const R=`${l} cannot be initialized with just an Ably Token; you must provide a client options object with a \`plugins\` property. (Set this Ably Token as the object’s \`token\` property.)`;throw m.logAction(c,m.LOG_ERROR,`${l}()`,R),new Error(R)}g={token:i}}else{if(!o){const R=`${l} cannot be initialized with just an Ably API key; you must provide a client options object with a \`plugins\` property. (Set this Ably API key as the object’s \`key\` property.)`;throw m.logAction(c,m.LOG_ERROR,`${l}()`,R),new Error(R)}g={key:i}}else g=i;return d&&(g=_(P({},g),{plugins:P(P({},d),g.plugins)})),g}function al(i,o,l){const c=l??m.defaultLogger;typeof i.recover=="function"&&i.closeOnUnload===!0&&(m.logAction(c,m.LOG_ERROR,"Defaults.normaliseOptions","closeOnUnload was true and a session recovery function was set - these are mutually exclusive, so unsetting the latter"),i.recover=void 0),"closeOnUnload"in i||(i.closeOnUnload=!i.recover),"queueMessages"in i||(i.queueMessages=!0);const d=i.environment&&String(i.environment).toLowerCase()||$e.ENVIRONMENT,g=!d||d==="production";!i.fallbackHosts&&!i.restHost&&!i.realtimeHost&&!i.port&&!i.tlsPort&&(i.fallbackHosts=g?$e.FALLBACK_HOSTS:go(d));const R=i.restHost||(g?$e.REST_HOST:d+"-"+$e.REST_HOST),x=Xi(i,g,d,c);(i.fallbackHosts||[]).concat(R,x).forEach(zt),i.port=i.port||$e.PORT,i.tlsPort=i.tlsPort||$e.TLS_PORT,"tls"in i||(i.tls=!0);const L=sl(i);o?"useBinaryProtocol"in i?i.useBinaryProtocol=T.Config.supportsBinary&&i.useBinaryProtocol:i.useBinaryProtocol=T.Config.preferBinary:i.useBinaryProtocol=!1;const b={};i.clientId&&(b["X-Ably-ClientId"]=T.BufferUtils.base64Encode(T.BufferUtils.utf8Encode(i.clientId))),"idempotentRestPublishing"in i||(i.idempotentRestPublishing=!0);let U=null,B=i.connectivityCheckUrl;if(i.connectivityCheckUrl){let[q,j]=i.connectivityCheckUrl.split("?");U=j?oi(j):{},q.indexOf("://")===-1&&(q="https://"+q),B=q}return _(P({},i),{realtimeHost:x,restHost:R,maxMessageSize:i.maxMessageSize||$e.maxMessageSize,timeouts:L,connectivityCheckParams:U,connectivityCheckUrl:B,headers:b})}function bt(i,o,l){const c=l||{};if(c.cipher){i||Se("Crypto");const d=i.getCipher(c.cipher,o);c.cipher=d.cipherParams,c.channelCipher=d.cipher}else"cipher"in c&&(c.cipher=void 0,c.channelCipher=null);return c}var vo={json:"application/json",xml:"application/xml",html:"text/html",msgpack:"application/x-msgpack",text:"text/plain"},ci={format:"json",protocolVersion:$e.protocolVersion};function ll(i,{format:o=ci.format,protocolVersion:l=ci.protocolVersion}={}){return{accept:vo[o],"X-Ably-Version":l.toString(),"Ably-Agent":Yi(i)}}function ul(i,{format:o=ci.format,protocolVersion:l=ci.protocolVersion}={}){let c;return{accept:c=vo[o],"content-type":c,"X-Ably-Version":l.toString(),"Ably-Agent":Yi(i)}}var ae=$e;function te(i){return Object.assign($e,i)}var O=class U1{constructor(o,l){this.logger=o,this.members=l||[]}call(o,l){for(const c of this.members)if(c)try{c(o,l)}catch(d){m.logAction(this.logger,m.LOG_ERROR,"Multicaster multiple callback handler","Unexpected exception: "+d+"; stack = "+d.stack)}}push(...o){this.members.push(...o)}createPromise(){return new Promise((o,l)=>{this.push((c,d)=>{c?l(c):o(d)})})}resolveAll(o){this.call(null,o)}rejectAll(o){this.call(o)}static create(o,l){const c=new U1(o,l);return Object.assign((d,g)=>c.call(d,g),{push:d=>c.push(d),createPromise:()=>c.createPromise(),resolveAll:d=>c.resolveAll(d),rejectAll:d=>c.rejectAll(d)})}},G=O,Q=(i=>(i.Get="get",i.Delete="delete",i.Post="post",i.Put="put",i.Patch="patch",i))(Q||{}),le=Q,Qe=(i=>(i[i.Success=200]="Success",i[i.NoContent=204]="NoContent",i[i.BadRequest=400]="BadRequest",i[i.Unauthorized=401]="Unauthorized",i[i.Forbidden=403]="Forbidden",i[i.RequestTimeout=408]="RequestTimeout",i[i.InternalServerError=500]="InternalServerError",i))(Qe||{});function Xe(i){return i>=200&&i<400}var Ye=Qe,It=Math.pow(2,17);function hi(){return("000000"+Math.floor(Math.random()*1e16)).slice(-16)}function st(i){return!!i.connection}function wo(i){return Wi(i)?(i.code||(i.statusCode===403?i.code=40300:(i.code=40170,i.statusCode=401)),i):new N(Me(i),i.code||40170,i.statusCode||401)}var cl=(i,o)=>{const l=T.BufferUtils,c=l.utf8Encode(i),d=l.utf8Encode(o),g=l.hmacSha256(c,d);return l.base64Encode(g)};function $p(i){if(!i)return"";typeof i=="string"&&(i=JSON.parse(i));const o=Object.create(null),l=Gn(i,!0);if(!l)return"";l.sort();for(let c=0;c<l.length;c++)o[l[c]]=i[l[c]].sort();return JSON.stringify(o)}function Kp(i,o){if(i.authCallback)m.logAction(o,m.LOG_MINOR,"Auth()","using token auth with authCallback");else if(i.authUrl)m.logAction(o,m.LOG_MINOR,"Auth()","using token auth with authUrl");else if(i.key)m.logAction(o,m.LOG_MINOR,"Auth()","using token auth with client-side signing");else if(i.tokenDetails)m.logAction(o,m.LOG_MINOR,"Auth()","using token auth with supplied token only");else{const l="authOptions must include valid authentication parameters";throw m.logAction(o,m.LOG_ERROR,"Auth()",l),new Error(l)}}function G1(i){return"useTokenAuth"in i&&!i.useTokenAuth}function Qp(i){return i.useTokenAuth||!G1(i)&&(i.authCallback||i.authUrl||i.token||i.tokenDetails)}function H1(i){return!i.key&&!i.authCallback&&!i.authUrl}var W1=0;function q1(){return W1++}var $1=class{constructor(i,o){if(this.authOptions={},this.client=i,this.tokenParams=o.defaultTokenParams||{},this.currentTokenRequestId=null,this.waitingForTokenRequest=null,Qp(o))H1(o)&&m.logAction(this.logger,m.LOG_ERROR,"Auth()","Warning: library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),this._saveTokenOptions(o.defaultTokenParams,o),Kp(this.authOptions,this.logger);else{if(!o.key){const l="No authentication options provided; need one of: key, authUrl, or authCallback (or for testing only, token or tokenDetails)";throw m.logAction(this.logger,m.LOG_ERROR,"Auth()",l),new N(l,40160,401)}m.logAction(this.logger,m.LOG_MINOR,"Auth()","anonymous, using basic auth"),this._saveBasicOptions(o)}}get logger(){return this.client.logger}async authorize(i,o){if(o&&o.key&&this.authOptions.key!==o.key)throw new N("Unable to update auth options with incompatible key",40102,401);try{let l=await this._forceNewToken(i??null,o??null);return st(this.client)?new Promise((c,d)=>{this.client.connection.connectionManager.onAuthUpdated(l,(g,R)=>g?d(g):c(R))}):l}catch(l){throw this.client.connection&&l.statusCode===Ye.Forbidden&&this.client.connection.connectionManager.actOnErrorFromAuthorize(l),l}}async _forceNewToken(i,o){this.tokenDetails=null,this._saveTokenOptions(i,o),Kp(this.authOptions,this.logger);try{return this._ensureValidAuthCredentials(!0)}finally{delete this.tokenParams.timestamp,delete this.authOptions.queryTime}}async requestToken(i,o){const l=o||this.authOptions,c=i||W(this.tokenParams);let d,g=this.client;if(l.authCallback)m.logAction(this.logger,m.LOG_MINOR,"Auth.requestToken()","using token auth with authCallback"),d=l.authCallback;else if(l.authUrl)m.logAction(this.logger,m.LOG_MINOR,"Auth.requestToken()","using token auth with authUrl"),d=(x,L)=>{const b=Z({accept:"application/json, text/plain"},l.authHeaders),U=l.authMethod&&l.authMethod.toLowerCase()==="post";let B;const q=l.authUrl.indexOf("?");q>-1&&(B=oi(l.authUrl.slice(q)),l.authUrl=l.authUrl.slice(0,q),U||(l.authParams=Z(B,l.authParams)));const j=Z({},l.authParams||{},x),K=ee=>{var ce,Ae;let xe=(ce=ee.body)!=null?ce:null,De=null;if(ee.error)m.logAction(this.logger,m.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received Error: "+Me(ee.error));else{const ft=(Ae=ee.headers["content-type"])!=null?Ae:null;Array.isArray(ft)?De=ft.join(", "):De=ft,m.logAction(this.logger,m.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received; content-type: "+De+"; body: "+qi(xe))}if(ee.error){L(ee.error,null);return}if(ee.unpacked){L(null,xe);return}if(T.BufferUtils.isBuffer(xe)&&(xe=xe.toString()),!De){L(new N("authUrl response is missing a content-type header",40170,401),null);return}const fe=De.indexOf("application/json")>-1,Gt=De.indexOf("text/plain")>-1||De.indexOf("application/jwt")>-1;if(!fe&&!Gt){L(new N("authUrl responded with unacceptable content-type "+De+", should be either text/plain, application/jwt or application/json",40170,401),null);return}if(fe){if(xe.length>It){L(new N("authUrl response exceeded max permitted length",40170,401),null);return}try{xe=JSON.parse(xe)}catch(ft){L(new N("Unexpected error processing authURL response; err = "+ft.message,40170,401),null);return}}L(null,xe,De)};if(m.logAction(this.logger,m.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Requesting token from "+l.authUrl+"; Params: "+JSON.stringify(j)+"; method: "+(U?"POST":"GET")),U){const ee=b||{};ee["content-type"]="application/x-www-form-urlencoded";const ce=Pn(j).slice(1);nt(this.client.http.doUri(le.Post,l.authUrl,ee,ce,B),(Ae,xe)=>K(Ae||xe))}else nt(this.client.http.doUri(le.Get,l.authUrl,b||{},null,j),(ee,ce)=>K(ee||ce))};else if(l.key)m.logAction(this.logger,m.LOG_MINOR,"Auth.requestToken()","using token auth with client-side signing"),d=(x,L)=>{nt(this.createTokenRequest(x,l),(b,U)=>L(b,U??null))};else{const x="Need a new token, but authOptions does not include any way to request one (no authUrl, authCallback, or key)";throw m.logAction(this.logger,m.LOG_ERROR,"Auth()","library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),new N(x,40171,403)}"capability"in c&&(c.capability=$p(c.capability));const R=(x,L)=>{const b=x.keyName,U="/keys/"+b+"/requestToken",B=function(j){return g.baseUri(j)+U},q=ae.defaultPostHeaders(this.client.options);l.requestHeaders&&Z(q,l.requestHeaders),m.logAction(this.logger,m.LOG_MICRO,"Auth.requestToken().requestToken","Sending POST to "+U+"; Token params: "+JSON.stringify(x)),nt(this.client.http.do(le.Post,B,q,JSON.stringify(x),null),(j,K)=>j?L(j):L(K.error,K.body,K.unpacked))};return new Promise((x,L)=>{let b=!1,U=this.client.options.timeouts.realtimeRequestTimeout,B=setTimeout(()=>{b=!0;const q="Token request callback timed out after "+U/1e3+" seconds";m.logAction(this.logger,m.LOG_ERROR,"Auth.requestToken()",q),L(new N(q,40170,401))},U);d(c,(q,j,K)=>{if(b)return;if(clearTimeout(B),q){m.logAction(this.logger,m.LOG_ERROR,"Auth.requestToken()","token request signing call returned error; err = "+Me(q)),L(wo(q));return}if(typeof j=="string"){j.length===0?L(new N("Token string is empty",40170,401)):j.length>It?L(new N("Token string exceeded max permitted length (was "+j.length+" bytes)",40170,401)):j==="undefined"||j==="null"?L(new N("Token string was literal null/undefined",40170,401)):j[0]==="{"&&!(K&&K.indexOf("application/jwt")>-1)?L(new N("Token was double-encoded; make sure you're not JSON-encoding an already encoded token request or details",40170,401)):x({token:j});return}if(typeof j!="object"||j===null){const ce="Expected token request callback to call back with a token string or token request/details object, but got a "+typeof j;m.logAction(this.logger,m.LOG_ERROR,"Auth.requestToken()",ce),L(new N(ce,40170,401));return}const ee=JSON.stringify(j).length;if(ee>It&&!l.suppressMaxLengthCheck){L(new N("Token request/details object exceeded max permitted stringified size (was "+ee+" bytes)",40170,401));return}if("issued"in j){x(j);return}if(!("keyName"in j)){const ce="Expected token request callback to call back with a token string, token request object, or token details object";m.logAction(this.logger,m.LOG_ERROR,"Auth.requestToken()",ce),L(new N(ce,40170,401));return}R(j,(ce,Ae,xe)=>{if(ce){m.logAction(this.logger,m.LOG_ERROR,"Auth.requestToken()","token request API call returned error; err = "+Me(ce)),L(wo(ce));return}xe||(Ae=JSON.parse(Ae)),m.logAction(this.logger,m.LOG_MINOR,"Auth.getToken()","token received"),x(Ae)})})})}async createTokenRequest(i,o){o=o||this.authOptions,i=i||W(this.tokenParams);const l=o.key;if(!l)throw new N("No key specified",40101,403);const c=l.split(":"),d=c[0],g=c[1];if(!g)throw new N("Invalid key specified",40101,403);if(i.clientId==="")throw new N("clientId can’t be an empty string",40012,400);"capability"in i&&(i.capability=$p(i.capability));const R=Z({keyName:d},i),x=i.clientId||"",L=i.ttl||"",b=i.capability||"";R.timestamp||(R.timestamp=await this.getTimestamp(o&&o.queryTime));const U=R.nonce||(R.nonce=hi()),B=R.timestamp,q=R.keyName+`
`+L+`
`+b+`
`+x+`
`+B+`
`+U+`
`;return R.mac=R.mac||cl(q,g),m.logAction(this.logger,m.LOG_MINOR,"Auth.getTokenRequest()","generated signed request"),R}async getAuthParams(){if(this.method=="basic")return{key:this.key};{let i=await this._ensureValidAuthCredentials(!1);if(!i)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");return{access_token:i.token}}}async getAuthHeaders(){if(this.method=="basic")return{authorization:"Basic "+this.basicKey};{const i=await this._ensureValidAuthCredentials(!1);if(!i)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");return{authorization:"Bearer "+xn(i.token)}}}async getTimestamp(i){return!this.isTimeOffsetSet()&&(i||this.authOptions.queryTime)?this.client.time():this.getTimestampUsingOffset()}getTimestampUsingOffset(){return Date.now()+(this.client.serverTimeOffset||0)}isTimeOffsetSet(){return this.client.serverTimeOffset!==null}_saveBasicOptions(i){this.method="basic",this.key=i.key,this.basicKey=xn(i.key),this.authOptions=i||{},"clientId"in i&&this._userSetClientId(i.clientId)}_saveTokenOptions(i,o){this.method="token",i&&(this.tokenParams=i),o&&(o.token&&(o.tokenDetails=typeof o.token=="string"?{token:o.token}:o.token),o.tokenDetails&&(this.tokenDetails=o.tokenDetails),"clientId"in o&&this._userSetClientId(o.clientId),this.authOptions=o)}async _ensureValidAuthCredentials(i){const o=this.tokenDetails;if(o){if(this._tokenClientIdMismatch(o.clientId))throw new N("Mismatch between clientId in token ("+o.clientId+") and current clientId ("+this.clientId+")",40102,403);if(!this.isTimeOffsetSet()||!o.expires||o.expires>=this.getTimestampUsingOffset())return m.logAction(this.logger,m.LOG_MINOR,"Auth.getToken()","using cached token; expires = "+o.expires),o;m.logAction(this.logger,m.LOG_MINOR,"Auth.getToken()","deleting expired token"),this.tokenDetails=null}const l=(this.waitingForTokenRequest||(this.waitingForTokenRequest=G.create(this.logger))).createPromise();if(this.currentTokenRequestId!==null&&!i)return l;const c=this.currentTokenRequestId=q1();let d,g=null;try{d=await this.requestToken(this.tokenParams,this.authOptions)}catch(x){g=x}if(this.currentTokenRequestId>c)return m.logAction(this.logger,m.LOG_MINOR,"Auth._ensureValidAuthCredentials()","Discarding token request response; overtaken by newer one"),l;this.currentTokenRequestId=null;const R=this.waitingForTokenRequest;return this.waitingForTokenRequest=null,g?(R==null||R.rejectAll(g),l):(R==null||R.resolveAll(this.tokenDetails=d),l)}_userSetClientId(i){if(typeof i=="string"||i===null){if(i==="*")throw new N('Can’t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, instantiate the library with {defaultTokenParams: {clientId: "*"}}), or if calling authorize(), pass it in as a tokenParam: authorize({clientId: "*"}, authOptions)',40012,400);{const o=this._uncheckedSetClientId(i);if(o)throw o}}else throw new N("clientId must be either a string or null",40012,400)}_uncheckedSetClientId(i){if(this._tokenClientIdMismatch(i)){const o="Unexpected clientId mismatch: client has "+this.clientId+", requested "+i,l=new N(o,40102,401);return m.logAction(this.logger,m.LOG_ERROR,"Auth._uncheckedSetClientId()",o),l}else return this.clientId=this.tokenParams.clientId=i,null}_tokenClientIdMismatch(i){return!!(this.clientId&&this.clientId!=="*"&&i&&i!=="*"&&this.clientId!==i)}static isTokenErr(i){return i.code&&i.code>=40140&&i.code<40150}revokeTokens(i,o){return this.client.rest.revokeTokens(i,o)}},$n=$1;function hc(i){const o=[];if(i)for(const l in i)o.push(l+"="+i[l]);return o.join("&")}function Ji(i,o){return i+(o?"?":"")+hc(o)}function K1(i,o,l,c,d){i.error?m.logActionNoStrip(d,m.LOG_MICRO,"Http."+o+"()","Received Error; "+Ji(l,c)+"; Error: "+Me(i.error)):m.logActionNoStrip(d,m.LOG_MICRO,"Http."+o+"()","Received; "+Ji(l,c)+"; Headers: "+hc(i.headers)+"; StatusCode: "+i.statusCode+"; Body"+(T.BufferUtils.isBuffer(i.body)?" (Base64): "+T.BufferUtils.base64Encode(i.body):": "+i.body))}function Q1(i,o,l,c,d){d.shouldLog(m.LOG_MICRO)&&m.logActionNoStrip(d,m.LOG_MICRO,"Http."+i+"()","Sending; "+Ji(o,c)+"; Body"+(T.BufferUtils.isBuffer(l)?" (Base64): "+T.BufferUtils.base64Encode(l):": "+l))}var fc=class{constructor(i){this.client=i,this.platformHttp=new T.Http(i),this.checkConnectivity=this.platformHttp.checkConnectivity?()=>this.platformHttp.checkConnectivity():void 0}get logger(){var i,o;return(o=(i=this.client)==null?void 0:i.logger)!=null?o:m.defaultLogger}get supportsAuthHeaders(){return this.platformHttp.supportsAuthHeaders}get supportsLinkHeaders(){return this.platformHttp.supportsLinkHeaders}_getHosts(i){const o=i.connection,l=o&&o.connectionManager.host;return l?[l].concat(ae.getFallbackHosts(i.options)):ae.getHosts(i.options)}async do(i,o,l,c,d){try{const g=this.client;if(!g)return{error:new N("http.do called without client",5e4,500)};const R=typeof o=="function"?o:function(B){return g.baseUri(B)+o},x=g._currentFallback;if(x)if(x.validUntil>Date.now()){const B=await this.doUri(i,R(x.host),l,c,d);return B.error&&this.platformHttp.shouldFallback(B.error)?(g._currentFallback=null,this.do(i,o,l,c,d)):B}else g._currentFallback=null;const L=this._getHosts(g);if(L.length===1)return this.doUri(i,R(L[0]),l,c,d);let b=null;const U=async(B,q)=>{const j=B.shift();b=b??new Date;const K=await this.doUri(i,R(j),l,c,d);return K.error&&this.platformHttp.shouldFallback(K.error)&&B.length?Date.now()-b.getTime()>g.options.timeouts.httpMaxRetryDuration?{error:new N(`Timeout for trying fallback hosts retries. Total elapsed time exceeded the ${g.options.timeouts.httpMaxRetryDuration}ms limit`,50003,500)}:U(B,!0):(q&&(g._currentFallback={host:j,validUntil:Date.now()+g.options.timeouts.fallbackRetryTimeout}),K)};return U(L)}catch(g){return{error:new N(`Unexpected error in Http.do: ${Me(g)}`,500,5e4)}}}async doUri(i,o,l,c,d){try{Q1(i,o,c,d,this.logger);const g=await this.platformHttp.doUri(i,o,l,c,d);return this.logger.shouldLog(m.LOG_MICRO)&&K1(g,i,o,d,this.logger),g}catch(g){return{error:new N(`Unexpected error in Http.doUri: ${Me(g)}`,500,5e4)}}}},Xp=class{constructor(i){this.Platform=T,this.ErrorInfo=N,this.Logger=m,this.Defaults=ae,this.Utils=_e;var o,l,c,d,g,R,x,L;this._additionalHTTPRequestImplementations=(o=i.plugins)!=null?o:null,this.logger=new m,this.logger.setLog(i.logLevel,i.logHandler),m.logAction(this.logger,m.LOG_MICRO,"BaseClient()","initialized with clientOptions "+T.Config.inspect(i)),this._MsgPack=(c=(l=i.plugins)==null?void 0:l.MsgPack)!=null?c:null;const b=this.options=ae.normaliseOptions(i,this._MsgPack,this.logger);if(b.key){const U=b.key.match(/^([^:\s]+):([^:.\s]+)$/);if(!U){const B="invalid key parameter";throw m.logAction(this.logger,m.LOG_ERROR,"BaseClient()",B),new N(B,40400,404)}b.keyName=U[1],b.keySecret=U[2]}if("clientId"in b)if(typeof b.clientId=="string"||b.clientId===null){if(b.clientId==="*")throw new N('Can’t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, use {defaultTokenParams: {clientId: "*"}})',40012,400)}else throw new N("clientId must be either a string or null",40012,400);m.logAction(this.logger,m.LOG_MINOR,"BaseClient()","started; version = "+ae.version),this._currentFallback=null,this.serverTimeOffset=null,this.http=new fc(this),this.auth=new $n(this,b),this._rest=(d=i.plugins)!=null&&d.Rest?new i.plugins.Rest(this):null,this._Crypto=(R=(g=i.plugins)==null?void 0:g.Crypto)!=null?R:null,this.__FilteredSubscriptions=(L=(x=i.plugins)==null?void 0:x.MessageInteractions)!=null?L:null}get rest(){return this._rest||Se("Rest"),this._rest}get _FilteredSubscriptions(){return this.__FilteredSubscriptions||Se("MessageInteractions"),this.__FilteredSubscriptions}get channels(){return this.rest.channels}get push(){return this.rest.push}get device(){var i;return(!((i=this.options.plugins)!=null&&i.Push)||!this.push.LocalDevice)&&Se("Push"),this._device||(this._device=this.push.LocalDevice.load(this)),this._device}baseUri(i){return ae.getHttpScheme(this.options)+i+":"+ae.getPort(this.options,!1)}async stats(i){return this.rest.stats(i)}async time(i){return this.rest.time(i)}async request(i,o,l,c,d,g){return this.rest.request(i,o,l,c,d,g)}batchPublish(i){return this.rest.batchPublish(i)}batchPresence(i){return this.rest.batchPresence(i)}setLog(i){this.logger.setLog(i.level,i.handler)}};Xp.Platform=T;var Yp=Xp,X1=class os{toJSON(){var o,l,c;return{id:this.id,deviceSecret:this.deviceSecret,platform:this.platform,formFactor:this.formFactor,clientId:this.clientId,metadata:this.metadata,deviceIdentityToken:this.deviceIdentityToken,push:{recipient:(o=this.push)==null?void 0:o.recipient,state:(l=this.push)==null?void 0:l.state,error:(c=this.push)==null?void 0:c.error}}}toString(){var o,l,c,d;let g="[DeviceDetails";return this.id&&(g+="; id="+this.id),this.platform&&(g+="; platform="+this.platform),this.formFactor&&(g+="; formFactor="+this.formFactor),this.clientId&&(g+="; clientId="+this.clientId),this.metadata&&(g+="; metadata="+this.metadata),this.deviceIdentityToken&&(g+="; deviceIdentityToken="+JSON.stringify(this.deviceIdentityToken)),(o=this.push)!=null&&o.recipient&&(g+="; push.recipient="+JSON.stringify(this.push.recipient)),(l=this.push)!=null&&l.state&&(g+="; push.state="+this.push.state),(c=this.push)!=null&&c.error&&(g+="; push.error="+JSON.stringify(this.push.error)),(d=this.push)!=null&&d.metadata&&(g+="; push.metadata="+this.push.metadata),g+="]",g}static toRequestBody(o,l,c){return Mt(o,l,c)}static fromResponseBody(o,l,c){return c&&(o=kt(o,l,c)),Array.isArray(o)?os.fromValuesArray(o):os.fromValues(o)}static fromValues(o){return o.error=o.error&&N.fromValues(o.error),Object.assign(new os,o)}static fromLocalDevice(o){return Object.assign(new os,o)}static fromValuesArray(o){const l=o.length,c=new Array(l);for(let d=0;d<l;d++)c[d]=os.fromValues(o[d]);return c}},Zi=X1;async function Jp(i,o,l,c){if(i.http.supportsAuthHeaders){const d=await i.auth.getAuthHeaders();return c(Z(d,o),l)}else{const d=await i.auth.getAuthParams();return c(o,Z(d,l))}}function Y1(i,o,l){if(i.err&&!i.body)return{err:i.err};if(i.statusCode===Ye.NoContent)return _(P({},i),{body:[],unpacked:!0});let c=i.body;if(!i.unpacked)try{c=kt(c,o,l)}catch(x){return Wi(x)?{err:x}:{err:new ue(Me(x),null)}}if(!c)return{err:new ue("unenvelope(): Response body is missing",null)};const{statusCode:d,response:g,headers:R}=c;if(d===void 0)return _(P({},i),{body:c,unpacked:!0});if(d<200||d>=300){let x=g&&g.error||i.err;return x||(x=new Error("Error in unenveloping "+c),x.statusCode=d),{err:x,body:g,headers:R,unpacked:!0,statusCode:d}}return{err:i.err,body:g,headers:R,unpacked:!0,statusCode:d}}function J1(i,o,l,c,d){i.err?m.logAction(d,m.LOG_MICRO,"Resource."+o+"()","Received Error; "+Ji(l,c)+"; Error: "+Me(i.err)):m.logAction(d,m.LOG_MICRO,"Resource."+o+"()","Received; "+Ji(l,c)+"; Headers: "+hc(i.headers)+"; StatusCode: "+i.statusCode+"; Body: "+(T.BufferUtils.isBuffer(i.body)?" (Base64): "+T.BufferUtils.base64Encode(i.body):": "+T.Config.inspect(i.body)))}var Z1=class as{static async get(o,l,c,d,g,R){return as.do(le.Get,o,l,null,c,d,g,R??!1)}static async delete(o,l,c,d,g,R){return as.do(le.Delete,o,l,null,c,d,g,R)}static async post(o,l,c,d,g,R,x){return as.do(le.Post,o,l,c,d,g,R,x)}static async patch(o,l,c,d,g,R,x){return as.do(le.Patch,o,l,c,d,g,R,x)}static async put(o,l,c,d,g,R,x){return as.do(le.Put,o,l,c,d,g,R,x)}static async do(o,l,c,d,g,R,x,L){x&&((R=R||{}).envelope=x);const b=l.logger;async function U(q,j){var K;if(b.shouldLog(m.LOG_MICRO)){let ce=d;if(((K=q["content-type"])==null?void 0:K.indexOf("msgpack"))>0)try{l._MsgPack||Se("MsgPack"),ce=l._MsgPack.decode(d)}catch(Ae){m.logAction(b,m.LOG_MICRO,"Resource."+o+"()","Sending MsgPack Decoding Error: "+Me(Ae))}m.logAction(b,m.LOG_MICRO,"Resource."+o+"()","Sending; "+Ji(c,j)+"; Body: "+ce)}const ee=await l.http.do(o,c,q,d,j);return ee.error&&$n.isTokenErr(ee.error)?(await l.auth.authorize(null,null),Jp(l,q,j,U)):{err:ee.error,body:ee.body,headers:ee.headers,unpacked:ee.unpacked,statusCode:ee.statusCode}}let B=await Jp(l,g,R,U);if(x&&(B=Y1(B,l._MsgPack,x)),b.shouldLog(m.LOG_MICRO)&&J1(B,o,c,R,b),L){if(B.err)throw B.err;{const q=P({},B);return delete q.err,q}}return B}},Je=Z1;function eT(i){const o=i.match(/^\.\/(\w+)\?(.*)$/);return o&&o[2]&&oi(o[2])}function tT(i){typeof i=="string"&&(i=i.split(","));const o={};for(let l=0;l<i.length;l++){const c=i[l].match(/^\s*<(.+)>;\s*rel="(\w+)"$/);if(c){const d=eT(c[1]);d&&(o[c[2]]=d)}}return o}function nT(i,o,l){return!(l&&(o||typeof i.code=="number"))}var rT=class{constructor(i,o,l,c,d,g){this.client=i,this.path=o,this.headers=l,this.envelope=c??null,this.bodyHandler=d,this.useHttpPaginatedResponse=g||!1}get logger(){return this.client.logger}async get(i){const o=await Je.get(this.client,this.path,this.headers,i,this.envelope,!1);return this.handlePage(o)}async delete(i){const o=await Je.delete(this.client,this.path,this.headers,i,this.envelope,!1);return this.handlePage(o)}async post(i,o){const l=await Je.post(this.client,this.path,o,this.headers,i,this.envelope,!1);return this.handlePage(l)}async put(i,o){const l=await Je.put(this.client,this.path,o,this.headers,i,this.envelope,!1);return this.handlePage(l)}async patch(i,o){const l=await Je.patch(this.client,this.path,o,this.headers,i,this.envelope,!1);return this.handlePage(l)}async handlePage(i){if(i.err&&nT(i.err,i.body,this.useHttpPaginatedResponse))throw m.logAction(this.logger,m.LOG_ERROR,"PaginatedResource.handlePage()","Unexpected error getting resource: err = "+Me(i.err)),i.err;let o,l,c;try{o=i.statusCode==Ye.NoContent?[]:await this.bodyHandler(i.body,i.headers||{},i.unpacked)}catch(d){throw i.err||d}return i.headers&&(l=i.headers.Link||i.headers.link)&&(c=tT(l)),this.useHttpPaginatedResponse?new iT(this,o,i.headers||{},i.statusCode,c,i.err):new Zp(this,o,c)}},Zp=class{constructor(i,o,l){this.resource=i,this.items=o;const c=this;l&&("first"in l&&(this.first=async function(){return c.get(l.first)}),"current"in l&&(this.current=async function(){return c.get(l.current)}),this.next=async function(){return"next"in l?c.get(l.next):null},this.hasNext=function(){return"next"in l},this.isLast=()=>{var d;return!((d=this.hasNext)!=null&&d.call(this))})}async get(i){const o=this.resource,l=await Je.get(o.client,o.path,o.headers,i,o.envelope,!1);return o.handlePage(l)}},iT=class extends Zp{constructor(i,o,l,c,d,g){super(i,o,d),this.statusCode=c,this.success=c<300&&c>=200,this.headers=l,this.errorCode=g&&g.code,this.errorMessage=g&&g.message}toJSON(){return{items:this.items,statusCode:this.statusCode,success:this.success,headers:this.headers,errorCode:this.errorCode,errorMessage:this.errorMessage}}},Cr=rT,em=class Zo{toJSON(){return{channel:this.channel,deviceId:this.deviceId,clientId:this.clientId}}toString(){let o="[PushChannelSubscription";return this.channel&&(o+="; channel="+this.channel),this.deviceId&&(o+="; deviceId="+this.deviceId),this.clientId&&(o+="; clientId="+this.clientId),o+="]",o}static fromResponseBody(o,l,c){return c&&(o=kt(o,l,c)),Array.isArray(o)?Zo.fromValuesArray(o):Zo.fromValues(o)}static fromValues(o){return Object.assign(new Zo,o)}static fromValuesArray(o){const l=o.length,c=new Array(l);for(let d=0;d<l;d++)c[d]=Zo.fromValues(o[d]);return c}};em.toRequestBody=Mt;var sT=em,dc=sT,oT=class{constructor(i){var o;this.client=i,this.admin=new aT(i),T.Config.push&&((o=i.options.plugins)!=null&&o.Push)&&(this.stateMachine=new i.options.plugins.Push.ActivationStateMachine(i),this.LocalDevice=i.options.plugins.Push.localDeviceFactory(Zi))}async activate(i,o){await new Promise((l,c)=>{var d;if(!((d=this.client.options.plugins)!=null&&d.Push)){c(Qi("Push"));return}if(!this.stateMachine){c(new N("This platform is not supported as a target of push notifications",4e4,400));return}if(this.stateMachine.activatedCallback){c(new N("Activation already in progress",4e4,400));return}this.stateMachine.activatedCallback=g=>{if(g){c(g);return}l()},this.stateMachine.updateFailedCallback=o,this.stateMachine.handleEvent(new this.client.options.plugins.Push.CalledActivate(this.stateMachine,i))})}async deactivate(i){await new Promise((o,l)=>{var c;if(!((c=this.client.options.plugins)!=null&&c.Push)){l(Qi("Push"));return}if(!this.stateMachine){l(new N("This platform is not supported as a target of push notifications",4e4,400));return}if(this.stateMachine.deactivatedCallback){l(new N("Deactivation already in progress",4e4,400));return}this.stateMachine.deactivatedCallback=d=>{if(d){l(d);return}o()},this.stateMachine.handleEvent(new this.client.options.plugins.Push.CalledDeactivate(this.stateMachine,i))})}},aT=class{constructor(i){this.client=i,this.deviceRegistrations=new lT(i),this.channelSubscriptions=new uT(i)}async publish(i,o){const l=this.client,c=l.options.useBinaryProtocol?"msgpack":"json",d=ae.defaultPostHeaders(l.options,{format:c}),g={},R=Z({recipient:i},o);Z(d,l.options.headers),l.options.pushFullWait&&Z(g,{fullWait:"true"});const x=Mt(R,l._MsgPack,c);await Je.post(l,"/push/publish",x,d,g,null,!0)}},lT=class{constructor(i){this.client=i}async save(i){const o=this.client,l=Zi.fromValues(i),c=o.options.useBinaryProtocol?"msgpack":"json",d=ae.defaultPostHeaders(o.options,{format:c}),g={};Z(d,o.options.headers),o.options.pushFullWait&&Z(g,{fullWait:"true"});const R=Mt(l,o._MsgPack,c),x=await Je.put(o,"/push/deviceRegistrations/"+encodeURIComponent(i.id),R,d,g,null,!0);return Zi.fromResponseBody(x.body,o._MsgPack,x.unpacked?void 0:c)}async get(i){const o=this.client,l=o.options.useBinaryProtocol?"msgpack":"json",c=ae.defaultGetHeaders(o.options,{format:l}),d=i.id||i;if(typeof d!="string"||!d.length)throw new N("First argument to DeviceRegistrations#get must be a deviceId string or DeviceDetails",4e4,400);Z(c,o.options.headers);const g=await Je.get(o,"/push/deviceRegistrations/"+encodeURIComponent(d),c,{},null,!0);return Zi.fromResponseBody(g.body,o._MsgPack,g.unpacked?void 0:l)}async list(i){const o=this.client,l=o.options.useBinaryProtocol?"msgpack":"json",c=this.client.http.supportsLinkHeaders?void 0:l,d=ae.defaultGetHeaders(o.options,{format:l});return Z(d,o.options.headers),new Cr(o,"/push/deviceRegistrations",d,c,async function(g,R,x){return Zi.fromResponseBody(g,o._MsgPack,x?void 0:l)}).get(i)}async remove(i){const o=this.client,l=o.options.useBinaryProtocol?"msgpack":"json",c=ae.defaultGetHeaders(o.options,{format:l}),d={},g=i.id||i;if(typeof g!="string"||!g.length)throw new N("First argument to DeviceRegistrations#remove must be a deviceId string or DeviceDetails",4e4,400);Z(c,o.options.headers),o.options.pushFullWait&&Z(d,{fullWait:"true"}),await Je.delete(o,"/push/deviceRegistrations/"+encodeURIComponent(g),c,d,null,!0)}async removeWhere(i){const o=this.client,l=o.options.useBinaryProtocol?"msgpack":"json",c=ae.defaultGetHeaders(o.options,{format:l});Z(c,o.options.headers),o.options.pushFullWait&&Z(i,{fullWait:"true"}),await Je.delete(o,"/push/deviceRegistrations",c,i,null,!0)}},uT=class F1{constructor(o){this.remove=F1.prototype.removeWhere,this.client=o}async save(o){const l=this.client,c=dc.fromValues(o),d=l.options.useBinaryProtocol?"msgpack":"json",g=ae.defaultPostHeaders(l.options,{format:d}),R={};Z(g,l.options.headers),l.options.pushFullWait&&Z(R,{fullWait:"true"});const x=Mt(c,l._MsgPack,d),L=await Je.post(l,"/push/channelSubscriptions",x,g,R,null,!0);return dc.fromResponseBody(L.body,l._MsgPack,L.unpacked?void 0:d)}async list(o){const l=this.client,c=l.options.useBinaryProtocol?"msgpack":"json",d=this.client.http.supportsLinkHeaders?void 0:c,g=ae.defaultGetHeaders(l.options,{format:c});return Z(g,l.options.headers),new Cr(l,"/push/channelSubscriptions",g,d,async function(R,x,L){return dc.fromResponseBody(R,l._MsgPack,L?void 0:c)}).get(o)}async removeWhere(o){const l=this.client,c=l.options.useBinaryProtocol?"msgpack":"json",d=ae.defaultGetHeaders(l.options,{format:c});Z(d,l.options.headers),l.options.pushFullWait&&Z(o,{fullWait:"true"}),await Je.delete(l,"/push/channelSubscriptions",d,o,null,!0)}async listChannels(o){const l=this.client,c=l.options.useBinaryProtocol?"msgpack":"json",d=this.client.http.supportsLinkHeaders?void 0:c,g=ae.defaultGetHeaders(l.options,{format:c});return Z(g,l.options.headers),l.options.pushFullWait&&Z(o,{fullWait:"true"}),new Cr(l,"/push/channels",g,d,async function(R,x,L){const b=!L&&c?kt(R,l._MsgPack,c):R;for(let U=0;U<b.length;U++)b[U]=String(b[U]);return b}).get(o)}},cT=oT;function hT(i){return!i||!i.channelOptions?{channelOptions:i,plugins:{},baseEncodedPreviousPayload:void 0}:i}function fT(i,o,l){if(l&&l.cipher){i||Se("Crypto");const c=i.getCipher(l.cipher,o);return{cipher:c.cipherParams,channelCipher:c.cipher}}return l??{}}function dT(i){let o=0;return i.name&&(o+=i.name.length),i.clientId&&(o+=i.clientId.length),i.extras&&(o+=JSON.stringify(i.extras).length),i.data&&(o+=Sr(i.data)),o}async function tm(i,o,l,c){const d=Tr(l),g=fT(o,i,c??null);try{await So(d,g)}catch(R){m.logAction(i,m.LOG_ERROR,"Message.fromEncoded()",R.toString())}return d}async function pT(i,o,l,c){return Promise.all(l.map(function(d){return tm(i,o,d,c)}))}async function mT(i,o){let l=i.data,c=i.encoding,d=o.channelCipher;c=c?c+"/":"",T.BufferUtils.isBuffer(l)||(l=T.BufferUtils.utf8Encode(String(l)),c=c+"utf-8/");const g=await d.encrypt(l);return i.data=g,i.encoding=c+"cipher+"+d.algorithm,i}async function pc(i,o){const l=i.data;if(!(typeof l=="string"||T.BufferUtils.isBuffer(l)||l===null||l===void 0))if(ie(l)||Array.isArray(l))i.data=JSON.stringify(l),i.encoding=i.encoding?i.encoding+"/json":"json";else throw new N("Data type is unsupported",40013,400);return o!=null&&o.cipher?mT(i,o):i}async function nm(i,o){return Promise.all(i.map(l=>pc(l,o)))}var gT=Mt;async function So(i,o){const l=hT(o);let c=i.data;const d=i.encoding;if(d){const g=d.split("/");let R,x=g.length,L=i.data,b="";try{for(;(R=x)>0;){const U=g[--x].match(/([-\w]+)(\+([\w-]+))?/);if(!U)break;switch(b=U[1],b){case"base64":L=T.BufferUtils.base64Decode(String(L)),R==g.length&&(c=L);continue;case"utf-8":L=T.BufferUtils.utf8Decode(L);continue;case"json":L=JSON.parse(L);continue;case"cipher":if(l.channelOptions!=null&&l.channelOptions.cipher&&l.channelOptions.channelCipher){const B=U[3],q=l.channelOptions.channelCipher;if(B!=q.algorithm)throw new Error("Unable to decrypt message with given cipher; incompatible cipher params");L=await q.decrypt(L);continue}else throw new Error("Unable to decrypt message; not an encrypted channel");case"vcdiff":if(!l.plugins||!l.plugins.vcdiff)throw new N("Missing Vcdiff decoder (https://github.com/ably-forks/vcdiff-decoder)",40019,400);if(typeof Uint8Array>"u")throw new N("Delta decoding not supported on this browser (need ArrayBuffer & Uint8Array)",40020,400);try{let B=l.baseEncodedPreviousPayload;typeof B=="string"&&(B=T.BufferUtils.utf8Encode(B));const q=T.BufferUtils.toBuffer(B);L=T.BufferUtils.toBuffer(L),L=T.BufferUtils.arrayBufferViewToBuffer(l.plugins.vcdiff.decode(L,q)),c=L}catch(B){throw new N("Vcdiff delta decode failed with "+B,40018,400)}continue;default:throw new Error("Unknown encoding")}}}catch(U){const B=U;throw new N("Error processing the "+b+" encoding, decoder returned ‘"+B.message+"’",B.code||40013,400)}finally{i.encoding=R<=0?null:g.slice(0,R).join("/"),i.data=L}}l.baseEncodedPreviousPayload=c}async function yT(i,o,l,c,d){d&&(i=kt(i,c,d));for(let g=0;g<i.length;g++){const R=i[g]=Tr(i[g]);try{await So(R,o)}catch(x){m.logAction(l,m.LOG_ERROR,"Message.fromResponseBody()",x.toString())}}return i}function Tr(i){return Object.assign(new rm,i)}function mc(i){const o=i.length,l=new Array(o);for(let c=0;c<o;c++)l[c]=Tr(i[c]);return l}function gc(i){let o,l=0;for(let c=0;c<i.length;c++)o=i[c],l+=o.size||(o.size=dT(o));return l}var rm=class{toJSON(){let i=this.encoding,o=this.data;return o&&T.BufferUtils.isBuffer(o)&&(arguments.length>0?(i=i?i+"/base64":"base64",o=T.BufferUtils.base64Encode(o)):o=T.BufferUtils.toBuffer(o)),{name:this.name,id:this.id,clientId:this.clientId,connectionId:this.connectionId,connectionKey:this.connectionKey,extras:this.extras,encoding:i,data:o}}toString(){let i="[Message";return this.name&&(i+="; name="+this.name),this.id&&(i+="; id="+this.id),this.timestamp&&(i+="; timestamp="+this.timestamp),this.clientId&&(i+="; clientId="+this.clientId),this.connectionId&&(i+="; connectionId="+this.connectionId),this.encoding&&(i+="; encoding="+this.encoding),this.extras&&(i+="; extras ="+JSON.stringify(this.extras)),this.data&&(typeof this.data=="string"?i+="; data="+this.data:T.BufferUtils.isBuffer(this.data)?i+="; data (buffer)="+T.BufferUtils.base64Encode(this.data):i+="; data (json)="+JSON.stringify(this.data)),this.extras&&(i+="; extras="+JSON.stringify(this.extras)),i+="]",i}},im=rm,sm=["absent","present","enter","leave","update"];function vT(i){return sm.indexOf(i)}async function om(i,o,l){const c=dn(o,!0);try{await yc(c,l??{})}catch(d){m.logAction(i,m.LOG_ERROR,"PresenceMessage.fromEncoded()",d.toString())}return c}async function wT(i,o,l){return Promise.all(o.map(function(c){return om(i,c,l)}))}function dn(i,o){return o&&(i.action=sm[i.action]),Object.assign(new vc,i)}var yc=So;async function am(i,o,l,c,d){const g=[];d&&(i=kt(i,c,d));for(let R=0;R<i.length;R++){const x=g[R]=dn(i[R],!0);try{await yc(x,o)}catch(L){m.logAction(l,m.LOG_ERROR,"PresenceMessage.fromResponseBody()",L.toString())}}return g}function lm(i){const o=i.length,l=new Array(o);for(let c=0;c<o;c++)l[c]=dn(i[c]);return l}function um(i){return i instanceof vc?i:dn({data:i})}var vc=class{isSynthesized(){return!this.id||!this.connectionId?!0:this.id.substring(this.connectionId.length,0)!==this.connectionId}parseId(){if(!this.id)throw new Error("parseId(): Presence message does not contain an id");const i=this.id.split(":");return{connectionId:i[0],msgSerial:parseInt(i[1],10),index:parseInt(i[2],10)}}toJSON(){let i=this.data,o=this.encoding;return i&&T.BufferUtils.isBuffer(i)&&(arguments.length>0?(o=o?o+"/base64":"base64",i=T.BufferUtils.base64Encode(i)):i=T.BufferUtils.toBuffer(i)),{id:this.id,clientId:this.clientId,action:vT(this.action),data:i,encoding:o,extras:this.extras}}toString(){let i="[PresenceMessage";return i+="; action="+this.action,this.id&&(i+="; id="+this.id),this.timestamp&&(i+="; timestamp="+this.timestamp),this.clientId&&(i+="; clientId="+this.clientId),this.connectionId&&(i+="; connectionId="+this.connectionId),this.encoding&&(i+="; encoding="+this.encoding),this.data&&(typeof this.data=="string"?i+="; data="+this.data:T.BufferUtils.isBuffer(this.data)?i+="; data (buffer)="+T.BufferUtils.base64Encode(this.data):i+="; data (json)="+JSON.stringify(this.data)),this.extras&&(i+="; extras="+JSON.stringify(this.extras)),i+="]",i}},ST=vc,CT=class{constructor(i){this.channel=i}get logger(){return this.channel.logger}async get(i){m.logAction(this.logger,m.LOG_MICRO,"RestPresence.get()","channel = "+this.channel.name);const o=this.channel.client,l=o.options.useBinaryProtocol?"msgpack":"json",c=this.channel.client.http.supportsLinkHeaders?void 0:l,d=ae.defaultGetHeaders(o.options,{format:l});Z(d,o.options.headers);const g=this.channel.channelOptions;return new Cr(o,this.channel.client.rest.presenceMixin.basePath(this),d,c,async(R,x,L)=>await am(R,g,this.logger,o._MsgPack,L?void 0:l)).get(i)}async history(i){return m.logAction(this.logger,m.LOG_MICRO,"RestPresence.history()","channel = "+this.channel.name),this.channel.client.rest.presenceMixin.history(this,i)}},TT=CT,RT=9;function ET(i){return i.every(function(o){return!o.id})}var PT=class{constructor(i,o,l){var c,d;m.logAction(i.logger,m.LOG_MINOR,"RestChannel()","started; name = "+o),this.name=o,this.client=i,this.presence=new TT(this),this.channelOptions=bt((c=i._Crypto)!=null?c:null,this.logger,l),(d=i.options.plugins)!=null&&d.Push&&(this._push=new i.options.plugins.Push.PushChannel(this))}get push(){return this._push||Se("Push"),this._push}get logger(){return this.client.logger}setOptions(i){var o;this.channelOptions=bt((o=this.client._Crypto)!=null?o:null,this.logger,i)}async history(i){return m.logAction(this.logger,m.LOG_MICRO,"RestChannel.history()","channel = "+this.name),this.client.rest.channelMixin.history(this,i)}async publish(...i){const o=i[0],l=i[1];let c,d;if(typeof o=="string"||o===null)c=[Tr({name:o,data:l})],d=i[2];else if(ie(o))c=[Tr(o)],d=i[1];else if(Array.isArray(o))c=mc(o),d=i[1];else throw new N("The single-argument form of publish() expects a message object or an array of message objects",40013,400);d||(d={});const g=this.client,R=g.options,x=R.useBinaryProtocol?"msgpack":"json",L=g.options.idempotentRestPublishing,b=ae.defaultPostHeaders(g.options,{format:x});if(Z(b,R.headers),L&&ET(c)){const q=await Wn(RT);c.forEach(function(j,K){j.id=q+":"+K.toString()})}await nm(c,this.channelOptions);const U=gc(c),B=R.maxMessageSize;if(U>B)throw new N("Maximum size of messages that can be published at once exceeded ( was "+U+" bytes; limit is "+B+" bytes)",40009,400);await this._publish(gT(c,g._MsgPack,x),b,d)}async _publish(i,o,l){await Je.post(this.client,this.client.rest.channelMixin.basePath(this)+"/messages",i,o,l,null,!0)}async status(){return this.client.rest.channelMixin.status(this)}},AT=PT,_T=class B1{constructor(o){this.entries=o&&o.entries||void 0,this.schema=o&&o.schema||void 0,this.appId=o&&o.appId||void 0,this.inProgress=o&&o.inProgress||void 0,this.unit=o&&o.unit||void 0,this.intervalId=o&&o.intervalId||void 0}static fromValues(o){return new B1(o)}},xT=_T,cm=class{static basePath(i){return"/channels/"+encodeURIComponent(i.name)}static history(i,o){const l=i.client,c=l.options.useBinaryProtocol?"msgpack":"json",d=i.client.http.supportsLinkHeaders?void 0:c,g=ae.defaultGetHeaders(l.options,{format:c});Z(g,l.options.headers);const R=i.channelOptions;return new Cr(l,this.basePath(i)+"/messages",g,d,async function(x,L,b){return await yT(x,R,i.logger,l._MsgPack,b?void 0:c)}).get(o)}static async status(i){const o=i.client.options.useBinaryProtocol?"msgpack":"json",l=ae.defaultPostHeaders(i.client.options,{format:o});return(await Je.get(i.client,this.basePath(i),l,{},o,!0)).body}},OT=class{static basePath(i){return cm.basePath(i.channel)+"/presence"}static async history(i,o){const l=i.channel.client,c=l.options.useBinaryProtocol?"msgpack":"json",d=i.channel.client.http.supportsLinkHeaders?void 0:c,g=ae.defaultGetHeaders(l.options,{format:c});Z(g,l.options.headers);const R=i.channel.channelOptions;return new Cr(l,this.basePath(i)+"/history",g,d,async function(x,L,b){return await am(x,R,i.logger,l._MsgPack,b?void 0:c)}).get(o)}},hm=class{constructor(i){this.channelMixin=cm,this.presenceMixin=OT,this.Resource=Je,this.DeviceDetails=Zi,this.client=i,this.channels=new kT(this.client),this.push=new cT(this.client)}async stats(i){const o=ae.defaultGetHeaders(this.client.options),l=this.client.options.useBinaryProtocol?"msgpack":"json",c=this.client.http.supportsLinkHeaders?void 0:l;return Z(o,this.client.options.headers),new Cr(this.client,"/stats",o,c,function(d,g,R){const x=R?d:JSON.parse(d);for(let L=0;L<x.length;L++)x[L]=xT.fromValues(x[L]);return x}).get(i)}async time(i){const o=ae.defaultGetHeaders(this.client.options);this.client.options.headers&&Z(o,this.client.options.headers);const l=x=>this.client.baseUri(x)+"/time";let{error:c,body:d,unpacked:g}=await this.client.http.do(le.Get,l,o,null,i);if(c)throw c;g||(d=JSON.parse(d));const R=d[0];if(!R)throw new N("Internal error (unexpected result type from GET /time)",5e4,500);return this.client.serverTimeOffset=R-Date.now(),R}async request(i,o,l,c,d,g){var R;const[x,L,b]=this.client.options.useBinaryProtocol?(this.client._MsgPack||Se("MsgPack"),[this.client._MsgPack.encode,this.client._MsgPack.decode,"msgpack"]):[JSON.stringify,JSON.parse,"json"],U=this.client.http.supportsLinkHeaders?void 0:b;c=c||{};const B=i.toLowerCase(),q=B=="get"?ae.defaultGetHeaders(this.client.options,{format:b,protocolVersion:l}):ae.defaultPostHeaders(this.client.options,{format:b,protocolVersion:l});typeof d!="string"&&(d=(R=x(d))!=null?R:null),Z(q,this.client.options.headers),g&&Z(q,g);const j=new Cr(this.client,o,q,U,async function(K,ee,ce){return se(ce?K:L(K))},!0);if(!T.Http.methods.includes(B))throw new N("Unsupported method "+B,40500,405);return T.Http.methodsWithBody.includes(B)?j[B](c,d):j[B](c)}async batchPublish(i){let o,l;Array.isArray(i)?(o=i,l=!1):(o=[i],l=!0);const c=this.client.options.useBinaryProtocol?"msgpack":"json",d=ae.defaultPostHeaders(this.client.options,{format:c});this.client.options.headers&&Z(d,this.client.options.headers);const g=Mt(o,this.client._MsgPack,c),R=await Je.post(this.client,"/messages",g,d,{},null,!0),x=R.unpacked?R.body:kt(R.body,this.client._MsgPack,c);return l?x[0]:x}async batchPresence(i){const o=this.client.options.useBinaryProtocol?"msgpack":"json",l=ae.defaultPostHeaders(this.client.options,{format:o});this.client.options.headers&&Z(l,this.client.options.headers);const c=i.join(","),d=await Je.get(this.client,"/presence",l,{channels:c},null,!0);return d.unpacked?d.body:kt(d.body,this.client._MsgPack,o)}async revokeTokens(i,o){if(Qp(this.client.options))throw new N("Cannot revoke tokens when using token auth",40162,401);const l=this.client.options.keyName;let c=o??{};const d=P({targets:i.map(b=>`${b.type}:${b.value}`)},c),g=this.client.options.useBinaryProtocol?"msgpack":"json",R=ae.defaultPostHeaders(this.client.options,{format:g});this.client.options.headers&&Z(R,this.client.options.headers);const x=Mt(d,this.client._MsgPack,g),L=await Je.post(this.client,`/keys/${l}/revokeTokens`,x,R,{},null,!0);return L.unpacked?L.body:kt(L.body,this.client._MsgPack,g)}},kT=class{constructor(i){this.client=i,this.all=Object.create(null)}get(i,o){i=String(i);let l=this.all[i];return l?o&&l.setOptions(o):this.all[i]=l=new AT(this.client,i,o),l}release(i){delete this.all[String(i)]}},MT=class extends Yp{constructor(i){super(ae.objectifyOptions(i,!1,"BaseRest",m.defaultLogger,{Rest:hm}))}},fm={Rest:hm},dm=class extends im{static async fromEncoded(i,o){return tm(m.defaultLogger,T.Crypto,i,o)}static async fromEncodedArray(i,o){return pT(m.defaultLogger,T.Crypto,i,o)}static fromValues(i){return Object.assign(new im,i)}static async encode(i,o){return pc(i,o)}static async decode(i,o){return So(i,o)}},pm=class extends ST{static async fromEncoded(i,o){return om(m.defaultLogger,i,o)}static async fromEncodedArray(i,o){return wT(m.defaultLogger,i,o)}static fromValues(i,o){return dn(i,o)}},es=class eu extends MT{constructor(o){var l,c;if(!eu._MsgPack)throw new Error("Expected DefaultRest._MsgPack to have been set");super(ae.objectifyOptions(o,!0,"Rest",m.defaultLogger,_(P({},fm),{Crypto:(l=eu.Crypto)!=null?l:void 0,MsgPack:(c=eu._MsgPack)!=null?c:void 0})))}static get Crypto(){if(this._Crypto===null)throw new Error("Encryption not enabled; use ably.encryption.js instead");return this._Crypto}static set Crypto(o){this._Crypto=o}};es._Crypto=null,es.Message=dm,es.PresenceMessage=pm,es._MsgPack=null,es._Http=fc;var wc=es;function bT(i,o,l,c){try{l.apply(o,c)}catch(d){m.logAction(i,m.LOG_ERROR,"EventEmitter.emit()","Unexpected listener exception: "+d+"; stack = "+(d&&d.stack))}}function Sc(i,o,l){let c,d,g;for(let R=0;R<i.length;R++)if(c=i[R],l&&(c=c[l]),Array.isArray(c)){for(;(d=c.indexOf(o))!==-1;)c.splice(d,1);l&&c.length===0&&delete i[R][l]}else if(ie(c))for(g in c)Object.prototype.hasOwnProperty.call(c,g)&&Array.isArray(c[g])&&Sc([c],o,g)}var IT=class{constructor(i){this.logger=i,this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null)}on(...i){if(i.length===1){const o=i[0];if(typeof o=="function")this.any.push(o);else throw new Error("EventListener.on(): Invalid arguments: "+T.Config.inspect(i))}if(i.length===2){const[o,l]=i;if(typeof l!="function")throw new Error("EventListener.on(): Invalid arguments: "+T.Config.inspect(i));if(re(o))this.any.push(l);else if(Array.isArray(o))o.forEach(c=>{this.on(c,l)});else{if(typeof o!="string")throw new Error("EventListener.on(): Invalid arguments: "+T.Config.inspect(i));(this.events[o]||(this.events[o]=[])).push(l)}}}off(...i){if(i.length==0||re(i[0])&&re(i[1])){this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null);return}const[o,l]=i;let c=null,d=null;if(i.length===1||!l)typeof o=="function"?c=o:d=o;else{if(typeof l!="function")throw new Error("EventEmitter.off(): invalid arguments:"+T.Config.inspect(i));[d,c]=[o,l]}if(c&&re(d)){Sc([this.any,this.events,this.anyOnce,this.eventsOnce],c);return}if(Array.isArray(d)){d.forEach(g=>{this.off(g,c)});return}if(typeof d!="string")throw new Error("EventEmitter.off(): invalid arguments:"+T.Config.inspect(i));c?Sc([this.events,this.eventsOnce],c,d):(delete this.events[d],delete this.eventsOnce[d])}listeners(i){if(i){const o=this.events[i]||[];return this.eventsOnce[i]&&Array.prototype.push.apply(o,this.eventsOnce[i]),o.length?o:null}return this.any.length?this.any:null}emit(i,...o){const l={event:i},c=[];this.anyOnce.length&&(Array.prototype.push.apply(c,this.anyOnce),this.anyOnce=[]),this.any.length&&Array.prototype.push.apply(c,this.any);const d=this.eventsOnce[i];d&&(Array.prototype.push.apply(c,d),delete this.eventsOnce[i]);const g=this.events[i];g&&Array.prototype.push.apply(c,g),c.forEach(R=>{bT(this.logger,l,R,o)})}once(...i){const o=i.length;if(o===0||o===1&&typeof i[0]!="function"){const d=i[0];return new Promise(g=>{this.once(d,g)})}const[l,c]=i;if(i.length===1&&typeof l=="function")this.anyOnce.push(l);else if(re(l)){if(typeof c!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+T.Config.inspect(i));this.anyOnce.push(c)}else if(Array.isArray(l)){const d=this,g=function(){const R=Array.prototype.slice.call(arguments);if(l.forEach(function(x){d.off(x,g)}),typeof c!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+T.Config.inspect(i));c.apply(this,R)};l.forEach(function(R){d.on(R,g)})}else{if(typeof l!="string")throw new Error("EventEmitter.once(): Invalid arguments:"+T.Config.inspect(i));const d=this.eventsOnce[l]||(this.eventsOnce[l]=[]);if(c){if(typeof c!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+T.Config.inspect(i));d.push(c)}}}async whenState(i,o){if(typeof i!="string"||typeof o!="string")throw new Error("whenState requires a valid state String argument");return i===o?null:this.once(i)}},ht=IT,pe={HEARTBEAT:0,ACK:1,NACK:2,CONNECT:3,CONNECTED:4,DISCONNECT:5,DISCONNECTED:6,CLOSE:7,CLOSED:8,ERROR:9,ATTACH:10,ATTACHED:11,DETACH:12,DETACHED:13,PRESENCE:14,MESSAGE:15,SYNC:16,AUTH:17,ACTIVATE:18},mm=[];Object.keys(pe).forEach(function(i){mm[pe[i]]=i});var Kn={HAS_PRESENCE:1,HAS_BACKLOG:2,RESUMED:4,TRANSIENT:16,ATTACH_RESUME:32,PRESENCE:65536,PUBLISH:1<<17,SUBSCRIBE:1<<18,PRESENCE_SUBSCRIBE:1<<19},LT=Object.keys(Kn);Kn.MODE_ALL=Kn.PRESENCE|Kn.PUBLISH|Kn.SUBSCRIBE|Kn.PRESENCE_SUBSCRIBE;function gm(i){const o=[];if(i)for(let l=0;l<i.length;l++)o.push(i[l].toString());return"[ "+o.join(", ")+" ]"}var ym=["PRESENCE","PUBLISH","SUBSCRIBE","PRESENCE_SUBSCRIBE"],NT=Mt;function DT(i,o,l,c){const d=kt(i,o,c);return Cc(d,l)}function Cc(i,o){const l=i.error;l&&(i.error=N.fromValues(l));const c=i.messages;if(c)for(let g=0;g<c.length;g++)c[g]=Tr(c[g]);const d=o?i.presence:void 0;if(o&&d&&o)for(let g=0;g<d.length;g++)d[g]=o.presenceMessageFromValues(d[g],!0);return Object.assign(new Rc,_(P({},i),{presence:d}))}function UT(i){return Cc(i,{presenceMessageFromValues:dn,presenceMessagesFromValuesArray:lm})}function On(i){return Object.assign(new Rc,i)}function Tc(i,o){let l="[ProtocolMessage";i.action!==void 0&&(l+="; action="+mm[i.action]||i.action);const c=["id","channel","channelSerial","connectionId","count","msgSerial","timestamp"];let d;for(let g=0;g<c.length;g++)d=c[g],i[d]!==void 0&&(l+="; "+d+"="+i[d]);if(i.messages&&(l+="; messages="+gm(mc(i.messages))),i.presence&&o&&(l+="; presence="+gm(o.presenceMessagesFromValuesArray(i.presence))),i.error&&(l+="; error="+N.fromValues(i.error).toString()),i.auth&&i.auth.accessToken&&(l+="; token="+i.auth.accessToken),i.flags&&(l+="; flags="+LT.filter(i.hasFlag).join(",")),i.params){let g="";Gi(i.params,function(R){g.length>0&&(g+="; "),g+=R+"="+i.params[R]}),g.length>0&&(l+="; params=["+g+"]")}return l+="]",l}var Rc=class{constructor(){this.hasFlag=i=>(this.flags&Kn[i])>0}setFlag(i){return this.flags=this.flags|Kn[i]}getMode(){return this.flags&&this.flags&Kn.MODE_ALL}encodeModesToFlags(i){i.forEach(o=>this.setFlag(o))}decodeModesFromFlags(){const i=[];return ym.forEach(o=>{this.hasFlag(o)&&i.push(o)}),i.length>0?i:void 0}},vm=Rc,FT=class extends ht{constructor(i){super(i),this.messages=[]}count(){return this.messages.length}push(i){this.messages.push(i)}shift(){return this.messages.shift()}last(){return this.messages[this.messages.length-1]}copyAll(){return this.messages.slice()}append(i){this.messages.push.apply(this.messages,i)}prepend(i){this.messages.unshift.apply(this.messages,i)}completeMessages(i,o,l){m.logAction(this.logger,m.LOG_MICRO,"MessageQueue.completeMessages()","serial = "+i+"; count = "+o),l=l||null;const c=this.messages;if(c.length===0)throw new Error("MessageQueue.completeMessages(): completeMessages called on any empty MessageQueue");const d=c[0];if(d){const g=d.message.msgSerial,R=i+o;if(R>g){const x=c.splice(0,R-g);for(const L of x)L.callback(l)}c.length==0&&this.emit("idle")}}completeAllMessages(i){this.completeMessages(0,Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,i)}resetSendAttempted(){for(let i of this.messages)i.sendAttempted=!1}clear(){m.logAction(this.logger,m.LOG_MICRO,"MessageQueue.clear()","clearing "+this.messages.length+" messages"),this.messages=[],this.emit("idle")}},wm=FT,Sm=class{constructor(i,o){this.message=i,this.callback=o,this.merged=!1;const l=i.action;this.sendAttempted=!1,this.ackRequired=l==pe.MESSAGE||l==pe.PRESENCE}},BT=class extends ht{constructor(i){super(i.logger),this.transport=i,this.messageQueue=new wm(this.logger),i.on("ack",(o,l)=>{this.onAck(o,l)}),i.on("nack",(o,l,c)=>{this.onNack(o,l,c)})}onAck(i,o){m.logAction(this.logger,m.LOG_MICRO,"Protocol.onAck()","serial = "+i+"; count = "+o),this.messageQueue.completeMessages(i,o)}onNack(i,o,l){m.logAction(this.logger,m.LOG_ERROR,"Protocol.onNack()","serial = "+i+"; count = "+o+"; err = "+Me(l)),l||(l=new N("Unable to send message; channel not responding",50001,500)),this.messageQueue.completeMessages(i,o,l)}onceIdle(i){const o=this.messageQueue;if(o.count()===0){i();return}o.once("idle",i)}send(i){i.ackRequired&&this.messageQueue.push(i),this.logger.shouldLog(m.LOG_MICRO)&&m.logActionNoStrip(this.logger,m.LOG_MICRO,"Protocol.send()","sending msg; "+Tc(i.message,this.transport.connectionManager.realtime._RealtimePresence)),i.sendAttempted=!0,this.transport.send(i.message)}getTransport(){return this.transport}getPendingMessages(){return this.messageQueue.copyAll()}clearPendingMessages(){return this.messageQueue.clear()}finish(){const i=this.transport;this.onceIdle(function(){i.disconnect()})}},VT=BT,jT=class{constructor(i,o,l,c){this.previous=i,this.current=o,l&&(this.retryIn=l),c&&(this.reason=c)}},hl=jT,Rr={DISCONNECTED:80003,SUSPENDED:80002,FAILED:8e4,CLOSING:80017,CLOSED:80017,UNKNOWN_CONNECTION_ERR:50002,UNKNOWN_CHANNEL_ERR:50001},zT={disconnected:()=>N.fromValues({statusCode:400,code:Rr.DISCONNECTED,message:"Connection to server temporarily unavailable"}),suspended:()=>N.fromValues({statusCode:400,code:Rr.SUSPENDED,message:"Connection to server unavailable"}),failed:()=>N.fromValues({statusCode:400,code:Rr.FAILED,message:"Connection failed or disconnected by server"}),closing:()=>N.fromValues({statusCode:400,code:Rr.CLOSING,message:"Connection closing"}),closed:()=>N.fromValues({statusCode:400,code:Rr.CLOSED,message:"Connection closed"}),unknownConnectionErr:()=>N.fromValues({statusCode:500,code:Rr.UNKNOWN_CONNECTION_ERR,message:"Internal connection error"}),unknownChannelErr:()=>N.fromValues({statusCode:500,code:Rr.UNKNOWN_CONNECTION_ERR,message:"Internal channel error"})};function GT(i){return!i.statusCode||!i.code||i.statusCode>=500?!0:Object.values(Rr).includes(i.code)}var Er=zT,HT=On({action:pe.CLOSE}),WT=On({action:pe.DISCONNECT}),qT=class extends ht{constructor(i,o,l,c){super(i.logger),c&&(l.format=void 0,l.heartbeats=!0),this.connectionManager=i,this.auth=o,this.params=l,this.timeouts=l.options.timeouts,this.format=l.format,this.isConnected=!1,this.isFinished=!1,this.isDisposed=!1,this.maxIdleInterval=null,this.idleTimer=null,this.lastActivity=null}connect(){}close(){this.isConnected&&this.requestClose(),this.finish("closed",Er.closed())}disconnect(i){this.isConnected&&this.requestDisconnect(),this.finish("disconnected",i||Er.disconnected())}fail(i){this.isConnected&&this.requestDisconnect(),this.finish("failed",i||Er.failed())}finish(i,o){var l;this.isFinished||(this.isFinished=!0,this.isConnected=!1,this.maxIdleInterval=null,clearTimeout((l=this.idleTimer)!=null?l:void 0),this.idleTimer=null,this.emit(i,o),this.dispose())}onProtocolMessage(i){switch(this.logger.shouldLog(m.LOG_MICRO)&&m.logActionNoStrip(this.logger,m.LOG_MICRO,"Transport.onProtocolMessage()","received on "+this.shortName+": "+Tc(i,this.connectionManager.realtime._RealtimePresence)+"; connectionId = "+this.connectionManager.connectionId),this.onActivity(),i.action){case pe.HEARTBEAT:m.logActionNoStrip(this.logger,m.LOG_MICRO,"Transport.onProtocolMessage()",this.shortName+" heartbeat; connectionId = "+this.connectionManager.connectionId),this.emit("heartbeat",i.id);break;case pe.CONNECTED:this.onConnect(i),this.emit("connected",i.error,i.connectionId,i.connectionDetails,i);break;case pe.CLOSED:this.onClose(i);break;case pe.DISCONNECTED:this.onDisconnect(i);break;case pe.ACK:this.emit("ack",i.msgSerial,i.count);break;case pe.NACK:this.emit("nack",i.msgSerial,i.count,i.error);break;case pe.SYNC:this.connectionManager.onChannelMessage(i,this);break;case pe.ACTIVATE:break;case pe.AUTH:nt(this.auth.authorize(),o=>{o&&m.logAction(this.logger,m.LOG_ERROR,"Transport.onProtocolMessage()","Ably requested re-authentication, but unable to obtain a new token: "+Me(o))});break;case pe.ERROR:if(m.logAction(this.logger,m.LOG_MINOR,"Transport.onProtocolMessage()","received error action; connectionId = "+this.connectionManager.connectionId+"; err = "+T.Config.inspect(i.error)+(i.channel?", channel: "+i.channel:"")),i.channel===void 0){this.onFatalError(i);break}this.connectionManager.onChannelMessage(i,this);break;default:this.connectionManager.onChannelMessage(i,this)}}onConnect(i){if(this.isConnected=!0,!i.connectionDetails)throw new Error("Transport.onConnect(): Connect message recieved without connectionDetails");const o=i.connectionDetails.maxIdleInterval;o&&(this.maxIdleInterval=o+this.timeouts.realtimeRequestTimeout,this.onActivity())}onDisconnect(i){const o=i&&i.error;m.logAction(this.logger,m.LOG_MINOR,"Transport.onDisconnect()","err = "+Me(o)),this.finish("disconnected",o)}onFatalError(i){const o=i&&i.error;m.logAction(this.logger,m.LOG_MINOR,"Transport.onFatalError()","err = "+Me(o)),this.finish("failed",o)}onClose(i){const o=i&&i.error;m.logAction(this.logger,m.LOG_MINOR,"Transport.onClose()","err = "+Me(o)),this.finish("closed",o)}requestClose(){m.logAction(this.logger,m.LOG_MINOR,"Transport.requestClose()",""),this.send(HT)}requestDisconnect(){m.logAction(this.logger,m.LOG_MINOR,"Transport.requestDisconnect()",""),this.send(WT)}ping(i){const o={action:pe.HEARTBEAT};i&&(o.id=i),this.send(On(o))}dispose(){m.logAction(this.logger,m.LOG_MINOR,"Transport.dispose()",""),this.isDisposed=!0,this.off()}onActivity(){this.maxIdleInterval&&(this.lastActivity=this.connectionManager.lastActivity=Date.now(),this.setIdleTimer(this.maxIdleInterval+100))}setIdleTimer(i){this.idleTimer||(this.idleTimer=setTimeout(()=>{this.onIdleTimerExpire()},i))}onIdleTimerExpire(){if(!this.lastActivity||!this.maxIdleInterval)throw new Error("Transport.onIdleTimerExpire(): lastActivity/maxIdleInterval not set");this.idleTimer=null;const i=Date.now()-this.lastActivity,o=this.maxIdleInterval-i;if(o<=0){const l="No activity seen from realtime in "+i+"ms; assuming connection has dropped";m.logAction(this.logger,m.LOG_ERROR,"Transport.onIdleTimerExpire()",l),this.disconnect(new N(l,80003,408))}else this.setIdleTimer(o+100)}static tryConnect(i,o,l,c,d){const g=new i(o,l,c);let R;const x=function(b){clearTimeout(R),d({event:this.event,error:b})},L=o.options.timeouts.realtimeRequestTimeout;return R=setTimeout(()=>{g.off(["preconnect","disconnected","failed"]),g.dispose(),x.call({event:"disconnected"},new N("Timeout waiting for transport to indicate itself viable",5e4,500))},L),g.on(["failed","disconnected"],x),g.on("preconnect",function(){m.logAction(o.logger,m.LOG_MINOR,"Transport.tryConnect()","viable transport "+g),clearTimeout(R),g.off(["failed","disconnected"],x),d(null,g)}),g.connect(),g}static isAvailable(){throw new N("isAvailable not implemented for transport",5e4,500)}},ts=qT,Lt;(i=>{i.WebSocket="web_socket",i.Comet="comet",i.XhrPolling="xhr_polling"})(Lt||(Lt={}));var $T=typeof Yn<"u"?Yn:typeof window<"u"?window:self,Ec=()=>{var i;return typeof T.WebStorage<"u"&&((i=T.WebStorage)==null?void 0:i.localSupported)},Co=()=>{var i;return typeof T.WebStorage<"u"&&((i=T.WebStorage)==null?void 0:i.sessionSupported)},Cm=function(){},Pc="ably-transport-preference";function KT(i,o,l){let c;if(i.channel!==o.channel||(c=i.action)!==pe.PRESENCE&&c!==pe.MESSAGE||c!==o.action)return!1;const d=c===pe.PRESENCE?"presence":"messages",g=i[d].concat(o[d]);return gc(g)>l||!Hi(g,"clientId")||!g.every(function(x){return!x.id})?!1:(i[d]=g,!0)}function Ac(i){try{return JSON.parse(i)}catch{return null}}var QT=class{constructor(i,o,l,c){this.options=i,this.host=o,this.mode=l,this.connectionKey=c,this.format=i.useBinaryProtocol?"msgpack":"json"}getConnectParams(i){const o=i?W(i):{},l=this.options;switch(this.mode){case"resume":o.resume=this.connectionKey;break;case"recover":{const c=Ac(l.recover);c&&(o.recover=c.connectionKey);break}}return l.clientId!==void 0&&(o.clientId=l.clientId),l.echoMessages===!1&&(o.echo="false"),this.format!==void 0&&(o.format=this.format),this.stream!==void 0&&(o.stream=this.stream),this.heartbeats!==void 0&&(o.heartbeats=this.heartbeats),o.v=ae.protocolVersion,o.agent=Yi(this.options),l.transportParams!==void 0&&Z(o,l.transportParams),o}toString(){let i="[mode="+this.mode;return this.host&&(i+=",host="+this.host),this.connectionKey&&(i+=",connectionKey="+this.connectionKey),this.format&&(i+=",format="+this.format),i+="]",i}},XT=class V1 extends ht{constructor(o,l){super(o.logger),this.supportedTransports={},this.disconnectedRetryCount=0,this.pendingChannelMessagesState={isProcessing:!1,queue:[]},this.realtime=o,this.initTransports(),this.options=l;const c=l.timeouts,d=c.webSocketConnectTimeout+c.realtimeRequestTimeout;if(this.states={initialized:{state:"initialized",terminal:!1,queueEvents:!0,sendEvents:!1,failState:"disconnected"},connecting:{state:"connecting",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:d,failState:"disconnected"},connected:{state:"connected",terminal:!1,queueEvents:!1,sendEvents:!0,failState:"disconnected"},disconnected:{state:"disconnected",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:c.disconnectedRetryTimeout,failState:"disconnected"},suspended:{state:"suspended",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:c.suspendedRetryTimeout,failState:"suspended"},closing:{state:"closing",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:c.realtimeRequestTimeout,failState:"closed"},closed:{state:"closed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"closed"},failed:{state:"failed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"failed"}},this.state=this.states.initialized,this.errorReason=null,this.queuedMessages=new wm(this.logger),this.msgSerial=0,this.connectionDetails=void 0,this.connectionId=void 0,this.connectionKey=void 0,this.connectionStateTtl=c.connectionStateTtl,this.maxIdleInterval=null,this.transports=fn(l.transports||ae.defaultTransports,this.supportedTransports),this.transportPreference=null,this.transports.includes(Lt.WebSocket)&&(this.webSocketTransportAvailable=!0),this.transports.includes(Lt.XhrPolling)?this.baseTransport=Lt.XhrPolling:this.transports.includes(Lt.Comet)&&(this.baseTransport=Lt.Comet),this.httpHosts=ae.getHosts(l),this.wsHosts=ae.getHosts(l,!0),this.activeProtocol=null,this.host=null,this.lastAutoReconnectAttempt=null,this.lastActivity=null,this.forceFallbackHost=!1,this.connectCounter=0,this.wsCheckResult=null,this.webSocketSlowTimer=null,this.webSocketGiveUpTimer=null,this.abandonedWebSocket=!1,m.logAction(this.logger,m.LOG_MINOR,"Realtime.ConnectionManager()","started"),m.logAction(this.logger,m.LOG_MICRO,"Realtime.ConnectionManager()","requested transports = ["+(l.transports||ae.defaultTransports)+"]"),m.logAction(this.logger,m.LOG_MICRO,"Realtime.ConnectionManager()","available transports = ["+this.transports+"]"),m.logAction(this.logger,m.LOG_MICRO,"Realtime.ConnectionManager()","http hosts = ["+this.httpHosts+"]"),!this.transports.length){const R="no requested transports available";throw m.logAction(this.logger,m.LOG_ERROR,"realtime.ConnectionManager()",R),new Error(R)}const g=T.Config.addEventListener;g&&(Co()&&typeof l.recover=="function"&&g("beforeunload",this.persistConnection.bind(this)),l.closeOnUnload===!0&&g("beforeunload",()=>{m.logAction(this.logger,m.LOG_MAJOR,"Realtime.ConnectionManager()","beforeunload event has triggered the connection to close as closeOnUnload is true"),this.requestState({state:"closing"})}),g("online",()=>{var R;this.state==this.states.disconnected||this.state==this.states.suspended?(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager caught browser ‘online’ event","reattempting connection"),this.requestState({state:"connecting"})):this.state==this.states.connecting&&((R=this.pendingTransport)==null||R.off(),this.disconnectAllTransports(),this.startConnect())}),g("offline",()=>{this.state==this.states.connected&&(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager caught browser ‘offline’ event","disconnecting active transport"),this.disconnectAllTransports())}))}static supportedTransports(o){const l={supportedTransports:{}};return this.initTransports(o,l),l.supportedTransports}static initTransports(o,l){const c=P(P({},T.Transports.bundledImplementations),o);[Lt.WebSocket,...T.Transports.order].forEach(d=>{const g=c[d];g&&g.isAvailable()&&(l.supportedTransports[d]=g)})}initTransports(){V1.initTransports(this.realtime._additionalTransportImplementations,this)}createTransportParams(o,l){return new QT(this.options,o,l,this.connectionKey)}getTransportParams(o){(c=>{if(this.connectionKey){c("resume");return}if(typeof this.options.recover=="string"){c("recover");return}const d=this.options.recover,g=this.getSessionRecoverData(),R=this.sessionRecoveryName();if(g&&typeof d=="function"){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.getTransportParams()","Calling clientOptions-provided recover function with last session data (recovery scope: "+R+")"),d(g,x=>{x?(this.options.recover=g.recoveryKey,c("recover")):c("clean")});return}c("clean")})(c=>{const d=this.createTransportParams(null,c);if(c==="recover"){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport recovery mode = recover; recoveryKey = "+this.options.recover);const g=Ac(this.options.recover);g&&(this.msgSerial=g.msgSerial)}else m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport params = "+d.toString());o(d)})}tryATransport(o,l,c){m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.tryATransport()","trying "+l),this.proposedTransport=ts.tryConnect(this.supportedTransports[l],this,this.realtime.auth,o,(d,g)=>{const R=this.state;if(R==this.states.closing||R==this.states.closed||R==this.states.failed){g&&(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.tryATransport()","connection "+R.state+" while we were attempting the transport; closing "+g),g.close()),c(!0);return}if(d){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.tryATransport()","transport "+l+" "+d.event+", err: "+d.error.toString()),$n.isTokenErr(d.error)&&!(this.errorReason&&$n.isTokenErr(this.errorReason))?(this.errorReason=d.error,nt(this.realtime.auth._forceNewToken(null,null),x=>{if(x){this.actOnErrorFromAuthorize(x);return}this.tryATransport(o,l,c)})):d.event==="failed"?(this.notifyState({state:"failed",error:d.error}),c(!0)):d.event==="disconnected"&&(GT(d.error)?c(!1):(this.notifyState({state:this.states.connecting.failState,error:d.error}),c(!0)));return}m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.tryATransport()","viable transport "+l+"; setting pending"),this.setTransportPending(g,o),c(null,g)})}setTransportPending(o,l){const c=l.mode;m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.setTransportPending()","transport = "+o+"; mode = "+c),this.pendingTransport=o,this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),o.once("connected",(g,R,x)=>{this.activateTransport(g,o,R,x),c==="recover"&&this.options.recover&&(delete this.options.recover,this.unpersistConnection())});const d=this;o.on(["disconnected","closed","failed"],function(g){d.deactivateTransport(o,this.event,g)}),this.emit("transport.pending",o)}activateTransport(o,l,c,d){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.activateTransport()","transport = "+l),o&&m.logAction(this.logger,m.LOG_ERROR,"ConnectionManager.activateTransport()","error = "+o),c&&m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.activateTransport()","connectionId =  "+c),d&&m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.activateTransport()","connectionDetails =  "+JSON.stringify(d)),this.persistTransportPreference(l);const g=this.state,R=this.states.connected.state;if(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.activateTransport()","current state = "+g.state),g.state==this.states.closing.state||g.state==this.states.closed.state||g.state==this.states.failed.state)return m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.activateTransport()","Disconnecting transport and abandoning"),l.disconnect(),!1;if(delete this.pendingTransport,!l.isConnected)return m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.activateTransport()","Declining to activate transport "+l+" since it appears to no longer be connected"),!1;const x=this.activeProtocol;this.activeProtocol=new VT(l),this.host=l.params.host;const L=d.connectionKey;if(L&&this.connectionKey!=L&&this.setConnection(c,d,!!o),this.onConnectionDetailsUpdate(d,l),T.Config.nextTick(()=>{l.on("connected",(b,U,B)=>{this.onConnectionDetailsUpdate(B,l),this.emit("update",new hl(R,R,null,b))})}),g.state===this.states.connected.state?o&&(this.errorReason=this.realtime.connection.errorReason=o,this.emit("update",new hl(R,R,null,o))):(this.notifyState({state:"connected",error:o}),this.errorReason=this.realtime.connection.errorReason=o||null),this.emit("transport.active",l),x)if(x.messageQueue.count()>0&&m.logAction(this.logger,m.LOG_ERROR,"ConnectionManager.activateTransport()","Previous active protocol (for transport "+x.transport.shortName+", new one is "+l.shortName+") finishing with "+x.messageQueue.count()+" messages still pending"),x.transport===l){const b="Assumption violated: activating a transport that was also the transport for the previous active protocol; transport = "+l.shortName+"; stack = "+new Error().stack;m.logAction(this.logger,m.LOG_ERROR,"ConnectionManager.activateTransport()",b)}else x.finish();return!0}deactivateTransport(o,l,c){const d=this.activeProtocol,g=d&&d.getTransport()===o,R=o===this.pendingTransport,x=this.noTransportsScheduledForActivation();if(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.deactivateTransport()","transport = "+o),m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.deactivateTransport()","state = "+l+(g?"; was active":R?"; was pending":"")+(x?"":"; another transport is scheduled for activation")),c&&c.message&&m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.deactivateTransport()","reason =  "+c.message),g&&(m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.deactivateTransport()","Getting, clearing, and requeuing "+this.activeProtocol.messageQueue.count()+" pending messages"),this.queuePendingMessages(d.getPendingMessages()),d.clearPendingMessages(),this.activeProtocol=this.host=null),this.emit("transport.inactive",o),g&&x||g&&l==="failed"||l==="closed"||d===null&&R){if(l==="disconnected"&&c&&c.statusCode>500&&this.httpHosts.length>1){this.unpersistTransportPreference(),this.forceFallbackHost=!0,this.notifyState({state:l,error:c,retryImmediately:!0});return}const L=l==="failed"&&$n.isTokenErr(c)?"disconnected":l;this.notifyState({state:L,error:c});return}}noTransportsScheduledForActivation(){return!this.pendingTransport||!this.pendingTransport.isConnected}setConnection(o,l,c){const d=this.connectionId;(d&&d!==o||!d&&c)&&(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.setConnection()","Resetting msgSerial"),this.msgSerial=0,this.queuedMessages.resetSendAttempted()),this.connectionId!==o&&m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.setConnection()","New connectionId; reattaching any attached channels"),this.realtime.connection.id=this.connectionId=o,this.realtime.connection.key=this.connectionKey=l.connectionKey}clearConnection(){this.realtime.connection.id=this.connectionId=void 0,this.realtime.connection.key=this.connectionKey=void 0,this.msgSerial=0,this.unpersistConnection()}createRecoveryKey(){return this.connectionKey?JSON.stringify({connectionKey:this.connectionKey,msgSerial:this.msgSerial,channelSerials:this.realtime.channels.channelSerials()}):null}checkConnectionStateFreshness(){if(!this.lastActivity||!this.connectionId)return;const o=Date.now()-this.lastActivity;o>this.connectionStateTtl+this.maxIdleInterval&&(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.checkConnectionStateFreshness()","Last known activity from realtime was "+o+"ms ago; discarding connection state"),this.clearConnection(),this.states.connecting.failState="suspended")}persistConnection(){if(Co()){const o=this.createRecoveryKey();o&&this.setSessionRecoverData({recoveryKey:o,disconnectedAt:Date.now(),location:$T.location,clientId:this.realtime.auth.clientId})}}unpersistConnection(){this.clearSessionRecoverData()}getError(){if(this.errorReason){const o=ue.fromValues(this.errorReason);return o.cause=this.errorReason,o}return this.getStateError()}getStateError(){var o,l;return(l=(o=Er)[this.state.state])==null?void 0:l.call(o)}activeState(){return this.state.queueEvents||this.state.sendEvents}enactStateChange(o){const l="Connection state",c=o.current+(o.reason?"; reason: "+o.reason:"");o.current==="failed"?m.logAction(this.logger,m.LOG_ERROR,l,c):m.logAction(this.logger,m.LOG_MAJOR,l,c),m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.enactStateChange","setting new state: "+o.current+"; reason = "+(o.reason&&o.reason.message));const d=this.state=this.states[o.current];o.reason&&(this.errorReason=o.reason,this.realtime.connection.errorReason=o.reason),(d.terminal||d.state==="suspended")&&this.clearConnection(),this.emit("connectionstate",o)}startTransitionTimer(o){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.startTransitionTimer()","transitionState: "+o.state),this.transitionTimer&&(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.startTransitionTimer()","clearing already-running timer"),clearTimeout(this.transitionTimer)),this.transitionTimer=setTimeout(()=>{this.transitionTimer&&(this.transitionTimer=null,m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager "+o.state+" timer expired","requesting new state: "+o.failState),this.notifyState({state:o.failState}))},o.retryDelay)}cancelTransitionTimer(){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.cancelTransitionTimer()",""),this.transitionTimer&&(clearTimeout(this.transitionTimer),this.transitionTimer=null)}startSuspendTimer(){this.suspendTimer||(this.suspendTimer=setTimeout(()=>{this.suspendTimer&&(this.suspendTimer=null,m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager suspend timer expired","requesting new state: suspended"),this.states.connecting.failState="suspended",this.notifyState({state:"suspended"}))},this.connectionStateTtl))}checkSuspendTimer(o){o!=="disconnected"&&o!=="suspended"&&o!=="connecting"&&this.cancelSuspendTimer()}cancelSuspendTimer(){this.states.connecting.failState="disconnected",this.suspendTimer&&(clearTimeout(this.suspendTimer),this.suspendTimer=null)}startRetryTimer(o){this.retryTimer=setTimeout(()=>{m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager retry timer expired","retrying"),this.retryTimer=null,this.requestState({state:"connecting"})},o)}cancelRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)}startWebSocketSlowTimer(){this.webSocketSlowTimer=setTimeout(()=>{m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager WebSocket slow timer","checking connectivity"),this.wsCheckResult===null&&this.checkWsConnectivity().then(()=>{m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager WebSocket slow timer","ws connectivity check succeeded"),this.wsCheckResult=!0}).catch(()=>{m.logAction(this.logger,m.LOG_MAJOR,"ConnectionManager WebSocket slow timer","ws connectivity check failed"),this.wsCheckResult=!1}),this.realtime.http.checkConnectivity&&nt(this.realtime.http.checkConnectivity(),(o,l)=>{o||!l?(m.logAction(this.logger,m.LOG_MAJOR,"ConnectionManager WebSocket slow timer","http connectivity check failed"),this.cancelWebSocketGiveUpTimer(),this.notifyState({state:"disconnected",error:new N("Unable to connect (network unreachable)",80003,404)})):m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager WebSocket slow timer","http connectivity check succeeded")})},this.options.timeouts.webSocketSlowTimeout)}cancelWebSocketSlowTimer(){this.webSocketSlowTimer&&(clearTimeout(this.webSocketSlowTimer),this.webSocketSlowTimer=null)}startWebSocketGiveUpTimer(o){this.webSocketGiveUpTimer=setTimeout(()=>{var l,c;this.wsCheckResult||(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager WebSocket give up timer","websocket connection took more than 10s; "+(this.baseTransport?"trying base transport":"")),this.baseTransport?(this.abandonedWebSocket=!0,(l=this.proposedTransport)==null||l.dispose(),(c=this.pendingTransport)==null||c.dispose(),this.connectBase(o,++this.connectCounter)):m.logAction(this.logger,m.LOG_MAJOR,"ConnectionManager WebSocket give up timer","websocket connectivity appears to be unavailable but no other transports to try"))},this.options.timeouts.webSocketConnectTimeout)}cancelWebSocketGiveUpTimer(){this.webSocketGiveUpTimer&&(clearTimeout(this.webSocketGiveUpTimer),this.webSocketGiveUpTimer=null)}notifyState(o){var l,c;const d=o.state,g=d==="disconnected"&&(this.state===this.states.connected||o.retryImmediately||this.state===this.states.connecting&&o.error&&$n.isTokenErr(o.error)&&!(this.errorReason&&$n.isTokenErr(this.errorReason)));if(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.notifyState()","new state: "+d+(g?"; will retry connection immediately":"")),d==this.state.state||(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),this.checkSuspendTimer(o.state),(d==="suspended"||d==="connected")&&(this.disconnectedRetryCount=0),this.state.terminal))return;const R=this.states[o.state];let x=R.retryDelay;R.state==="disconnected"&&(this.disconnectedRetryCount++,x=_n(R.retryDelay,this.disconnectedRetryCount));const L=new hl(this.state.state,R.state,x,o.error||((c=(l=Er)[R.state])==null?void 0:c.call(l)));if(g){const b=()=>{this.state===this.states.disconnected&&(this.lastAutoReconnectAttempt=Date.now(),this.requestState({state:"connecting"}))},U=this.lastAutoReconnectAttempt&&Date.now()-this.lastAutoReconnectAttempt+1;U&&U<1e3?(m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.notifyState()","Last reconnect attempt was only "+U+"ms ago, waiting another "+(1e3-U)+"ms before trying again"),setTimeout(b,1e3-U)):T.Config.nextTick(b)}else(d==="disconnected"||d==="suspended")&&this.startRetryTimer(x);(d==="disconnected"&&!g||d==="suspended"||R.terminal)&&T.Config.nextTick(()=>{this.disconnectAllTransports()}),d=="connected"&&!this.activeProtocol&&m.logAction(this.logger,m.LOG_ERROR,"ConnectionManager.notifyState()","Broken invariant: attempted to go into connected state, but there is no active protocol"),this.enactStateChange(L),this.state.sendEvents?this.sendQueuedMessages():this.state.queueEvents||(this.realtime.channels.propogateConnectionInterruption(d,L.reason),this.failQueuedMessages(L.reason))}requestState(o){var l,c;const d=o.state;if(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.requestState()","requested state: "+d+"; current state: "+this.state.state),d==this.state.state||(this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(d),d=="connecting"&&this.state.state=="connected")||d=="closing"&&this.state.state=="closed")return;const g=this.states[d],R=new hl(this.state.state,g.state,null,o.error||((c=(l=Er)[g.state])==null?void 0:c.call(l)));this.enactStateChange(R),d=="connecting"&&T.Config.nextTick(()=>{this.startConnect()}),d=="closing"&&this.closeImpl()}startConnect(){if(this.state!==this.states.connecting){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.startConnect()","Must be in connecting state to connect, but was "+this.state.state);return}const o=this.realtime.auth,l=++this.connectCounter,c=()=>{this.checkConnectionStateFreshness(),this.getTransportParams(d=>{if(d.mode==="recover"&&d.options.recover){const g=Ac(d.options.recover);g&&this.realtime.channels.recoverChannels(g.channelSerials)}l===this.connectCounter&&this.connectImpl(d,l)})};if(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.startConnect()","starting connection"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),o.method==="basic")c();else{const d=g=>{l===this.connectCounter&&(g?this.actOnErrorFromAuthorize(g):c())};this.errorReason&&$n.isTokenErr(this.errorReason)?nt(o._forceNewToken(null,null),d):nt(o._ensureValidAuthCredentials(!1),d)}}connectImpl(o,l){const c=this.state.state;if(c!==this.states.connecting.state){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.connectImpl()","Must be in connecting state to connect, but was "+c);return}const d=this.getTransportPreference();d&&d===this.baseTransport&&this.webSocketTransportAvailable&&this.checkWsConnectivity().then(()=>{this.wsCheckResult=!0,this.abandonedWebSocket=!1,this.unpersistTransportPreference(),this.state===this.states.connecting&&(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.connectImpl():","web socket connectivity available, cancelling connection attempt with "+this.baseTransport),this.disconnectAllTransports(),this.connectWs(o,++this.connectCounter))}).catch(Cm),d&&d===this.baseTransport||this.baseTransport&&!this.webSocketTransportAvailable?this.connectBase(o,l):this.connectWs(o,l)}connectWs(o,l){m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.connectWs()"),this.startWebSocketSlowTimer(),this.startWebSocketGiveUpTimer(o),this.tryTransportWithFallbacks("web_socket",o,!0,l,()=>this.wsCheckResult!==!1&&!this.abandonedWebSocket)}connectBase(o,l){m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.connectBase()"),this.baseTransport?this.tryTransportWithFallbacks(this.baseTransport,o,!1,l,()=>!0):this.notifyState({state:"disconnected",error:new N("No transports left to try",8e4,404)})}tryTransportWithFallbacks(o,l,c,d,g){m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.tryTransportWithFallbacks()",o);const R=B=>{this.notifyState({state:this.states.connecting.failState,error:B})},x=c?this.wsHosts.slice():this.httpHosts.slice(),L=(B,q)=>{if(d===this.connectCounter){if(!g()){q&&q.dispose();return}!q&&!B&&U()}},b=x.shift();if(!b){R(new N("Unable to connect (no available host)",80003,404));return}l.host=b;const U=()=>{if(!x.length){R(new N("Unable to connect (and no more fallback hosts to try)",80003,404));return}if(!this.realtime.http.checkConnectivity){R(new ue("Internal error: Http.checkConnectivity not set",null,500));return}nt(this.realtime.http.checkConnectivity(),(B,q)=>{if(d===this.connectCounter&&g()){if(B){R(B);return}if(!q){R(new N("Unable to connect (network unreachable)",80003,404));return}l.host=wr(x),this.tryATransport(l,o,L)}})};if(this.forceFallbackHost&&x.length){this.forceFallbackHost=!1,U();return}this.tryATransport(l,o,L)}closeImpl(){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.closeImpl()","closing connection"),this.cancelSuspendTimer(),this.startTransitionTimer(this.states.closing),this.pendingTransport&&(m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.closeImpl()","Closing pending transport: "+this.pendingTransport),this.pendingTransport.close()),this.activeProtocol&&(m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.closeImpl()","Closing active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().close()),this.notifyState({state:"closed"})}onAuthUpdated(o,l){var c;switch(this.state.state){case"connected":{m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Sending AUTH message on active transport");const d=(c=this.activeProtocol)==null?void 0:c.getTransport();d&&d.onAuthUpdated&&d.onAuthUpdated(o);const g=On({action:pe.AUTH,auth:{accessToken:o.token}});this.send(g);const R=()=>{this.off(x),l(null,o)},x=L=>{L.current==="failed"&&(this.off(R),this.off(x),l(L.reason||this.getStateError()))};this.once("connectiondetails",R),this.on("connectionstate",x);break}case"connecting":m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Aborting current connection attempts in order to start again with the new auth details"),this.disconnectAllTransports();default:{m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Connection state is "+this.state.state+"; waiting until either connected or failed");const d=g=>{switch(g.current){case"connected":this.off(d),l(null,o);break;case"failed":case"closed":case"suspended":this.off(d),l(g.reason||this.getStateError());break}};this.on("connectionstate",d),this.state.state==="connecting"?this.startConnect():this.requestState({state:"connecting"})}}}disconnectAllTransports(){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.disconnectAllTransports()","Disconnecting all transports"),this.connectCounter++,this.pendingTransport&&(m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting pending transport: "+this.pendingTransport),this.pendingTransport.disconnect()),delete this.pendingTransport,this.proposedTransport&&(m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting proposed transport: "+this.pendingTransport),this.proposedTransport.disconnect()),delete this.pendingTransport,this.activeProtocol&&(m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().disconnect())}send(o,l,c){c=c||Cm;const d=this.state;if(d.sendEvents){m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.send()","sending event"),this.sendImpl(new Sm(o,c));return}if(!(l&&d.queueEvents)){const R="rejecting event, queueEvent was "+l+", state was "+d.state;m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.send()",R),c(this.errorReason||new N(R,9e4,400));return}this.logger.shouldLog(m.LOG_MICRO)&&m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.send()","queueing msg; "+Tc(o,this.realtime._RealtimePresence)),this.queue(o,c)}sendImpl(o){const l=o.message;o.ackRequired&&!o.sendAttempted&&(l.msgSerial=this.msgSerial++);try{this.activeProtocol.send(o)}catch(c){m.logAction(this.logger,m.LOG_ERROR,"ConnectionManager.sendImpl()","Unexpected exception in transport.send(): "+c.stack)}}queue(o,l){m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.queue()","queueing event");const c=this.queuedMessages.last(),d=this.options.maxMessageSize;c&&!c.sendAttempted&&KT(c.message,o,d)?(c.merged||(c.callback=G.create(this.logger,[c.callback]),c.merged=!0),c.callback.push(l)):this.queuedMessages.push(new Sm(o,l))}sendQueuedMessages(){m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.sendQueuedMessages()","sending "+this.queuedMessages.count()+" queued messages");let o;for(;o=this.queuedMessages.shift();)this.sendImpl(o)}queuePendingMessages(o){o&&o.length&&(m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.queuePendingMessages()","queueing "+o.length+" pending messages"),this.queuedMessages.prepend(o))}failQueuedMessages(o){const l=this.queuedMessages.count();l>0&&(m.logAction(this.logger,m.LOG_ERROR,"ConnectionManager.failQueuedMessages()","failing "+l+" queued messages, err = "+Me(o)),this.queuedMessages.completeAllMessages(o))}onChannelMessage(o,l){this.pendingChannelMessagesState.queue.push({message:o,transport:l}),this.pendingChannelMessagesState.isProcessing||this.processNextPendingChannelMessage()}processNextPendingChannelMessage(){if(this.pendingChannelMessagesState.queue.length>0){this.pendingChannelMessagesState.isProcessing=!0;const o=this.pendingChannelMessagesState.queue.shift();this.processChannelMessage(o.message).catch(l=>{m.logAction(this.logger,m.LOG_ERROR,"ConnectionManager.processNextPendingChannelMessage() received error ",l)}).finally(()=>{this.pendingChannelMessagesState.isProcessing=!1,this.processNextPendingChannelMessage()})}}async processChannelMessage(o){await this.realtime.channels.processChannelMessage(o)}async ping(){var o;if(this.state.state!=="connected")throw new N("Unable to ping service; not connected",4e4,400);const l=(o=this.activeProtocol)==null?void 0:o.getTransport();if(!l)throw this.getStateError();m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.ping()","transport = "+l);const c=Date.now(),d=An();return qn(new Promise(g=>{const R=x=>{x===d&&(l.off("heartbeat",R),g(Date.now()-c))};l.on("heartbeat",R),l.ping(d)}),this.options.timeouts.realtimeRequestTimeout,"Timeout waiting for heartbeat response")}abort(o){this.activeProtocol.getTransport().fail(o)}getTransportPreference(){var o,l;return this.transportPreference||Ec()&&((l=(o=T.WebStorage)==null?void 0:o.get)==null?void 0:l.call(o,Pc))}persistTransportPreference(o){var l,c;this.transportPreference=o.shortName,Ec()&&((c=(l=T.WebStorage)==null?void 0:l.set)==null||c.call(l,Pc,o.shortName))}unpersistTransportPreference(){var o,l;this.transportPreference=null,Ec()&&((l=(o=T.WebStorage)==null?void 0:o.remove)==null||l.call(o,Pc))}actOnErrorFromAuthorize(o){if(o.code===40171)this.notifyState({state:"failed",error:o});else if(o.code===40102)this.notifyState({state:"failed",error:o});else if(o.statusCode===Ye.Forbidden){const l="Client configured authentication provider returned 403; failing the connection";m.logAction(this.logger,m.LOG_ERROR,"ConnectionManager.actOnErrorFromAuthorize()",l),this.notifyState({state:"failed",error:new N(l,80019,403,o)})}else{const l="Client configured authentication provider request failed";m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.actOnErrorFromAuthorize",l),this.notifyState({state:this.state.failState,error:new N(l,80019,401,o)})}}onConnectionDetailsUpdate(o,l){if(!o)return;this.connectionDetails=o,o.maxMessageSize&&(this.options.maxMessageSize=o.maxMessageSize);const c=o.clientId;if(c){const g=this.realtime.auth._uncheckedSetClientId(c);if(g){m.logAction(this.logger,m.LOG_ERROR,"ConnectionManager.onConnectionDetailsUpdate()",g.message),l.fail(g);return}}const d=o.connectionStateTtl;d&&(this.connectionStateTtl=d),this.maxIdleInterval=o.maxIdleInterval,this.emit("connectiondetails",o)}checkWsConnectivity(){const o=new T.Config.WebSocket(ae.wsConnectivityUrl);return new Promise((l,c)=>{let d=!1;o.onopen=()=>{d||(d=!0,l(),o.close())},o.onclose=o.onerror=()=>{d||(d=!0,c())}})}sessionRecoveryName(){return this.options.recoveryKeyStorageName||"ably-connection-recovery"}getSessionRecoverData(){var o,l;return Co()&&((l=(o=T.WebStorage)==null?void 0:o.getSession)==null?void 0:l.call(o,this.sessionRecoveryName()))}setSessionRecoverData(o){var l,c;return Co()&&((c=(l=T.WebStorage)==null?void 0:l.setSession)==null?void 0:c.call(l,this.sessionRecoveryName(),o))}clearSessionRecoverData(){var o,l;return Co()&&((l=(o=T.WebStorage)==null?void 0:o.removeSession)==null?void 0:l.call(o,this.sessionRecoveryName()))}},Tm=XT,YT=class extends ht{constructor(i,o){super(i.logger),this.whenState=l=>ht.prototype.whenState.call(this,l,this.state),this.ably=i,this.connectionManager=new Tm(i,o),this.state=this.connectionManager.state.state,this.key=void 0,this.id=void 0,this.errorReason=null,this.connectionManager.on("connectionstate",l=>{const c=this.state=l.current;T.Config.nextTick(()=>{this.emit(c,l)})}),this.connectionManager.on("update",l=>{T.Config.nextTick(()=>{this.emit("update",l)})})}connect(){m.logAction(this.logger,m.LOG_MINOR,"Connection.connect()",""),this.connectionManager.requestState({state:"connecting"})}async ping(){return m.logAction(this.logger,m.LOG_MINOR,"Connection.ping()",""),this.connectionManager.ping()}close(){m.logAction(this.logger,m.LOG_MINOR,"Connection.close()","connectionKey = "+this.key),this.connectionManager.requestState({state:"closing"})}get recoveryKey(){return this.logger.deprecationWarning("The `Connection.recoveryKey` attribute has been replaced by the `Connection.createRecoveryKey()` method. Replace your usage of `recoveryKey` with the return value of `createRecoveryKey()`. `recoveryKey` will be removed in a future version."),this.createRecoveryKey()}createRecoveryKey(){return this.connectionManager.createRecoveryKey()}},JT=YT,ZT=class{constructor(i,o,l,c,d){this.previous=i,this.current=o,o==="attached"&&(this.resumed=l,this.hasBacklog=c),d&&(this.reason=d)}},_c=ZT,Rm=function(){};function eR(i){if(i&&"params"in i&&!ie(i.params))return new N("options.params must be an object",4e4,400);if(i&&"modes"in i){if(!Array.isArray(i.modes))return new N("options.modes must be an array",4e4,400);for(let o=0;o<i.modes.length;o++){const l=i.modes[o];if(!l||typeof l!="string"||!ym.includes(String.prototype.toUpperCase.call(l)))return new N("Invalid channel mode: "+l,4e4,400)}}}var tR=class dd extends ht{constructor(o,l,c){var d,g;super(o.logger),this.retryCount=0,this.history=async function(R){m.logAction(this.logger,m.LOG_MICRO,"RealtimeChannel.history()","channel = "+this.name);const x=this.client.rest.channelMixin;if(R&&R.untilAttach){if(this.state!=="attached")throw new N("option untilAttach requires the channel to be attached",4e4,400);if(!this.properties.attachSerial)throw new N("untilAttach was specified and channel is attached, but attachSerial is not defined",4e4,400);delete R.untilAttach,R.from_serial=this.properties.attachSerial}return x.history(this,R)},this.whenState=R=>ht.prototype.whenState.call(this,R,this.state),m.logAction(this.logger,m.LOG_MINOR,"RealtimeChannel()","started; name = "+l),this.name=l,this.channelOptions=bt((d=o._Crypto)!=null?d:null,this.logger,c),this.client=o,this._presence=o._RealtimePresence?new o._RealtimePresence.RealtimePresence(this):null,this.connectionManager=o.connection.connectionManager,this.state="initialized",this.subscriptions=new ht(this.logger),this.syncChannelSerial=void 0,this.properties={attachSerial:void 0,channelSerial:void 0},this.setOptions(c),this.errorReason=null,this._requestedFlags=null,this._mode=null,this._attachResume=!1,this._decodingContext={channelOptions:this.channelOptions,plugins:o.options.plugins||{},baseEncodedPreviousPayload:void 0},this._lastPayload={messageId:null,protocolMessageChannelSerial:null,decodeFailureRecoveryInProgress:null},this._allChannelChanges=new ht(this.logger),(g=o.options.plugins)!=null&&g.Push&&(this._push=new o.options.plugins.Push.PushChannel(this))}get presence(){return this._presence||Se("RealtimePresence"),this._presence}get push(){return this._push||Se("Push"),this._push}invalidStateError(){return new N("Channel operation failed as channel state is "+this.state,90001,400,this.errorReason||void 0)}static processListenerArgs(o){return o=Array.prototype.slice.call(o),typeof o[0]=="function"&&o.unshift(null),o}async setOptions(o){var l;const c=this.channelOptions,d=eR(o);if(d)throw d;if(this.channelOptions=bt((l=this.client._Crypto)!=null?l:null,this.logger,o),this._decodingContext&&(this._decodingContext.channelOptions=this.channelOptions),this._shouldReattachToSetOptions(o,c))return this.attachImpl(),new Promise((g,R)=>{this._allChannelChanges.once(["attached","update","detached","failed"],function(x){switch(this.event){case"update":case"attached":g();break;default:R(x.reason)}})})}_shouldReattachToSetOptions(o,l){if(!(this.state==="attached"||this.state==="attaching"))return!1;if(o!=null&&o.params){const c=Em(o.params),d=Em(l.params);if(Object.keys(c).length!==Object.keys(d).length||!Ki(d,c))return!0}return!!(o!=null&&o.modes&&(!l.modes||!tl(o.modes,l.modes)))}async publish(...o){let l=o[0],c=o.length;if(!this.connectionManager.activeState())throw this.connectionManager.getError();if(c==1)if(ie(l))l=[Tr(l)];else if(Array.isArray(l))l=mc(l);else throw new N("The single-argument form of publish() expects a message object or an array of message objects",40013,400);else l=[Tr({name:o[0],data:o[1]})];const d=this.client.options.maxMessageSize;await nm(l,this.channelOptions);const g=gc(l);if(g>d)throw new N("Maximum size of messages that can be published at once exceeded ( was "+g+" bytes; limit is "+d+" bytes)",40009,400);return new Promise((R,x)=>{this._publish(l,L=>L?x(L):R())})}_publish(o,l){m.logAction(this.logger,m.LOG_MICRO,"RealtimeChannel.publish()","message count = "+o.length);const c=this.state;switch(c){case"failed":case"suspended":l(N.fromValues(this.invalidStateError()));break;default:{m.logAction(this.logger,m.LOG_MICRO,"RealtimeChannel.publish()","sending message; channel state is "+c);const d=new vm;d.action=pe.MESSAGE,d.channel=this.name,d.messages=o,this.sendMessage(d,l);break}}}onEvent(o){m.logAction(this.logger,m.LOG_MICRO,"RealtimeChannel.onEvent()","received message");const l=this.subscriptions;for(let c=0;c<o.length;c++){const d=o[c];l.emit(d.name,d)}}async attach(){return this.state==="attached"?null:new Promise((o,l)=>{this._attach(!1,null,(c,d)=>c?l(c):o(d))})}_attach(o,l,c){c||(c=g=>{g&&m.logAction(this.logger,m.LOG_ERROR,"RealtimeChannel._attach()","Channel attach failed: "+g.toString())});const d=this.connectionManager;if(!d.activeState()){c(d.getError());return}(this.state!=="attaching"||o)&&this.requestState("attaching",l),this.once(function(g){switch(this.event){case"attached":c==null||c(null,g);break;case"detached":case"suspended":case"failed":c==null||c(g.reason||d.getError()||new N("Unable to attach; reason unknown; state = "+this.event,9e4,500));break;case"detaching":c==null||c(new N("Attach request superseded by a subsequent detach request",9e4,409));break}})}attachImpl(){m.logAction(this.logger,m.LOG_MICRO,"RealtimeChannel.attachImpl()","sending ATTACH message");const o=On({action:pe.ATTACH,channel:this.name,params:this.channelOptions.params,channelSerial:this.properties.channelSerial});this._requestedFlags?o.encodeModesToFlags(this._requestedFlags):this.channelOptions.modes&&o.encodeModesToFlags(ai(this.channelOptions.modes)),this._attachResume&&o.setFlag("ATTACH_RESUME"),this._lastPayload.decodeFailureRecoveryInProgress&&(o.channelSerial=this._lastPayload.protocolMessageChannelSerial),this.sendMessage(o,Rm)}async detach(){const o=this.connectionManager;if(!o.activeState())throw o.getError();switch(this.state){case"suspended":this.notifyState("detached");return;case"detached":return;case"failed":throw new N("Unable to detach; channel state = failed",90001,400);default:this.requestState("detaching");case"detaching":return new Promise((l,c)=>{this.once(function(d){switch(this.event){case"detached":l();break;case"attached":case"suspended":case"failed":c(d.reason||o.getError()||new N("Unable to detach; reason unknown; state = "+this.event,9e4,500));break;case"attaching":c(new N("Detach request superseded by a subsequent attach request",9e4,409));break}})})}}detachImpl(o){m.logAction(this.logger,m.LOG_MICRO,"RealtimeChannel.detach()","sending DETACH message");const l=On({action:pe.DETACH,channel:this.name});this.sendMessage(l,o||Rm)}async subscribe(...o){const[l,c]=dd.processListenerArgs(o);if(this.state==="failed")throw N.fromValues(this.invalidStateError());return l&&typeof l=="object"&&!Array.isArray(l)?this.client._FilteredSubscriptions.subscribeFilter(this,l,c):this.subscriptions.on(l,c),this.attach()}unsubscribe(...o){var l;const[c,d]=dd.processListenerArgs(o);if(typeof c=="object"&&!d||(l=this.filteredSubscriptions)!=null&&l.has(d)){this.client._FilteredSubscriptions.getAndDeleteFilteredSubscriptions(this,c,d).forEach(g=>this.subscriptions.off(g));return}this.subscriptions.off(c,d)}sync(){switch(this.state){case"initialized":case"detaching":case"detached":throw new ue("Unable to sync to channel; not attached",4e4)}const o=this.connectionManager;if(!o.activeState())throw o.getError();const l=On({action:pe.SYNC,channel:this.name});this.syncChannelSerial&&(l.channelSerial=this.syncChannelSerial),o.send(l)}sendMessage(o,l){this.connectionManager.send(o,this.client.options.queueMessages,l)}sendPresence(o,l){const c=On({action:pe.PRESENCE,channel:this.name,presence:Array.isArray(o)?this.client._RealtimePresence.presenceMessagesFromValuesArray(o):[this.client._RealtimePresence.presenceMessageFromValues(o)]});this.sendMessage(c,l)}async processMessage(o){(o.action===pe.ATTACHED||o.action===pe.MESSAGE||o.action===pe.PRESENCE)&&this.setChannelSerial(o.channelSerial);let l,c=!1;switch(o.action){case pe.ATTACHED:{this.properties.attachSerial=o.channelSerial,this._mode=o.getMode(),this.params=o.params||{};const d=o.decodeModesFromFlags();this.modes=d&&$i(d)||void 0;const g=o.hasFlag("RESUMED"),R=o.hasFlag("HAS_PRESENCE"),x=o.hasFlag("HAS_BACKLOG");if(this.state==="attached"){g||this._presence&&this._presence.onAttached(R);const L=new _c(this.state,this.state,g,x,o.error);this._allChannelChanges.emit("update",L),(!g||this.channelOptions.updateOnAttached)&&this.emit("update",L)}else this.state==="detaching"?this.checkPendingState():this.notifyState("attached",o.error,g,R,x);break}case pe.DETACHED:{const d=o.error?N.fromValues(o.error):new N("Channel detached",90001,404);this.state==="detaching"?this.notifyState("detached",d):this.state==="attaching"?this.notifyState("suspended",d):(this.state==="attached"||this.state==="suspended")&&this.requestState("attaching",d);break}case pe.SYNC:if(c=!0,l=this.syncChannelSerial=o.channelSerial,!o.presence)break;case pe.PRESENCE:{const d=o.presence;if(!d)break;const{id:g,connectionId:R,timestamp:x}=o,L=this.channelOptions;let b;for(let U=0;U<d.length;U++)try{b=d[U],await yc(b,L),b.connectionId||(b.connectionId=R),b.timestamp||(b.timestamp=x),b.id||(b.id=g+":"+U)}catch(B){m.logAction(this.logger,m.LOG_ERROR,"RealtimeChannel.processMessage()",B.toString())}this._presence&&this._presence.setPresence(d,c,l);break}case pe.MESSAGE:{if(this.state!=="attached"){m.logAction(this.logger,m.LOG_MAJOR,"RealtimeChannel.processMessage()",'Message "'+o.id+'" skipped as this channel "'+this.name+'" state is not "attached" (state is "'+this.state+'").');return}const d=o.messages,g=d[0],R=d[d.length-1],x=o.id,L=o.connectionId,b=o.timestamp;if(g.extras&&g.extras.delta&&g.extras.delta.from!==this._lastPayload.messageId){const U='Delta message decode failure - previous message not available for message "'+o.id+'" on this channel "'+this.name+'".';m.logAction(this.logger,m.LOG_ERROR,"RealtimeChannel.processMessage()",U),this._startDecodeFailureRecovery(new N(U,40018,400));break}for(let U=0;U<d.length;U++){const B=d[U];try{await So(B,this._decodingContext)}catch(q){switch(m.logAction(this.logger,m.LOG_ERROR,"RealtimeChannel.processMessage()",q.toString()),q.code){case 40018:this._startDecodeFailureRecovery(q);return;case 40019:case 40021:this.notifyState("failed",q);return}}B.connectionId||(B.connectionId=L),B.timestamp||(B.timestamp=b),B.id||(B.id=x+":"+U)}this._lastPayload.messageId=R.id,this._lastPayload.protocolMessageChannelSerial=o.channelSerial,this.onEvent(d);break}case pe.ERROR:{const d=o.error;d&&d.code==80016?this.checkPendingState():this.notifyState("failed",N.fromValues(d));break}default:m.logAction(this.logger,m.LOG_ERROR,"RealtimeChannel.processMessage()","Fatal protocol error: unrecognised action ("+o.action+")"),this.connectionManager.abort(Er.unknownChannelErr())}}_startDecodeFailureRecovery(o){this._lastPayload.decodeFailureRecoveryInProgress||(m.logAction(this.logger,m.LOG_MAJOR,"RealtimeChannel.processMessage()","Starting decode failure recovery process."),this._lastPayload.decodeFailureRecoveryInProgress=!0,this._attach(!0,o,()=>{this._lastPayload.decodeFailureRecoveryInProgress=!1}))}onAttached(){m.logAction(this.logger,m.LOG_MINOR,"RealtimeChannel.onAttached","activating channel; name = "+this.name)}notifyState(o,l,c,d,g){if(m.logAction(this.logger,m.LOG_MICRO,"RealtimeChannel.notifyState","name = "+this.name+", current state = "+this.state+", notifying state "+o),this.clearStateTimer(),["detached","suspended","failed"].includes(o)&&(this.properties.channelSerial=null),o===this.state)return;this._presence&&this._presence.actOnChannelState(o,d,l),o==="suspended"&&this.connectionManager.state.sendEvents?this.startRetryTimer():this.cancelRetryTimer(),l&&(this.errorReason=l);const R=new _c(this.state,o,c,g,l),x='Channel state for channel "'+this.name+'"',L=o+(l?"; reason: "+l:"");o==="failed"?m.logAction(this.logger,m.LOG_ERROR,x,L):m.logAction(this.logger,m.LOG_MAJOR,x,L),o!=="attaching"&&o!=="suspended"&&(this.retryCount=0),o==="attached"&&this.onAttached(),o==="attached"?this._attachResume=!0:(o==="detaching"||o==="failed")&&(this._attachResume=!1),this.state=o,this._allChannelChanges.emit(o,R),this.emit(o,R)}requestState(o,l){m.logAction(this.logger,m.LOG_MINOR,"RealtimeChannel.requestState","name = "+this.name+", state = "+o),this.notifyState(o,l),this.checkPendingState()}checkPendingState(){if(!this.connectionManager.state.sendEvents){m.logAction(this.logger,m.LOG_MINOR,"RealtimeChannel.checkPendingState","sendEvents is false; state is "+this.connectionManager.state.state);return}switch(m.logAction(this.logger,m.LOG_MINOR,"RealtimeChannel.checkPendingState","name = "+this.name+", state = "+this.state),this.state){case"attaching":this.startStateTimerIfNotRunning(),this.attachImpl();break;case"detaching":this.startStateTimerIfNotRunning(),this.detachImpl();break;case"attached":this.sync();break}}timeoutPendingState(){switch(this.state){case"attaching":{const o=new N("Channel attach timed out",90007,408);this.notifyState("suspended",o);break}case"detaching":{const o=new N("Channel detach timed out",90007,408);this.notifyState("attached",o);break}default:this.checkPendingState();break}}startStateTimerIfNotRunning(){this.stateTimer||(this.stateTimer=setTimeout(()=>{m.logAction(this.logger,m.LOG_MINOR,"RealtimeChannel.startStateTimerIfNotRunning","timer expired"),this.stateTimer=null,this.timeoutPendingState()},this.client.options.timeouts.realtimeRequestTimeout))}clearStateTimer(){const o=this.stateTimer;o&&(clearTimeout(o),this.stateTimer=null)}startRetryTimer(){if(this.retryTimer)return;this.retryCount++;const o=_n(this.client.options.timeouts.channelRetryTimeout,this.retryCount);this.retryTimer=setTimeout(()=>{this.state==="suspended"&&this.connectionManager.state.sendEvents&&(this.retryTimer=null,m.logAction(this.logger,m.LOG_MINOR,"RealtimeChannel retry timer expired","attempting a new attach"),this.requestState("attaching"))},o)}cancelRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)}getReleaseErr(){const o=this.state;return o==="initialized"||o==="detached"||o==="failed"?null:new N("Can only release a channel in a state where there is no possibility of further updates from the server being received (initialized, detached, or failed); was "+o,90001,400)}setChannelSerial(o){m.logAction(this.logger,m.LOG_MICRO,"RealtimeChannel.setChannelSerial()","Updating channel serial; serial = "+o+"; previous = "+this.properties.channelSerial),o&&(this.properties.channelSerial=o)}async status(){return this.client.rest.channelMixin.status(this)}};function Em(i){return A(i||{},["agent"])}var xc=tR,Pm=class j1 extends Yp{constructor(o){var l,c;if(super(ae.objectifyOptions(o,!1,"BaseRealtime",m.defaultLogger)),m.logAction(this.logger,m.LOG_MINOR,"Realtime()",""),typeof EdgeRuntime=="string")throw new N(`Ably.Realtime instance cannot be used in Vercel Edge runtime. If you are running Vercel Edge functions, please replace your "new Ably.Realtime()" with "new Ably.Rest()" and use Ably Rest API instead of the Realtime API. If you are server-rendering your application in the Vercel Edge runtime, please use the condition "if (typeof EdgeRuntime === 'string')" to prevent instantiating Ably.Realtime instance during SSR in the Vercel Edge runtime.`,4e4,400);this._additionalTransportImplementations=j1.transportImplementationsFromPlugins(this.options.plugins),this._RealtimePresence=(c=(l=this.options.plugins)==null?void 0:l.RealtimePresence)!=null?c:null,this.connection=new JT(this,this.options),this._channels=new rR(this),this.options.autoConnect!==!1&&this.connect()}static transportImplementationsFromPlugins(o){const l={};return o!=null&&o.WebSocketTransport&&(l[Lt.WebSocket]=o.WebSocketTransport),o!=null&&o.XHRPolling&&(l[Lt.XhrPolling]=o.XHRPolling),l}get channels(){return this._channels}connect(){m.logAction(this.logger,m.LOG_MINOR,"Realtime.connect()",""),this.connection.connect()}close(){m.logAction(this.logger,m.LOG_MINOR,"Realtime.close()",""),this.connection.close()}};Pm.EventEmitter=ht;var nR=Pm,rR=class extends ht{constructor(i){super(i.logger),this.realtime=i,this.all=Object.create(null),i.connection.connectionManager.on("transport.active",()=>{this.onTransportActive()})}channelSerials(){let i={};for(const o of Gn(this.all,!0)){const l=this.all[o];l.properties.channelSerial&&(i[o]=l.properties.channelSerial)}return i}recoverChannels(i){for(const o of Gn(i,!0)){const l=this.get(o);l.properties.channelSerial=i[o]}}async processChannelMessage(i){const o=i.channel;if(o===void 0){m.logAction(this.logger,m.LOG_ERROR,"Channels.processChannelMessage()","received event unspecified channel, action = "+i.action);return}const l=this.all[o];if(!l){m.logAction(this.logger,m.LOG_ERROR,"Channels.processChannelMessage()","received event for non-existent channel: "+o);return}await l.processMessage(i)}onTransportActive(){for(const i in this.all){const o=this.all[i];o.state==="attaching"||o.state==="detaching"?o.checkPendingState():o.state==="suspended"?o._attach(!1,null):o.state==="attached"&&o.requestState("attaching")}}propogateConnectionInterruption(i,o){const l={closing:"detached",closed:"detached",failed:"failed",suspended:"suspended"},c=["attaching","attached","detaching","suspended"],d=l[i];for(const g in this.all){const R=this.all[g];c.includes(R.state)&&R.notifyState(d,o)}}get(i,o){i=String(i);let l=this.all[i];if(!l)l=this.all[i]=new xc(this.realtime,i,o);else if(o){if(l._shouldReattachToSetOptions(o,l.channelOptions))throw new N("Channels.get() cannot be used to set channel options that would cause the channel to reattach. Please, use RealtimeChannel.setOptions() instead.",4e4,400);l.setOptions(o)}return l}getDerived(i,o,l){if(o.filter){const c=xn(o.filter),d=el(i);i=`[filter=${c}${d.qualifierParam}]${d.channelName}`}return this.get(i,l)}release(i){i=String(i);const o=this.all[i];if(!o)return;const l=o.getReleaseErr();if(l)throw l;delete this.all[i]}},iR=nR;function sR(i){return i.channel.client.auth.clientId}function Oc(i){const o=i.channel.client,l=o.auth.clientId;return(!l||l==="*")&&o.connection.state==="connected"}function oR(i,o,l){switch(i.state){case"attached":case"suspended":l();break;case"initialized":case"detached":case"detaching":case"attaching":nt(i.attach(),function(c){c?o(c):l()});break;default:o(N.fromValues(i.invalidStateError()))}}function Am(i,o){if(i.isSynthesized()||o.isSynthesized())return i.timestamp>=o.timestamp;const l=i.parseId(),c=o.parseId();return l.msgSerial===c.msgSerial?l.index>c.index:l.msgSerial>c.msgSerial}var aR=class extends ht{constructor(i){super(i.logger),this.channel=i,this.syncComplete=!1,this.members=new _m(this,o=>o.clientId+":"+o.connectionId),this._myMembers=new _m(this,o=>o.clientId),this.subscriptions=new ht(this.logger),this.pendingPresence=[]}async enter(i){if(Oc(this))throw new N("clientId must be specified to enter a presence channel",40012,400);return this._enterOrUpdateClient(void 0,void 0,i,"enter")}async update(i){if(Oc(this))throw new N("clientId must be specified to update presence data",40012,400);return this._enterOrUpdateClient(void 0,void 0,i,"update")}async enterClient(i,o){return this._enterOrUpdateClient(void 0,i,o,"enter")}async updateClient(i,o){return this._enterOrUpdateClient(void 0,i,o,"update")}async _enterOrUpdateClient(i,o,l,c){const d=this.channel;if(!d.connectionManager.activeState())throw d.connectionManager.getError();m.logAction(this.logger,m.LOG_MICRO,"RealtimePresence."+c+"Client()","channel = "+d.name+", id = "+i+", client = "+(o||"(implicit) "+sR(this)));const g=um(l);switch(g.action=c,i&&(g.id=i),o&&(g.clientId=o),await pc(g,d.channelOptions),d.state){case"attached":return new Promise((R,x)=>{d.sendPresence(g,L=>L?x(L):R())});case"initialized":case"detached":d.attach();case"attaching":return new Promise((R,x)=>{this.pendingPresence.push({presence:g,callback:L=>L?x(L):R()})});default:{const R=new ue("Unable to "+c+" presence channel while in "+d.state+" state",90001);throw R.code=90001,R}}}async leave(i){if(Oc(this))throw new N("clientId must have been specified to enter or leave a presence channel",40012,400);return this.leaveClient(void 0,i)}async leaveClient(i,o){const l=this.channel;if(!l.connectionManager.activeState())throw l.connectionManager.getError();m.logAction(this.logger,m.LOG_MICRO,"RealtimePresence.leaveClient()","leaving; channel = "+this.channel.name+", client = "+i);const c=um(o);return c.action="leave",i&&(c.clientId=i),new Promise((d,g)=>{switch(l.state){case"attached":l.sendPresence(c,R=>R?g(R):d());break;case"attaching":this.pendingPresence.push({presence:c,callback:R=>R?g(R):d()});break;case"initialized":case"failed":{const R=new ue("Unable to leave presence channel (incompatible state)",90001);g(R);break}default:g(l.invalidStateError())}})}async get(i){const o=!i||("waitForSync"in i?i.waitForSync:!0);return new Promise((l,c)=>{function d(g){l(i?g.list(i):g.values())}if(this.channel.state==="suspended"){o?c(N.fromValues({statusCode:400,code:91005,message:"Presence state is out of sync due to channel being in the SUSPENDED state"})):d(this.members);return}oR(this.channel,g=>c(g),()=>{const g=this.members;o?g.waitSync(function(){d(g)}):d(g)})})}async history(i){m.logAction(this.logger,m.LOG_MICRO,"RealtimePresence.history()","channel = "+this.name);const o=this.channel.client.rest.presenceMixin;if(i&&i.untilAttach)if(this.channel.state==="attached")delete i.untilAttach,i.from_serial=this.channel.properties.attachSerial;else throw new N("option untilAttach requires the channel to be attached, was: "+this.channel.state,4e4,400);return o.history(this,i)}setPresence(i,o,l){m.logAction(this.logger,m.LOG_MICRO,"RealtimePresence.setPresence()","received presence for "+i.length+" participants; syncChannelSerial = "+l);let c,d;const g=this.members,R=this._myMembers,x=[],L=this.channel.connectionManager.connectionId;o&&(this.members.startSync(),l&&(d=l.match(/^[\w-]+:(.*)$/))&&(c=d[1]));for(let b=0;b<i.length;b++){const U=dn(i[b]);switch(U.action){case"leave":g.remove(U)&&x.push(U),U.connectionId===L&&!U.isSynthesized()&&R.remove(U);break;case"enter":case"present":case"update":g.put(U)&&x.push(U),U.connectionId===L&&R.put(U);break}}o&&!c&&(g.endSync(),this.channel.syncChannelSerial=null);for(let b=0;b<x.length;b++){const U=x[b];this.subscriptions.emit(U.action,U)}}onAttached(i){m.logAction(this.logger,m.LOG_MINOR,"RealtimePresence.onAttached()","channel = "+this.channel.name+", hasPresence = "+i),i?this.members.startSync():(this._synthesizeLeaves(this.members.values()),this.members.clear()),this._ensureMyMembersPresent();const o=this.pendingPresence,l=o.length;if(l){this.pendingPresence=[];const c=[],d=G.create(this.logger);m.logAction(this.logger,m.LOG_MICRO,"RealtimePresence.onAttached","sending "+l+" queued presence messages");for(let g=0;g<l;g++){const R=o[g];c.push(R.presence),d.push(R.callback)}this.channel.sendPresence(c,d)}}actOnChannelState(i,o,l){switch(i){case"attached":this.onAttached(o);break;case"detached":case"failed":this._clearMyMembers(),this.members.clear();case"suspended":this.failPendingPresence(l);break}}failPendingPresence(i){if(this.pendingPresence.length){m.logAction(this.logger,m.LOG_MINOR,"RealtimeChannel.failPendingPresence","channel; name = "+this.channel.name+", err = "+Me(i));for(let o=0;o<this.pendingPresence.length;o++)try{this.pendingPresence[o].callback(i)}catch{}this.pendingPresence=[]}}_clearMyMembers(){this._myMembers.clear()}_ensureMyMembersPresent(){const i=this._myMembers,o=l=>{if(l){const c="Presence auto-re-enter failed: "+l.toString(),d=new N(c,91004,400);m.logAction(this.logger,m.LOG_ERROR,"RealtimePresence._ensureMyMembersPresent()",c);const g=new _c(this.channel.state,this.channel.state,!0,!1,d);this.channel.emit("update",g)}};for(const l in i.map){const c=i.map[l];m.logAction(this.logger,m.LOG_MICRO,"RealtimePresence._ensureMyMembersPresent()",'Auto-reentering clientId "'+c.clientId+'" into the presence set'),nt(this._enterOrUpdateClient(c.id,c.clientId,c.data,"enter"),o)}}_synthesizeLeaves(i){const o=this.subscriptions;i.forEach(function(l){const c=dn({action:"leave",connectionId:l.connectionId,clientId:l.clientId,data:l.data,encoding:l.encoding,timestamp:Date.now()});o.emit("leave",c)})}async subscribe(...i){const o=xc.processListenerArgs(i),l=o[0],c=o[1],d=this.channel;if(d.state==="failed")throw N.fromValues(d.invalidStateError());this.subscriptions.on(l,c),await d.attach()}unsubscribe(...i){const o=xc.processListenerArgs(i),l=o[0],c=o[1];this.subscriptions.off(l,c)}},_m=class extends ht{constructor(i,o){super(i.logger),this.presence=i,this.map=Object.create(null),this.syncInProgress=!1,this.residualMembers=null,this.memberKey=o}get(i){return this.map[i]}getClient(i){const o=this.map,l=[];for(const c in o){const d=o[c];d.clientId==i&&d.action!="absent"&&l.push(d)}return l}list(i){const o=this.map,l=i&&i.clientId,c=i&&i.connectionId,d=[];for(const g in o){const R=o[g];R.action!=="absent"&&(l&&l!=R.clientId||c&&c!=R.connectionId||d.push(R))}return d}put(i){(i.action==="enter"||i.action==="update")&&(i=dn(i),i.action="present");const o=this.map,l=this.memberKey(i);this.residualMembers&&delete this.residualMembers[l];const c=o[l];return c&&!Am(i,c)?!1:(o[l]=i,!0)}values(){const i=this.map,o=[];for(const l in i){const c=i[l];c.action!="absent"&&o.push(c)}return o}remove(i){const o=this.map,l=this.memberKey(i),c=o[l];return c&&!Am(i,c)?!1:(this.syncInProgress?(i=dn(i),i.action="absent",o[l]=i):delete o[l],!0)}startSync(){const i=this.map,o=this.syncInProgress;m.logAction(this.logger,m.LOG_MINOR,"PresenceMap.startSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+o),this.syncInProgress||(this.residualMembers=W(i),this.setInProgress(!0))}endSync(){const i=this.map,o=this.syncInProgress;if(m.logAction(this.logger,m.LOG_MINOR,"PresenceMap.endSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+o),o){for(const l in i)i[l].action==="absent"&&delete i[l];this.presence._synthesizeLeaves(En(this.residualMembers));for(const l in this.residualMembers)delete i[l];this.residualMembers=null,this.setInProgress(!1)}this.emit("sync")}waitSync(i){const o=this.syncInProgress;if(m.logAction(this.logger,m.LOG_MINOR,"PresenceMap.waitSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+o),!o){i();return}this.once("sync",i)}clear(){this.map={},this.setInProgress(!1),this.residualMembers=null}setInProgress(i){m.logAction(this.logger,m.LOG_MICRO,"PresenceMap.setInProgress()","inProgress = "+i),this.syncInProgress=i,this.presence.syncComplete=!i}},lR=aR,uR=Lt.WebSocket;function cR(i){return!!i.on}var hR=class extends ts{constructor(i,o,l){super(i,o,l),this.shortName=uR,l.heartbeats=T.Config.useProtocolHeartbeats,this.wsHost=l.host}static isAvailable(){return!!T.Config.WebSocket}createWebSocket(i,o){return this.uri=i+Pn(o),new T.Config.WebSocket(this.uri)}toString(){return"WebSocketTransport; uri="+this.uri}connect(){m.logAction(this.logger,m.LOG_MINOR,"WebSocketTransport.connect()","starting"),ts.prototype.connect.call(this);const i=this,o=this.params,l=o.options,d=(l.tls?"wss://":"ws://")+this.wsHost+":"+ae.getPort(l)+"/";m.logAction(this.logger,m.LOG_MINOR,"WebSocketTransport.connect()","uri: "+d),nt(this.auth.getAuthParams(),function(g,R){if(i.isDisposed)return;let x="";for(const b in R)x+=" "+b+": "+R[b]+";";if(m.logAction(i.logger,m.LOG_MINOR,"WebSocketTransport.connect()","authParams:"+x+" err: "+g),g){i.disconnect(g);return}const L=o.getConnectParams(R);try{const b=i.wsConnection=i.createWebSocket(d,L);b.binaryType=T.Config.binaryType,b.onopen=function(){i.onWsOpen()},b.onclose=function(U){i.onWsClose(U)},b.onmessage=function(U){i.onWsData(U.data)},b.onerror=function(U){i.onWsError(U)},cR(b)&&b.on("ping",function(){i.onActivity()})}catch(b){m.logAction(i.logger,m.LOG_ERROR,"WebSocketTransport.connect()","Unexpected exception creating websocket: err = "+(b.stack||b.message)),i.disconnect(b)}})}send(i){const o=this.wsConnection;if(!o){m.logAction(this.logger,m.LOG_ERROR,"WebSocketTransport.send()","No socket connection");return}try{o.send(NT(i,this.connectionManager.realtime._MsgPack,this.params.format))}catch(l){const c="Exception from ws connection when trying to send: "+Me(l);m.logAction(this.logger,m.LOG_ERROR,"WebSocketTransport.send()",c),this.finish("disconnected",new N(c,5e4,500))}}onWsData(i){m.logAction(this.logger,m.LOG_MICRO,"WebSocketTransport.onWsData()","data received; length = "+i.length+"; type = "+typeof i);try{this.onProtocolMessage(DT(i,this.connectionManager.realtime._MsgPack,this.connectionManager.realtime._RealtimePresence,this.format))}catch(o){m.logAction(this.logger,m.LOG_ERROR,"WebSocketTransport.onWsData()","Unexpected exception handing channel message: "+o.stack)}}onWsOpen(){m.logAction(this.logger,m.LOG_MINOR,"WebSocketTransport.onWsOpen()","opened WebSocket"),this.emit("preconnect")}onWsClose(i){let o,l;if(typeof i=="object"?(l=i.code,o=i.wasClean||l===1e3):(l=i,o=l==1e3),delete this.wsConnection,o){m.logAction(this.logger,m.LOG_MINOR,"WebSocketTransport.onWsClose()","Cleanly closed WebSocket");const c=new N("Websocket closed",80003,400);this.finish("disconnected",c)}else{const c="Unclean disconnection of WebSocket ; code = "+l,d=new N(c,80003,400);m.logAction(this.logger,m.LOG_MINOR,"WebSocketTransport.onWsClose()",c),this.finish("disconnected",d)}this.emit("disposed")}onWsError(i){m.logAction(this.logger,m.LOG_MINOR,"WebSocketTransport.onError()","Error from WebSocket: "+i.message),T.Config.nextTick(()=>{this.disconnect(Error(i.message))})}dispose(){m.logAction(this.logger,m.LOG_MINOR,"WebSocketTransport.dispose()",""),this.isDisposed=!0;const i=this.wsConnection;i&&(i.onmessage=function(){},delete this.wsConnection,T.Config.nextTick(()=>{if(m.logAction(this.logger,m.LOG_MICRO,"WebSocketTransport.dispose()","closing websocket"),!i)throw new Error("WebSocketTransport.dispose(): wsConnection is not defined");i.close()}))}},xm=hR,fR=class{static subscribeFilter(i,o,l){const c=d=>{var g,R,x,L,b,U;const B={name:d.name,refTimeserial:(R=(g=d.extras)==null?void 0:g.ref)==null?void 0:R.timeserial,refType:(L=(x=d.extras)==null?void 0:x.ref)==null?void 0:L.type,isRef:!!((U=(b=d.extras)==null?void 0:b.ref)!=null&&U.timeserial),clientId:d.clientId};Object.entries(o).find(([q,j])=>j!==void 0?B[q]!==j:!1)||l(d)};this.addFilteredSubscription(i,o,l,c),i.subscriptions.on(c)}static addFilteredSubscription(i,o,l,c){var d;if(i.filteredSubscriptions||(i.filteredSubscriptions=new Map),i.filteredSubscriptions.has(l)){const g=i.filteredSubscriptions.get(l);g.set(o,((d=g==null?void 0:g.get(o))==null?void 0:d.concat(c))||[c])}else i.filteredSubscriptions.set(l,new Map([[o,[c]]]))}static getAndDeleteFilteredSubscriptions(i,o,l){if(!i.filteredSubscriptions)return[];if(!l&&o)return Array.from(i.filteredSubscriptions.entries()).map(([g,R])=>{var x;let L=R.get(o);return R.delete(o),R.size===0&&((x=i.filteredSubscriptions)==null||x.delete(g)),L}).reduce((g,R)=>R?g.concat(...R):g,[]);if(!l||!i.filteredSubscriptions.has(l))return[];const c=i.filteredSubscriptions.get(l);if(!o){const g=Array.from(c.values()).reduce((R,x)=>R.concat(...x),[]);return i.filteredSubscriptions.delete(l),g}let d=c.get(o);return c.delete(o),d||[]}},Qn=class pd extends iR{constructor(o){var l;const c=pd._MsgPack;if(!c)throw new Error("Expected DefaultRealtime._MsgPack to have been set");super(ae.objectifyOptions(o,!0,"Realtime",m.defaultLogger,_(P({},fm),{Crypto:(l=pd.Crypto)!=null?l:void 0,MsgPack:c,RealtimePresence:{RealtimePresence:lR,presenceMessageFromValues:dn,presenceMessagesFromValuesArray:lm},WebSocketTransport:xm,MessageInteractions:fR})))}static get Crypto(){if(this._Crypto===null)throw new Error("Encryption not enabled; use ably.encryption.js instead");return this._Crypto}static set Crypto(o){this._Crypto=o}};Qn.Utils=_e,Qn.ConnectionManager=Tm,Qn.ProtocolMessage=vm,Qn._Crypto=null,Qn.Message=dm,Qn.PresenceMessage=pm,Qn._MsgPack=null,Qn._Http=fc;var kc=Qn,Mc=Uint8Array,To=Uint32Array,bc=Math.pow,Om=new To(8),km=[],Ro=new To(64);function Mm(i){return(i-(i|0))*bc(2,32)|0}for(var Eo=2,Po=0;Po<64;){for(Ic=!0,fl=2;fl<=Eo/2;fl++)Eo%fl===0&&(Ic=!1);Ic&&(Po<8&&(Om[Po]=Mm(bc(Eo,1/2))),km[Po]=Mm(bc(Eo,1/3)),Po++),Eo++}var Ic,fl,dR=!!new Mc(new To([1]).buffer)[0];function Lc(i){return dR?i>>>24|(i>>>16&255)<<8|(i&65280)<<8|i<<24:i}function kn(i,o){return i>>>o|i<<32-o}function Nc(i){var o=Om.slice(),l=i.length,c=l*8,d=512-(c+64)%512-1+c+65,g=new Mc(d/8),R=new To(g.buffer);g.set(i,0),g[l]=128,R[R.length-1]=Lc(c);for(var x,L=0;L<d/32;L+=16){var b=o.slice();for(x=0;x<64;x++){var U;if(x<16)U=Lc(R[L+x]);else{var B=Ro[x-15],q=Ro[x-2];U=Ro[x-7]+Ro[x-16]+(kn(B,7)^kn(B,18)^B>>>3)+(kn(q,17)^kn(q,19)^q>>>10)}Ro[x]=U|=0;for(var j=(kn(b[4],6)^kn(b[4],11)^kn(b[4],25))+(b[4]&b[5]^~b[4]&b[6])+b[7]+U+km[x],K=(kn(b[0],2)^kn(b[0],13)^kn(b[0],22))+(b[0]&b[1]^b[2]&(b[0]^b[1])),ee=7;ee>0;ee--)b[ee]=b[ee-1];b[0]=j+K|0,b[4]=b[4]+j|0}for(x=0;x<8;x++)o[x]=o[x]+b[x]|0}return new Mc(new To(o.map(function(ce){return Lc(ce)})).buffer)}function pR(i,o){if(i.length>64&&(i=Nc(i)),i.length<64){const x=new Uint8Array(64);x.set(i,0),i=x}for(var l=new Uint8Array(64),c=new Uint8Array(64),d=0;d<64;d++)l[d]=54^i[d],c[d]=92^i[d];var g=new Uint8Array(o.length+64);g.set(l,0),g.set(o,64);var R=new Uint8Array(96);return R.set(c,0),R.set(Nc(g),64),Nc(R)}var mR=class{constructor(){this.base64CharSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.hexCharSet="0123456789abcdef"}uint8ViewToBase64(i){let o="";const l=this.base64CharSet,c=i.byteLength,d=c%3,g=c-d;let R,x,L,b,U;for(let B=0;B<g;B=B+3)U=i[B]<<16|i[B+1]<<8|i[B+2],R=(U&16515072)>>18,x=(U&258048)>>12,L=(U&4032)>>6,b=U&63,o+=l[R]+l[x]+l[L]+l[b];return d==1?(U=i[g],R=(U&252)>>2,x=(U&3)<<4,o+=l[R]+l[x]+"=="):d==2&&(U=i[g]<<8|i[g+1],R=(U&64512)>>10,x=(U&1008)>>4,L=(U&15)<<2,o+=l[R]+l[x]+l[L]+"="),o}base64ToArrayBuffer(i){const o=atob==null?void 0:atob(i),l=o.length,c=new Uint8Array(l);for(let d=0;d<l;d++){const g=o.charCodeAt(d);c[d]=g}return this.toArrayBuffer(c)}isBuffer(i){return i instanceof ArrayBuffer||ArrayBuffer.isView(i)}toBuffer(i){if(!ArrayBuffer)throw new Error("Can't convert to Buffer: browser does not support the necessary types");if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(this.toArrayBuffer(i));throw new Error("BufferUtils.toBuffer expected an ArrayBuffer or a view onto one")}toArrayBuffer(i){if(!ArrayBuffer)throw new Error("Can't convert to ArrayBuffer: browser does not support the necessary types");if(i instanceof ArrayBuffer)return i;if(ArrayBuffer.isView(i))return i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength);throw new Error("BufferUtils.toArrayBuffer expected an ArrayBuffer or a view onto one")}base64Encode(i){return this.uint8ViewToBase64(this.toBuffer(i))}base64Decode(i){if(ArrayBuffer&&T.Config.atob)return this.base64ToArrayBuffer(i);throw new Error("Expected ArrayBuffer to exist and Platform.Config.atob to be configured")}hexEncode(i){return this.toBuffer(i).reduce((l,c)=>l+c.toString(16).padStart(2,"0"),"")}hexDecode(i){if(i.length%2!==0)throw new Error("Can't create a byte array from a hex string of odd length");const o=new Uint8Array(i.length/2);for(let l=0;l<o.length;l++)o[l]=parseInt(i.slice(2*l,2*(l+1)),16);return this.toArrayBuffer(o)}utf8Encode(i){if(T.Config.TextEncoder){const o=new T.Config.TextEncoder().encode(i);return this.toArrayBuffer(o)}else throw new Error("Expected TextEncoder to be configured")}utf8Decode(i){if(!this.isBuffer(i))throw new Error("Expected input of utf8decode to be an arraybuffer or typed array");if(TextDecoder)return new TextDecoder().decode(i);throw new Error("Expected TextDecoder to be configured")}areBuffersEqual(i,o){if(!i||!o)return!1;const l=this.toArrayBuffer(i),c=this.toArrayBuffer(o);if(l.byteLength!=c.byteLength)return!1;const d=new Uint8Array(l),g=new Uint8Array(c);for(var R=0;R<d.length;R++)if(d[R]!=g[R])return!1;return!0}byteLength(i){return i instanceof ArrayBuffer||ArrayBuffer.isView(i)?i.byteLength:-1}arrayBufferViewToBuffer(i){return this.toArrayBuffer(i)}hmacSha256(i,o){const l=pR(this.toBuffer(o),this.toBuffer(i));return this.toArrayBuffer(l)}},bm=new mR,gR=function(i,o){var l="aes",c=256,d="cbc",g=16;function R(q){if(q.algorithm==="aes"&&q.mode==="cbc"){if(q.keyLength===128||q.keyLength===256)return;throw new Error("Unsupported key length "+q.keyLength+" for aes-cbc encryption. Encryption key must be 128 or 256 bits (16 or 32 ASCII characters)")}}function x(q){return q.replace("_","/").replace("-","+")}function L(q){return q instanceof b}class b{constructor(j,K,ee,ce){this.algorithm=j,this.keyLength=K,this.mode=ee,this.key=ce}}class U{static getDefaultParams(j){var K;if(!j.key)throw new Error("Crypto.getDefaultParams: a key is required");typeof j.key=="string"?K=o.toArrayBuffer(o.base64Decode(x(j.key))):j.key instanceof ArrayBuffer?K=j.key:K=o.toArrayBuffer(j.key);var ee=j.algorithm||l,ce=K.byteLength*8,Ae=j.mode||d,xe=new b(ee,ce,Ae,K);if(j.keyLength&&j.keyLength!==xe.keyLength)throw new Error("Crypto.getDefaultParams: a keyLength of "+j.keyLength+" was specified, but the key actually has length "+xe.keyLength);return R(xe),xe}static async generateRandomKey(j){try{return i.getRandomArrayBuffer((j||c)/8)}catch(K){throw new N("Failed to generate random key: "+K.message,400,5e4,K)}}static getCipher(j,K){var ee,ce=L(j)?j:this.getDefaultParams(j);return{cipherParams:ce,cipher:new B(ce,(ee=j.iv)!=null?ee:null,K)}}}U.CipherParams=b;class B{constructor(j,K,ee){if(this.logger=ee,!crypto.subtle)throw isSecureContext?new Error("Crypto operations are not possible since the browser’s SubtleCrypto class is unavailable (reason unknown)."):new Error("Crypto operations are is not possible since the current environment is a non-secure context and hence the browser’s SubtleCrypto class is not available.");this.algorithm=j.algorithm+"-"+String(j.keyLength)+"-"+j.mode,this.webCryptoAlgorithm=j.algorithm+"-"+j.mode,this.key=o.toArrayBuffer(j.key),this.iv=K?o.toArrayBuffer(K):null}concat(j,K){const ee=new ArrayBuffer(j.byteLength+K.byteLength),ce=new DataView(ee),Ae=new DataView(o.toArrayBuffer(j));for(let De=0;De<Ae.byteLength;De++)ce.setInt8(De,Ae.getInt8(De));const xe=new DataView(o.toArrayBuffer(K));for(let De=0;De<xe.byteLength;De++)ce.setInt8(Ae.byteLength+De,xe.getInt8(De));return ee}async encrypt(j){m.logAction(this.logger,m.LOG_MICRO,"CBCCipher.encrypt()","");const K=await this.getIv(),ee=await crypto.subtle.importKey("raw",this.key,this.webCryptoAlgorithm,!1,["encrypt"]),ce=await crypto.subtle.encrypt({name:this.webCryptoAlgorithm,iv:K},ee,j);return this.concat(K,ce)}async decrypt(j){m.logAction(this.logger,m.LOG_MICRO,"CBCCipher.decrypt()","");const K=o.toArrayBuffer(j),ee=K.slice(0,g),ce=K.slice(g),Ae=await crypto.subtle.importKey("raw",this.key,this.webCryptoAlgorithm,!1,["decrypt"]);return crypto.subtle.decrypt({name:this.webCryptoAlgorithm,iv:ee},Ae,ce)}async getIv(){if(this.iv){var j=this.iv;return this.iv=null,j}const K=await i.getRandomArrayBuffer(g);return o.toArrayBuffer(K)}}return U},Im=(i=>(i[i.REQ_SEND=0]="REQ_SEND",i[i.REQ_RECV=1]="REQ_RECV",i[i.REQ_RECV_POLL=2]="REQ_RECV_POLL",i[i.REQ_RECV_STREAM=3]="REQ_RECV_STREAM",i))(Im||{}),Xn=Im;function Lm(){return new N("No HTTP request plugin provided. Provide at least one of the FetchRequest or XHRRequest plugins.",400,4e4)}var Ao,Nm=(Ao=class{constructor(i){this.checksInProgress=null,this.checkConnectivity=void 0,this.supportsAuthHeaders=!1,this.supportsLinkHeaders=!1;var o;this.client=i??null;const l=(i==null?void 0:i.options.connectivityCheckUrl)||ae.connectivityCheckUrl,c=(o=i==null?void 0:i.options.connectivityCheckParams)!=null?o:null,d=!(i!=null&&i.options.connectivityCheckUrl),g=P(P({},Nm.bundledRequestImplementations),i==null?void 0:i._additionalHTTPRequestImplementations),R=g.XHRRequest,x=g.FetchRequest,L=!!(R||x);if(!L)throw Lm();T.Config.xhrSupported&&R?(this.supportsAuthHeaders=!0,this.Request=async function(b,U,B,q,j){return new Promise(K=>{var ee;const ce=R.createRequest(U,B,q,j,Xn.REQ_SEND,(ee=i&&i.options.timeouts)!=null?ee:null,this.logger,b);ce.once("complete",(Ae,xe,De,fe,Gt)=>K({error:Ae,body:xe,headers:De,unpacked:fe,statusCode:Gt})),ce.exec()})},i!=null&&i.options.disableConnectivityCheck?this.checkConnectivity=async function(){return!0}:this.checkConnectivity=async function(){var b;m.logAction(this.logger,m.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Sending; "+l);const U=await this.doUri(le.Get,l,null,null,c);let B=!1;return d?B=!U.error&&((b=U.body)==null?void 0:b.replace(/\n/,""))=="yes":B=!U.error&&Xe(U.statusCode),m.logAction(this.logger,m.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Result: "+B),B}):T.Config.fetchSupported&&x?(this.supportsAuthHeaders=!0,this.Request=async(b,U,B,q,j)=>x(b,i??null,U,B,q,j),this.checkConnectivity=async function(){var b;m.logAction(this.logger,m.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Sending; "+l);const U=await this.doUri(le.Get,l,null,null,null),B=!U.error&&((b=U.body)==null?void 0:b.replace(/\n/,""))=="yes";return m.logAction(this.logger,m.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Result: "+B),B}):this.Request=async()=>({error:L?new ue("no supported HTTP transports available",null,400):Lm()})}get logger(){var i,o;return(o=(i=this.client)==null?void 0:i.logger)!=null?o:m.defaultLogger}async doUri(i,o,l,c,d){return this.Request?this.Request(i,o,l,d,c):{error:new ue("Request invoked before assigned to",null,500)}}shouldFallback(i){const o=i.statusCode;return o===408&&!i.code||o===400&&!i.code||o>=500&&o<=504}},Ao.methods=[le.Get,le.Delete,le.Post,le.Put,le.Patch],Ao.methodsWithoutBody=[le.Get,le.Delete],Ao.methodsWithBody=[le.Post,le.Put,le.Patch],Ao),Dm=Nm,ns="ablyjs-storage-test",rs=typeof Yn<"u"?Yn:typeof window<"u"?window:self,yR=class{constructor(){try{rs.sessionStorage.setItem(ns,ns),rs.sessionStorage.removeItem(ns),this.sessionSupported=!0}catch{this.sessionSupported=!1}try{rs.localStorage.setItem(ns,ns),rs.localStorage.removeItem(ns),this.localSupported=!0}catch{this.localSupported=!1}}get(i){return this._get(i,!1)}getSession(i){return this._get(i,!0)}remove(i){return this._remove(i,!1)}removeSession(i){return this._remove(i,!0)}set(i,o,l){return this._set(i,o,l,!1)}setSession(i,o,l){return this._set(i,o,l,!0)}_set(i,o,l,c){const d={value:o};return l&&(d.expires=Date.now()+l),this.storageInterface(c).setItem(i,JSON.stringify(d))}_get(i,o){if(o&&!this.sessionSupported)throw new Error("Session Storage not supported");if(!o&&!this.localSupported)throw new Error("Local Storage not supported");const l=this.storageInterface(o).getItem(i);if(!l)return null;const c=JSON.parse(l);return c.expires&&c.expires<Date.now()?(this.storageInterface(o).removeItem(i),null):c.value}_remove(i,o){return this.storageInterface(o).removeItem(i)}storageInterface(i){return i?rs.sessionStorage:rs.localStorage}},Um=new yR,Ge=ui(),vR=typeof EdgeRuntime=="string";typeof Window>"u"&&typeof WorkerGlobalScope>"u"&&!vR&&console.log("Warning: this distribution of Ably is intended for browsers. On nodejs, please use the 'ably' package on npm");function wR(){const i=Ge.location;return!Ge.WebSocket||!i||!i.origin||i.origin.indexOf("http")>-1}function SR(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}var CR=Ge.navigator&&Ge.navigator.userAgent.toString(),TR=Ge.location&&Ge.location.href,RR={agent:"browser",logTimestamps:!0,userAgent:CR,currentUrl:TR,binaryType:"arraybuffer",WebSocket:Ge.WebSocket,fetchSupported:!!Ge.fetch,xhrSupported:Ge.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,allowComet:wR(),useProtocolHeartbeats:!0,supportsBinary:!!Ge.TextDecoder,preferBinary:!1,ArrayBuffer:Ge.ArrayBuffer,atob:Ge.atob,nextTick:typeof Ge.setImmediate<"u"?Ge.setImmediate.bind(Ge):function(i){setTimeout(i,0)},addEventListener:Ge.addEventListener,inspect:JSON.stringify,stringByteSize:function(i){return Ge.TextDecoder&&new Ge.TextEncoder().encode(i).length||i.length},TextEncoder:Ge.TextEncoder,TextDecoder:Ge.TextDecoder,getRandomArrayBuffer:async function(i){const o=new Uint8Array(i);return Ge.crypto.getRandomValues(o),o.buffer},isWebworker:SR(),push:{platform:"browser",formFactor:"desktop",storage:Um}},Fm=RR;function ER(i){const o=[80015,80017,80030];return i.code?$n.isTokenErr(i)?!1:o.includes(i.code)?!0:i.code>=4e4&&i.code<5e4:!1}function Dc(i){return ER(i)?[On({action:pe.ERROR,error:i})]:[On({action:pe.DISCONNECTED,error:i})]}var PR=class extends ts{constructor(i,o,l){super(i,o,l,!0),this.onAuthUpdated=c=>{this.authParams={access_token:c.token}},this.stream="stream"in l?l.stream:!0,this.sendRequest=null,this.recvRequest=null,this.pendingCallback=null,this.pendingItems=null}connect(){m.logAction(this.logger,m.LOG_MINOR,"CometTransport.connect()","starting"),ts.prototype.connect.call(this);const i=this.params,o=i.options,l=ae.getHost(o,i.host),c=ae.getPort(o),d=o.tls?"https://":"http://";this.baseUri=d+l+":"+c+"/comet/";const g=this.baseUri+"connect";m.logAction(this.logger,m.LOG_MINOR,"CometTransport.connect()","uri: "+g),nt(this.auth.getAuthParams(),(R,x)=>{if(R){this.disconnect(R);return}if(this.isDisposed)return;this.authParams=x;const L=this.params.getConnectParams(x);"stream"in L&&(this.stream=L.stream),m.logAction(this.logger,m.LOG_MINOR,"CometTransport.connect()","connectParams:"+Pn(L));let b=!1;const U=this.recvRequest=this.createRequest(g,null,L,null,this.stream?Xn.REQ_RECV_STREAM:Xn.REQ_RECV);U.on("data",B=>{this.recvRequest&&(b||(b=!0,this.emit("preconnect")),this.onData(B))}),U.on("complete",B=>{if(this.recvRequest||(B=B||new N("Request cancelled",80003,400)),this.recvRequest=null,!b&&!B&&(b=!0,this.emit("preconnect")),this.onActivity(),B){B.code?this.onData(Dc(B)):this.disconnect(B);return}T.Config.nextTick(()=>{this.recv()})}),U.exec()})}requestClose(){m.logAction(this.logger,m.LOG_MINOR,"CometTransport.requestClose()"),this._requestCloseOrDisconnect(!0)}requestDisconnect(){m.logAction(this.logger,m.LOG_MINOR,"CometTransport.requestDisconnect()"),this._requestCloseOrDisconnect(!1)}_requestCloseOrDisconnect(i){const o=i?this.closeUri:this.disconnectUri;if(o){const l=this.createRequest(o,null,this.authParams,null,Xn.REQ_SEND);l.on("complete",c=>{c&&(m.logAction(this.logger,m.LOG_ERROR,"CometTransport.request"+(i?"Close()":"Disconnect()"),"request returned err = "+Me(c)),this.finish("disconnected",c))}),l.exec()}}dispose(){m.logAction(this.logger,m.LOG_MINOR,"CometTransport.dispose()",""),this.isDisposed||(this.isDisposed=!0,this.recvRequest&&(m.logAction(this.logger,m.LOG_MINOR,"CometTransport.dispose()","aborting recv request"),this.recvRequest.abort(),this.recvRequest=null),this.finish("disconnected",Er.disconnected()),T.Config.nextTick(()=>{this.emit("disposed")}))}onConnect(i){var o;if(this.isDisposed)return;const l=(o=i.connectionDetails)==null?void 0:o.connectionKey;ts.prototype.onConnect.call(this,i);const c=this.baseUri+l;m.logAction(this.logger,m.LOG_MICRO,"CometTransport.onConnect()","baseUri = "+c),this.sendUri=c+"/send",this.recvUri=c+"/recv",this.closeUri=c+"/close",this.disconnectUri=c+"/disconnect"}send(i){if(this.sendRequest){this.pendingItems=this.pendingItems||[],this.pendingItems.push(i);return}const o=this.pendingItems||[];o.push(i),this.pendingItems=null,this.sendItems(o)}sendAnyPending(){const i=this.pendingItems;i&&(this.pendingItems=null,this.sendItems(i))}sendItems(i){const o=this.sendRequest=this.createRequest(this.sendUri,null,this.authParams,this.encodeRequest(i),Xn.REQ_SEND);o.on("complete",(l,c)=>{if(l&&m.logAction(this.logger,m.LOG_ERROR,"CometTransport.sendItems()","on complete: err = "+Me(l)),this.sendRequest=null,l){l.code?this.onData(Dc(l)):this.disconnect(l);return}c&&this.onData(c),this.pendingItems&&T.Config.nextTick(()=>{this.sendRequest||this.sendAnyPending()})}),o.exec()}recv(){if(this.recvRequest||!this.isConnected)return;const i=this.recvRequest=this.createRequest(this.recvUri,null,this.authParams,null,this.stream?Xn.REQ_RECV_STREAM:Xn.REQ_RECV_POLL);i.on("data",o=>{this.onData(o)}),i.on("complete",o=>{if(this.recvRequest=null,this.onActivity(),o){o.code?this.onData(Dc(o)):this.disconnect(o);return}T.Config.nextTick(()=>{this.recv()})}),i.exec()}onData(i){try{const o=this.decodeResponse(i);if(o&&o.length)for(let l=0;l<o.length;l++)this.onProtocolMessage(Cc(o[l],this.connectionManager.realtime._RealtimePresence))}catch(o){m.logAction(this.logger,m.LOG_ERROR,"CometTransport.onData()","Unexpected exception handing channel event: "+o.stack)}}encodeRequest(i){return JSON.stringify(i)}decodeResponse(i){return typeof i=="string"?JSON.parse(i):i}},AR=PR;function _R(i,o){return $i(Gn(o)).includes("x-ably-errorcode")}function xR(i,o){if(_R(i,o))return i.error&&N.fromValues(i.error)}var OR=function(){},kR=0,Bm={};function MR(i,o){return i.getResponseHeader&&i.getResponseHeader(o)}function bR(i){return i.getResponseHeader&&(i.getResponseHeader("transfer-encoding")||!i.getResponseHeader("content-length"))}function IR(i){const o=i.getAllResponseHeaders().trim().split(`\r
`),l={};for(let c=0;c<o.length;c++){const d=o[c].split(":").map(g=>g.trim());l[d[0].toLowerCase()]=d[1]}return l}var LR=class z1 extends ht{constructor(o,l,c,d,g,R,x,L){super(x),c=c||{},c.rnd=An(),this.uri=o+Pn(c),this.headers=l||{},this.body=d,this.method=L?L.toUpperCase():re(d)?"GET":"POST",this.requestMode=g,this.timeouts=R,this.timedOut=!1,this.requestComplete=!1,this.id=String(++kR),Bm[this.id]=this}static createRequest(o,l,c,d,g,R,x,L){const b=R||ae.TIMEOUTS;return new z1(o,l,W(c),d,g,b,x,L)}complete(o,l,c,d,g){this.requestComplete||(this.requestComplete=!0,!o&&l&&this.emit("data",l),this.emit("complete",o,l,c,d,g),this.dispose())}abort(){this.dispose()}exec(){let o=this.headers;const l=this.requestMode==Xn.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout,c=this.timer=setTimeout(()=>{this.timedOut=!0,g.abort()},l),d=this.method,g=this.xhr=new XMLHttpRequest,R=o.accept;let x=this.body,L="text";R?R.indexOf("application/x-msgpack")===0&&(L="arraybuffer"):o.accept="application/json",x&&(o["content-type"]||(o["content-type"]="application/json")).indexOf("application/json")>-1&&typeof x!="string"&&(x=JSON.stringify(x)),g.open(d,this.uri,!0),g.responseType=L,"authorization"in o&&(g.withCredentials=!0);for(const fe in o)g.setRequestHeader(fe,o[fe]);const b=(fe,Gt,ft,ko)=>{var is;let Vc=Gt+" (event type: "+fe.type+")";(is=this==null?void 0:this.xhr)!=null&&is.statusText&&(Vc+=", current statusText is "+this.xhr.statusText),m.logAction(this.logger,m.LOG_ERROR,"Request.on"+fe.type+"()",Vc),this.complete(new ue(Vc,ft,ko))};g.onerror=function(fe){b(fe,"XHR error occurred",null,400)},g.onabort=fe=>{this.timedOut?b(fe,"Request aborted due to request timeout expiring",null,408):b(fe,"Request cancelled",null,400)},g.ontimeout=function(fe){b(fe,"Request timed out",null,408)};let U,B,q,j=0,K=!1;const ee=()=>{if(clearTimeout(c),q=B<400,B==204){this.complete(null,null,null,null,B);return}U=this.requestMode==Xn.REQ_RECV_STREAM&&q&&bR(g)},ce=()=>{let fe;try{const ft=MR(g,"content-type");if(ft?ft.indexOf("application/json")>=0:g.responseType=="text"){const is=g.responseType==="arraybuffer"?T.BufferUtils.utf8Decode(g.response):String(g.responseText);is.length?fe=JSON.parse(is):fe=is,K=!0}else fe=g.response;fe.response!==void 0?(B=fe.statusCode,q=B<400,o=fe.headers,fe=fe.response):o=IR(g)}catch(ft){this.complete(new ue("Malformed response body from server: "+ft.message,null,400));return}if(q||Array.isArray(fe)){this.complete(null,fe,o,K,B);return}let Gt=xR(fe,o);Gt||(Gt=new ue("Error response received from server: "+B+" body was: "+T.Config.inspect(fe),null,B)),this.complete(Gt,fe,o,K,B)};function Ae(){const fe=g.responseText,Gt=fe.length-1;let ft,ko;for(;j<Gt&&(ft=fe.indexOf(`
`,j))>-1;)ko=fe.slice(j,ft),j=ft+1,xe(ko)}const xe=fe=>{try{fe=JSON.parse(fe)}catch(Gt){this.complete(new ue("Malformed response body from server: "+Gt.message,null,400));return}this.emit("data",fe)},De=()=>{Ae(),this.streamComplete=!0,T.Config.nextTick(()=>{this.complete()})};g.onreadystatechange=function(){const fe=g.readyState;fe<3||g.status!==0&&(B===void 0&&(B=g.status,ee()),fe==3&&U?Ae():fe==4&&(U?De():ce()))},g.send(x)}dispose(){const o=this.xhr;if(o){o.onreadystatechange=o.onerror=o.onabort=o.ontimeout=OR,this.xhr=null;const l=this.timer;l&&(clearTimeout(l),this.timer=null),this.requestComplete||o.abort()}delete Bm[this.id]}},Vm=LR,jm=Lt.XhrPolling,NR=class extends AR{constructor(i,o,l){super(i,o,l),this.shortName=jm,l.stream=!1,this.shortName=jm}static isAvailable(){return!!(T.Config.xhrSupported&&T.Config.allowComet)}toString(){return"XHRPollingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected}createRequest(i,o,l,c,d){return Vm.createRequest(i,o,l,c,d,this.timeouts,this.logger)}},DR=NR,UR=["xhr_polling"],FR={order:UR,bundledImplementations:{web_socket:xm,xhr_polling:DR}},BR=FR,VR={connectivityCheckUrl:"https://internet-up.ably-realtime.com/is-the-internet-up.txt",wsConnectivityUrl:"wss://ws-up.ably-realtime.com",defaultTransports:[Lt.XhrPolling,Lt.WebSocket]},jR=VR;function zR(i){if(i===void 0)return"undefined";let o,l;if(i instanceof ArrayBuffer?(l="ArrayBuffer",o=new DataView(i)):i instanceof DataView&&(l="DataView",o=i),!o)return JSON.stringify(i);const c=[];for(let d=0;d<i.byteLength;d++){if(d>20){c.push("...");break}let g=o.getUint8(d).toString(16);g.length===1&&(g="0"+g),c.push(g)}return"<"+l+" "+c.join(" ")+">"}function _o(i,o,l){for(let c=0,d=l.length;c<d;c++){const g=l.charCodeAt(c);if(g<128){i.setUint8(o++,g>>>0&127|0);continue}if(g<2048){i.setUint8(o++,g>>>6&31|192),i.setUint8(o++,g>>>0&63|128);continue}if(g<65536){i.setUint8(o++,g>>>12&15|224),i.setUint8(o++,g>>>6&63|128),i.setUint8(o++,g>>>0&63|128);continue}if(g<1114112){i.setUint8(o++,g>>>18&7|240),i.setUint8(o++,g>>>12&63|128),i.setUint8(o++,g>>>6&63|128),i.setUint8(o++,g>>>0&63|128);continue}throw new Error("bad codepoint "+g)}}function zm(i,o,l){let c="";for(let d=o,g=o+l;d<g;d++){const R=i.getUint8(d);if(!(R&128)){c+=String.fromCharCode(R);continue}if((R&224)===192){c+=String.fromCharCode((R&15)<<6|i.getUint8(++d)&63);continue}if((R&240)===224){c+=String.fromCharCode((R&15)<<12|(i.getUint8(++d)&63)<<6|(i.getUint8(++d)&63)<<0);continue}if((R&248)===240){c+=String.fromCharCode((R&7)<<18|(i.getUint8(++d)&63)<<12|(i.getUint8(++d)&63)<<6|(i.getUint8(++d)&63)<<0);continue}throw new Error("Invalid byte "+R.toString(16))}return c}function Uc(i){let o=0;for(let l=0,c=i.length;l<c;l++){const d=i.charCodeAt(l);if(d<128){o+=1;continue}if(d<2048){o+=2;continue}if(d<65536){o+=3;continue}if(d<1114112){o+=4;continue}throw new Error("bad codepoint "+d)}return o}function GR(i,o){const l=Oo(i,o);if(l===0)return;const c=new ArrayBuffer(l),d=new DataView(c);return xo(i,d,0,o),c}var Fc=65536*65536,Gm=1/Fc;function HR(i,o){return o=o||0,i.getInt32(o)*Fc+i.getUint32(o+4)}function WR(i,o){return o=o||0,i.getUint32(o)*Fc+i.getUint32(o+4)}function qR(i,o,l){l<9223372036854776e3?(i.setInt32(o,Math.floor(l*Gm)),i.setInt32(o+4,l&-1)):(i.setUint32(o,2147483647),i.setUint32(o+4,2147483647))}function $R(i,o,l){l<18446744073709552e3?(i.setUint32(o,Math.floor(l*Gm)),i.setInt32(o+4,l&-1)):(i.setUint32(o,4294967295),i.setUint32(o+4,4294967295))}var KR=class{constructor(i,o){this.map=l=>{const c={};for(let d=0;d<l;d++){const g=this.parse();c[g]=this.parse()}return c},this.bin=l=>{const c=new ArrayBuffer(l);return new Uint8Array(c).set(new Uint8Array(this.view.buffer,this.offset,l),0),this.offset+=l,c},this.buf=this.bin,this.str=l=>{const c=zm(this.view,this.offset,l);return this.offset+=l,c},this.array=l=>{const c=new Array(l);for(let d=0;d<l;d++)c[d]=this.parse();return c},this.ext=l=>(this.offset+=l,{type:this.view.getInt8(this.offset),data:this.buf(l)}),this.parse=()=>{const l=this.view.getUint8(this.offset);let c,d;if(!(l&128))return this.offset++,l;if((l&240)===128)return d=l&15,this.offset++,this.map(d);if((l&240)===144)return d=l&15,this.offset++,this.array(d);if((l&224)===160)return d=l&31,this.offset++,this.str(d);if((l&224)===224)return c=this.view.getInt8(this.offset),this.offset++,c;switch(l){case 192:return this.offset++,null;case 193:this.offset++;return;case 194:return this.offset++,!1;case 195:return this.offset++,!0;case 196:return d=this.view.getUint8(this.offset+1),this.offset+=2,this.bin(d);case 197:return d=this.view.getUint16(this.offset+1),this.offset+=3,this.bin(d);case 198:return d=this.view.getUint32(this.offset+1),this.offset+=5,this.bin(d);case 199:return d=this.view.getUint8(this.offset+1),this.offset+=2,this.ext(d);case 200:return d=this.view.getUint16(this.offset+1),this.offset+=3,this.ext(d);case 201:return d=this.view.getUint32(this.offset+1),this.offset+=5,this.ext(d);case 202:return c=this.view.getFloat32(this.offset+1),this.offset+=5,c;case 203:return c=this.view.getFloat64(this.offset+1),this.offset+=9,c;case 204:return c=this.view.getUint8(this.offset+1),this.offset+=2,c;case 205:return c=this.view.getUint16(this.offset+1),this.offset+=3,c;case 206:return c=this.view.getUint32(this.offset+1),this.offset+=5,c;case 207:return c=WR(this.view,this.offset+1),this.offset+=9,c;case 208:return c=this.view.getInt8(this.offset+1),this.offset+=2,c;case 209:return c=this.view.getInt16(this.offset+1),this.offset+=3,c;case 210:return c=this.view.getInt32(this.offset+1),this.offset+=5,c;case 211:return c=HR(this.view,this.offset+1),this.offset+=9,c;case 212:return d=1,this.offset++,this.ext(d);case 213:return d=2,this.offset++,this.ext(d);case 214:return d=4,this.offset++,this.ext(d);case 215:return d=8,this.offset++,this.ext(d);case 216:return d=16,this.offset++,this.ext(d);case 217:return d=this.view.getUint8(this.offset+1),this.offset+=2,this.str(d);case 218:return d=this.view.getUint16(this.offset+1),this.offset+=3,this.str(d);case 219:return d=this.view.getUint32(this.offset+1),this.offset+=5,this.str(d);case 220:return d=this.view.getUint16(this.offset+1),this.offset+=3,this.array(d);case 221:return d=this.view.getUint32(this.offset+1),this.offset+=5,this.array(d);case 222:return d=this.view.getUint16(this.offset+1),this.offset+=3,this.map(d);case 223:return d=this.view.getUint32(this.offset+1),this.offset+=5,this.map(d)}throw new Error("Unknown type 0x"+l.toString(16))},this.offset=o||0,this.view=i}};function QR(i){const o=new DataView(i),l=new KR(o),c=l.parse();if(l.offset!==i.byteLength)throw new Error(i.byteLength-l.offset+" trailing bytes");return c}function Hm(i,o){return Object.keys(i).filter(function(l){const c=i[l],d=typeof c;return(!o||c!=null)&&(d!=="function"||!!c.toJSON)})}function xo(i,o,l,c){const d=typeof i;if(typeof i=="string"){const g=Uc(i);if(g<32)return o.setUint8(l,g|160),_o(o,l+1,i),1+g;if(g<256)return o.setUint8(l,217),o.setUint8(l+1,g),_o(o,l+2,i),2+g;if(g<65536)return o.setUint8(l,218),o.setUint16(l+1,g),_o(o,l+3,i),3+g;if(g<4294967296)return o.setUint8(l,219),o.setUint32(l+1,g),_o(o,l+5,i),5+g}if(ArrayBuffer.isView&&ArrayBuffer.isView(i)&&(i=i.buffer),i instanceof ArrayBuffer){const g=i.byteLength;if(g<256)return o.setUint8(l,196),o.setUint8(l+1,g),new Uint8Array(o.buffer).set(new Uint8Array(i),l+2),2+g;if(g<65536)return o.setUint8(l,197),o.setUint16(l+1,g),new Uint8Array(o.buffer).set(new Uint8Array(i),l+3),3+g;if(g<4294967296)return o.setUint8(l,198),o.setUint32(l+1,g),new Uint8Array(o.buffer).set(new Uint8Array(i),l+5),5+g}if(typeof i=="number"){if(Math.floor(i)!==i)return o.setUint8(l,203),o.setFloat64(l+1,i),9;if(i>=0){if(i<128)return o.setUint8(l,i),1;if(i<256)return o.setUint8(l,204),o.setUint8(l+1,i),2;if(i<65536)return o.setUint8(l,205),o.setUint16(l+1,i),3;if(i<4294967296)return o.setUint8(l,206),o.setUint32(l+1,i),5;if(i<18446744073709552e3)return o.setUint8(l,207),$R(o,l+1,i),9;throw new Error("Number too big 0x"+i.toString(16))}if(i>=-32)return o.setInt8(l,i),1;if(i>=-128)return o.setUint8(l,208),o.setInt8(l+1,i),2;if(i>=-32768)return o.setUint8(l,209),o.setInt16(l+1,i),3;if(i>=-2147483648)return o.setUint8(l,210),o.setInt32(l+1,i),5;if(i>=-9223372036854776e3)return o.setUint8(l,211),qR(o,l+1,i),9;throw new Error("Number too small -0x"+(-i).toString(16).substr(1))}if(d==="undefined")return c?0:(o.setUint8(l,212),o.setUint8(l+1,0),o.setUint8(l+2,0),3);if(i===null)return c?0:(o.setUint8(l,192),1);if(d==="boolean")return o.setUint8(l,i?195:194),1;if(typeof i.toJSON=="function")return xo(i.toJSON(),o,l,c);if(d==="object"){let g,R=0,x;const L=Array.isArray(i);if(L?g=i.length:(x=Hm(i,c),g=x.length),g<16?(o.setUint8(l,g|(L?144:128)),R=1):g<65536?(o.setUint8(l,L?220:222),o.setUint16(l+1,g),R=3):g<4294967296&&(o.setUint8(l,L?221:223),o.setUint32(l+1,g),R=5),L)for(let b=0;b<g;b++)R+=xo(i[b],o,l+R,c);else if(x)for(let b=0;b<g;b++){const U=x[b];R+=xo(U,o,l+R),R+=xo(i[U],o,l+R,c)}return R}if(d==="function")return 0;throw new Error("Unknown type "+d)}function Oo(i,o){const l=typeof i;if(l==="string"){const c=Uc(i);if(c<32)return 1+c;if(c<256)return 2+c;if(c<65536)return 3+c;if(c<4294967296)return 5+c}if(ArrayBuffer.isView&&ArrayBuffer.isView(i)&&(i=i.buffer),i instanceof ArrayBuffer){const c=i.byteLength;if(c<256)return 2+c;if(c<65536)return 3+c;if(c<4294967296)return 5+c}if(typeof i=="number"){if(Math.floor(i)!==i)return 9;if(i>=0){if(i<128)return 1;if(i<256)return 2;if(i<65536)return 3;if(i<4294967296)return 5;if(i<18446744073709552e3)return 9;throw new Error("Number too big 0x"+i.toString(16))}if(i>=-32)return 1;if(i>=-128)return 2;if(i>=-32768)return 3;if(i>=-2147483648)return 5;if(i>=-9223372036854776e3)return 9;throw new Error("Number too small -0x"+i.toString(16).substr(1))}if(l==="boolean")return 1;if(i===null)return o?0:1;if(i===void 0)return o?0:3;if(typeof i.toJSON=="function")return Oo(i.toJSON(),o);if(l==="object"){let c,d=0;if(Array.isArray(i)){c=i.length;for(let g=0;g<c;g++)d+=Oo(i[g],o)}else{const g=Hm(i,o);c=g.length;for(let R=0;R<c;R++){const x=g[R];d+=Oo(x)+Oo(i[x],o)}}if(c<16)return 1+d;if(c<65536)return 3+d;if(c<4294967296)return 5+d;throw new Error("Array or object too long 0x"+c.toString(16))}if(l==="function")return 0;throw new Error("Unknown type "+l)}var Bc={encode:GR,decode:QR,inspect:zR,utf8Write:_o,utf8Read:zm,utf8ByteCount:Uc};function XR(i,o){return!!o.get("x-ably-errorcode")}function YR(i,o){if(XR(i,o))return i.error&&N.fromValues(i.error)}function JR(i){const o={};return i.forEach((l,c)=>{o[c]=l}),o}async function ZR(i,o,l,c,d,g){const R=new Headers(c||{}),x=i?i.toUpperCase():re(g)?"GET":"POST",L=new AbortController;let b;const U=new Promise(j=>{b=setTimeout(()=>{L.abort(),j({error:new ue("Request timed out",null,408)})},o?o.options.timeouts.httpRequestTimeout:ae.TIMEOUTS.httpRequestTimeout)}),B={method:x,headers:R,body:g,signal:L.signal};T.Config.isWebworker||(B.credentials=R.has("authorization")?"include":"same-origin");const q=(async()=>{try{const j=await ui().fetch(l+"?"+new URLSearchParams(d||{}),B);if(clearTimeout(b),j.status==204)return{error:null,statusCode:j.status};const K=j.headers.get("Content-Type");let ee;K&&K.indexOf("application/x-msgpack")>-1?ee=await j.arrayBuffer():K&&K.indexOf("application/json")>-1?ee=await j.json():ee=await j.text();const ce=!!K&&K.indexOf("application/x-msgpack")===-1,Ae=JR(j.headers);return j.ok?{error:null,body:ee,headers:Ae,unpacked:ce,statusCode:j.status}:{error:YR(ee,j.headers)||new ue("Error response received from server: "+j.status+" body was: "+T.Config.inspect(ee),null,j.status),body:ee,headers:Ae,unpacked:ce,statusCode:j.status}}catch(j){return clearTimeout(b),{error:j}}})();return Promise.race([U,q])}var eE={XHRRequest:Vm,FetchRequest:ZR},Wm=gR(Fm,bm);T.Crypto=Wm,T.BufferUtils=bm,T.Http=Dm,T.Config=Fm,T.Transports=BR,T.WebStorage=Um;for(const i of[wc,kc])i.Crypto=Wm,i._MsgPack=Bc;Dm.bundledRequestImplementations=eE,m.initLogHandlers(),T.Defaults=te(jR),T.Config.agent&&(T.Defaults.agent+=" "+T.Config.agent);var tE={ErrorInfo:N,Rest:wc,Realtime:kc,msgpack:Bc};if(typeof r.exports=="object"&&typeof n=="object"){var nE=(i,o,l,c)=>{if(o&&typeof o=="object"||typeof o=="function")for(let d of Object.getOwnPropertyNames(o))!Object.prototype.hasOwnProperty.call(i,d)&&d!==l&&Object.defineProperty(i,d,{get:()=>o[d],enumerable:!(c=Object.getOwnPropertyDescriptor(o,d))||c.enumerable});return i};r.exports=nE(r.exports,n)}return r.exports})})(D1);var nL=D1.exports;const rL=new yx,iL=new nL.Realtime({key:"dDoULg.CBlbwg:iYgskWpW5sI4puyUDfHXAOfJ17X_DuyKVPb_QelkXNQ"});SS(document.getElementById("root")).render(de.jsx(D.StrictMode,{children:de.jsx(dI,{client:iL,children:de.jsx(Lh,{channelName:"test-updates",children:de.jsx(Lh,{channelName:"sheet-update",children:de.jsx(Lh,{channelName:"form-submissions",children:de.jsx(Cx,{client:rL,children:de.jsx(E_,{children:de.jsxs(S_,{children:[de.jsx(Mf,{path:"/",element:de.jsx(Yv,{})}),de.jsx(Mf,{path:"/*",element:de.jsx(Yv,{})})]})})})})})})})}));export{de as j};
