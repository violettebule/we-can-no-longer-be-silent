const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/components-COidjH1w.js","assets/vendor-CZJs0MCY.js"])))=>i.map(i=>d[i]);
import{r as d,F as R,a as C,b as N,c as D,d as O,e as U,j as s,Q as q,f as A,g as _,h as Q,C as j,i as I,B as z,R as $,k as S}from"./vendor-CZJs0MCY.js";import{f as B,t as k,h as K,a as T,c as W,R as b,g as X,b as H}from"./components-COidjH1w.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))f(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const r of e.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&f(r)}).observe(document,{childList:!0,subtree:!0});function c(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function f(t){if(t.ep)return;t.ep=!0;const e=c(t);fetch(t.href,e)}})();const V="modulepreload",J=function(o){return"/we-can-no-longer-be-silent/"+o},P={},Y=function(a,c,f){let t=Promise.resolve();if(c&&c.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),r=(e==null?void 0:e.nonce)||(e==null?void 0:e.getAttribute("nonce"));t=Promise.all(c.map(l=>{if(l=J(l),l in P)return;P[l]=!0;const h=l.endsWith(".css"),g=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${g}`))return;const i=document.createElement("link");if(i.rel=h?"stylesheet":V,h||(i.as="script",i.crossOrigin=""),i.href=l,r&&i.setAttribute("nonce",r),document.head.appendChild(i),h)return new Promise((y,p)=>{i.addEventListener("load",y),i.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}return t.then(()=>a()).catch(e=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=e,window.dispatchEvent(r),!r.defaultPrevented)throw e})},G=()=>{const[o,a]=d.useState(!1),[c,f]=d.useState([]);return d.useEffect(()=>{const t=B.map(({fontName:e})=>new R(e).load("",5e3).then(()=>({fontName:e,loaded:!0})).catch(()=>({fontName:e,loaded:!1})));Promise.all(t).then(e=>{const r=e.filter(l=>!l.loaded).map(l=>l.fontName);r.length>0?f(r):(a(!0),window.dispatchEvent(new Event("resize")))}).catch(e=>{console.error("Error during font loading process:",e)})},[]),{isFontsLoaded:o,failedFonts:c}},F=(o,a)=>{C(o,a),d.useEffect(()=>()=>{},[o])},M=(o,a,c)=>{F("form-submissions",t=>{const e=k(t);K(e,o,a,c,1e4)})},Z=()=>{const o=N();F("sheet-update",()=>{o.invalidateQueries({queryKey:["data"]})})},ee=d.lazy(()=>Y(()=>import("./components-COidjH1w.js").then(o=>o.D),__vite__mapDeps([0,1])));function E(){const[o,a]=D(),[c,f]=d.useState(o.get("lang")||"en");d.useEffect(()=>{a(n=>(n.set("lang",c),n))},[c,a]);const t=O(),e=new URLSearchParams(t.search),r=e.get("show"),l=e.get("show-desc"),[h,g]=d.useState([]),[i,y]=d.useState(new Set);console.log(i);const p=d.useRef({}),{isLoading:L,error:v}=U({queryKey:["data"],queryFn:()=>H(g),staleTime:1/0});if(M(g,y,r),Z(),!G())return s.jsx("div",{className:"w-screen h-screen flex items-center justify-center",children:s.jsx("p",{className:"text-xl",children:"Fonts loading..."})});if(L)return s.jsx("div",{children:"Loading..."});if(v)return s.jsxs("div",{children:["Error: ",v.message]});const x=T(h,r),w=W(x.length,!!i.size),m=X(l);return s.jsxs("div",{className:"flex w-screen h-screen items-center flex-col",children:[m?s.jsx(d.Suspense,{fallback:s.jsx("div",{children:"Loading description..."}),children:s.jsx(ee,{languagePref:c,setLanguagePref:f})}):null,s.jsx("div",{className:`flex grow p-0 bg-feminicidio bg-repeat ${m?"w-[80%] border-4 border-gray-100 max-h-[70%]":"w-full h-full"}`,children:s.jsxs("li",{className:`flex flex-col ${m?"w-full h-full":"w-screen h-screen"}`,children:[s.jsx("div",{className:"flex grow flex-wrap",children:x.filter((n,u)=>u%2===0&&!i.has(n.timestamp)).map((n,u)=>s.jsx(b,{item:n,index:u,fontSize:w,textfitRefs:p,showDescription:m,isFeatured:!1},n.timestamp))}),s.jsx("div",{className:`flex justify-around flex-wrap ${i.size>0?"min-h-[40%]":""}`,children:x.filter(n=>i.has(n.timestamp)).map((n,u)=>s.jsx(b,{item:n,index:u,fontSize:w,textfitRefs:p,showDescription:m,isFeatured:!0},n.timestamp))}),s.jsx("div",{className:"flex grow flex-wrap",children:x.filter((n,u)=>u%2===1&&!i.has(n.timestamp)).map((n,u)=>s.jsx(b,{item:n,index:u,fontSize:w,textfitRefs:p,showDescription:m,isFeatured:!1},n.timestamp))})]})})]})}const se=new q,te=new A.Realtime({key:"dDoULg.CBlbwg:iYgskWpW5sI4puyUDfHXAOfJ17X_DuyKVPb_QelkXNQ"});_(document.getElementById("root")).render(s.jsx(d.StrictMode,{children:s.jsx(Q,{client:te,children:s.jsx(j,{channelName:"test-updates",children:s.jsx(j,{channelName:"sheet-update",children:s.jsx(j,{channelName:"form-submissions",children:s.jsx(I,{client:se,children:s.jsx(z,{children:s.jsxs($,{children:[s.jsx(S,{path:"/",element:s.jsx(E,{})}),s.jsx(S,{path:"/*",element:s.jsx(E,{})})]})})})})})})})}));
