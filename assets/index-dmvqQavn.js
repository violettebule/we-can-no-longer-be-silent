const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/components-Fu7VBuQX.js","assets/vendor-PIY4kfCA.js"])))=>i.map(i=>d[i]);
import{r as u,F as A,u as D,a as U,b as O,c as q,d as _,j as t,m as f,T as I,Q,e as $,f as z,A as B,C as b,g as K,B as k,R as W,h as C}from"./vendor-PIY4kfCA.js";import{f as X,t as V,g as J,a as Y,c as G,R as N,b as H,d as M,e as Z}from"./components-Fu7VBuQX.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const e of s)if(e.type==="childList")for(const o of e.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function c(s){const e={};return s.integrity&&(e.integrity=s.integrity),s.referrerPolicy&&(e.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?e.credentials="include":s.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function i(s){if(s.ep)return;s.ep=!0;const e=c(s);fetch(s.href,e)}})();const ee="modulepreload",te=function(a){return"/we-can-no-longer-be-silent/"+a},R={},se=function(r,c,i){let s=Promise.resolve();if(c&&c.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),o=(e==null?void 0:e.nonce)||(e==null?void 0:e.getAttribute("nonce"));s=Promise.all(c.map(d=>{if(d=te(d),d in R)return;R[d]=!0;const h=d.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const l=document.createElement("link");if(l.rel=h?"stylesheet":ee,h||(l.as="script",l.crossOrigin=""),l.href=d,o&&l.setAttribute("nonce",o),document.head.appendChild(l),h)return new Promise((w,x)=>{l.addEventListener("load",w),l.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${d}`)))})}))}return s.then(()=>r()).catch(e=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=e,window.dispatchEvent(o),!o.defaultPrevented)throw e})},ne=()=>{const[a,r]=u.useState(!1);return u.useEffect(()=>{const c=X.map(({fontName:i})=>new A(i).load());Promise.all(c).then(()=>{window.dispatchEvent(new Event("resize")),r(!0)}).catch(i=>{console.error("Error loading fonts:",i)})},[]),a},v=(a,r)=>{D(a,r),u.useEffect(()=>()=>{},[a])},re=(a,r)=>{v("form-submissions",i=>{const s=V(i);a(e=>[...e,s]),r(e=>{const o=new Set(e);return o.add(s.timestamp),o}),setTimeout(()=>{r(e=>{const o=new Set(e);return o.delete(s.timestamp),o})},1e4)})},ae=(a,r)=>{v("test-updates",()=>{const i={name:"Teresa",response:"This is my test response This is my test response This is my test response This is my test response",timestamp:J()};a(s=>[...s,i]),r(s=>{const e=new Set(s);return e.add(i.timestamp),e}),setTimeout(()=>{r(s=>{const e=new Set(s);return e.delete(i.timestamp),e})},5e3)})},oe=()=>{const a=U();v("sheet-update",()=>{a.invalidateQueries({queryKey:["data"]})})},ie=u.lazy(()=>se(()=>import("./components-Fu7VBuQX.js").then(a=>a.D),__vite__mapDeps([0,1])));function T(){const[a,r]=O(),[c,i]=u.useState(a.get("lang")||"en");u.useEffect(()=>{r(n=>(n.set("lang",c),n))},[c,r]);const s=q(),e=new URLSearchParams(s.search),o=e.get("show"),d=e.get("show-desc"),[h,p]=u.useState([]),[l,w]=u.useState(new Set),x=u.useRef({}),{isLoading:F,error:P}=_({queryKey:["data"],queryFn:()=>Z(p),staleTime:1/0}),[j,L]=u.useState(!0);if(re(p,w),ae(p,w),oe(),!ne())return t.jsx("div",{className:"w-screen h-screen flex items-center justify-center",children:t.jsx("p",{className:"text-xl",children:"Fonts loading..."})});if(F)return t.jsx("div",{children:"Loading..."});if(P)return t.jsxs("div",{children:["Error: ",P.message]});const g=Y(h,o),S=G(g.length,!!l.size),y=M(d);return t.jsxs(f.div,{layout:!0,className:"flex w-screen h-screen items-center flex-col",children:[y?t.jsx(u.Suspense,{fallback:t.jsx("div",{children:"Loading description..."}),children:t.jsx(ie,{languagePref:c,setLanguagePref:i})}):null,t.jsx(f.div,{layout:!0,className:`flex grow p-0 bg-feminicidio bg-repeat ${y?"w-[80%] border-4 border-gray-100 max-h-[70%]":"w-full h-full"}`,children:t.jsxs(f.li,{layout:!0,className:`flex flex-col ${y?"w-full h-full":"w-screen h-screen"}`,children:[t.jsx(f.div,{layout:!0,className:"flex grow flex-wrap",onLayoutAnimationStart:()=>L(!1),onLayoutAnimationComplete:()=>L(!0),children:g.filter((n,m)=>m%2===0&&!l.has(n.timestamp)).map((n,m)=>t.jsx(N,{item:n,index:m,fontSize:S,textfitRefs:x,showText:j,showDescription:y},n.timestamp))}),t.jsx(f.div,{layout:!0,className:`flex justify-around flex-wrap ${l.size>0?"min-h-[30%]":""}`,children:g.filter(n=>l.has(n.timestamp)).map((n,m)=>t.jsxs(f.ul,{layout:!0,className:"flex flex-col grow bg-opacity-60 bg-white w-full m-3 max-w-[30%] p-3",style:{fontSize:`${S}px`},children:[t.jsxs("div",{className:"relative grow",children:[t.jsx("div",{className:"text-transparent",children:n.response}),t.jsx(f.div,{className:`absolute inset-0 ${H(m)} text-balance`,ref:E=>E&&(x.current[n.timestamp]=E),children:t.jsx(I,{className:"flex w-full h-full items-end",children:j?t.jsx(f.p,{initial:{opacity:0},transition:{duration:.3},animate:{opacity:1},children:n.response}):null},n.timestamp)},n.timestamp)]}),t.jsx("div",{className:"flex w-full justify-end",children:t.jsx("p",{className:"text-gray-600 underline text-xl",children:n.name})})]},n.timestamp))}),t.jsx(f.div,{layout:!0,className:"flex grow flex-wrap",children:g.filter((n,m)=>m%2===1&&!l.has(n.timestamp)).map((n,m)=>t.jsx(N,{item:n,index:m,fontSize:S,textfitRefs:x,showText:j,showDescription:y},n.timestamp))})]})})]})}const le=new Q,ce=new $.Realtime({key:"dDoULg.CBlbwg:iYgskWpW5sI4puyUDfHXAOfJ17X_DuyKVPb_QelkXNQ"});z(document.getElementById("root")).render(t.jsx(u.StrictMode,{children:t.jsx(B,{client:ce,children:t.jsx(b,{channelName:"test-updates",children:t.jsx(b,{channelName:"sheet-update",children:t.jsx(b,{channelName:"form-submissions",children:t.jsx(K,{client:le,children:t.jsx(k,{children:t.jsxs(W,{children:[t.jsx(C,{path:"/",element:t.jsx(T,{})}),t.jsx(C,{path:"/*",element:t.jsx(T,{})})]})})})})})})})}));
