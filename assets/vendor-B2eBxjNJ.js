var Vm=e=>{throw TypeError(e)};var Fc=(e,t,n)=>t.has(e)||Vm("Cannot "+n);var M=(e,t,n)=>(Fc(e,t,"read from private field"),n?n.call(e):t.get(e)),he=(e,t,n)=>t.has(e)?Vm("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),X=(e,t,n,r)=>(Fc(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ge=(e,t,n)=>(Fc(e,t,"access private method"),n);var hl=(e,t,n,r)=>({set _(s){X(e,t,s,n)},get _(){return M(e,t,r)}});function qR(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var Yn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Zv={exports:{}},Mu={},e0={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ja=Symbol.for("react.element"),$R=Symbol.for("react.portal"),KR=Symbol.for("react.fragment"),QR=Symbol.for("react.strict_mode"),YR=Symbol.for("react.profiler"),XR=Symbol.for("react.provider"),JR=Symbol.for("react.context"),ZR=Symbol.for("react.forward_ref"),eE=Symbol.for("react.suspense"),tE=Symbol.for("react.memo"),nE=Symbol.for("react.lazy"),jm=Symbol.iterator;function rE(e){return e===null||typeof e!="object"?null:(e=jm&&e[jm]||e["@@iterator"],typeof e=="function"?e:null)}var t0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},n0=Object.assign,r0={};function no(e,t,n){this.props=e,this.context=t,this.refs=r0,this.updater=n||t0}no.prototype.isReactComponent={};no.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};no.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function i0(){}i0.prototype=no.prototype;function ud(e,t,n){this.props=e,this.context=t,this.refs=r0,this.updater=n||t0}var cd=ud.prototype=new i0;cd.constructor=ud;n0(cd,no.prototype);cd.isPureReactComponent=!0;var zm=Array.isArray,s0=Object.prototype.hasOwnProperty,hd={current:null},o0={key:!0,ref:!0,__self:!0,__source:!0};function a0(e,t,n){var r,s={},a=null,u=null;if(t!=null)for(r in t.ref!==void 0&&(u=t.ref),t.key!==void 0&&(a=""+t.key),t)s0.call(t,r)&&!o0.hasOwnProperty(r)&&(s[r]=t[r]);var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){for(var f=Array(h),p=0;p<h;p++)f[p]=arguments[p+2];s.children=f}if(e&&e.defaultProps)for(r in h=e.defaultProps,h)s[r]===void 0&&(s[r]=h[r]);return{$$typeof:ja,type:e,key:a,ref:u,props:s,_owner:hd.current}}function iE(e,t){return{$$typeof:ja,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function fd(e){return typeof e=="object"&&e!==null&&e.$$typeof===ja}function sE(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Gm=/\/+/g;function Bc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?sE(""+e.key):t.toString(36)}function Dl(e,t,n,r,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var u=!1;if(e===null)u=!0;else switch(a){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case ja:case $R:u=!0}}if(u)return u=e,s=s(u),e=r===""?"."+Bc(u,0):r,zm(s)?(n="",e!=null&&(n=e.replace(Gm,"$&/")+"/"),Dl(s,t,n,"",function(p){return p})):s!=null&&(fd(s)&&(s=iE(s,n+(!s.key||u&&u.key===s.key?"":(""+s.key).replace(Gm,"$&/")+"/")+e)),t.push(s)),1;if(u=0,r=r===""?".":r+":",zm(e))for(var h=0;h<e.length;h++){a=e[h];var f=r+Bc(a,h);u+=Dl(a,t,n,f,s)}else if(f=rE(e),typeof f=="function")for(e=f.call(e),h=0;!(a=e.next()).done;)a=a.value,f=r+Bc(a,h++),u+=Dl(a,t,n,f,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function fl(e,t,n){if(e==null)return e;var r=[],s=0;return Dl(e,r,"","",function(a){return t.call(n,a,s++)}),r}function oE(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var _t={current:null},Nl={transition:null},aE={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:Nl,ReactCurrentOwner:hd};function l0(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:fl,forEach:function(e,t,n){fl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return fl(e,function(){t++}),t},toArray:function(e){return fl(e,function(t){return t})||[]},only:function(e){if(!fd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};me.Component=no;me.Fragment=KR;me.Profiler=YR;me.PureComponent=ud;me.StrictMode=QR;me.Suspense=eE;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aE;me.act=l0;me.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=n0({},e.props),s=e.key,a=e.ref,u=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,u=hd.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var h=e.type.defaultProps;for(f in t)s0.call(t,f)&&!o0.hasOwnProperty(f)&&(r[f]=t[f]===void 0&&h!==void 0?h[f]:t[f])}var f=arguments.length-2;if(f===1)r.children=n;else if(1<f){h=Array(f);for(var p=0;p<f;p++)h[p]=arguments[p+2];r.children=h}return{$$typeof:ja,type:e.type,key:s,ref:a,props:r,_owner:u}};me.createContext=function(e){return e={$$typeof:JR,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:XR,_context:e},e.Consumer=e};me.createElement=a0;me.createFactory=function(e){var t=a0.bind(null,e);return t.type=e,t};me.createRef=function(){return{current:null}};me.forwardRef=function(e){return{$$typeof:ZR,render:e}};me.isValidElement=fd;me.lazy=function(e){return{$$typeof:nE,_payload:{_status:-1,_result:e},_init:oE}};me.memo=function(e,t){return{$$typeof:tE,type:e,compare:t===void 0?null:t}};me.startTransition=function(e){var t=Nl.transition;Nl.transition={};try{e()}finally{Nl.transition=t}};me.unstable_act=l0;me.useCallback=function(e,t){return _t.current.useCallback(e,t)};me.useContext=function(e){return _t.current.useContext(e)};me.useDebugValue=function(){};me.useDeferredValue=function(e){return _t.current.useDeferredValue(e)};me.useEffect=function(e,t){return _t.current.useEffect(e,t)};me.useId=function(){return _t.current.useId()};me.useImperativeHandle=function(e,t,n){return _t.current.useImperativeHandle(e,t,n)};me.useInsertionEffect=function(e,t){return _t.current.useInsertionEffect(e,t)};me.useLayoutEffect=function(e,t){return _t.current.useLayoutEffect(e,t)};me.useMemo=function(e,t){return _t.current.useMemo(e,t)};me.useReducer=function(e,t,n){return _t.current.useReducer(e,t,n)};me.useRef=function(e){return _t.current.useRef(e)};me.useState=function(e){return _t.current.useState(e)};me.useSyncExternalStore=function(e,t,n){return _t.current.useSyncExternalStore(e,t,n)};me.useTransition=function(){return _t.current.useTransition()};me.version="18.3.1";e0.exports=me;var B=e0.exports;const ro=Jv(B),lE=qR({__proto__:null,default:ro},[B]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uE=B,cE=Symbol.for("react.element"),hE=Symbol.for("react.fragment"),fE=Object.prototype.hasOwnProperty,dE=uE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pE={key:!0,ref:!0,__self:!0,__source:!0};function u0(e,t,n){var r,s={},a=null,u=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(u=t.ref);for(r in t)fE.call(t,r)&&!pE.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:cE,type:e,key:a,ref:u,props:s,_owner:dE.current}}Mu.Fragment=hE;Mu.jsx=u0;Mu.jsxs=u0;Zv.exports=Mu;var Hs=Zv.exports,c0={exports:{}},Yt={},h0={exports:{}},f0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(W,se){var ie=W.length;W.push(se);e:for(;0<ie;){var ne=ie-1>>>1,re=W[ne];if(0<s(re,se))W[ne]=se,W[ie]=re,ie=ne;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var se=W[0],ie=W.pop();if(ie!==se){W[0]=ie;e:for(var ne=0,re=W.length,ke=re>>>1;ne<ke;){var Vt=2*(ne+1)-1,Ee=W[Vt],St=Vt+1,hn=W[St];if(0>s(Ee,ie))St<re&&0>s(hn,Ee)?(W[ne]=hn,W[St]=ie,ne=St):(W[ne]=Ee,W[Vt]=ie,ne=Vt);else if(St<re&&0>s(hn,ie))W[ne]=hn,W[St]=ie,ne=St;else break e}}return se}function s(W,se){var ie=W.sortIndex-se.sortIndex;return ie!==0?ie:W.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var u=Date,h=u.now();e.unstable_now=function(){return u.now()-h}}var f=[],p=[],v=1,y=null,w=3,P=!1,_=!1,A=!1,x=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(W){for(var se=n(p);se!==null;){if(se.callback===null)r(p);else if(se.startTime<=W)r(p),se.sortIndex=se.expirationTime,t(f,se);else break;se=n(p)}}function R(W){if(A=!1,E(W),!_)if(n(f)!==null)_=!0,Re(L);else{var se=n(p);se!==null&&Z(R,se.startTime-W)}}function L(W,se){_=!1,A&&(A=!1,C(U),U=-1),P=!0;var ie=w;try{for(E(se),y=n(f);y!==null&&(!(y.expirationTime>se)||W&&!m());){var ne=y.callback;if(typeof ne=="function"){y.callback=null,w=y.priorityLevel;var re=ne(y.expirationTime<=se);se=e.unstable_now(),typeof re=="function"?y.callback=re:y===n(f)&&r(f),E(se)}else r(f);y=n(f)}if(y!==null)var ke=!0;else{var Vt=n(p);Vt!==null&&Z(R,Vt.startTime-se),ke=!1}return ke}finally{y=null,w=ie,P=!1}}var j=!1,H=null,U=-1,J=5,Y=-1;function m(){return!(e.unstable_now()-Y<J)}function Ae(){if(H!==null){var W=e.unstable_now();Y=W;var se=!0;try{se=H(!0,W)}finally{se?Le():(j=!1,H=null)}}else j=!1}var Le;if(typeof S=="function")Le=function(){S(Ae)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,ue=D.port2;D.port1.onmessage=Ae,Le=function(){ue.postMessage(null)}}else Le=function(){x(Ae,0)};function Re(W){H=W,j||(j=!0,Le())}function Z(W,se){U=x(function(){W(e.unstable_now())},se)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_continueExecution=function(){_||P||(_=!0,Re(L))},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_getFirstCallbackNode=function(){return n(f)},e.unstable_next=function(W){switch(w){case 1:case 2:case 3:var se=3;break;default:se=w}var ie=w;w=se;try{return W()}finally{w=ie}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(W,se){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ie=w;w=W;try{return se()}finally{w=ie}},e.unstable_scheduleCallback=function(W,se,ie){var ne=e.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?ne+ie:ne):ie=ne,W){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=ie+re,W={id:v++,callback:se,priorityLevel:W,startTime:ie,expirationTime:re,sortIndex:-1},ie>ne?(W.sortIndex=ie,t(p,W),n(f)===null&&W===n(p)&&(A?(C(U),U=-1):A=!0,Z(R,ie-ne))):(W.sortIndex=re,t(f,W),_||P||(_=!0,Re(L))),W},e.unstable_shouldYield=m,e.unstable_wrapCallback=function(W){var se=w;return function(){var ie=w;w=se;try{return W.apply(this,arguments)}finally{w=ie}}}})(f0);h0.exports=f0;var mE=h0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gE=B,$t=mE;function z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d0=new Set,ha={};function Ui(e,t){Ws(e,t),Ws(e+"Capture",t)}function Ws(e,t){for(ha[e]=t,e=0;e<t.length;e++)d0.add(t[e])}var cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bh=Object.prototype.hasOwnProperty,yE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hm={},Wm={};function vE(e){return bh.call(Wm,e)?!0:bh.call(Hm,e)?!1:yE.test(e)?Wm[e]=!0:(Hm[e]=!0,!1)}function wE(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function SE(e,t,n,r){if(t===null||typeof t>"u"||wE(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ot(e,t,n,r,s,a,u){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=u}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ut[e]=new Ot(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ut[t]=new Ot(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ut[e]=new Ot(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ut[e]=new Ot(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ut[e]=new Ot(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ut[e]=new Ot(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ut[e]=new Ot(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ut[e]=new Ot(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ut[e]=new Ot(e,5,!1,e.toLowerCase(),null,!1,!1)});var dd=/[\-:]([a-z])/g;function pd(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(dd,pd);ut[t]=new Ot(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(dd,pd);ut[t]=new Ot(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(dd,pd);ut[t]=new Ot(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ut[e]=new Ot(e,1,!1,e.toLowerCase(),null,!1,!1)});ut.xlinkHref=new Ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ut[e]=new Ot(e,1,!1,e.toLowerCase(),null,!0,!0)});function md(e,t,n,r){var s=ut.hasOwnProperty(t)?ut[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(SE(t,n,s,r)&&(n=null),r||s===null?vE(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var mr=gE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dl=Symbol.for("react.element"),os=Symbol.for("react.portal"),as=Symbol.for("react.fragment"),gd=Symbol.for("react.strict_mode"),Ih=Symbol.for("react.profiler"),p0=Symbol.for("react.provider"),m0=Symbol.for("react.context"),yd=Symbol.for("react.forward_ref"),Lh=Symbol.for("react.suspense"),Dh=Symbol.for("react.suspense_list"),vd=Symbol.for("react.memo"),Or=Symbol.for("react.lazy"),g0=Symbol.for("react.offscreen"),qm=Symbol.iterator;function ko(e){return e===null||typeof e!="object"?null:(e=qm&&e[qm]||e["@@iterator"],typeof e=="function"?e:null)}var Be=Object.assign,Vc;function Go(e){if(Vc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Vc=t&&t[1]||""}return`
`+Vc+e}var jc=!1;function zc(e,t){if(!e||jc)return"";jc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(p){var r=p}Reflect.construct(e,[],t)}else{try{t.call()}catch(p){r=p}e.call(t.prototype)}else{try{throw Error()}catch(p){r=p}e()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var s=p.stack.split(`
`),a=r.stack.split(`
`),u=s.length-1,h=a.length-1;1<=u&&0<=h&&s[u]!==a[h];)h--;for(;1<=u&&0<=h;u--,h--)if(s[u]!==a[h]){if(u!==1||h!==1)do if(u--,h--,0>h||s[u]!==a[h]){var f=`
`+s[u].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=u&&0<=h);break}}}finally{jc=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Go(e):""}function CE(e){switch(e.tag){case 5:return Go(e.type);case 16:return Go("Lazy");case 13:return Go("Suspense");case 19:return Go("SuspenseList");case 0:case 2:case 15:return e=zc(e.type,!1),e;case 11:return e=zc(e.type.render,!1),e;case 1:return e=zc(e.type,!0),e;default:return""}}function Nh(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case as:return"Fragment";case os:return"Portal";case Ih:return"Profiler";case gd:return"StrictMode";case Lh:return"Suspense";case Dh:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case m0:return(e.displayName||"Context")+".Consumer";case p0:return(e._context.displayName||"Context")+".Provider";case yd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case vd:return t=e.displayName||null,t!==null?t:Nh(e.type)||"Memo";case Or:t=e._payload,e=e._init;try{return Nh(e(t))}catch{}}return null}function TE(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nh(t);case 8:return t===gd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Qr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function y0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function RE(e){var t=y0(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(u){r=""+u,a.call(this,u)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(u){r=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function pl(e){e._valueTracker||(e._valueTracker=RE(e))}function v0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=y0(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Zl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Uh(e,t){var n=t.checked;return Be({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function $m(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Qr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function w0(e,t){t=t.checked,t!=null&&md(e,"checked",t,!1)}function Fh(e,t){w0(e,t);var n=Qr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Bh(e,t.type,n):t.hasOwnProperty("defaultValue")&&Bh(e,t.type,Qr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Km(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Bh(e,t,n){(t!=="number"||Zl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ho=Array.isArray;function Rs(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Qr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Vh(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(z(91));return Be({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Qm(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(z(92));if(Ho(n)){if(1<n.length)throw Error(z(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Qr(n)}}function S0(e,t){var n=Qr(t.value),r=Qr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ym(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function C0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?C0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ml,T0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ml=ml||document.createElement("div"),ml.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ml.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function fa(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Jo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},EE=["Webkit","ms","Moz","O"];Object.keys(Jo).forEach(function(e){EE.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Jo[t]=Jo[e]})});function R0(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Jo.hasOwnProperty(e)&&Jo[e]?(""+t).trim():t+"px"}function E0(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=R0(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var PE=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zh(e,t){if(t){if(PE[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(z(62))}}function Gh(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hh=null;function wd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Wh=null,Es=null,Ps=null;function Xm(e){if(e=Ha(e)){if(typeof Wh!="function")throw Error(z(280));var t=e.stateNode;t&&(t=Nu(t),Wh(e.stateNode,e.type,t))}}function P0(e){Es?Ps?Ps.push(e):Ps=[e]:Es=e}function A0(){if(Es){var e=Es,t=Ps;if(Ps=Es=null,Xm(e),t)for(e=0;e<t.length;e++)Xm(t[e])}}function _0(e,t){return e(t)}function O0(){}var Gc=!1;function k0(e,t,n){if(Gc)return e(t,n);Gc=!0;try{return _0(e,t,n)}finally{Gc=!1,(Es!==null||Ps!==null)&&(O0(),A0())}}function da(e,t){var n=e.stateNode;if(n===null)return null;var r=Nu(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(z(231,t,typeof n));return n}var qh=!1;if(cr)try{var xo={};Object.defineProperty(xo,"passive",{get:function(){qh=!0}}),window.addEventListener("test",xo,xo),window.removeEventListener("test",xo,xo)}catch{qh=!1}function AE(e,t,n,r,s,a,u,h,f){var p=Array.prototype.slice.call(arguments,3);try{t.apply(n,p)}catch(v){this.onError(v)}}var Zo=!1,eu=null,tu=!1,$h=null,_E={onError:function(e){Zo=!0,eu=e}};function OE(e,t,n,r,s,a,u,h,f){Zo=!1,eu=null,AE.apply(_E,arguments)}function kE(e,t,n,r,s,a,u,h,f){if(OE.apply(this,arguments),Zo){if(Zo){var p=eu;Zo=!1,eu=null}else throw Error(z(198));tu||(tu=!0,$h=p)}}function Fi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function x0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Jm(e){if(Fi(e)!==e)throw Error(z(188))}function xE(e){var t=e.alternate;if(!t){if(t=Fi(e),t===null)throw Error(z(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return Jm(s),e;if(a===r)return Jm(s),t;a=a.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=a;else{for(var u=!1,h=s.child;h;){if(h===n){u=!0,n=s,r=a;break}if(h===r){u=!0,r=s,n=a;break}h=h.sibling}if(!u){for(h=a.child;h;){if(h===n){u=!0,n=a,r=s;break}if(h===r){u=!0,r=a,n=s;break}h=h.sibling}if(!u)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?e:t}function M0(e){return e=xE(e),e!==null?b0(e):null}function b0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=b0(e);if(t!==null)return t;e=e.sibling}return null}var I0=$t.unstable_scheduleCallback,Zm=$t.unstable_cancelCallback,ME=$t.unstable_shouldYield,bE=$t.unstable_requestPaint,He=$t.unstable_now,IE=$t.unstable_getCurrentPriorityLevel,Sd=$t.unstable_ImmediatePriority,L0=$t.unstable_UserBlockingPriority,nu=$t.unstable_NormalPriority,LE=$t.unstable_LowPriority,D0=$t.unstable_IdlePriority,bu=null,Bn=null;function DE(e){if(Bn&&typeof Bn.onCommitFiberRoot=="function")try{Bn.onCommitFiberRoot(bu,e,void 0,(e.current.flags&128)===128)}catch{}}var Sn=Math.clz32?Math.clz32:FE,NE=Math.log,UE=Math.LN2;function FE(e){return e>>>=0,e===0?32:31-(NE(e)/UE|0)|0}var gl=64,yl=4194304;function Wo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ru(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes,u=n&268435455;if(u!==0){var h=u&~s;h!==0?r=Wo(h):(a&=u,a!==0&&(r=Wo(a)))}else u=n&~s,u!==0?r=Wo(u):a!==0&&(r=Wo(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Sn(t),s=1<<n,r|=e[n],t&=~s;return r}function BE(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VE(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var u=31-Sn(a),h=1<<u,f=s[u];f===-1?(!(h&n)||h&r)&&(s[u]=BE(h,t)):f<=t&&(e.expiredLanes|=h),a&=~h}}function Kh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function N0(){var e=gl;return gl<<=1,!(gl&4194240)&&(gl=64),e}function Hc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function za(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Sn(t),e[t]=n}function jE(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Sn(n),a=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~a}}function Cd(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Sn(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Te=0;function U0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var F0,Td,B0,V0,j0,Qh=!1,vl=[],jr=null,zr=null,Gr=null,pa=new Map,ma=new Map,xr=[],zE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function eg(e,t){switch(e){case"focusin":case"focusout":jr=null;break;case"dragenter":case"dragleave":zr=null;break;case"mouseover":case"mouseout":Gr=null;break;case"pointerover":case"pointerout":pa.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ma.delete(t.pointerId)}}function Mo(e,t,n,r,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},t!==null&&(t=Ha(t),t!==null&&Td(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function GE(e,t,n,r,s){switch(t){case"focusin":return jr=Mo(jr,e,t,n,r,s),!0;case"dragenter":return zr=Mo(zr,e,t,n,r,s),!0;case"mouseover":return Gr=Mo(Gr,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return pa.set(a,Mo(pa.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,ma.set(a,Mo(ma.get(a)||null,e,t,n,r,s)),!0}return!1}function z0(e){var t=gi(e.target);if(t!==null){var n=Fi(t);if(n!==null){if(t=n.tag,t===13){if(t=x0(n),t!==null){e.blockedOn=t,j0(e.priority,function(){B0(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ul(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yh(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Hh=r,n.target.dispatchEvent(r),Hh=null}else return t=Ha(n),t!==null&&Td(t),e.blockedOn=n,!1;t.shift()}return!0}function tg(e,t,n){Ul(e)&&n.delete(t)}function HE(){Qh=!1,jr!==null&&Ul(jr)&&(jr=null),zr!==null&&Ul(zr)&&(zr=null),Gr!==null&&Ul(Gr)&&(Gr=null),pa.forEach(tg),ma.forEach(tg)}function bo(e,t){e.blockedOn===t&&(e.blockedOn=null,Qh||(Qh=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,HE)))}function ga(e){function t(s){return bo(s,e)}if(0<vl.length){bo(vl[0],e);for(var n=1;n<vl.length;n++){var r=vl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(jr!==null&&bo(jr,e),zr!==null&&bo(zr,e),Gr!==null&&bo(Gr,e),pa.forEach(t),ma.forEach(t),n=0;n<xr.length;n++)r=xr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<xr.length&&(n=xr[0],n.blockedOn===null);)z0(n),n.blockedOn===null&&xr.shift()}var As=mr.ReactCurrentBatchConfig,iu=!0;function WE(e,t,n,r){var s=Te,a=As.transition;As.transition=null;try{Te=1,Rd(e,t,n,r)}finally{Te=s,As.transition=a}}function qE(e,t,n,r){var s=Te,a=As.transition;As.transition=null;try{Te=4,Rd(e,t,n,r)}finally{Te=s,As.transition=a}}function Rd(e,t,n,r){if(iu){var s=Yh(e,t,n,r);if(s===null)eh(e,t,r,su,n),eg(e,r);else if(GE(s,e,t,n,r))r.stopPropagation();else if(eg(e,r),t&4&&-1<zE.indexOf(e)){for(;s!==null;){var a=Ha(s);if(a!==null&&F0(a),a=Yh(e,t,n,r),a===null&&eh(e,t,r,su,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else eh(e,t,r,null,n)}}var su=null;function Yh(e,t,n,r){if(su=null,e=wd(r),e=gi(e),e!==null)if(t=Fi(e),t===null)e=null;else if(n=t.tag,n===13){if(e=x0(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return su=e,null}function G0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(IE()){case Sd:return 1;case L0:return 4;case nu:case LE:return 16;case D0:return 536870912;default:return 16}default:return 16}}var Fr=null,Ed=null,Fl=null;function H0(){if(Fl)return Fl;var e,t=Ed,n=t.length,r,s="value"in Fr?Fr.value:Fr.textContent,a=s.length;for(e=0;e<n&&t[e]===s[e];e++);var u=n-e;for(r=1;r<=u&&t[n-r]===s[a-r];r++);return Fl=s.slice(e,1<r?1-r:void 0)}function Bl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function wl(){return!0}function ng(){return!1}function Xt(e){function t(n,r,s,a,u){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=u,this.currentTarget=null;for(var h in e)e.hasOwnProperty(h)&&(n=e[h],this[h]=n?n(a):a[h]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?wl:ng,this.isPropagationStopped=ng,this}return Be(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wl)},persist:function(){},isPersistent:wl}),t}var io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pd=Xt(io),Ga=Be({},io,{view:0,detail:0}),$E=Xt(Ga),Wc,qc,Io,Iu=Be({},Ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ad,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Io&&(Io&&e.type==="mousemove"?(Wc=e.screenX-Io.screenX,qc=e.screenY-Io.screenY):qc=Wc=0,Io=e),Wc)},movementY:function(e){return"movementY"in e?e.movementY:qc}}),rg=Xt(Iu),KE=Be({},Iu,{dataTransfer:0}),QE=Xt(KE),YE=Be({},Ga,{relatedTarget:0}),$c=Xt(YE),XE=Be({},io,{animationName:0,elapsedTime:0,pseudoElement:0}),JE=Xt(XE),ZE=Be({},io,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),eP=Xt(ZE),tP=Be({},io,{data:0}),ig=Xt(tP),nP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sP(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=iP[e])?!!t[e]:!1}function Ad(){return sP}var oP=Be({},Ga,{key:function(e){if(e.key){var t=nP[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Bl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rP[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ad,charCode:function(e){return e.type==="keypress"?Bl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),aP=Xt(oP),lP=Be({},Iu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sg=Xt(lP),uP=Be({},Ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ad}),cP=Xt(uP),hP=Be({},io,{propertyName:0,elapsedTime:0,pseudoElement:0}),fP=Xt(hP),dP=Be({},Iu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),pP=Xt(dP),mP=[9,13,27,32],_d=cr&&"CompositionEvent"in window,ea=null;cr&&"documentMode"in document&&(ea=document.documentMode);var gP=cr&&"TextEvent"in window&&!ea,W0=cr&&(!_d||ea&&8<ea&&11>=ea),og=" ",ag=!1;function q0(e,t){switch(e){case"keyup":return mP.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ls=!1;function yP(e,t){switch(e){case"compositionend":return $0(t);case"keypress":return t.which!==32?null:(ag=!0,og);case"textInput":return e=t.data,e===og&&ag?null:e;default:return null}}function vP(e,t){if(ls)return e==="compositionend"||!_d&&q0(e,t)?(e=H0(),Fl=Ed=Fr=null,ls=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return W0&&t.locale!=="ko"?null:t.data;default:return null}}var wP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!wP[e.type]:t==="textarea"}function K0(e,t,n,r){P0(r),t=ou(t,"onChange"),0<t.length&&(n=new Pd("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ta=null,ya=null;function SP(e){sw(e,0)}function Lu(e){var t=hs(e);if(v0(t))return e}function CP(e,t){if(e==="change")return t}var Q0=!1;if(cr){var Kc;if(cr){var Qc="oninput"in document;if(!Qc){var ug=document.createElement("div");ug.setAttribute("oninput","return;"),Qc=typeof ug.oninput=="function"}Kc=Qc}else Kc=!1;Q0=Kc&&(!document.documentMode||9<document.documentMode)}function cg(){ta&&(ta.detachEvent("onpropertychange",Y0),ya=ta=null)}function Y0(e){if(e.propertyName==="value"&&Lu(ya)){var t=[];K0(t,ya,e,wd(e)),k0(SP,t)}}function TP(e,t,n){e==="focusin"?(cg(),ta=t,ya=n,ta.attachEvent("onpropertychange",Y0)):e==="focusout"&&cg()}function RP(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Lu(ya)}function EP(e,t){if(e==="click")return Lu(t)}function PP(e,t){if(e==="input"||e==="change")return Lu(t)}function AP(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Tn=typeof Object.is=="function"?Object.is:AP;function va(e,t){if(Tn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!bh.call(t,s)||!Tn(e[s],t[s]))return!1}return!0}function hg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fg(e,t){var n=hg(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hg(n)}}function X0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?X0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function J0(){for(var e=window,t=Zl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Zl(e.document)}return t}function Od(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function _P(e){var t=J0(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&X0(n.ownerDocument.documentElement,n)){if(r!==null&&Od(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!e.extend&&a>r&&(s=r,r=a,a=s),s=fg(n,a);var u=fg(n,r);s&&u&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(u.node,u.offset)):(t.setEnd(u.node,u.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var OP=cr&&"documentMode"in document&&11>=document.documentMode,us=null,Xh=null,na=null,Jh=!1;function dg(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jh||us==null||us!==Zl(r)||(r=us,"selectionStart"in r&&Od(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),na&&va(na,r)||(na=r,r=ou(Xh,"onSelect"),0<r.length&&(t=new Pd("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=us)))}function Sl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cs={animationend:Sl("Animation","AnimationEnd"),animationiteration:Sl("Animation","AnimationIteration"),animationstart:Sl("Animation","AnimationStart"),transitionend:Sl("Transition","TransitionEnd")},Yc={},Z0={};cr&&(Z0=document.createElement("div").style,"AnimationEvent"in window||(delete cs.animationend.animation,delete cs.animationiteration.animation,delete cs.animationstart.animation),"TransitionEvent"in window||delete cs.transitionend.transition);function Du(e){if(Yc[e])return Yc[e];if(!cs[e])return e;var t=cs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Z0)return Yc[e]=t[n];return e}var ew=Du("animationend"),tw=Du("animationiteration"),nw=Du("animationstart"),rw=Du("transitionend"),iw=new Map,pg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zr(e,t){iw.set(e,t),Ui(t,[e])}for(var Xc=0;Xc<pg.length;Xc++){var Jc=pg[Xc],kP=Jc.toLowerCase(),xP=Jc[0].toUpperCase()+Jc.slice(1);Zr(kP,"on"+xP)}Zr(ew,"onAnimationEnd");Zr(tw,"onAnimationIteration");Zr(nw,"onAnimationStart");Zr("dblclick","onDoubleClick");Zr("focusin","onFocus");Zr("focusout","onBlur");Zr(rw,"onTransitionEnd");Ws("onMouseEnter",["mouseout","mouseover"]);Ws("onMouseLeave",["mouseout","mouseover"]);Ws("onPointerEnter",["pointerout","pointerover"]);Ws("onPointerLeave",["pointerout","pointerover"]);Ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ui("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MP=new Set("cancel close invalid load scroll toggle".split(" ").concat(qo));function mg(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,kE(r,t,void 0,e),e.currentTarget=null}function sw(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var u=r.length-1;0<=u;u--){var h=r[u],f=h.instance,p=h.currentTarget;if(h=h.listener,f!==a&&s.isPropagationStopped())break e;mg(s,h,p),a=f}else for(u=0;u<r.length;u++){if(h=r[u],f=h.instance,p=h.currentTarget,h=h.listener,f!==a&&s.isPropagationStopped())break e;mg(s,h,p),a=f}}}if(tu)throw e=$h,tu=!1,$h=null,e}function Me(e,t){var n=t[rf];n===void 0&&(n=t[rf]=new Set);var r=e+"__bubble";n.has(r)||(ow(t,e,2,!1),n.add(r))}function Zc(e,t,n){var r=0;t&&(r|=4),ow(n,e,r,t)}var Cl="_reactListening"+Math.random().toString(36).slice(2);function wa(e){if(!e[Cl]){e[Cl]=!0,d0.forEach(function(n){n!=="selectionchange"&&(MP.has(n)||Zc(n,!1,e),Zc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Cl]||(t[Cl]=!0,Zc("selectionchange",!1,t))}}function ow(e,t,n,r){switch(G0(t)){case 1:var s=WE;break;case 4:s=qE;break;default:s=Rd}n=s.bind(null,t,n,e),s=void 0,!qh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function eh(e,t,n,r,s){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var u=r.tag;if(u===3||u===4){var h=r.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(u===4)for(u=r.return;u!==null;){var f=u.tag;if((f===3||f===4)&&(f=u.stateNode.containerInfo,f===s||f.nodeType===8&&f.parentNode===s))return;u=u.return}for(;h!==null;){if(u=gi(h),u===null)return;if(f=u.tag,f===5||f===6){r=a=u;continue e}h=h.parentNode}}r=r.return}k0(function(){var p=a,v=wd(n),y=[];e:{var w=iw.get(e);if(w!==void 0){var P=Pd,_=e;switch(e){case"keypress":if(Bl(n)===0)break e;case"keydown":case"keyup":P=aP;break;case"focusin":_="focus",P=$c;break;case"focusout":_="blur",P=$c;break;case"beforeblur":case"afterblur":P=$c;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=rg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=QE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=cP;break;case ew:case tw:case nw:P=JE;break;case rw:P=fP;break;case"scroll":P=$E;break;case"wheel":P=pP;break;case"copy":case"cut":case"paste":P=eP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=sg}var A=(t&4)!==0,x=!A&&e==="scroll",C=A?w!==null?w+"Capture":null:w;A=[];for(var S=p,E;S!==null;){E=S;var R=E.stateNode;if(E.tag===5&&R!==null&&(E=R,C!==null&&(R=da(S,C),R!=null&&A.push(Sa(S,R,E)))),x)break;S=S.return}0<A.length&&(w=new P(w,_,null,n,v),y.push({event:w,listeners:A}))}}if(!(t&7)){e:{if(w=e==="mouseover"||e==="pointerover",P=e==="mouseout"||e==="pointerout",w&&n!==Hh&&(_=n.relatedTarget||n.fromElement)&&(gi(_)||_[hr]))break e;if((P||w)&&(w=v.window===v?v:(w=v.ownerDocument)?w.defaultView||w.parentWindow:window,P?(_=n.relatedTarget||n.toElement,P=p,_=_?gi(_):null,_!==null&&(x=Fi(_),_!==x||_.tag!==5&&_.tag!==6)&&(_=null)):(P=null,_=p),P!==_)){if(A=rg,R="onMouseLeave",C="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(A=sg,R="onPointerLeave",C="onPointerEnter",S="pointer"),x=P==null?w:hs(P),E=_==null?w:hs(_),w=new A(R,S+"leave",P,n,v),w.target=x,w.relatedTarget=E,R=null,gi(v)===p&&(A=new A(C,S+"enter",_,n,v),A.target=E,A.relatedTarget=x,R=A),x=R,P&&_)t:{for(A=P,C=_,S=0,E=A;E;E=rs(E))S++;for(E=0,R=C;R;R=rs(R))E++;for(;0<S-E;)A=rs(A),S--;for(;0<E-S;)C=rs(C),E--;for(;S--;){if(A===C||C!==null&&A===C.alternate)break t;A=rs(A),C=rs(C)}A=null}else A=null;P!==null&&gg(y,w,P,A,!1),_!==null&&x!==null&&gg(y,x,_,A,!0)}}e:{if(w=p?hs(p):window,P=w.nodeName&&w.nodeName.toLowerCase(),P==="select"||P==="input"&&w.type==="file")var L=CP;else if(lg(w))if(Q0)L=PP;else{L=RP;var j=TP}else(P=w.nodeName)&&P.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(L=EP);if(L&&(L=L(e,p))){K0(y,L,n,v);break e}j&&j(e,w,p),e==="focusout"&&(j=w._wrapperState)&&j.controlled&&w.type==="number"&&Bh(w,"number",w.value)}switch(j=p?hs(p):window,e){case"focusin":(lg(j)||j.contentEditable==="true")&&(us=j,Xh=p,na=null);break;case"focusout":na=Xh=us=null;break;case"mousedown":Jh=!0;break;case"contextmenu":case"mouseup":case"dragend":Jh=!1,dg(y,n,v);break;case"selectionchange":if(OP)break;case"keydown":case"keyup":dg(y,n,v)}var H;if(_d)e:{switch(e){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else ls?q0(e,n)&&(U="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(U="onCompositionStart");U&&(W0&&n.locale!=="ko"&&(ls||U!=="onCompositionStart"?U==="onCompositionEnd"&&ls&&(H=H0()):(Fr=v,Ed="value"in Fr?Fr.value:Fr.textContent,ls=!0)),j=ou(p,U),0<j.length&&(U=new ig(U,e,null,n,v),y.push({event:U,listeners:j}),H?U.data=H:(H=$0(n),H!==null&&(U.data=H)))),(H=gP?yP(e,n):vP(e,n))&&(p=ou(p,"onBeforeInput"),0<p.length&&(v=new ig("onBeforeInput","beforeinput",null,n,v),y.push({event:v,listeners:p}),v.data=H))}sw(y,t)})}function Sa(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ou(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=da(e,n),a!=null&&r.unshift(Sa(e,a,s)),a=da(e,t),a!=null&&r.push(Sa(e,a,s))),e=e.return}return r}function rs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function gg(e,t,n,r,s){for(var a=t._reactName,u=[];n!==null&&n!==r;){var h=n,f=h.alternate,p=h.stateNode;if(f!==null&&f===r)break;h.tag===5&&p!==null&&(h=p,s?(f=da(n,a),f!=null&&u.unshift(Sa(n,f,h))):s||(f=da(n,a),f!=null&&u.push(Sa(n,f,h)))),n=n.return}u.length!==0&&e.push({event:t,listeners:u})}var bP=/\r\n?/g,IP=/\u0000|\uFFFD/g;function yg(e){return(typeof e=="string"?e:""+e).replace(bP,`
`).replace(IP,"")}function Tl(e,t,n){if(t=yg(t),yg(e)!==t&&n)throw Error(z(425))}function au(){}var Zh=null,ef=null;function tf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var nf=typeof setTimeout=="function"?setTimeout:void 0,LP=typeof clearTimeout=="function"?clearTimeout:void 0,vg=typeof Promise=="function"?Promise:void 0,DP=typeof queueMicrotask=="function"?queueMicrotask:typeof vg<"u"?function(e){return vg.resolve(null).then(e).catch(NP)}:nf;function NP(e){setTimeout(function(){throw e})}function th(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),ga(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ga(t)}function Hr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function wg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var so=Math.random().toString(36).slice(2),Fn="__reactFiber$"+so,Ca="__reactProps$"+so,hr="__reactContainer$"+so,rf="__reactEvents$"+so,UP="__reactListeners$"+so,FP="__reactHandles$"+so;function gi(e){var t=e[Fn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hr]||n[Fn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=wg(e);e!==null;){if(n=e[Fn])return n;e=wg(e)}return t}e=n,n=e.parentNode}return null}function Ha(e){return e=e[Fn]||e[hr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function hs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(z(33))}function Nu(e){return e[Ca]||null}var sf=[],fs=-1;function ei(e){return{current:e}}function be(e){0>fs||(e.current=sf[fs],sf[fs]=null,fs--)}function Oe(e,t){fs++,sf[fs]=e.current,e.current=t}var Yr={},wt=ei(Yr),Ut=ei(!1),bi=Yr;function qs(e,t){var n=e.type.contextTypes;if(!n)return Yr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ft(e){return e=e.childContextTypes,e!=null}function lu(){be(Ut),be(wt)}function Sg(e,t,n){if(wt.current!==Yr)throw Error(z(168));Oe(wt,t),Oe(Ut,n)}function aw(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(z(108,TE(e)||"Unknown",s));return Be({},n,r)}function uu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Yr,bi=wt.current,Oe(wt,e),Oe(Ut,Ut.current),!0}function Cg(e,t,n){var r=e.stateNode;if(!r)throw Error(z(169));n?(e=aw(e,t,bi),r.__reactInternalMemoizedMergedChildContext=e,be(Ut),be(wt),Oe(wt,e)):be(Ut),Oe(Ut,n)}var Zn=null,Uu=!1,nh=!1;function lw(e){Zn===null?Zn=[e]:Zn.push(e)}function BP(e){Uu=!0,lw(e)}function ti(){if(!nh&&Zn!==null){nh=!0;var e=0,t=Te;try{var n=Zn;for(Te=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Zn=null,Uu=!1}catch(s){throw Zn!==null&&(Zn=Zn.slice(e+1)),I0(Sd,ti),s}finally{Te=t,nh=!1}}return null}var ds=[],ps=0,cu=null,hu=0,rn=[],sn=0,Ii=null,er=1,tr="";function hi(e,t){ds[ps++]=hu,ds[ps++]=cu,cu=e,hu=t}function uw(e,t,n){rn[sn++]=er,rn[sn++]=tr,rn[sn++]=Ii,Ii=e;var r=er;e=tr;var s=32-Sn(r)-1;r&=~(1<<s),n+=1;var a=32-Sn(t)+s;if(30<a){var u=s-s%5;a=(r&(1<<u)-1).toString(32),r>>=u,s-=u,er=1<<32-Sn(t)+s|n<<s|r,tr=a+e}else er=1<<a|n<<s|r,tr=e}function kd(e){e.return!==null&&(hi(e,1),uw(e,1,0))}function xd(e){for(;e===cu;)cu=ds[--ps],ds[ps]=null,hu=ds[--ps],ds[ps]=null;for(;e===Ii;)Ii=rn[--sn],rn[sn]=null,tr=rn[--sn],rn[sn]=null,er=rn[--sn],rn[sn]=null}var qt=null,Wt=null,Ie=!1,vn=null;function cw(e,t){var n=on(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Tg(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,qt=e,Wt=Hr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,qt=e,Wt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ii!==null?{id:er,overflow:tr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=on(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,qt=e,Wt=null,!0):!1;default:return!1}}function of(e){return(e.mode&1)!==0&&(e.flags&128)===0}function af(e){if(Ie){var t=Wt;if(t){var n=t;if(!Tg(e,t)){if(of(e))throw Error(z(418));t=Hr(n.nextSibling);var r=qt;t&&Tg(e,t)?cw(r,n):(e.flags=e.flags&-4097|2,Ie=!1,qt=e)}}else{if(of(e))throw Error(z(418));e.flags=e.flags&-4097|2,Ie=!1,qt=e}}}function Rg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;qt=e}function Rl(e){if(e!==qt)return!1;if(!Ie)return Rg(e),Ie=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!tf(e.type,e.memoizedProps)),t&&(t=Wt)){if(of(e))throw hw(),Error(z(418));for(;t;)cw(e,t),t=Hr(t.nextSibling)}if(Rg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Wt=Hr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Wt=null}}else Wt=qt?Hr(e.stateNode.nextSibling):null;return!0}function hw(){for(var e=Wt;e;)e=Hr(e.nextSibling)}function $s(){Wt=qt=null,Ie=!1}function Md(e){vn===null?vn=[e]:vn.push(e)}var VP=mr.ReactCurrentBatchConfig;function Lo(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,e));var s=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(u){var h=s.refs;u===null?delete h[a]:h[a]=u},t._stringRef=a,t)}if(typeof e!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,e))}return e}function El(e,t){throw e=Object.prototype.toString.call(t),Error(z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Eg(e){var t=e._init;return t(e._payload)}function fw(e){function t(C,S){if(e){var E=C.deletions;E===null?(C.deletions=[S],C.flags|=16):E.push(S)}}function n(C,S){if(!e)return null;for(;S!==null;)t(C,S),S=S.sibling;return null}function r(C,S){for(C=new Map;S!==null;)S.key!==null?C.set(S.key,S):C.set(S.index,S),S=S.sibling;return C}function s(C,S){return C=Kr(C,S),C.index=0,C.sibling=null,C}function a(C,S,E){return C.index=E,e?(E=C.alternate,E!==null?(E=E.index,E<S?(C.flags|=2,S):E):(C.flags|=2,S)):(C.flags|=1048576,S)}function u(C){return e&&C.alternate===null&&(C.flags|=2),C}function h(C,S,E,R){return S===null||S.tag!==6?(S=uh(E,C.mode,R),S.return=C,S):(S=s(S,E),S.return=C,S)}function f(C,S,E,R){var L=E.type;return L===as?v(C,S,E.props.children,R,E.key):S!==null&&(S.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Or&&Eg(L)===S.type)?(R=s(S,E.props),R.ref=Lo(C,S,E),R.return=C,R):(R=ql(E.type,E.key,E.props,null,C.mode,R),R.ref=Lo(C,S,E),R.return=C,R)}function p(C,S,E,R){return S===null||S.tag!==4||S.stateNode.containerInfo!==E.containerInfo||S.stateNode.implementation!==E.implementation?(S=ch(E,C.mode,R),S.return=C,S):(S=s(S,E.children||[]),S.return=C,S)}function v(C,S,E,R,L){return S===null||S.tag!==7?(S=ki(E,C.mode,R,L),S.return=C,S):(S=s(S,E),S.return=C,S)}function y(C,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return S=uh(""+S,C.mode,E),S.return=C,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case dl:return E=ql(S.type,S.key,S.props,null,C.mode,E),E.ref=Lo(C,null,S),E.return=C,E;case os:return S=ch(S,C.mode,E),S.return=C,S;case Or:var R=S._init;return y(C,R(S._payload),E)}if(Ho(S)||ko(S))return S=ki(S,C.mode,E,null),S.return=C,S;El(C,S)}return null}function w(C,S,E,R){var L=S!==null?S.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return L!==null?null:h(C,S,""+E,R);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case dl:return E.key===L?f(C,S,E,R):null;case os:return E.key===L?p(C,S,E,R):null;case Or:return L=E._init,w(C,S,L(E._payload),R)}if(Ho(E)||ko(E))return L!==null?null:v(C,S,E,R,null);El(C,E)}return null}function P(C,S,E,R,L){if(typeof R=="string"&&R!==""||typeof R=="number")return C=C.get(E)||null,h(S,C,""+R,L);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case dl:return C=C.get(R.key===null?E:R.key)||null,f(S,C,R,L);case os:return C=C.get(R.key===null?E:R.key)||null,p(S,C,R,L);case Or:var j=R._init;return P(C,S,E,j(R._payload),L)}if(Ho(R)||ko(R))return C=C.get(E)||null,v(S,C,R,L,null);El(S,R)}return null}function _(C,S,E,R){for(var L=null,j=null,H=S,U=S=0,J=null;H!==null&&U<E.length;U++){H.index>U?(J=H,H=null):J=H.sibling;var Y=w(C,H,E[U],R);if(Y===null){H===null&&(H=J);break}e&&H&&Y.alternate===null&&t(C,H),S=a(Y,S,U),j===null?L=Y:j.sibling=Y,j=Y,H=J}if(U===E.length)return n(C,H),Ie&&hi(C,U),L;if(H===null){for(;U<E.length;U++)H=y(C,E[U],R),H!==null&&(S=a(H,S,U),j===null?L=H:j.sibling=H,j=H);return Ie&&hi(C,U),L}for(H=r(C,H);U<E.length;U++)J=P(H,C,U,E[U],R),J!==null&&(e&&J.alternate!==null&&H.delete(J.key===null?U:J.key),S=a(J,S,U),j===null?L=J:j.sibling=J,j=J);return e&&H.forEach(function(m){return t(C,m)}),Ie&&hi(C,U),L}function A(C,S,E,R){var L=ko(E);if(typeof L!="function")throw Error(z(150));if(E=L.call(E),E==null)throw Error(z(151));for(var j=L=null,H=S,U=S=0,J=null,Y=E.next();H!==null&&!Y.done;U++,Y=E.next()){H.index>U?(J=H,H=null):J=H.sibling;var m=w(C,H,Y.value,R);if(m===null){H===null&&(H=J);break}e&&H&&m.alternate===null&&t(C,H),S=a(m,S,U),j===null?L=m:j.sibling=m,j=m,H=J}if(Y.done)return n(C,H),Ie&&hi(C,U),L;if(H===null){for(;!Y.done;U++,Y=E.next())Y=y(C,Y.value,R),Y!==null&&(S=a(Y,S,U),j===null?L=Y:j.sibling=Y,j=Y);return Ie&&hi(C,U),L}for(H=r(C,H);!Y.done;U++,Y=E.next())Y=P(H,C,U,Y.value,R),Y!==null&&(e&&Y.alternate!==null&&H.delete(Y.key===null?U:Y.key),S=a(Y,S,U),j===null?L=Y:j.sibling=Y,j=Y);return e&&H.forEach(function(Ae){return t(C,Ae)}),Ie&&hi(C,U),L}function x(C,S,E,R){if(typeof E=="object"&&E!==null&&E.type===as&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case dl:e:{for(var L=E.key,j=S;j!==null;){if(j.key===L){if(L=E.type,L===as){if(j.tag===7){n(C,j.sibling),S=s(j,E.props.children),S.return=C,C=S;break e}}else if(j.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Or&&Eg(L)===j.type){n(C,j.sibling),S=s(j,E.props),S.ref=Lo(C,j,E),S.return=C,C=S;break e}n(C,j);break}else t(C,j);j=j.sibling}E.type===as?(S=ki(E.props.children,C.mode,R,E.key),S.return=C,C=S):(R=ql(E.type,E.key,E.props,null,C.mode,R),R.ref=Lo(C,S,E),R.return=C,C=R)}return u(C);case os:e:{for(j=E.key;S!==null;){if(S.key===j)if(S.tag===4&&S.stateNode.containerInfo===E.containerInfo&&S.stateNode.implementation===E.implementation){n(C,S.sibling),S=s(S,E.children||[]),S.return=C,C=S;break e}else{n(C,S);break}else t(C,S);S=S.sibling}S=ch(E,C.mode,R),S.return=C,C=S}return u(C);case Or:return j=E._init,x(C,S,j(E._payload),R)}if(Ho(E))return _(C,S,E,R);if(ko(E))return A(C,S,E,R);El(C,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,S!==null&&S.tag===6?(n(C,S.sibling),S=s(S,E),S.return=C,C=S):(n(C,S),S=uh(E,C.mode,R),S.return=C,C=S),u(C)):n(C,S)}return x}var Ks=fw(!0),dw=fw(!1),fu=ei(null),du=null,ms=null,bd=null;function Id(){bd=ms=du=null}function Ld(e){var t=fu.current;be(fu),e._currentValue=t}function lf(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function _s(e,t){du=e,bd=ms=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Nt=!0),e.firstContext=null)}function ln(e){var t=e._currentValue;if(bd!==e)if(e={context:e,memoizedValue:t,next:null},ms===null){if(du===null)throw Error(z(308));ms=e,du.dependencies={lanes:0,firstContext:e}}else ms=ms.next=e;return t}var yi=null;function Dd(e){yi===null?yi=[e]:yi.push(e)}function pw(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Dd(t)):(n.next=s.next,s.next=n),t.interleaved=n,fr(e,r)}function fr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var kr=!1;function Nd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mw(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ir(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Wr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ve&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,fr(e,n)}return s=r.interleaved,s===null?(t.next=t,Dd(r)):(t.next=s.next,s.next=t),r.interleaved=t,fr(e,n)}function Vl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Cd(e,n)}}function Pg(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var u={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=u:a=a.next=u,n=n.next}while(n!==null);a===null?s=a=t:a=a.next=t}else s=a=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function pu(e,t,n,r){var s=e.updateQueue;kr=!1;var a=s.firstBaseUpdate,u=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var f=h,p=f.next;f.next=null,u===null?a=p:u.next=p,u=f;var v=e.alternate;v!==null&&(v=v.updateQueue,h=v.lastBaseUpdate,h!==u&&(h===null?v.firstBaseUpdate=p:h.next=p,v.lastBaseUpdate=f))}if(a!==null){var y=s.baseState;u=0,v=p=f=null,h=a;do{var w=h.lane,P=h.eventTime;if((r&w)===w){v!==null&&(v=v.next={eventTime:P,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var _=e,A=h;switch(w=t,P=n,A.tag){case 1:if(_=A.payload,typeof _=="function"){y=_.call(P,y,w);break e}y=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=A.payload,w=typeof _=="function"?_.call(P,y,w):_,w==null)break e;y=Be({},y,w);break e;case 2:kr=!0}}h.callback!==null&&h.lane!==0&&(e.flags|=64,w=s.effects,w===null?s.effects=[h]:w.push(h))}else P={eventTime:P,lane:w,tag:h.tag,payload:h.payload,callback:h.callback,next:null},v===null?(p=v=P,f=y):v=v.next=P,u|=w;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;w=h,h=w.next,w.next=null,s.lastBaseUpdate=w,s.shared.pending=null}}while(!0);if(v===null&&(f=y),s.baseState=f,s.firstBaseUpdate=p,s.lastBaseUpdate=v,t=s.shared.interleaved,t!==null){s=t;do u|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);Di|=u,e.lanes=u,e.memoizedState=y}}function Ag(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var Wa={},Vn=ei(Wa),Ta=ei(Wa),Ra=ei(Wa);function vi(e){if(e===Wa)throw Error(z(174));return e}function Ud(e,t){switch(Oe(Ra,t),Oe(Ta,e),Oe(Vn,Wa),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:jh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=jh(t,e)}be(Vn),Oe(Vn,t)}function Qs(){be(Vn),be(Ta),be(Ra)}function gw(e){vi(Ra.current);var t=vi(Vn.current),n=jh(t,e.type);t!==n&&(Oe(Ta,e),Oe(Vn,n))}function Fd(e){Ta.current===e&&(be(Vn),be(Ta))}var Ne=ei(0);function mu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var rh=[];function Bd(){for(var e=0;e<rh.length;e++)rh[e]._workInProgressVersionPrimary=null;rh.length=0}var jl=mr.ReactCurrentDispatcher,ih=mr.ReactCurrentBatchConfig,Li=0,Fe=null,Je=null,nt=null,gu=!1,ra=!1,Ea=0,jP=0;function ft(){throw Error(z(321))}function Vd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Tn(e[n],t[n]))return!1;return!0}function jd(e,t,n,r,s,a){if(Li=a,Fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,jl.current=e===null||e.memoizedState===null?WP:qP,e=n(r,s),ra){a=0;do{if(ra=!1,Ea=0,25<=a)throw Error(z(301));a+=1,nt=Je=null,t.updateQueue=null,jl.current=$P,e=n(r,s)}while(ra)}if(jl.current=yu,t=Je!==null&&Je.next!==null,Li=0,nt=Je=Fe=null,gu=!1,t)throw Error(z(300));return e}function zd(){var e=Ea!==0;return Ea=0,e}function Mn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?Fe.memoizedState=nt=e:nt=nt.next=e,nt}function un(){if(Je===null){var e=Fe.alternate;e=e!==null?e.memoizedState:null}else e=Je.next;var t=nt===null?Fe.memoizedState:nt.next;if(t!==null)nt=t,Je=e;else{if(e===null)throw Error(z(310));Je=e,e={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},nt===null?Fe.memoizedState=nt=e:nt=nt.next=e}return nt}function Pa(e,t){return typeof t=="function"?t(e):t}function sh(e){var t=un(),n=t.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=e;var r=Je,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var u=s.next;s.next=a.next,a.next=u}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var h=u=null,f=null,p=a;do{var v=p.lane;if((Li&v)===v)f!==null&&(f=f.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:e(r,p.action);else{var y={lane:v,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};f===null?(h=f=y,u=r):f=f.next=y,Fe.lanes|=v,Di|=v}p=p.next}while(p!==null&&p!==a);f===null?u=r:f.next=h,Tn(r,t.memoizedState)||(Nt=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=f,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do a=s.lane,Fe.lanes|=a,Di|=a,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function oh(e){var t=un(),n=t.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(s!==null){n.pending=null;var u=s=s.next;do a=e(a,u.action),u=u.next;while(u!==s);Tn(a,t.memoizedState)||(Nt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function yw(){}function vw(e,t){var n=Fe,r=un(),s=t(),a=!Tn(r.memoizedState,s);if(a&&(r.memoizedState=s,Nt=!0),r=r.queue,Gd(Cw.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||nt!==null&&nt.memoizedState.tag&1){if(n.flags|=2048,Aa(9,Sw.bind(null,n,r,s,t),void 0,null),rt===null)throw Error(z(349));Li&30||ww(n,t,s)}return s}function ww(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Sw(e,t,n,r){t.value=n,t.getSnapshot=r,Tw(t)&&Rw(e)}function Cw(e,t,n){return n(function(){Tw(t)&&Rw(e)})}function Tw(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Tn(e,n)}catch{return!0}}function Rw(e){var t=fr(e,1);t!==null&&Cn(t,e,1,-1)}function _g(e){var t=Mn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:e},t.queue=e,e=e.dispatch=HP.bind(null,Fe,e),[t.memoizedState,e]}function Aa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Ew(){return un().memoizedState}function zl(e,t,n,r){var s=Mn();Fe.flags|=e,s.memoizedState=Aa(1|t,n,void 0,r===void 0?null:r)}function Fu(e,t,n,r){var s=un();r=r===void 0?null:r;var a=void 0;if(Je!==null){var u=Je.memoizedState;if(a=u.destroy,r!==null&&Vd(r,u.deps)){s.memoizedState=Aa(t,n,a,r);return}}Fe.flags|=e,s.memoizedState=Aa(1|t,n,a,r)}function Og(e,t){return zl(8390656,8,e,t)}function Gd(e,t){return Fu(2048,8,e,t)}function Pw(e,t){return Fu(4,2,e,t)}function Aw(e,t){return Fu(4,4,e,t)}function _w(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ow(e,t,n){return n=n!=null?n.concat([e]):null,Fu(4,4,_w.bind(null,t,e),n)}function Hd(){}function kw(e,t){var n=un();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Vd(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function xw(e,t){var n=un();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Vd(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Mw(e,t,n){return Li&21?(Tn(n,t)||(n=N0(),Fe.lanes|=n,Di|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Nt=!0),e.memoizedState=n)}function zP(e,t){var n=Te;Te=n!==0&&4>n?n:4,e(!0);var r=ih.transition;ih.transition={};try{e(!1),t()}finally{Te=n,ih.transition=r}}function bw(){return un().memoizedState}function GP(e,t,n){var r=$r(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Iw(e))Lw(t,n);else if(n=pw(e,t,n,r),n!==null){var s=Pt();Cn(n,e,r,s),Dw(n,t,r)}}function HP(e,t,n){var r=$r(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Iw(e))Lw(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var u=t.lastRenderedState,h=a(u,n);if(s.hasEagerState=!0,s.eagerState=h,Tn(h,u)){var f=t.interleaved;f===null?(s.next=s,Dd(t)):(s.next=f.next,f.next=s),t.interleaved=s;return}}catch{}finally{}n=pw(e,t,s,r),n!==null&&(s=Pt(),Cn(n,e,r,s),Dw(n,t,r))}}function Iw(e){var t=e.alternate;return e===Fe||t!==null&&t===Fe}function Lw(e,t){ra=gu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Dw(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Cd(e,n)}}var yu={readContext:ln,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},WP={readContext:ln,useCallback:function(e,t){return Mn().memoizedState=[e,t===void 0?null:t],e},useContext:ln,useEffect:Og,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,zl(4194308,4,_w.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zl(4194308,4,e,t)},useInsertionEffect:function(e,t){return zl(4,2,e,t)},useMemo:function(e,t){var n=Mn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Mn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=GP.bind(null,Fe,e),[r.memoizedState,e]},useRef:function(e){var t=Mn();return e={current:e},t.memoizedState=e},useState:_g,useDebugValue:Hd,useDeferredValue:function(e){return Mn().memoizedState=e},useTransition:function(){var e=_g(!1),t=e[0];return e=zP.bind(null,e[1]),Mn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Fe,s=Mn();if(Ie){if(n===void 0)throw Error(z(407));n=n()}else{if(n=t(),rt===null)throw Error(z(349));Li&30||ww(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,Og(Cw.bind(null,r,a,e),[e]),r.flags|=2048,Aa(9,Sw.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Mn(),t=rt.identifierPrefix;if(Ie){var n=tr,r=er;n=(r&~(1<<32-Sn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ea++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=jP++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},qP={readContext:ln,useCallback:kw,useContext:ln,useEffect:Gd,useImperativeHandle:Ow,useInsertionEffect:Pw,useLayoutEffect:Aw,useMemo:xw,useReducer:sh,useRef:Ew,useState:function(){return sh(Pa)},useDebugValue:Hd,useDeferredValue:function(e){var t=un();return Mw(t,Je.memoizedState,e)},useTransition:function(){var e=sh(Pa)[0],t=un().memoizedState;return[e,t]},useMutableSource:yw,useSyncExternalStore:vw,useId:bw,unstable_isNewReconciler:!1},$P={readContext:ln,useCallback:kw,useContext:ln,useEffect:Gd,useImperativeHandle:Ow,useInsertionEffect:Pw,useLayoutEffect:Aw,useMemo:xw,useReducer:oh,useRef:Ew,useState:function(){return oh(Pa)},useDebugValue:Hd,useDeferredValue:function(e){var t=un();return Je===null?t.memoizedState=e:Mw(t,Je.memoizedState,e)},useTransition:function(){var e=oh(Pa)[0],t=un().memoizedState;return[e,t]},useMutableSource:yw,useSyncExternalStore:vw,useId:bw,unstable_isNewReconciler:!1};function mn(e,t){if(e&&e.defaultProps){t=Be({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function uf(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Be({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Bu={isMounted:function(e){return(e=e._reactInternals)?Fi(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Pt(),s=$r(e),a=ir(r,s);a.payload=t,n!=null&&(a.callback=n),t=Wr(e,a,s),t!==null&&(Cn(t,e,s,r),Vl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Pt(),s=$r(e),a=ir(r,s);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Wr(e,a,s),t!==null&&(Cn(t,e,s,r),Vl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Pt(),r=$r(e),s=ir(n,r);s.tag=2,t!=null&&(s.callback=t),t=Wr(e,s,r),t!==null&&(Cn(t,e,r,n),Vl(t,e,r))}};function kg(e,t,n,r,s,a,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,u):t.prototype&&t.prototype.isPureReactComponent?!va(n,r)||!va(s,a):!0}function Nw(e,t,n){var r=!1,s=Yr,a=t.contextType;return typeof a=="object"&&a!==null?a=ln(a):(s=Ft(t)?bi:wt.current,r=t.contextTypes,a=(r=r!=null)?qs(e,s):Yr),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Bu,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function xg(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bu.enqueueReplaceState(t,t.state,null)}function cf(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Nd(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=ln(a):(a=Ft(t)?bi:wt.current,s.context=qs(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(uf(e,t,a,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Bu.enqueueReplaceState(s,s.state,null),pu(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ys(e,t){try{var n="",r=t;do n+=CE(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function ah(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function hf(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var KP=typeof WeakMap=="function"?WeakMap:Map;function Uw(e,t,n){n=ir(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){wu||(wu=!0,Cf=r),hf(e,t)},n}function Fw(e,t,n){n=ir(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){hf(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){hf(e,t),typeof r!="function"&&(qr===null?qr=new Set([this]):qr.add(this));var u=t.stack;this.componentDidCatch(t.value,{componentStack:u!==null?u:""})}),n}function Mg(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new KP;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=lA.bind(null,e,t,n),t.then(e,e))}function bg(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ig(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ir(-1,1),t.tag=2,Wr(n,t,1))),n.lanes|=1),e)}var QP=mr.ReactCurrentOwner,Nt=!1;function Et(e,t,n,r){t.child=e===null?dw(t,null,n,r):Ks(t,e.child,n,r)}function Lg(e,t,n,r,s){n=n.render;var a=t.ref;return _s(t,s),r=jd(e,t,n,r,a,s),n=zd(),e!==null&&!Nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,dr(e,t,s)):(Ie&&n&&kd(t),t.flags|=1,Et(e,t,r,s),t.child)}function Dg(e,t,n,r,s){if(e===null){var a=n.type;return typeof a=="function"&&!Jd(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,Bw(e,t,a,r,s)):(e=ql(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var u=a.memoizedProps;if(n=n.compare,n=n!==null?n:va,n(u,r)&&e.ref===t.ref)return dr(e,t,s)}return t.flags|=1,e=Kr(a,r),e.ref=t.ref,e.return=t,t.child=e}function Bw(e,t,n,r,s){if(e!==null){var a=e.memoizedProps;if(va(a,r)&&e.ref===t.ref)if(Nt=!1,t.pendingProps=r=a,(e.lanes&s)!==0)e.flags&131072&&(Nt=!0);else return t.lanes=e.lanes,dr(e,t,s)}return ff(e,t,n,r,s)}function Vw(e,t,n){var r=t.pendingProps,s=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(ys,Ht),Ht|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Oe(ys,Ht),Ht|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Oe(ys,Ht),Ht|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,Oe(ys,Ht),Ht|=r;return Et(e,t,s,n),t.child}function jw(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ff(e,t,n,r,s){var a=Ft(n)?bi:wt.current;return a=qs(t,a),_s(t,s),n=jd(e,t,n,r,a,s),r=zd(),e!==null&&!Nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,dr(e,t,s)):(Ie&&r&&kd(t),t.flags|=1,Et(e,t,n,s),t.child)}function Ng(e,t,n,r,s){if(Ft(n)){var a=!0;uu(t)}else a=!1;if(_s(t,s),t.stateNode===null)Gl(e,t),Nw(t,n,r),cf(t,n,r,s),r=!0;else if(e===null){var u=t.stateNode,h=t.memoizedProps;u.props=h;var f=u.context,p=n.contextType;typeof p=="object"&&p!==null?p=ln(p):(p=Ft(n)?bi:wt.current,p=qs(t,p));var v=n.getDerivedStateFromProps,y=typeof v=="function"||typeof u.getSnapshotBeforeUpdate=="function";y||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==r||f!==p)&&xg(t,u,r,p),kr=!1;var w=t.memoizedState;u.state=w,pu(t,r,u,s),f=t.memoizedState,h!==r||w!==f||Ut.current||kr?(typeof v=="function"&&(uf(t,n,v,r),f=t.memoizedState),(h=kr||kg(t,n,h,r,w,f,p))?(y||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=f),u.props=r,u.state=f,u.context=p,r=h):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{u=t.stateNode,mw(e,t),h=t.memoizedProps,p=t.type===t.elementType?h:mn(t.type,h),u.props=p,y=t.pendingProps,w=u.context,f=n.contextType,typeof f=="object"&&f!==null?f=ln(f):(f=Ft(n)?bi:wt.current,f=qs(t,f));var P=n.getDerivedStateFromProps;(v=typeof P=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==y||w!==f)&&xg(t,u,r,f),kr=!1,w=t.memoizedState,u.state=w,pu(t,r,u,s);var _=t.memoizedState;h!==y||w!==_||Ut.current||kr?(typeof P=="function"&&(uf(t,n,P,r),_=t.memoizedState),(p=kr||kg(t,n,p,r,w,_,f)||!1)?(v||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,_,f),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,_,f)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=_),u.props=r,u.state=_,u.context=f,r=p):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),r=!1)}return df(e,t,n,r,a,s)}function df(e,t,n,r,s,a){jw(e,t);var u=(t.flags&128)!==0;if(!r&&!u)return s&&Cg(t,n,!1),dr(e,t,a);r=t.stateNode,QP.current=t;var h=u&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&u?(t.child=Ks(t,e.child,null,a),t.child=Ks(t,null,h,a)):Et(e,t,h,a),t.memoizedState=r.state,s&&Cg(t,n,!0),t.child}function zw(e){var t=e.stateNode;t.pendingContext?Sg(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Sg(e,t.context,!1),Ud(e,t.containerInfo)}function Ug(e,t,n,r,s){return $s(),Md(s),t.flags|=256,Et(e,t,n,r),t.child}var pf={dehydrated:null,treeContext:null,retryLane:0};function mf(e){return{baseLanes:e,cachePool:null,transitions:null}}function Gw(e,t,n){var r=t.pendingProps,s=Ne.current,a=!1,u=(t.flags&128)!==0,h;if((h=u)||(h=e!==null&&e.memoizedState===null?!1:(s&2)!==0),h?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Oe(Ne,s&1),e===null)return af(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(u=r.children,e=r.fallback,a?(r=t.mode,a=t.child,u={mode:"hidden",children:u},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=u):a=zu(u,r,0,null),e=ki(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=mf(n),t.memoizedState=pf,e):Wd(t,u));if(s=e.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return YP(e,t,u,r,h,s,n);if(a){a=r.fallback,u=t.mode,s=e.child,h=s.sibling;var f={mode:"hidden",children:r.children};return!(u&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=f,t.deletions=null):(r=Kr(s,f),r.subtreeFlags=s.subtreeFlags&14680064),h!==null?a=Kr(h,a):(a=ki(a,u,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,u=e.child.memoizedState,u=u===null?mf(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},a.memoizedState=u,a.childLanes=e.childLanes&~n,t.memoizedState=pf,r}return a=e.child,e=a.sibling,r=Kr(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Wd(e,t){return t=zu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Pl(e,t,n,r){return r!==null&&Md(r),Ks(t,e.child,null,n),e=Wd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function YP(e,t,n,r,s,a,u){if(n)return t.flags&256?(t.flags&=-257,r=ah(Error(z(422))),Pl(e,t,u,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=zu({mode:"visible",children:r.children},s,0,null),a=ki(a,s,u,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&Ks(t,e.child,null,u),t.child.memoizedState=mf(u),t.memoizedState=pf,a);if(!(t.mode&1))return Pl(e,t,u,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var h=r.dgst;return r=h,a=Error(z(419)),r=ah(a,r,void 0),Pl(e,t,u,r)}if(h=(u&e.childLanes)!==0,Nt||h){if(r=rt,r!==null){switch(u&-u){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|u)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,fr(e,s),Cn(r,e,s,-1))}return Xd(),r=ah(Error(z(421))),Pl(e,t,u,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=uA.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,Wt=Hr(s.nextSibling),qt=t,Ie=!0,vn=null,e!==null&&(rn[sn++]=er,rn[sn++]=tr,rn[sn++]=Ii,er=e.id,tr=e.overflow,Ii=t),t=Wd(t,r.children),t.flags|=4096,t)}function Fg(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),lf(e.return,t,n)}function lh(e,t,n,r,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function Hw(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;if(Et(e,t,r.children,n),r=Ne.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fg(e,n,t);else if(e.tag===19)Fg(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Oe(Ne,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&mu(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),lh(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&mu(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}lh(t,!0,n,null,a);break;case"together":lh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function dr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Di|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(z(153));if(t.child!==null){for(e=t.child,n=Kr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Kr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function XP(e,t,n){switch(t.tag){case 3:zw(t),$s();break;case 5:gw(t);break;case 1:Ft(t.type)&&uu(t);break;case 4:Ud(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Oe(fu,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Oe(Ne,Ne.current&1),t.flags|=128,null):n&t.child.childLanes?Gw(e,t,n):(Oe(Ne,Ne.current&1),e=dr(e,t,n),e!==null?e.sibling:null);Oe(Ne,Ne.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Hw(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Oe(Ne,Ne.current),r)break;return null;case 22:case 23:return t.lanes=0,Vw(e,t,n)}return dr(e,t,n)}var Ww,gf,qw,$w;Ww=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gf=function(){};qw=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,vi(Vn.current);var a=null;switch(n){case"input":s=Uh(e,s),r=Uh(e,r),a=[];break;case"select":s=Be({},s,{value:void 0}),r=Be({},r,{value:void 0}),a=[];break;case"textarea":s=Vh(e,s),r=Vh(e,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=au)}zh(n,r);var u;n=null;for(p in s)if(!r.hasOwnProperty(p)&&s.hasOwnProperty(p)&&s[p]!=null)if(p==="style"){var h=s[p];for(u in h)h.hasOwnProperty(u)&&(n||(n={}),n[u]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(ha.hasOwnProperty(p)?a||(a=[]):(a=a||[]).push(p,null));for(p in r){var f=r[p];if(h=s!=null?s[p]:void 0,r.hasOwnProperty(p)&&f!==h&&(f!=null||h!=null))if(p==="style")if(h){for(u in h)!h.hasOwnProperty(u)||f&&f.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in f)f.hasOwnProperty(u)&&h[u]!==f[u]&&(n||(n={}),n[u]=f[u])}else n||(a||(a=[]),a.push(p,n)),n=f;else p==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,h=h?h.__html:void 0,f!=null&&h!==f&&(a=a||[]).push(p,f)):p==="children"?typeof f!="string"&&typeof f!="number"||(a=a||[]).push(p,""+f):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(ha.hasOwnProperty(p)?(f!=null&&p==="onScroll"&&Me("scroll",e),a||h===f||(a=[])):(a=a||[]).push(p,f))}n&&(a=a||[]).push("style",n);var p=a;(t.updateQueue=p)&&(t.flags|=4)}};$w=function(e,t,n,r){n!==r&&(t.flags|=4)};function Do(e,t){if(!Ie)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function JP(e,t,n){var r=t.pendingProps;switch(xd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(t),null;case 1:return Ft(t.type)&&lu(),dt(t),null;case 3:return r=t.stateNode,Qs(),be(Ut),be(wt),Bd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Rl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,vn!==null&&(Ef(vn),vn=null))),gf(e,t),dt(t),null;case 5:Fd(t);var s=vi(Ra.current);if(n=t.type,e!==null&&t.stateNode!=null)qw(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(z(166));return dt(t),null}if(e=vi(Vn.current),Rl(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Fn]=t,r[Ca]=a,e=(t.mode&1)!==0,n){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(s=0;s<qo.length;s++)Me(qo[s],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":$m(r,a),Me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Me("invalid",r);break;case"textarea":Qm(r,a),Me("invalid",r)}zh(n,a),s=null;for(var u in a)if(a.hasOwnProperty(u)){var h=a[u];u==="children"?typeof h=="string"?r.textContent!==h&&(a.suppressHydrationWarning!==!0&&Tl(r.textContent,h,e),s=["children",h]):typeof h=="number"&&r.textContent!==""+h&&(a.suppressHydrationWarning!==!0&&Tl(r.textContent,h,e),s=["children",""+h]):ha.hasOwnProperty(u)&&h!=null&&u==="onScroll"&&Me("scroll",r)}switch(n){case"input":pl(r),Km(r,a,!0);break;case"textarea":pl(r),Ym(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=au)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{u=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=C0(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),n==="select"&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[Fn]=t,e[Ca]=r,Ww(e,t,!1,!1),t.stateNode=e;e:{switch(u=Gh(n,r),n){case"dialog":Me("cancel",e),Me("close",e),s=r;break;case"iframe":case"object":case"embed":Me("load",e),s=r;break;case"video":case"audio":for(s=0;s<qo.length;s++)Me(qo[s],e);s=r;break;case"source":Me("error",e),s=r;break;case"img":case"image":case"link":Me("error",e),Me("load",e),s=r;break;case"details":Me("toggle",e),s=r;break;case"input":$m(e,r),s=Uh(e,r),Me("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Be({},r,{value:void 0}),Me("invalid",e);break;case"textarea":Qm(e,r),s=Vh(e,r),Me("invalid",e);break;default:s=r}zh(n,s),h=s;for(a in h)if(h.hasOwnProperty(a)){var f=h[a];a==="style"?E0(e,f):a==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&T0(e,f)):a==="children"?typeof f=="string"?(n!=="textarea"||f!=="")&&fa(e,f):typeof f=="number"&&fa(e,""+f):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ha.hasOwnProperty(a)?f!=null&&a==="onScroll"&&Me("scroll",e):f!=null&&md(e,a,f,u))}switch(n){case"input":pl(e),Km(e,r,!1);break;case"textarea":pl(e),Ym(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Qr(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?Rs(e,!!r.multiple,a,!1):r.defaultValue!=null&&Rs(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=au)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return dt(t),null;case 6:if(e&&t.stateNode!=null)$w(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(z(166));if(n=vi(Ra.current),vi(Vn.current),Rl(t)){if(r=t.stateNode,n=t.memoizedProps,r[Fn]=t,(a=r.nodeValue!==n)&&(e=qt,e!==null))switch(e.tag){case 3:Tl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Tl(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Fn]=t,t.stateNode=r}return dt(t),null;case 13:if(be(Ne),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ie&&Wt!==null&&t.mode&1&&!(t.flags&128))hw(),$s(),t.flags|=98560,a=!1;else if(a=Rl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(z(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(z(317));a[Fn]=t}else $s(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;dt(t),a=!1}else vn!==null&&(Ef(vn),vn=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ne.current&1?Ze===0&&(Ze=3):Xd())),t.updateQueue!==null&&(t.flags|=4),dt(t),null);case 4:return Qs(),gf(e,t),e===null&&wa(t.stateNode.containerInfo),dt(t),null;case 10:return Ld(t.type._context),dt(t),null;case 17:return Ft(t.type)&&lu(),dt(t),null;case 19:if(be(Ne),a=t.memoizedState,a===null)return dt(t),null;if(r=(t.flags&128)!==0,u=a.rendering,u===null)if(r)Do(a,!1);else{if(Ze!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(u=mu(e),u!==null){for(t.flags|=128,Do(a,!1),r=u.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,u=a.alternate,u===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,e=u.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Oe(Ne,Ne.current&1|2),t.child}e=e.sibling}a.tail!==null&&He()>Xs&&(t.flags|=128,r=!0,Do(a,!1),t.lanes=4194304)}else{if(!r)if(e=mu(u),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Do(a,!0),a.tail===null&&a.tailMode==="hidden"&&!u.alternate&&!Ie)return dt(t),null}else 2*He()-a.renderingStartTime>Xs&&n!==1073741824&&(t.flags|=128,r=!0,Do(a,!1),t.lanes=4194304);a.isBackwards?(u.sibling=t.child,t.child=u):(n=a.last,n!==null?n.sibling=u:t.child=u,a.last=u)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=He(),t.sibling=null,n=Ne.current,Oe(Ne,r?n&1|2:n&1),t):(dt(t),null);case 22:case 23:return Yd(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ht&1073741824&&(dt(t),t.subtreeFlags&6&&(t.flags|=8192)):dt(t),null;case 24:return null;case 25:return null}throw Error(z(156,t.tag))}function ZP(e,t){switch(xd(t),t.tag){case 1:return Ft(t.type)&&lu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Qs(),be(Ut),be(wt),Bd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Fd(t),null;case 13:if(be(Ne),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(z(340));$s()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return be(Ne),null;case 4:return Qs(),null;case 10:return Ld(t.type._context),null;case 22:case 23:return Yd(),null;case 24:return null;default:return null}}var Al=!1,gt=!1,eA=typeof WeakSet=="function"?WeakSet:Set,$=null;function gs(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){je(e,t,r)}else n.current=null}function yf(e,t,n){try{n()}catch(r){je(e,t,r)}}var Bg=!1;function tA(e,t){if(Zh=iu,e=J0(),Od(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var u=0,h=-1,f=-1,p=0,v=0,y=e,w=null;t:for(;;){for(var P;y!==n||s!==0&&y.nodeType!==3||(h=u+s),y!==a||r!==0&&y.nodeType!==3||(f=u+r),y.nodeType===3&&(u+=y.nodeValue.length),(P=y.firstChild)!==null;)w=y,y=P;for(;;){if(y===e)break t;if(w===n&&++p===s&&(h=u),w===a&&++v===r&&(f=u),(P=y.nextSibling)!==null)break;y=w,w=y.parentNode}y=P}n=h===-1||f===-1?null:{start:h,end:f}}else n=null}n=n||{start:0,end:0}}else n=null;for(ef={focusedElem:e,selectionRange:n},iu=!1,$=t;$!==null;)if(t=$,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$=e;else for(;$!==null;){t=$;try{var _=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var A=_.memoizedProps,x=_.memoizedState,C=t.stateNode,S=C.getSnapshotBeforeUpdate(t.elementType===t.type?A:mn(t.type,A),x);C.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var E=t.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(R){je(t,t.return,R)}if(e=t.sibling,e!==null){e.return=t.return,$=e;break}$=t.return}return _=Bg,Bg=!1,_}function ia(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&yf(t,n,a)}s=s.next}while(s!==r)}}function Vu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function vf(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Kw(e){var t=e.alternate;t!==null&&(e.alternate=null,Kw(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Fn],delete t[Ca],delete t[rf],delete t[UP],delete t[FP])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Qw(e){return e.tag===5||e.tag===3||e.tag===4}function Vg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Qw(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wf(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=au));else if(r!==4&&(e=e.child,e!==null))for(wf(e,t,n),e=e.sibling;e!==null;)wf(e,t,n),e=e.sibling}function Sf(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Sf(e,t,n),e=e.sibling;e!==null;)Sf(e,t,n),e=e.sibling}var st=null,yn=!1;function Er(e,t,n){for(n=n.child;n!==null;)Yw(e,t,n),n=n.sibling}function Yw(e,t,n){if(Bn&&typeof Bn.onCommitFiberUnmount=="function")try{Bn.onCommitFiberUnmount(bu,n)}catch{}switch(n.tag){case 5:gt||gs(n,t);case 6:var r=st,s=yn;st=null,Er(e,t,n),st=r,yn=s,st!==null&&(yn?(e=st,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(yn?(e=st,n=n.stateNode,e.nodeType===8?th(e.parentNode,n):e.nodeType===1&&th(e,n),ga(e)):th(st,n.stateNode));break;case 4:r=st,s=yn,st=n.stateNode.containerInfo,yn=!0,Er(e,t,n),st=r,yn=s;break;case 0:case 11:case 14:case 15:if(!gt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,u=a.destroy;a=a.tag,u!==void 0&&(a&2||a&4)&&yf(n,t,u),s=s.next}while(s!==r)}Er(e,t,n);break;case 1:if(!gt&&(gs(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(h){je(n,t,h)}Er(e,t,n);break;case 21:Er(e,t,n);break;case 22:n.mode&1?(gt=(r=gt)||n.memoizedState!==null,Er(e,t,n),gt=r):Er(e,t,n);break;default:Er(e,t,n)}}function jg(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new eA),t.forEach(function(r){var s=cA.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function dn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,u=t,h=u;e:for(;h!==null;){switch(h.tag){case 5:st=h.stateNode,yn=!1;break e;case 3:st=h.stateNode.containerInfo,yn=!0;break e;case 4:st=h.stateNode.containerInfo,yn=!0;break e}h=h.return}if(st===null)throw Error(z(160));Yw(a,u,s),st=null,yn=!1;var f=s.alternate;f!==null&&(f.return=null),s.return=null}catch(p){je(s,t,p)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Xw(t,e),t=t.sibling}function Xw(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(dn(t,e),xn(e),r&4){try{ia(3,e,e.return),Vu(3,e)}catch(A){je(e,e.return,A)}try{ia(5,e,e.return)}catch(A){je(e,e.return,A)}}break;case 1:dn(t,e),xn(e),r&512&&n!==null&&gs(n,n.return);break;case 5:if(dn(t,e),xn(e),r&512&&n!==null&&gs(n,n.return),e.flags&32){var s=e.stateNode;try{fa(s,"")}catch(A){je(e,e.return,A)}}if(r&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,u=n!==null?n.memoizedProps:a,h=e.type,f=e.updateQueue;if(e.updateQueue=null,f!==null)try{h==="input"&&a.type==="radio"&&a.name!=null&&w0(s,a),Gh(h,u);var p=Gh(h,a);for(u=0;u<f.length;u+=2){var v=f[u],y=f[u+1];v==="style"?E0(s,y):v==="dangerouslySetInnerHTML"?T0(s,y):v==="children"?fa(s,y):md(s,v,y,p)}switch(h){case"input":Fh(s,a);break;case"textarea":S0(s,a);break;case"select":var w=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var P=a.value;P!=null?Rs(s,!!a.multiple,P,!1):w!==!!a.multiple&&(a.defaultValue!=null?Rs(s,!!a.multiple,a.defaultValue,!0):Rs(s,!!a.multiple,a.multiple?[]:"",!1))}s[Ca]=a}catch(A){je(e,e.return,A)}}break;case 6:if(dn(t,e),xn(e),r&4){if(e.stateNode===null)throw Error(z(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(A){je(e,e.return,A)}}break;case 3:if(dn(t,e),xn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ga(t.containerInfo)}catch(A){je(e,e.return,A)}break;case 4:dn(t,e),xn(e);break;case 13:dn(t,e),xn(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Kd=He())),r&4&&jg(e);break;case 22:if(v=n!==null&&n.memoizedState!==null,e.mode&1?(gt=(p=gt)||v,dn(t,e),gt=p):dn(t,e),xn(e),r&8192){if(p=e.memoizedState!==null,(e.stateNode.isHidden=p)&&!v&&e.mode&1)for($=e,v=e.child;v!==null;){for(y=$=v;$!==null;){switch(w=$,P=w.child,w.tag){case 0:case 11:case 14:case 15:ia(4,w,w.return);break;case 1:gs(w,w.return);var _=w.stateNode;if(typeof _.componentWillUnmount=="function"){r=w,n=w.return;try{t=r,_.props=t.memoizedProps,_.state=t.memoizedState,_.componentWillUnmount()}catch(A){je(r,n,A)}}break;case 5:gs(w,w.return);break;case 22:if(w.memoizedState!==null){Gg(y);continue}}P!==null?(P.return=w,$=P):Gg(y)}v=v.sibling}e:for(v=null,y=e;;){if(y.tag===5){if(v===null){v=y;try{s=y.stateNode,p?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(h=y.stateNode,f=y.memoizedProps.style,u=f!=null&&f.hasOwnProperty("display")?f.display:null,h.style.display=R0("display",u))}catch(A){je(e,e.return,A)}}}else if(y.tag===6){if(v===null)try{y.stateNode.nodeValue=p?"":y.memoizedProps}catch(A){je(e,e.return,A)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===e)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break e;for(;y.sibling===null;){if(y.return===null||y.return===e)break e;v===y&&(v=null),y=y.return}v===y&&(v=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:dn(t,e),xn(e),r&4&&jg(e);break;case 21:break;default:dn(t,e),xn(e)}}function xn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Qw(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(fa(s,""),r.flags&=-33);var a=Vg(e);Sf(e,a,s);break;case 3:case 4:var u=r.stateNode.containerInfo,h=Vg(e);wf(e,h,u);break;default:throw Error(z(161))}}catch(f){je(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function nA(e,t,n){$=e,Jw(e)}function Jw(e,t,n){for(var r=(e.mode&1)!==0;$!==null;){var s=$,a=s.child;if(s.tag===22&&r){var u=s.memoizedState!==null||Al;if(!u){var h=s.alternate,f=h!==null&&h.memoizedState!==null||gt;h=Al;var p=gt;if(Al=u,(gt=f)&&!p)for($=s;$!==null;)u=$,f=u.child,u.tag===22&&u.memoizedState!==null?Hg(s):f!==null?(f.return=u,$=f):Hg(s);for(;a!==null;)$=a,Jw(a),a=a.sibling;$=s,Al=h,gt=p}zg(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,$=a):zg(e)}}function zg(e){for(;$!==null;){var t=$;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:gt||Vu(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!gt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:mn(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Ag(t,a,r);break;case 3:var u=t.updateQueue;if(u!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ag(t,u,n)}break;case 5:var h=t.stateNode;if(n===null&&t.flags&4){n=h;var f=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&n.focus();break;case"img":f.src&&(n.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var p=t.alternate;if(p!==null){var v=p.memoizedState;if(v!==null){var y=v.dehydrated;y!==null&&ga(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}gt||t.flags&512&&vf(t)}catch(w){je(t,t.return,w)}}if(t===e){$=null;break}if(n=t.sibling,n!==null){n.return=t.return,$=n;break}$=t.return}}function Gg(e){for(;$!==null;){var t=$;if(t===e){$=null;break}var n=t.sibling;if(n!==null){n.return=t.return,$=n;break}$=t.return}}function Hg(e){for(;$!==null;){var t=$;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Vu(4,t)}catch(f){je(t,n,f)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(f){je(t,s,f)}}var a=t.return;try{vf(t)}catch(f){je(t,a,f)}break;case 5:var u=t.return;try{vf(t)}catch(f){je(t,u,f)}}}catch(f){je(t,t.return,f)}if(t===e){$=null;break}var h=t.sibling;if(h!==null){h.return=t.return,$=h;break}$=t.return}}var rA=Math.ceil,vu=mr.ReactCurrentDispatcher,qd=mr.ReactCurrentOwner,an=mr.ReactCurrentBatchConfig,ve=0,rt=null,$e=null,lt=0,Ht=0,ys=ei(0),Ze=0,_a=null,Di=0,ju=0,$d=0,sa=null,Dt=null,Kd=0,Xs=1/0,Jn=null,wu=!1,Cf=null,qr=null,_l=!1,Br=null,Su=0,oa=0,Tf=null,Hl=-1,Wl=0;function Pt(){return ve&6?He():Hl!==-1?Hl:Hl=He()}function $r(e){return e.mode&1?ve&2&&lt!==0?lt&-lt:VP.transition!==null?(Wl===0&&(Wl=N0()),Wl):(e=Te,e!==0||(e=window.event,e=e===void 0?16:G0(e.type)),e):1}function Cn(e,t,n,r){if(50<oa)throw oa=0,Tf=null,Error(z(185));za(e,n,r),(!(ve&2)||e!==rt)&&(e===rt&&(!(ve&2)&&(ju|=n),Ze===4&&Mr(e,lt)),Bt(e,r),n===1&&ve===0&&!(t.mode&1)&&(Xs=He()+500,Uu&&ti()))}function Bt(e,t){var n=e.callbackNode;VE(e,t);var r=ru(e,e===rt?lt:0);if(r===0)n!==null&&Zm(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Zm(n),t===1)e.tag===0?BP(Wg.bind(null,e)):lw(Wg.bind(null,e)),DP(function(){!(ve&6)&&ti()}),n=null;else{switch(U0(r)){case 1:n=Sd;break;case 4:n=L0;break;case 16:n=nu;break;case 536870912:n=D0;break;default:n=nu}n=oS(n,Zw.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Zw(e,t){if(Hl=-1,Wl=0,ve&6)throw Error(z(327));var n=e.callbackNode;if(Os()&&e.callbackNode!==n)return null;var r=ru(e,e===rt?lt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Cu(e,r);else{t=r;var s=ve;ve|=2;var a=tS();(rt!==e||lt!==t)&&(Jn=null,Xs=He()+500,Oi(e,t));do try{oA();break}catch(h){eS(e,h)}while(!0);Id(),vu.current=a,ve=s,$e!==null?t=0:(rt=null,lt=0,t=Ze)}if(t!==0){if(t===2&&(s=Kh(e),s!==0&&(r=s,t=Rf(e,s))),t===1)throw n=_a,Oi(e,0),Mr(e,r),Bt(e,He()),n;if(t===6)Mr(e,r);else{if(s=e.current.alternate,!(r&30)&&!iA(s)&&(t=Cu(e,r),t===2&&(a=Kh(e),a!==0&&(r=a,t=Rf(e,a))),t===1))throw n=_a,Oi(e,0),Mr(e,r),Bt(e,He()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(z(345));case 2:fi(e,Dt,Jn);break;case 3:if(Mr(e,r),(r&130023424)===r&&(t=Kd+500-He(),10<t)){if(ru(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Pt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=nf(fi.bind(null,e,Dt,Jn),t);break}fi(e,Dt,Jn);break;case 4:if(Mr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var u=31-Sn(r);a=1<<u,u=t[u],u>s&&(s=u),r&=~a}if(r=s,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*rA(r/1960))-r,10<r){e.timeoutHandle=nf(fi.bind(null,e,Dt,Jn),r);break}fi(e,Dt,Jn);break;case 5:fi(e,Dt,Jn);break;default:throw Error(z(329))}}}return Bt(e,He()),e.callbackNode===n?Zw.bind(null,e):null}function Rf(e,t){var n=sa;return e.current.memoizedState.isDehydrated&&(Oi(e,t).flags|=256),e=Cu(e,t),e!==2&&(t=Dt,Dt=n,t!==null&&Ef(t)),e}function Ef(e){Dt===null?Dt=e:Dt.push.apply(Dt,e)}function iA(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!Tn(a(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Mr(e,t){for(t&=~$d,t&=~ju,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Sn(t),r=1<<n;e[n]=-1,t&=~r}}function Wg(e){if(ve&6)throw Error(z(327));Os();var t=ru(e,0);if(!(t&1))return Bt(e,He()),null;var n=Cu(e,t);if(e.tag!==0&&n===2){var r=Kh(e);r!==0&&(t=r,n=Rf(e,r))}if(n===1)throw n=_a,Oi(e,0),Mr(e,t),Bt(e,He()),n;if(n===6)throw Error(z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,fi(e,Dt,Jn),Bt(e,He()),null}function Qd(e,t){var n=ve;ve|=1;try{return e(t)}finally{ve=n,ve===0&&(Xs=He()+500,Uu&&ti())}}function Ni(e){Br!==null&&Br.tag===0&&!(ve&6)&&Os();var t=ve;ve|=1;var n=an.transition,r=Te;try{if(an.transition=null,Te=1,e)return e()}finally{Te=r,an.transition=n,ve=t,!(ve&6)&&ti()}}function Yd(){Ht=ys.current,be(ys)}function Oi(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,LP(n)),$e!==null)for(n=$e.return;n!==null;){var r=n;switch(xd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&lu();break;case 3:Qs(),be(Ut),be(wt),Bd();break;case 5:Fd(r);break;case 4:Qs();break;case 13:be(Ne);break;case 19:be(Ne);break;case 10:Ld(r.type._context);break;case 22:case 23:Yd()}n=n.return}if(rt=e,$e=e=Kr(e.current,null),lt=Ht=t,Ze=0,_a=null,$d=ju=Di=0,Dt=sa=null,yi!==null){for(t=0;t<yi.length;t++)if(n=yi[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var u=a.next;a.next=s,r.next=u}n.pending=r}yi=null}return e}function eS(e,t){do{var n=$e;try{if(Id(),jl.current=yu,gu){for(var r=Fe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}gu=!1}if(Li=0,nt=Je=Fe=null,ra=!1,Ea=0,qd.current=null,n===null||n.return===null){Ze=1,_a=t,$e=null;break}e:{var a=e,u=n.return,h=n,f=t;if(t=lt,h.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var p=f,v=h,y=v.tag;if(!(v.mode&1)&&(y===0||y===11||y===15)){var w=v.alternate;w?(v.updateQueue=w.updateQueue,v.memoizedState=w.memoizedState,v.lanes=w.lanes):(v.updateQueue=null,v.memoizedState=null)}var P=bg(u);if(P!==null){P.flags&=-257,Ig(P,u,h,a,t),P.mode&1&&Mg(a,p,t),t=P,f=p;var _=t.updateQueue;if(_===null){var A=new Set;A.add(f),t.updateQueue=A}else _.add(f);break e}else{if(!(t&1)){Mg(a,p,t),Xd();break e}f=Error(z(426))}}else if(Ie&&h.mode&1){var x=bg(u);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Ig(x,u,h,a,t),Md(Ys(f,h));break e}}a=f=Ys(f,h),Ze!==4&&(Ze=2),sa===null?sa=[a]:sa.push(a),a=u;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var C=Uw(a,f,t);Pg(a,C);break e;case 1:h=f;var S=a.type,E=a.stateNode;if(!(a.flags&128)&&(typeof S.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(qr===null||!qr.has(E)))){a.flags|=65536,t&=-t,a.lanes|=t;var R=Fw(a,h,t);Pg(a,R);break e}}a=a.return}while(a!==null)}rS(n)}catch(L){t=L,$e===n&&n!==null&&($e=n=n.return);continue}break}while(!0)}function tS(){var e=vu.current;return vu.current=yu,e===null?yu:e}function Xd(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),rt===null||!(Di&268435455)&&!(ju&268435455)||Mr(rt,lt)}function Cu(e,t){var n=ve;ve|=2;var r=tS();(rt!==e||lt!==t)&&(Jn=null,Oi(e,t));do try{sA();break}catch(s){eS(e,s)}while(!0);if(Id(),ve=n,vu.current=r,$e!==null)throw Error(z(261));return rt=null,lt=0,Ze}function sA(){for(;$e!==null;)nS($e)}function oA(){for(;$e!==null&&!ME();)nS($e)}function nS(e){var t=sS(e.alternate,e,Ht);e.memoizedProps=e.pendingProps,t===null?rS(e):$e=t,qd.current=null}function rS(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=ZP(n,t),n!==null){n.flags&=32767,$e=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ze=6,$e=null;return}}else if(n=JP(n,t,Ht),n!==null){$e=n;return}if(t=t.sibling,t!==null){$e=t;return}$e=t=e}while(t!==null);Ze===0&&(Ze=5)}function fi(e,t,n){var r=Te,s=an.transition;try{an.transition=null,Te=1,aA(e,t,n,r)}finally{an.transition=s,Te=r}return null}function aA(e,t,n,r){do Os();while(Br!==null);if(ve&6)throw Error(z(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(z(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(jE(e,a),e===rt&&($e=rt=null,lt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_l||(_l=!0,oS(nu,function(){return Os(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=an.transition,an.transition=null;var u=Te;Te=1;var h=ve;ve|=4,qd.current=null,tA(e,n),Xw(n,e),_P(ef),iu=!!Zh,ef=Zh=null,e.current=n,nA(n),bE(),ve=h,Te=u,an.transition=a}else e.current=n;if(_l&&(_l=!1,Br=e,Su=s),a=e.pendingLanes,a===0&&(qr=null),DE(n.stateNode),Bt(e,He()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(wu)throw wu=!1,e=Cf,Cf=null,e;return Su&1&&e.tag!==0&&Os(),a=e.pendingLanes,a&1?e===Tf?oa++:(oa=0,Tf=e):oa=0,ti(),null}function Os(){if(Br!==null){var e=U0(Su),t=an.transition,n=Te;try{if(an.transition=null,Te=16>e?16:e,Br===null)var r=!1;else{if(e=Br,Br=null,Su=0,ve&6)throw Error(z(331));var s=ve;for(ve|=4,$=e.current;$!==null;){var a=$,u=a.child;if($.flags&16){var h=a.deletions;if(h!==null){for(var f=0;f<h.length;f++){var p=h[f];for($=p;$!==null;){var v=$;switch(v.tag){case 0:case 11:case 15:ia(8,v,a)}var y=v.child;if(y!==null)y.return=v,$=y;else for(;$!==null;){v=$;var w=v.sibling,P=v.return;if(Kw(v),v===p){$=null;break}if(w!==null){w.return=P,$=w;break}$=P}}}var _=a.alternate;if(_!==null){var A=_.child;if(A!==null){_.child=null;do{var x=A.sibling;A.sibling=null,A=x}while(A!==null)}}$=a}}if(a.subtreeFlags&2064&&u!==null)u.return=a,$=u;else e:for(;$!==null;){if(a=$,a.flags&2048)switch(a.tag){case 0:case 11:case 15:ia(9,a,a.return)}var C=a.sibling;if(C!==null){C.return=a.return,$=C;break e}$=a.return}}var S=e.current;for($=S;$!==null;){u=$;var E=u.child;if(u.subtreeFlags&2064&&E!==null)E.return=u,$=E;else e:for(u=S;$!==null;){if(h=$,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Vu(9,h)}}catch(L){je(h,h.return,L)}if(h===u){$=null;break e}var R=h.sibling;if(R!==null){R.return=h.return,$=R;break e}$=h.return}}if(ve=s,ti(),Bn&&typeof Bn.onPostCommitFiberRoot=="function")try{Bn.onPostCommitFiberRoot(bu,e)}catch{}r=!0}return r}finally{Te=n,an.transition=t}}return!1}function qg(e,t,n){t=Ys(n,t),t=Uw(e,t,1),e=Wr(e,t,1),t=Pt(),e!==null&&(za(e,1,t),Bt(e,t))}function je(e,t,n){if(e.tag===3)qg(e,e,n);else for(;t!==null;){if(t.tag===3){qg(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qr===null||!qr.has(r))){e=Ys(n,e),e=Fw(t,e,1),t=Wr(t,e,1),e=Pt(),t!==null&&(za(t,1,e),Bt(t,e));break}}t=t.return}}function lA(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Pt(),e.pingedLanes|=e.suspendedLanes&n,rt===e&&(lt&n)===n&&(Ze===4||Ze===3&&(lt&130023424)===lt&&500>He()-Kd?Oi(e,0):$d|=n),Bt(e,t)}function iS(e,t){t===0&&(e.mode&1?(t=yl,yl<<=1,!(yl&130023424)&&(yl=4194304)):t=1);var n=Pt();e=fr(e,t),e!==null&&(za(e,t,n),Bt(e,n))}function uA(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),iS(e,n)}function cA(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(t),iS(e,n)}var sS;sS=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ut.current)Nt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Nt=!1,XP(e,t,n);Nt=!!(e.flags&131072)}else Nt=!1,Ie&&t.flags&1048576&&uw(t,hu,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Gl(e,t),e=t.pendingProps;var s=qs(t,wt.current);_s(t,n),s=jd(null,t,r,e,s,n);var a=zd();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ft(r)?(a=!0,uu(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Nd(t),s.updater=Bu,t.stateNode=s,s._reactInternals=t,cf(t,r,e,n),t=df(null,t,r,!0,a,n)):(t.tag=0,Ie&&a&&kd(t),Et(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Gl(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=fA(r),e=mn(r,e),s){case 0:t=ff(null,t,r,e,n);break e;case 1:t=Ng(null,t,r,e,n);break e;case 11:t=Lg(null,t,r,e,n);break e;case 14:t=Dg(null,t,r,mn(r.type,e),n);break e}throw Error(z(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:mn(r,s),ff(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:mn(r,s),Ng(e,t,r,s,n);case 3:e:{if(zw(t),e===null)throw Error(z(387));r=t.pendingProps,a=t.memoizedState,s=a.element,mw(e,t),pu(t,r,null,n);var u=t.memoizedState;if(r=u.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=Ys(Error(z(423)),t),t=Ug(e,t,r,n,s);break e}else if(r!==s){s=Ys(Error(z(424)),t),t=Ug(e,t,r,n,s);break e}else for(Wt=Hr(t.stateNode.containerInfo.firstChild),qt=t,Ie=!0,vn=null,n=dw(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($s(),r===s){t=dr(e,t,n);break e}Et(e,t,r,n)}t=t.child}return t;case 5:return gw(t),e===null&&af(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,u=s.children,tf(r,s)?u=null:a!==null&&tf(r,a)&&(t.flags|=32),jw(e,t),Et(e,t,u,n),t.child;case 6:return e===null&&af(t),null;case 13:return Gw(e,t,n);case 4:return Ud(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ks(t,null,r,n):Et(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:mn(r,s),Lg(e,t,r,s,n);case 7:return Et(e,t,t.pendingProps,n),t.child;case 8:return Et(e,t,t.pendingProps.children,n),t.child;case 12:return Et(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,u=s.value,Oe(fu,r._currentValue),r._currentValue=u,a!==null)if(Tn(a.value,u)){if(a.children===s.children&&!Ut.current){t=dr(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var h=a.dependencies;if(h!==null){u=a.child;for(var f=h.firstContext;f!==null;){if(f.context===r){if(a.tag===1){f=ir(-1,n&-n),f.tag=2;var p=a.updateQueue;if(p!==null){p=p.shared;var v=p.pending;v===null?f.next=f:(f.next=v.next,v.next=f),p.pending=f}}a.lanes|=n,f=a.alternate,f!==null&&(f.lanes|=n),lf(a.return,n,t),h.lanes|=n;break}f=f.next}}else if(a.tag===10)u=a.type===t.type?null:a.child;else if(a.tag===18){if(u=a.return,u===null)throw Error(z(341));u.lanes|=n,h=u.alternate,h!==null&&(h.lanes|=n),lf(u,n,t),u=a.sibling}else u=a.child;if(u!==null)u.return=a;else for(u=a;u!==null;){if(u===t){u=null;break}if(a=u.sibling,a!==null){a.return=u.return,u=a;break}u=u.return}a=u}Et(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,_s(t,n),s=ln(s),r=r(s),t.flags|=1,Et(e,t,r,n),t.child;case 14:return r=t.type,s=mn(r,t.pendingProps),s=mn(r.type,s),Dg(e,t,r,s,n);case 15:return Bw(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:mn(r,s),Gl(e,t),t.tag=1,Ft(r)?(e=!0,uu(t)):e=!1,_s(t,n),Nw(t,r,s),cf(t,r,s,n),df(null,t,r,!0,e,n);case 19:return Hw(e,t,n);case 22:return Vw(e,t,n)}throw Error(z(156,t.tag))};function oS(e,t){return I0(e,t)}function hA(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(e,t,n,r){return new hA(e,t,n,r)}function Jd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fA(e){if(typeof e=="function")return Jd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===yd)return 11;if(e===vd)return 14}return 2}function Kr(e,t){var n=e.alternate;return n===null?(n=on(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ql(e,t,n,r,s,a){var u=2;if(r=e,typeof e=="function")Jd(e)&&(u=1);else if(typeof e=="string")u=5;else e:switch(e){case as:return ki(n.children,s,a,t);case gd:u=8,s|=8;break;case Ih:return e=on(12,n,t,s|2),e.elementType=Ih,e.lanes=a,e;case Lh:return e=on(13,n,t,s),e.elementType=Lh,e.lanes=a,e;case Dh:return e=on(19,n,t,s),e.elementType=Dh,e.lanes=a,e;case g0:return zu(n,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case p0:u=10;break e;case m0:u=9;break e;case yd:u=11;break e;case vd:u=14;break e;case Or:u=16,r=null;break e}throw Error(z(130,e==null?e:typeof e,""))}return t=on(u,n,t,s),t.elementType=e,t.type=r,t.lanes=a,t}function ki(e,t,n,r){return e=on(7,e,r,t),e.lanes=n,e}function zu(e,t,n,r){return e=on(22,e,r,t),e.elementType=g0,e.lanes=n,e.stateNode={isHidden:!1},e}function uh(e,t,n){return e=on(6,e,null,t),e.lanes=n,e}function ch(e,t,n){return t=on(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function dA(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hc(0),this.expirationTimes=Hc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Zd(e,t,n,r,s,a,u,h,f){return e=new dA(e,t,n,h,f),t===1?(t=1,a===!0&&(t|=8)):t=0,a=on(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nd(a),e}function pA(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:os,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function aS(e){if(!e)return Yr;e=e._reactInternals;e:{if(Fi(e)!==e||e.tag!==1)throw Error(z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ft(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(z(171))}if(e.tag===1){var n=e.type;if(Ft(n))return aw(e,n,t)}return t}function lS(e,t,n,r,s,a,u,h,f){return e=Zd(n,r,!0,e,s,a,u,h,f),e.context=aS(null),n=e.current,r=Pt(),s=$r(n),a=ir(r,s),a.callback=t??null,Wr(n,a,s),e.current.lanes=s,za(e,s,r),Bt(e,r),e}function Gu(e,t,n,r){var s=t.current,a=Pt(),u=$r(s);return n=aS(n),t.context===null?t.context=n:t.pendingContext=n,t=ir(a,u),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Wr(s,t,u),e!==null&&(Cn(e,s,u,a),Vl(e,s,u)),u}function Tu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function $g(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ep(e,t){$g(e,t),(e=e.alternate)&&$g(e,t)}function mA(){return null}var uS=typeof reportError=="function"?reportError:function(e){console.error(e)};function tp(e){this._internalRoot=e}Hu.prototype.render=tp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(z(409));Gu(e,t,null,null)};Hu.prototype.unmount=tp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ni(function(){Gu(null,e,null,null)}),t[hr]=null}};function Hu(e){this._internalRoot=e}Hu.prototype.unstable_scheduleHydration=function(e){if(e){var t=V0();e={blockedOn:null,target:e,priority:t};for(var n=0;n<xr.length&&t!==0&&t<xr[n].priority;n++);xr.splice(n,0,e),n===0&&z0(e)}};function np(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Wu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Kg(){}function gA(e,t,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var p=Tu(u);a.call(p)}}var u=lS(t,r,e,0,null,!1,!1,"",Kg);return e._reactRootContainer=u,e[hr]=u.current,wa(e.nodeType===8?e.parentNode:e),Ni(),u}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var h=r;r=function(){var p=Tu(f);h.call(p)}}var f=Zd(e,0,!1,null,null,!1,!1,"",Kg);return e._reactRootContainer=f,e[hr]=f.current,wa(e.nodeType===8?e.parentNode:e),Ni(function(){Gu(t,f,n,r)}),f}function qu(e,t,n,r,s){var a=n._reactRootContainer;if(a){var u=a;if(typeof s=="function"){var h=s;s=function(){var f=Tu(u);h.call(f)}}Gu(t,u,e,s)}else u=gA(n,t,e,s,r);return Tu(u)}F0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Wo(t.pendingLanes);n!==0&&(Cd(t,n|1),Bt(t,He()),!(ve&6)&&(Xs=He()+500,ti()))}break;case 13:Ni(function(){var r=fr(e,1);if(r!==null){var s=Pt();Cn(r,e,1,s)}}),ep(e,1)}};Td=function(e){if(e.tag===13){var t=fr(e,134217728);if(t!==null){var n=Pt();Cn(t,e,134217728,n)}ep(e,134217728)}};B0=function(e){if(e.tag===13){var t=$r(e),n=fr(e,t);if(n!==null){var r=Pt();Cn(n,e,t,r)}ep(e,t)}};V0=function(){return Te};j0=function(e,t){var n=Te;try{return Te=e,t()}finally{Te=n}};Wh=function(e,t,n){switch(t){case"input":if(Fh(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Nu(r);if(!s)throw Error(z(90));v0(r),Fh(r,s)}}}break;case"textarea":S0(e,n);break;case"select":t=n.value,t!=null&&Rs(e,!!n.multiple,t,!1)}};_0=Qd;O0=Ni;var yA={usingClientEntryPoint:!1,Events:[Ha,hs,Nu,P0,A0,Qd]},No={findFiberByHostInstance:gi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vA={bundleType:No.bundleType,version:No.version,rendererPackageName:No.rendererPackageName,rendererConfig:No.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=M0(e),e===null?null:e.stateNode},findFiberByHostInstance:No.findFiberByHostInstance||mA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ol=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ol.isDisabled&&Ol.supportsFiber)try{bu=Ol.inject(vA),Bn=Ol}catch{}}Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yA;Yt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!np(t))throw Error(z(200));return pA(e,t,null,n)};Yt.createRoot=function(e,t){if(!np(e))throw Error(z(299));var n=!1,r="",s=uS;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Zd(e,1,!1,null,null,n,!1,r,s),e[hr]=t.current,wa(e.nodeType===8?e.parentNode:e),new tp(t)};Yt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(z(188)):(e=Object.keys(e).join(","),Error(z(268,e)));return e=M0(t),e=e===null?null:e.stateNode,e};Yt.flushSync=function(e){return Ni(e)};Yt.hydrate=function(e,t,n){if(!Wu(t))throw Error(z(200));return qu(null,e,t,!0,n)};Yt.hydrateRoot=function(e,t,n){if(!np(e))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",u=uS;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),t=lS(t,null,e,1,n??null,s,!1,a,u),e[hr]=t.current,wa(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Hu(t)};Yt.render=function(e,t,n){if(!Wu(t))throw Error(z(200));return qu(null,e,t,!1,n)};Yt.unmountComponentAtNode=function(e){if(!Wu(e))throw Error(z(40));return e._reactRootContainer?(Ni(function(){qu(null,null,e,!1,function(){e._reactRootContainer=null,e[hr]=null})}),!0):!1};Yt.unstable_batchedUpdates=Qd;Yt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Wu(n))throw Error(z(200));if(e==null||e._reactInternals===void 0)throw Error(z(38));return qu(e,t,n,!1,r)};Yt.version="18.3.1-next-f1338f8080-20240426";function cS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cS)}catch(e){console.error(e)}}cS(),c0.exports=Yt;var wA=c0.exports,SA,Qg=wA;SA=Qg.createRoot,Qg.hydrateRoot;/**
 * @remix-run/router v1.19.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oa(){return Oa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oa.apply(this,arguments)}var Vr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Vr||(Vr={}));const Yg="popstate";function CA(e){e===void 0&&(e={});function t(r,s){let{pathname:a,search:u,hash:h}=r.location;return Pf("",{pathname:a,search:u,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:fS(s)}return RA(t,n,null,e)}function et(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function hS(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function TA(){return Math.random().toString(36).substr(2,8)}function Xg(e,t){return{usr:e.state,key:e.key,idx:t}}function Pf(e,t,n,r){return n===void 0&&(n=null),Oa({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?oo(t):t,{state:n,key:t&&t.key||r||TA()})}function fS(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function oo(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function RA(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,u=s.history,h=Vr.Pop,f=null,p=v();p==null&&(p=0,u.replaceState(Oa({},u.state,{idx:p}),""));function v(){return(u.state||{idx:null}).idx}function y(){h=Vr.Pop;let x=v(),C=x==null?null:x-p;p=x,f&&f({action:h,location:A.location,delta:C})}function w(x,C){h=Vr.Push;let S=Pf(A.location,x,C);p=v()+1;let E=Xg(S,p),R=A.createHref(S);try{u.pushState(E,"",R)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(R)}a&&f&&f({action:h,location:A.location,delta:1})}function P(x,C){h=Vr.Replace;let S=Pf(A.location,x,C);p=v();let E=Xg(S,p),R=A.createHref(S);u.replaceState(E,"",R),a&&f&&f({action:h,location:A.location,delta:0})}function _(x){let C=s.location.origin!=="null"?s.location.origin:s.location.href,S=typeof x=="string"?x:fS(x);return S=S.replace(/ $/,"%20"),et(C,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,C)}let A={get action(){return h},get location(){return e(s,u)},listen(x){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(Yg,y),f=x,()=>{s.removeEventListener(Yg,y),f=null}},createHref(x){return t(s,x)},createURL:_,encodeLocation(x){let C=_(x);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:w,replace:P,go(x){return u.go(x)}};return A}var Jg;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Jg||(Jg={}));function EA(e,t,n){return n===void 0&&(n="/"),PA(e,t,n,!1)}function PA(e,t,n,r){let s=typeof t=="string"?oo(t):t,a=mS(s.pathname||"/",n);if(a==null)return null;let u=dS(e);AA(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let p=UA(a);h=DA(u[f],p,r)}return h}function dS(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,u,h)=>{let f={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(et(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let p=xi([r,f.relativePath]),v=n.concat(f);a.children&&a.children.length>0&&(et(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),dS(a.children,t,v,p)),!(a.path==null&&!a.index)&&t.push({path:p,score:IA(p,a.index),routesMeta:v})};return e.forEach((a,u)=>{var h;if(a.path===""||!((h=a.path)!=null&&h.includes("?")))s(a,u);else for(let f of pS(a.path))s(a,u,f)}),t}function pS(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let u=pS(r.join("/")),h=[];return h.push(...u.map(f=>f===""?a:[a,f].join("/"))),s&&h.push(...u),h.map(f=>e.startsWith("/")&&f===""?"/":f)}function AA(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:LA(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const _A=/^:[\w-]+$/,OA=3,kA=2,xA=1,MA=10,bA=-2,Zg=e=>e==="*";function IA(e,t){let n=e.split("/"),r=n.length;return n.some(Zg)&&(r+=bA),t&&(r+=kA),n.filter(s=>!Zg(s)).reduce((s,a)=>s+(_A.test(a)?OA:a===""?xA:MA),r)}function LA(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function DA(e,t,n){let{routesMeta:r}=e,s={},a="/",u=[];for(let h=0;h<r.length;++h){let f=r[h],p=h===r.length-1,v=a==="/"?t:t.slice(a.length)||"/",y=ey({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},v),w=f.route;if(!y&&p&&n&&!r[r.length-1].route.index&&(y=ey({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},v)),!y)return null;Object.assign(s,y.params),u.push({params:s,pathname:xi([a,y.pathname]),pathnameBase:GA(xi([a,y.pathnameBase])),route:w}),y.pathnameBase!=="/"&&(a=xi([a,y.pathnameBase]))}return u}function ey(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=NA(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],u=a.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:r.reduce((p,v,y)=>{let{paramName:w,isOptional:P}=v;if(w==="*"){let A=h[y]||"";u=a.slice(0,a.length-A.length).replace(/(.)\/+$/,"$1")}const _=h[y];return P&&!_?p[w]=void 0:p[w]=(_||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:u,pattern:e}}function NA(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),hS(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(r.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function UA(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return hS(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function mS(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function FA(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?oo(e):e;return{pathname:n?n.startsWith("/")?n:BA(n,t):t,search:HA(r),hash:WA(s)}}function BA(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function hh(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function VA(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function jA(e,t){let n=VA(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function zA(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=oo(e):(s=Oa({},e),et(!s.pathname||!s.pathname.includes("?"),hh("?","pathname","search",s)),et(!s.pathname||!s.pathname.includes("#"),hh("#","pathname","hash",s)),et(!s.search||!s.search.includes("#"),hh("#","search","hash",s)));let a=e===""||s.pathname==="",u=a?"/":s.pathname,h;if(u==null)h=n;else{let y=t.length-1;if(!r&&u.startsWith("..")){let w=u.split("/");for(;w[0]==="..";)w.shift(),y-=1;s.pathname=w.join("/")}h=y>=0?t[y]:"/"}let f=FA(s,h),p=u&&u!=="/"&&u.endsWith("/"),v=(a||u===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(p||v)&&(f.pathname+="/"),f}const xi=e=>e.join("/").replace(/\/\/+/g,"/"),GA=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),HA=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,WA=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function qA(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const gS=["post","put","patch","delete"];new Set(gS);const $A=["get",...gS];new Set($A);/**
 * React Router v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ka(){return ka=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ka.apply(this,arguments)}const rp=B.createContext(null),KA=B.createContext(null),$u=B.createContext(null),Ku=B.createContext(null),ao=B.createContext({outlet:null,matches:[],isDataRoute:!1}),yS=B.createContext(null);function Qu(){return B.useContext(Ku)!=null}function ip(){return Qu()||et(!1),B.useContext(Ku).location}function vS(e){B.useContext($u).static||B.useLayoutEffect(e)}function QA(){let{isDataRoute:e}=B.useContext(ao);return e?l_():YA()}function YA(){Qu()||et(!1);let e=B.useContext(rp),{basename:t,future:n,navigator:r}=B.useContext($u),{matches:s}=B.useContext(ao),{pathname:a}=ip(),u=JSON.stringify(jA(s,n.v7_relativeSplatPath)),h=B.useRef(!1);return vS(()=>{h.current=!0}),B.useCallback(function(p,v){if(v===void 0&&(v={}),!h.current)return;if(typeof p=="number"){r.go(p);return}let y=zA(p,JSON.parse(u),a,v.relative==="path");e==null&&t!=="/"&&(y.pathname=y.pathname==="/"?t:xi([t,y.pathname])),(v.replace?r.replace:r.push)(y,v.state,v)},[t,r,u,a,e])}function XA(e,t){return JA(e,t)}function JA(e,t,n,r){Qu()||et(!1);let{navigator:s}=B.useContext($u),{matches:a}=B.useContext(ao),u=a[a.length-1],h=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let p=ip(),v;if(t){var y;let x=typeof t=="string"?oo(t):t;f==="/"||(y=x.pathname)!=null&&y.startsWith(f)||et(!1),v=x}else v=p;let w=v.pathname||"/",P=w;if(f!=="/"){let x=f.replace(/^\//,"").split("/");P="/"+w.replace(/^\//,"").split("/").slice(x.length).join("/")}let _=EA(e,{pathname:P}),A=r_(_&&_.map(x=>Object.assign({},x,{params:Object.assign({},h,x.params),pathname:xi([f,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?f:xi([f,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),a,n,r);return t&&A?B.createElement(Ku.Provider,{value:{location:ka({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:Vr.Pop}},A):A}function ZA(){let e=a_(),t=qA(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},t),n?B.createElement("pre",{style:s},n):null,null)}const e_=B.createElement(ZA,null);class t_ extends B.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?B.createElement(ao.Provider,{value:this.props.routeContext},B.createElement(yS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function n_(e){let{routeContext:t,match:n,children:r}=e,s=B.useContext(rp);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),B.createElement(ao.Provider,{value:t},r)}function r_(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var a;if(!n)return null;if(n.errors)e=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let u=e,h=(s=n)==null?void 0:s.errors;if(h!=null){let v=u.findIndex(y=>y.route.id&&(h==null?void 0:h[y.route.id])!==void 0);v>=0||et(!1),u=u.slice(0,Math.min(u.length,v+1))}let f=!1,p=-1;if(n&&r&&r.v7_partialHydration)for(let v=0;v<u.length;v++){let y=u[v];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=v),y.route.id){let{loaderData:w,errors:P}=n,_=y.route.loader&&w[y.route.id]===void 0&&(!P||P[y.route.id]===void 0);if(y.route.lazy||_){f=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}return u.reduceRight((v,y,w)=>{let P,_=!1,A=null,x=null;n&&(P=h&&y.route.id?h[y.route.id]:void 0,A=y.route.errorElement||e_,f&&(p<0&&w===0?(_=!0,x=null):p===w&&(_=!0,x=y.route.hydrateFallbackElement||null)));let C=t.concat(u.slice(0,w+1)),S=()=>{let E;return P?E=A:_?E=x:y.route.Component?E=B.createElement(y.route.Component,null):y.route.element?E=y.route.element:E=v,B.createElement(n_,{match:y,routeContext:{outlet:v,matches:C,isDataRoute:n!=null},children:E})};return n&&(y.route.ErrorBoundary||y.route.errorElement||w===0)?B.createElement(t_,{location:n.location,revalidation:n.revalidation,component:A,error:P,children:S(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):S()},null)}var wS=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(wS||{}),Ru=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ru||{});function i_(e){let t=B.useContext(rp);return t||et(!1),t}function s_(e){let t=B.useContext(KA);return t||et(!1),t}function o_(e){let t=B.useContext(ao);return t||et(!1),t}function SS(e){let t=o_(),n=t.matches[t.matches.length-1];return n.route.id||et(!1),n.route.id}function a_(){var e;let t=B.useContext(yS),n=s_(Ru.UseRouteError),r=SS(Ru.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function l_(){let{router:e}=i_(wS.UseNavigateStable),t=SS(Ru.UseNavigateStable),n=B.useRef(!1);return vS(()=>{n.current=!0}),B.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,ka({fromRouteId:t},a)))},[e,t])}function u_(e){et(!1)}function c_(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Vr.Pop,navigator:a,static:u=!1,future:h}=e;Qu()&&et(!1);let f=t.replace(/^\/*/,"/"),p=B.useMemo(()=>({basename:f,navigator:a,static:u,future:ka({v7_relativeSplatPath:!1},h)}),[f,h,a,u]);typeof r=="string"&&(r=oo(r));let{pathname:v="/",search:y="",hash:w="",state:P=null,key:_="default"}=r,A=B.useMemo(()=>{let x=mS(v,f);return x==null?null:{location:{pathname:x,search:y,hash:w,state:P,key:_},navigationType:s}},[f,v,y,w,P,_,s]);return A==null?null:B.createElement($u.Provider,{value:p},B.createElement(Ku.Provider,{children:n,value:A}))}function EI(e){let{children:t,location:n}=e;return XA(Af(t),n)}new Promise(()=>{});function Af(e,t){t===void 0&&(t=[]);let n=[];return B.Children.forEach(e,(r,s)=>{if(!B.isValidElement(r))return;let a=[...t,s];if(r.type===B.Fragment){n.push.apply(n,Af(r.props.children,a));return}r.type!==u_&&et(!1),!r.props.index||!r.props.children||et(!1);let u={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=Af(r.props.children,a)),n.push(u)}),n}/**
 * React Router DOM v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _f(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function h_(e,t){let n=_f(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(a=>{n.append(s,a)})}),n}const f_="6";try{window.__reactRouterVersion=f_}catch{}const d_="startTransition",ty=lE[d_];function PI(e){let{basename:t,children:n,future:r,window:s}=e,a=B.useRef();a.current==null&&(a.current=CA({window:s,v5Compat:!0}));let u=a.current,[h,f]=B.useState({action:u.action,location:u.location}),{v7_startTransition:p}=r||{},v=B.useCallback(y=>{p&&ty?ty(()=>f(y)):f(y)},[f,p]);return B.useLayoutEffect(()=>u.listen(v),[u,v]),B.createElement(c_,{basename:t,children:n,location:h.location,navigationType:h.action,navigator:u,future:r})}var ny;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ny||(ny={}));var ry;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(ry||(ry={}));function AI(e){let t=B.useRef(_f(e)),n=B.useRef(!1),r=ip(),s=B.useMemo(()=>h_(r.search,n.current?null:t.current),[r.search]),a=QA(),u=B.useCallback((h,f)=>{const p=_f(typeof h=="function"?h(s):h);n.current=!0,a("?"+p,f)},[a,s]);return[s,u]}/*! @license DOMPurify 3.1.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.6/LICENSE */const{entries:CS,setPrototypeOf:iy,isFrozen:p_,getPrototypeOf:m_,getOwnPropertyDescriptor:g_}=Object;let{freeze:At,seal:cn,create:TS}=Object,{apply:Of,construct:kf}=typeof Reflect<"u"&&Reflect;At||(At=function(t){return t});cn||(cn=function(t){return t});Of||(Of=function(t,n,r){return t.apply(n,r)});kf||(kf=function(t,n){return new t(...n)});const kl=Kt(Array.prototype.forEach),sy=Kt(Array.prototype.pop),Uo=Kt(Array.prototype.push),$l=Kt(String.prototype.toLowerCase),fh=Kt(String.prototype.toString),oy=Kt(String.prototype.match),Fo=Kt(String.prototype.replace),y_=Kt(String.prototype.indexOf),v_=Kt(String.prototype.trim),pn=Kt(Object.prototype.hasOwnProperty),Ct=Kt(RegExp.prototype.test),Bo=w_(TypeError);function Kt(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return Of(e,t,r)}}function w_(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return kf(e,n)}}function pe(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$l;iy&&iy(e,null);let r=t.length;for(;r--;){let s=t[r];if(typeof s=="string"){const a=n(s);a!==s&&(p_(t)||(t[r]=a),s=a)}e[s]=!0}return e}function S_(e){for(let t=0;t<e.length;t++)pn(e,t)||(e[t]=null);return e}function di(e){const t=TS(null);for(const[n,r]of CS(e))pn(e,n)&&(Array.isArray(r)?t[n]=S_(r):r&&typeof r=="object"&&r.constructor===Object?t[n]=di(r):t[n]=r);return t}function Vo(e,t){for(;e!==null;){const r=g_(e,t);if(r){if(r.get)return Kt(r.get);if(typeof r.value=="function")return Kt(r.value)}e=m_(e)}function n(){return null}return n}const ay=At(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),dh=At(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ph=At(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),C_=At(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mh=At(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),T_=At(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ly=At(["#text"]),uy=At(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),gh=At(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),cy=At(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xl=At(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),R_=cn(/\{\{[\w\W]*|[\w\W]*\}\}/gm),E_=cn(/<%[\w\W]*|[\w\W]*%>/gm),P_=cn(/\${[\w\W]*}/gm),A_=cn(/^data-[\-\w.\u00B7-\uFFFF]/),__=cn(/^aria-[\-\w]+$/),RS=cn(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),O_=cn(/^(?:\w+script|data):/i),k_=cn(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ES=cn(/^html$/i),x_=cn(/^[a-z][.\w]*(-[.\w]+)+$/i);var hy=Object.freeze({__proto__:null,MUSTACHE_EXPR:R_,ERB_EXPR:E_,TMPLIT_EXPR:P_,DATA_ATTR:A_,ARIA_ATTR:__,IS_ALLOWED_URI:RS,IS_SCRIPT_OR_DATA:O_,ATTR_WHITESPACE:k_,DOCTYPE_NAME:ES,CUSTOM_ELEMENT:x_});const jo={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},M_=function(){return typeof window>"u"?null:window},b_=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const s="data-tt-policy-suffix";n&&n.hasAttribute(s)&&(r=n.getAttribute(s));const a="dompurify"+(r?"#"+r:"");try{return t.createPolicy(a,{createHTML(u){return u},createScriptURL(u){return u}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}};function PS(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:M_();const t=te=>PS(te);if(t.version="3.1.6",t.removed=[],!e||!e.document||e.document.nodeType!==jo.document)return t.isSupported=!1,t;let{document:n}=e;const r=n,s=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:u,Node:h,Element:f,NodeFilter:p,NamedNodeMap:v=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:y,DOMParser:w,trustedTypes:P}=e,_=f.prototype,A=Vo(_,"cloneNode"),x=Vo(_,"remove"),C=Vo(_,"nextSibling"),S=Vo(_,"childNodes"),E=Vo(_,"parentNode");if(typeof u=="function"){const te=n.createElement("template");te.content&&te.content.ownerDocument&&(n=te.content.ownerDocument)}let R,L="";const{implementation:j,createNodeIterator:H,createDocumentFragment:U,getElementsByTagName:J}=n,{importNode:Y}=r;let m={};t.isSupported=typeof CS=="function"&&typeof E=="function"&&j&&j.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Ae,ERB_EXPR:Le,TMPLIT_EXPR:D,DATA_ATTR:ue,ARIA_ATTR:Re,IS_SCRIPT_OR_DATA:Z,ATTR_WHITESPACE:W,CUSTOM_ELEMENT:se}=hy;let{IS_ALLOWED_URI:ie}=hy,ne=null;const re=pe({},[...ay,...dh,...ph,...mh,...ly]);let ke=null;const Vt=pe({},[...uy,...gh,...cy,...xl]);let Ee=Object.seal(TS(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),St=null,hn=null,uo=!0,Vi=!0,Xa=!1,co=!0,yr=!1,zn=!0,Rn=!1,ji=!1,zi=!1,Gn=!1,vr=!1,En=!1,ii=!0,Gi=!1;const xe="user-content-";let Hi=!0,wr=!1,Pn={},Hn=null;const ho=pe({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let tt=null;const kt=pe({},["audio","video","img","source","image","track"]);let xt=null;const Wi=pe({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),si="http://www.w3.org/1998/Math/MathML",oi="http://www.w3.org/2000/svg",Jt="http://www.w3.org/1999/xhtml";let An=Jt,ai=!1,qi=null;const Ja=pe({},[si,oi,Jt],fh);let _n=null;const Za=["application/xhtml+xml","text/html"],$i="text/html";let we=null,Wn=null;const el=n.createElement("form"),tl=function(k){return k instanceof RegExp||k instanceof Function},qe=function(){let k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Wn&&Wn===k)){if((!k||typeof k!="object")&&(k={}),k=di(k),_n=Za.indexOf(k.PARSER_MEDIA_TYPE)===-1?$i:k.PARSER_MEDIA_TYPE,we=_n==="application/xhtml+xml"?fh:$l,ne=pn(k,"ALLOWED_TAGS")?pe({},k.ALLOWED_TAGS,we):re,ke=pn(k,"ALLOWED_ATTR")?pe({},k.ALLOWED_ATTR,we):Vt,qi=pn(k,"ALLOWED_NAMESPACES")?pe({},k.ALLOWED_NAMESPACES,fh):Ja,xt=pn(k,"ADD_URI_SAFE_ATTR")?pe(di(Wi),k.ADD_URI_SAFE_ATTR,we):Wi,tt=pn(k,"ADD_DATA_URI_TAGS")?pe(di(kt),k.ADD_DATA_URI_TAGS,we):kt,Hn=pn(k,"FORBID_CONTENTS")?pe({},k.FORBID_CONTENTS,we):ho,St=pn(k,"FORBID_TAGS")?pe({},k.FORBID_TAGS,we):{},hn=pn(k,"FORBID_ATTR")?pe({},k.FORBID_ATTR,we):{},Pn=pn(k,"USE_PROFILES")?k.USE_PROFILES:!1,uo=k.ALLOW_ARIA_ATTR!==!1,Vi=k.ALLOW_DATA_ATTR!==!1,Xa=k.ALLOW_UNKNOWN_PROTOCOLS||!1,co=k.ALLOW_SELF_CLOSE_IN_ATTR!==!1,yr=k.SAFE_FOR_TEMPLATES||!1,zn=k.SAFE_FOR_XML!==!1,Rn=k.WHOLE_DOCUMENT||!1,Gn=k.RETURN_DOM||!1,vr=k.RETURN_DOM_FRAGMENT||!1,En=k.RETURN_TRUSTED_TYPE||!1,zi=k.FORCE_BODY||!1,ii=k.SANITIZE_DOM!==!1,Gi=k.SANITIZE_NAMED_PROPS||!1,Hi=k.KEEP_CONTENT!==!1,wr=k.IN_PLACE||!1,ie=k.ALLOWED_URI_REGEXP||RS,An=k.NAMESPACE||Jt,Ee=k.CUSTOM_ELEMENT_HANDLING||{},k.CUSTOM_ELEMENT_HANDLING&&tl(k.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ee.tagNameCheck=k.CUSTOM_ELEMENT_HANDLING.tagNameCheck),k.CUSTOM_ELEMENT_HANDLING&&tl(k.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ee.attributeNameCheck=k.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),k.CUSTOM_ELEMENT_HANDLING&&typeof k.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ee.allowCustomizedBuiltInElements=k.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),yr&&(Vi=!1),vr&&(Gn=!0),Pn&&(ne=pe({},ly),ke=[],Pn.html===!0&&(pe(ne,ay),pe(ke,uy)),Pn.svg===!0&&(pe(ne,dh),pe(ke,gh),pe(ke,xl)),Pn.svgFilters===!0&&(pe(ne,ph),pe(ke,gh),pe(ke,xl)),Pn.mathMl===!0&&(pe(ne,mh),pe(ke,cy),pe(ke,xl))),k.ADD_TAGS&&(ne===re&&(ne=di(ne)),pe(ne,k.ADD_TAGS,we)),k.ADD_ATTR&&(ke===Vt&&(ke=di(ke)),pe(ke,k.ADD_ATTR,we)),k.ADD_URI_SAFE_ATTR&&pe(xt,k.ADD_URI_SAFE_ATTR,we),k.FORBID_CONTENTS&&(Hn===ho&&(Hn=di(Hn)),pe(Hn,k.FORBID_CONTENTS,we)),Hi&&(ne["#text"]=!0),Rn&&pe(ne,["html","head","body"]),ne.table&&(pe(ne,["tbody"]),delete St.tbody),k.TRUSTED_TYPES_POLICY){if(typeof k.TRUSTED_TYPES_POLICY.createHTML!="function")throw Bo('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof k.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Bo('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');R=k.TRUSTED_TYPES_POLICY,L=R.createHTML("")}else R===void 0&&(R=b_(P,s)),R!==null&&typeof L=="string"&&(L=R.createHTML(""));At&&At(k),Wn=k}},fo=pe({},["mi","mo","mn","ms","mtext"]),nl=pe({},["foreignobject","annotation-xml"]),oc=pe({},["title","style","font","a","script"]),po=pe({},[...dh,...ph,...C_]),mo=pe({},[...mh,...T_]),ac=function(k){let G=E(k);(!G||!G.tagName)&&(G={namespaceURI:An,tagName:"template"});const Q=$l(k.tagName),le=$l(G.tagName);return qi[k.namespaceURI]?k.namespaceURI===oi?G.namespaceURI===Jt?Q==="svg":G.namespaceURI===si?Q==="svg"&&(le==="annotation-xml"||fo[le]):!!po[Q]:k.namespaceURI===si?G.namespaceURI===Jt?Q==="math":G.namespaceURI===oi?Q==="math"&&nl[le]:!!mo[Q]:k.namespaceURI===Jt?G.namespaceURI===oi&&!nl[le]||G.namespaceURI===si&&!fo[le]?!1:!mo[Q]&&(oc[Q]||!po[Q]):!!(_n==="application/xhtml+xml"&&qi[k.namespaceURI]):!1},jt=function(k){Uo(t.removed,{element:k});try{E(k).removeChild(k)}catch{x(k)}},Ki=function(k,G){try{Uo(t.removed,{attribute:G.getAttributeNode(k),from:G})}catch{Uo(t.removed,{attribute:null,from:G})}if(G.removeAttribute(k),k==="is"&&!ke[k])if(Gn||vr)try{jt(G)}catch{}else try{G.setAttribute(k,"")}catch{}},rl=function(k){let G=null,Q=null;if(zi)k="<remove></remove>"+k;else{const Qe=oy(k,/^[\r\n\t ]+/);Q=Qe&&Qe[0]}_n==="application/xhtml+xml"&&An===Jt&&(k='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+k+"</body></html>");const le=R?R.createHTML(k):k;if(An===Jt)try{G=new w().parseFromString(le,_n)}catch{}if(!G||!G.documentElement){G=j.createDocument(An,"template",null);try{G.documentElement.innerHTML=ai?L:le}catch{}}const Ke=G.body||G.documentElement;return k&&Q&&Ke.insertBefore(n.createTextNode(Q),Ke.childNodes[0]||null),An===Jt?J.call(G,Rn?"html":"body")[0]:Rn?G.documentElement:Ke},Qi=function(k){return H.call(k.ownerDocument||k,k,p.SHOW_ELEMENT|p.SHOW_COMMENT|p.SHOW_TEXT|p.SHOW_PROCESSING_INSTRUCTION|p.SHOW_CDATA_SECTION,null)},il=function(k){return k instanceof y&&(typeof k.nodeName!="string"||typeof k.textContent!="string"||typeof k.removeChild!="function"||!(k.attributes instanceof v)||typeof k.removeAttribute!="function"||typeof k.setAttribute!="function"||typeof k.namespaceURI!="string"||typeof k.insertBefore!="function"||typeof k.hasChildNodes!="function")},sl=function(k){return typeof h=="function"&&k instanceof h},Mt=function(k,G,Q){m[k]&&kl(m[k],le=>{le.call(t,G,Q,Wn)})},go=function(k){let G=null;if(Mt("beforeSanitizeElements",k,null),il(k))return jt(k),!0;const Q=we(k.nodeName);if(Mt("uponSanitizeElement",k,{tagName:Q,allowedTags:ne}),k.hasChildNodes()&&!sl(k.firstElementChild)&&Ct(/<[/\w]/g,k.innerHTML)&&Ct(/<[/\w]/g,k.textContent)||k.nodeType===jo.progressingInstruction||zn&&k.nodeType===jo.comment&&Ct(/<[/\w]/g,k.data))return jt(k),!0;if(!ne[Q]||St[Q]){if(!St[Q]&&ol(Q)&&(Ee.tagNameCheck instanceof RegExp&&Ct(Ee.tagNameCheck,Q)||Ee.tagNameCheck instanceof Function&&Ee.tagNameCheck(Q)))return!1;if(Hi&&!Hn[Q]){const le=E(k)||k.parentNode,Ke=S(k)||k.childNodes;if(Ke&&le){const Qe=Ke.length;for(let Ye=Qe-1;Ye>=0;--Ye){const bt=A(Ke[Ye],!0);bt.__removalCount=(k.__removalCount||0)+1,le.insertBefore(bt,C(k))}}}return jt(k),!0}return k instanceof f&&!ac(k)||(Q==="noscript"||Q==="noembed"||Q==="noframes")&&Ct(/<\/no(script|embed|frames)/i,k.innerHTML)?(jt(k),!0):(yr&&k.nodeType===jo.text&&(G=k.textContent,kl([Ae,Le,D],le=>{G=Fo(G,le," ")}),k.textContent!==G&&(Uo(t.removed,{element:k.cloneNode()}),k.textContent=G)),Mt("afterSanitizeElements",k,null),!1)},li=function(k,G,Q){if(ii&&(G==="id"||G==="name")&&(Q in n||Q in el))return!1;if(!(Vi&&!hn[G]&&Ct(ue,G))){if(!(uo&&Ct(Re,G))){if(!ke[G]||hn[G]){if(!(ol(k)&&(Ee.tagNameCheck instanceof RegExp&&Ct(Ee.tagNameCheck,k)||Ee.tagNameCheck instanceof Function&&Ee.tagNameCheck(k))&&(Ee.attributeNameCheck instanceof RegExp&&Ct(Ee.attributeNameCheck,G)||Ee.attributeNameCheck instanceof Function&&Ee.attributeNameCheck(G))||G==="is"&&Ee.allowCustomizedBuiltInElements&&(Ee.tagNameCheck instanceof RegExp&&Ct(Ee.tagNameCheck,Q)||Ee.tagNameCheck instanceof Function&&Ee.tagNameCheck(Q))))return!1}else if(!xt[G]){if(!Ct(ie,Fo(Q,W,""))){if(!((G==="src"||G==="xlink:href"||G==="href")&&k!=="script"&&y_(Q,"data:")===0&&tt[k])){if(!(Xa&&!Ct(Z,Fo(Q,W,"")))){if(Q)return!1}}}}}}return!0},ol=function(k){return k!=="annotation-xml"&&oy(k,se)},al=function(k){Mt("beforeSanitizeAttributes",k,null);const{attributes:G}=k;if(!G)return;const Q={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ke};let le=G.length;for(;le--;){const Ke=G[le],{name:Qe,namespaceURI:Ye,value:bt}=Ke,ui=we(Qe);let it=Qe==="value"?bt:v_(bt);if(Q.attrName=ui,Q.attrValue=it,Q.keepAttr=!0,Q.forceKeepAttr=void 0,Mt("uponSanitizeAttribute",k,Q),it=Q.attrValue,zn&&Ct(/((--!?|])>)|<\/(style|title)/i,it)){Ki(Qe,k);continue}if(Q.forceKeepAttr||(Ki(Qe,k),!Q.keepAttr))continue;if(!co&&Ct(/\/>/i,it)){Ki(Qe,k);continue}yr&&kl([Ae,Le,D],ll=>{it=Fo(it,ll," ")});const yo=we(k.nodeName);if(li(yo,ui,it)){if(Gi&&(ui==="id"||ui==="name")&&(Ki(Qe,k),it=xe+it),R&&typeof P=="object"&&typeof P.getAttributeType=="function"&&!Ye)switch(P.getAttributeType(yo,ui)){case"TrustedHTML":{it=R.createHTML(it);break}case"TrustedScriptURL":{it=R.createScriptURL(it);break}}try{Ye?k.setAttributeNS(Ye,Qe,it):k.setAttribute(Qe,it),il(k)?jt(k):sy(t.removed)}catch{}}}Mt("afterSanitizeAttributes",k,null)},ae=function te(k){let G=null;const Q=Qi(k);for(Mt("beforeSanitizeShadowDOM",k,null);G=Q.nextNode();)Mt("uponSanitizeShadowNode",G,null),!go(G)&&(G.content instanceof a&&te(G.content),al(G));Mt("afterSanitizeShadowDOM",k,null)};return t.sanitize=function(te){let k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},G=null,Q=null,le=null,Ke=null;if(ai=!te,ai&&(te="<!-->"),typeof te!="string"&&!sl(te))if(typeof te.toString=="function"){if(te=te.toString(),typeof te!="string")throw Bo("dirty is not a string, aborting")}else throw Bo("toString is not a function");if(!t.isSupported)return te;if(ji||qe(k),t.removed=[],typeof te=="string"&&(wr=!1),wr){if(te.nodeName){const bt=we(te.nodeName);if(!ne[bt]||St[bt])throw Bo("root node is forbidden and cannot be sanitized in-place")}}else if(te instanceof h)G=rl("<!---->"),Q=G.ownerDocument.importNode(te,!0),Q.nodeType===jo.element&&Q.nodeName==="BODY"||Q.nodeName==="HTML"?G=Q:G.appendChild(Q);else{if(!Gn&&!yr&&!Rn&&te.indexOf("<")===-1)return R&&En?R.createHTML(te):te;if(G=rl(te),!G)return Gn?null:En?L:""}G&&zi&&jt(G.firstChild);const Qe=Qi(wr?te:G);for(;le=Qe.nextNode();)go(le)||(le.content instanceof a&&ae(le.content),al(le));if(wr)return te;if(Gn){if(vr)for(Ke=U.call(G.ownerDocument);G.firstChild;)Ke.appendChild(G.firstChild);else Ke=G;return(ke.shadowroot||ke.shadowrootmode)&&(Ke=Y.call(r,Ke,!0)),Ke}let Ye=Rn?G.outerHTML:G.innerHTML;return Rn&&ne["!doctype"]&&G.ownerDocument&&G.ownerDocument.doctype&&G.ownerDocument.doctype.name&&Ct(ES,G.ownerDocument.doctype.name)&&(Ye="<!DOCTYPE "+G.ownerDocument.doctype.name+`>
`+Ye),yr&&kl([Ae,Le,D],bt=>{Ye=Fo(Ye,bt," ")}),R&&En?R.createHTML(Ye):Ye},t.setConfig=function(){let te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};qe(te),ji=!0},t.clearConfig=function(){Wn=null,ji=!1},t.isValidAttribute=function(te,k,G){Wn||qe({});const Q=we(te),le=we(k);return li(Q,le,G)},t.addHook=function(te,k){typeof k=="function"&&(m[te]=m[te]||[],Uo(m[te],k))},t.removeHook=function(te){if(m[te])return sy(m[te])},t.removeHooks=function(te){m[te]&&(m[te]=[])},t.removeAllHooks=function(){m={}},t}var _I=PS(),qa=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Js=typeof window>"u"||"Deno"in globalThis;function nn(){}function I_(e,t){return typeof e=="function"?e(t):e}function xf(e){return typeof e=="number"&&e>=0&&e!==1/0}function AS(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ks(e,t){return typeof e=="function"?e(t):e}function wn(e,t){return typeof e=="function"?e(t):e}function fy(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:u,stale:h}=e;if(u){if(r){if(t.queryHash!==sp(u,t.options))return!1}else if(!Ma(t.queryKey,u))return!1}if(n!=="all"){const f=t.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof h=="boolean"&&t.isStale()!==h||s&&s!==t.state.fetchStatus||a&&!a(t))}function dy(e,t){const{exact:n,status:r,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(xa(t.options.mutationKey)!==xa(a))return!1}else if(!Ma(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function sp(e,t){return((t==null?void 0:t.queryKeyHashFn)||xa)(e)}function xa(e){return JSON.stringify(e,(t,n)=>bf(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Ma(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!Ma(e[n],t[n])):!1}function _S(e,t){if(e===t)return e;const n=py(e)&&py(t);if(n||bf(e)&&bf(t)){const r=n?e:Object.keys(e),s=r.length,a=n?t:Object.keys(t),u=a.length,h=n?[]:{};let f=0;for(let p=0;p<u;p++){const v=n?p:a[p];(!n&&r.includes(v)||n)&&e[v]===void 0&&t[v]===void 0?(h[v]=void 0,f++):(h[v]=_S(e[v],t[v]),h[v]===e[v]&&e[v]!==void 0&&f++)}return s===u&&f===s?e:h}return t}function Mf(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function py(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function bf(e){if(!my(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!my(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function my(e){return Object.prototype.toString.call(e)==="[object Object]"}function L_(e){return new Promise(t=>{setTimeout(t,e)})}function If(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?_S(e,t):t}function D_(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function N_(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var OS=Symbol();function kS(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===OS?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Ci,br,Ms,Gv,U_=(Gv=class extends qa{constructor(){super();he(this,Ci);he(this,br);he(this,Ms);X(this,Ms,t=>{if(!Js&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){M(this,br)||this.setEventListener(M(this,Ms))}onUnsubscribe(){var t;this.hasListeners()||((t=M(this,br))==null||t.call(this),X(this,br,void 0))}setEventListener(t){var n;X(this,Ms,t),(n=M(this,br))==null||n.call(this),X(this,br,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){M(this,Ci)!==t&&(X(this,Ci,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof M(this,Ci)=="boolean"?M(this,Ci):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Ci=new WeakMap,br=new WeakMap,Ms=new WeakMap,Gv),op=new U_,bs,Ir,Is,Hv,F_=(Hv=class extends qa{constructor(){super();he(this,bs,!0);he(this,Ir);he(this,Is);X(this,Is,t=>{if(!Js&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){M(this,Ir)||this.setEventListener(M(this,Is))}onUnsubscribe(){var t;this.hasListeners()||((t=M(this,Ir))==null||t.call(this),X(this,Ir,void 0))}setEventListener(t){var n;X(this,Is,t),(n=M(this,Ir))==null||n.call(this),X(this,Ir,t(this.setOnline.bind(this)))}setOnline(t){M(this,bs)!==t&&(X(this,bs,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return M(this,bs)}},bs=new WeakMap,Ir=new WeakMap,Is=new WeakMap,Hv),Eu=new F_;function B_(e){return Math.min(1e3*2**e,3e4)}function xS(e){return(e??"online")==="online"?Eu.isOnline():!0}var MS=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function yh(e){return e instanceof MS}function bS(e){let t=!1,n=0,r=!1,s,a,u;const h=new Promise((C,S)=>{a=C,u=S}),f=C=>{var S;r||(_(new MS(C)),(S=e.abort)==null||S.call(e))},p=()=>{t=!0},v=()=>{t=!1},y=()=>op.isFocused()&&(e.networkMode==="always"||Eu.isOnline())&&e.canRun(),w=()=>xS(e.networkMode)&&e.canRun(),P=C=>{var S;r||(r=!0,(S=e.onSuccess)==null||S.call(e,C),s==null||s(),a(C))},_=C=>{var S;r||(r=!0,(S=e.onError)==null||S.call(e,C),s==null||s(),u(C))},A=()=>new Promise(C=>{var S;s=E=>{(r||y())&&C(E)},(S=e.onPause)==null||S.call(e)}).then(()=>{var C;s=void 0,r||(C=e.onContinue)==null||C.call(e)}),x=()=>{if(r)return;let C;const S=n===0?e.initialPromise:void 0;try{C=S??e.fn()}catch(E){C=Promise.reject(E)}Promise.resolve(C).then(P).catch(E=>{var U;if(r)return;const R=e.retry??(Js?0:3),L=e.retryDelay??B_,j=typeof L=="function"?L(n,E):L,H=R===!0||typeof R=="number"&&n<R||typeof R=="function"&&R(n,E);if(t||!H){_(E);return}n++,(U=e.onFail)==null||U.call(e,n,E),L_(j).then(()=>y()?void 0:A()).then(()=>{t?_(E):x()})})};return{promise:h,cancel:f,continue:()=>(s==null||s(),h),cancelRetry:p,continueRetry:v,canStart:w,start:()=>(w()?x():A().then(x),h)}}function V_(){let e=[],t=0,n=w=>{w()},r=w=>{w()},s=w=>setTimeout(w,0);const a=w=>{s=w},u=w=>{let P;t++;try{P=w()}finally{t--,t||p()}return P},h=w=>{t?e.push(w):s(()=>{n(w)})},f=w=>(...P)=>{h(()=>{w(...P)})},p=()=>{const w=e;e=[],w.length&&s(()=>{r(()=>{w.forEach(P=>{n(P)})})})};return{batch:u,batchCalls:f,schedule:h,setNotifyFunction:w=>{n=w},setBatchNotifyFunction:w=>{r=w},setScheduler:a}}var at=V_(),Ti,Wv,IS=(Wv=class{constructor(){he(this,Ti)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),xf(this.gcTime)&&X(this,Ti,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Js?1/0:5*60*1e3))}clearGcTimeout(){M(this,Ti)&&(clearTimeout(M(this,Ti)),X(this,Ti,void 0))}},Ti=new WeakMap,Wv),Ls,Ds,tn,pt,Ua,Ri,gn,Xn,qv,j_=(qv=class extends IS{constructor(t){super();he(this,gn);he(this,Ls);he(this,Ds);he(this,tn);he(this,pt);he(this,Ua);he(this,Ri);X(this,Ri,!1),X(this,Ua,t.defaultOptions),this.setOptions(t.options),this.observers=[],X(this,tn,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,X(this,Ls,z_(this.options)),this.state=t.state??M(this,Ls),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=M(this,pt))==null?void 0:t.promise}setOptions(t){this.options={...M(this,Ua),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&M(this,tn).remove(this)}setData(t,n){const r=If(this.state.data,t,this.options);return ge(this,gn,Xn).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){ge(this,gn,Xn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=M(this,pt))==null?void 0:r.promise;return(s=M(this,pt))==null||s.cancel(t),n?n.then(nn).catch(nn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(M(this,Ls))}isActive(){return this.observers.some(t=>wn(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!AS(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=M(this,pt))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=M(this,pt))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),M(this,tn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(M(this,pt)&&(M(this,Ri)?M(this,pt).cancel({revert:!0}):M(this,pt).cancelRetry()),this.scheduleGc()),M(this,tn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ge(this,gn,Xn).call(this,{type:"invalidate"})}fetch(t,n){var f,p,v;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(M(this,pt))return M(this,pt).continueRetry(),M(this,pt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const y=this.observers.find(w=>w.options.queryFn);y&&this.setOptions(y.options)}const r=new AbortController,s=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(X(this,Ri,!0),r.signal)})},a=()=>{const y=kS(this.options,n),w={queryKey:this.queryKey,meta:this.meta};return s(w),X(this,Ri,!1),this.options.persister?this.options.persister(y,w,this):y(w)},u={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};s(u),(f=this.options.behavior)==null||f.onFetch(u,this),X(this,Ds,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((p=u.fetchOptions)==null?void 0:p.meta))&&ge(this,gn,Xn).call(this,{type:"fetch",meta:(v=u.fetchOptions)==null?void 0:v.meta});const h=y=>{var w,P,_,A;yh(y)&&y.silent||ge(this,gn,Xn).call(this,{type:"error",error:y}),yh(y)||((P=(w=M(this,tn).config).onError)==null||P.call(w,y,this),(A=(_=M(this,tn).config).onSettled)==null||A.call(_,this.state.data,y,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return X(this,pt,bS({initialPromise:n==null?void 0:n.initialPromise,fn:u.fetchFn,abort:r.abort.bind(r),onSuccess:y=>{var w,P,_,A;if(y===void 0){h(new Error(`${this.queryHash} data is undefined`));return}this.setData(y),(P=(w=M(this,tn).config).onSuccess)==null||P.call(w,y,this),(A=(_=M(this,tn).config).onSettled)==null||A.call(_,y,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:h,onFail:(y,w)=>{ge(this,gn,Xn).call(this,{type:"failed",failureCount:y,error:w})},onPause:()=>{ge(this,gn,Xn).call(this,{type:"pause"})},onContinue:()=>{ge(this,gn,Xn).call(this,{type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0})),M(this,pt).start()}},Ls=new WeakMap,Ds=new WeakMap,tn=new WeakMap,pt=new WeakMap,Ua=new WeakMap,Ri=new WeakMap,gn=new WeakSet,Xn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...LS(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return yh(s)&&s.revert&&M(this,Ds)?{...M(this,Ds),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),at.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),M(this,tn).notify({query:this,type:"updated",action:t})})},qv);function LS(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:xS(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function z_(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ln,$v,G_=($v=class extends qa{constructor(t={}){super();he(this,Ln);this.config=t,X(this,Ln,new Map)}build(t,n,r){const s=n.queryKey,a=n.queryHash??sp(s,n);let u=this.get(a);return u||(u=new j_({cache:this,queryKey:s,queryHash:a,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(u)),u}add(t){M(this,Ln).has(t.queryHash)||(M(this,Ln).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=M(this,Ln).get(t.queryHash);n&&(t.destroy(),n===t&&M(this,Ln).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){at.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return M(this,Ln).get(t)}getAll(){return[...M(this,Ln).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>fy(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>fy(t,r)):n}notify(t){at.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){at.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){at.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ln=new WeakMap,$v),Dn,Tt,Ei,Nn,Ar,Kv,H_=(Kv=class extends IS{constructor(t){super();he(this,Nn);he(this,Dn);he(this,Tt);he(this,Ei);this.mutationId=t.mutationId,X(this,Tt,t.mutationCache),X(this,Dn,[]),this.state=t.state||W_(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){M(this,Dn).includes(t)||(M(this,Dn).push(t),this.clearGcTimeout(),M(this,Tt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){X(this,Dn,M(this,Dn).filter(n=>n!==t)),this.scheduleGc(),M(this,Tt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){M(this,Dn).length||(this.state.status==="pending"?this.scheduleGc():M(this,Tt).remove(this))}continue(){var t;return((t=M(this,Ei))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,a,u,h,f,p,v,y,w,P,_,A,x,C,S,E,R,L,j,H;X(this,Ei,bS({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(U,J)=>{ge(this,Nn,Ar).call(this,{type:"failed",failureCount:U,error:J})},onPause:()=>{ge(this,Nn,Ar).call(this,{type:"pause"})},onContinue:()=>{ge(this,Nn,Ar).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>M(this,Tt).canRun(this)}));const n=this.state.status==="pending",r=!M(this,Ei).canStart();try{if(!n){ge(this,Nn,Ar).call(this,{type:"pending",variables:t,isPaused:r}),await((a=(s=M(this,Tt).config).onMutate)==null?void 0:a.call(s,t,this));const J=await((h=(u=this.options).onMutate)==null?void 0:h.call(u,t));J!==this.state.context&&ge(this,Nn,Ar).call(this,{type:"pending",context:J,variables:t,isPaused:r})}const U=await M(this,Ei).start();return await((p=(f=M(this,Tt).config).onSuccess)==null?void 0:p.call(f,U,t,this.state.context,this)),await((y=(v=this.options).onSuccess)==null?void 0:y.call(v,U,t,this.state.context)),await((P=(w=M(this,Tt).config).onSettled)==null?void 0:P.call(w,U,null,this.state.variables,this.state.context,this)),await((A=(_=this.options).onSettled)==null?void 0:A.call(_,U,null,t,this.state.context)),ge(this,Nn,Ar).call(this,{type:"success",data:U}),U}catch(U){try{throw await((C=(x=M(this,Tt).config).onError)==null?void 0:C.call(x,U,t,this.state.context,this)),await((E=(S=this.options).onError)==null?void 0:E.call(S,U,t,this.state.context)),await((L=(R=M(this,Tt).config).onSettled)==null?void 0:L.call(R,void 0,U,this.state.variables,this.state.context,this)),await((H=(j=this.options).onSettled)==null?void 0:H.call(j,void 0,U,t,this.state.context)),U}finally{ge(this,Nn,Ar).call(this,{type:"error",error:U})}}finally{M(this,Tt).runNext(this)}}},Dn=new WeakMap,Tt=new WeakMap,Ei=new WeakMap,Nn=new WeakSet,Ar=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),at.batch(()=>{M(this,Dn).forEach(r=>{r.onMutationUpdate(t)}),M(this,Tt).notify({mutation:this,type:"updated",action:t})})},Kv);function W_(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Gt,Fa,Qv,q_=(Qv=class extends qa{constructor(t={}){super();he(this,Gt);he(this,Fa);this.config=t,X(this,Gt,new Map),X(this,Fa,Date.now())}build(t,n,r){const s=new H_({mutationCache:this,mutationId:++hl(this,Fa)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){const n=Ml(t),r=M(this,Gt).get(n)??[];r.push(t),M(this,Gt).set(n,r),this.notify({type:"added",mutation:t})}remove(t){var r;const n=Ml(t);if(M(this,Gt).has(n)){const s=(r=M(this,Gt).get(n))==null?void 0:r.filter(a=>a!==t);s&&(s.length===0?M(this,Gt).delete(n):M(this,Gt).set(n,s))}this.notify({type:"removed",mutation:t})}canRun(t){var r;const n=(r=M(this,Gt).get(Ml(t)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===t}runNext(t){var r;const n=(r=M(this,Gt).get(Ml(t)))==null?void 0:r.find(s=>s!==t&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){at.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...M(this,Gt).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(r=>dy(n,r))}findAll(t={}){return this.getAll().filter(n=>dy(t,n))}notify(t){at.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return at.batch(()=>Promise.all(t.map(n=>n.continue().catch(nn))))}},Gt=new WeakMap,Fa=new WeakMap,Qv);function Ml(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function $_(e){return{onFetch:(t,n)=>{const r=async()=>{var _,A,x,C,S;const s=t.options,a=(x=(A=(_=t.fetchOptions)==null?void 0:_.meta)==null?void 0:A.fetchMore)==null?void 0:x.direction,u=((C=t.state.data)==null?void 0:C.pages)||[],h=((S=t.state.data)==null?void 0:S.pageParams)||[],f={pages:[],pageParams:[]};let p=!1;const v=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(t.signal.aborted?p=!0:t.signal.addEventListener("abort",()=>{p=!0}),t.signal)})},y=kS(t.options,t.fetchOptions),w=async(E,R,L)=>{if(p)return Promise.reject();if(R==null&&E.pages.length)return Promise.resolve(E);const j={queryKey:t.queryKey,pageParam:R,direction:L?"backward":"forward",meta:t.options.meta};v(j);const H=await y(j),{maxPages:U}=t.options,J=L?N_:D_;return{pages:J(E.pages,H,U),pageParams:J(E.pageParams,R,U)}};let P;if(a&&u.length){const E=a==="backward",R=E?K_:gy,L={pages:u,pageParams:h},j=R(s,L);P=await w(L,j,E)}else{P=await w(f,h[0]??s.initialPageParam);const E=e??u.length;for(let R=1;R<E;R++){const L=gy(s,P);if(L==null)break;P=await w(P,L)}}return P};t.options.persister?t.fetchFn=()=>{var s,a;return(a=(s=t.options).persister)==null?void 0:a.call(s,r,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=r}}}function gy(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function K_(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Ve,Lr,Dr,Ns,Us,Nr,Fs,Bs,Yv,OI=(Yv=class{constructor(e={}){he(this,Ve);he(this,Lr);he(this,Dr);he(this,Ns);he(this,Us);he(this,Nr);he(this,Fs);he(this,Bs);X(this,Ve,e.queryCache||new G_),X(this,Lr,e.mutationCache||new q_),X(this,Dr,e.defaultOptions||{}),X(this,Ns,new Map),X(this,Us,new Map),X(this,Nr,0)}mount(){hl(this,Nr)._++,M(this,Nr)===1&&(X(this,Fs,op.subscribe(async e=>{e&&(await this.resumePausedMutations(),M(this,Ve).onFocus())})),X(this,Bs,Eu.subscribe(async e=>{e&&(await this.resumePausedMutations(),M(this,Ve).onOnline())})))}unmount(){var e,t;hl(this,Nr)._--,M(this,Nr)===0&&((e=M(this,Fs))==null||e.call(this),X(this,Fs,void 0),(t=M(this,Bs))==null||t.call(this),X(this,Bs,void 0))}isFetching(e){return M(this,Ve).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return M(this,Lr).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=M(this,Ve).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=M(this,Ve).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(ks(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return M(this,Ve).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=M(this,Ve).get(r.queryHash),a=s==null?void 0:s.state.data,u=I_(t,a);if(u!==void 0)return M(this,Ve).build(this,r).setData(u,{...n,manual:!0})}setQueriesData(e,t,n){return at.batch(()=>M(this,Ve).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=M(this,Ve).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=M(this,Ve);at.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=M(this,Ve),r={type:"active",...e};return at.batch(()=>(n.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=at.batch(()=>M(this,Ve).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(nn).catch(nn)}invalidateQueries(e={},t={}){return at.batch(()=>{if(M(this,Ve).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},r=at.batch(()=>M(this,Ve).findAll(e).filter(s=>!s.isDisabled()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(nn)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(nn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=M(this,Ve).build(this,t);return n.isStaleByTime(ks(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(nn).catch(nn)}fetchInfiniteQuery(e){return e.behavior=$_(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(nn).catch(nn)}resumePausedMutations(){return Eu.isOnline()?M(this,Lr).resumePausedMutations():Promise.resolve()}getQueryCache(){return M(this,Ve)}getMutationCache(){return M(this,Lr)}getDefaultOptions(){return M(this,Dr)}setDefaultOptions(e){X(this,Dr,e)}setQueryDefaults(e,t){M(this,Ns).set(xa(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...M(this,Ns).values()];let n={};return t.forEach(r=>{Ma(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){M(this,Us).set(xa(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...M(this,Us).values()];let n={};return t.forEach(r=>{Ma(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...M(this,Dr).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=sp(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===OS&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...M(this,Dr).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){M(this,Ve).clear(),M(this,Lr).clear()}},Ve=new WeakMap,Lr=new WeakMap,Dr=new WeakMap,Ns=new WeakMap,Us=new WeakMap,Nr=new WeakMap,Fs=new WeakMap,Bs=new WeakMap,Yv),Lt,ye,Ba,Rt,Pi,Vs,Un,Va,js,zs,Ai,_i,Ur,Gs,Se,$o,Lf,Df,Nf,Uf,Ff,Bf,Vf,DS,Xv,Q_=(Xv=class extends qa{constructor(t,n){super();he(this,Se);he(this,Lt);he(this,ye);he(this,Ba);he(this,Rt);he(this,Pi);he(this,Vs);he(this,Un);he(this,Va);he(this,js);he(this,zs);he(this,Ai);he(this,_i);he(this,Ur);he(this,Gs,new Set);this.options=n,X(this,Lt,t),X(this,Un,null),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(M(this,ye).addObserver(this),yy(M(this,ye),this.options)?ge(this,Se,$o).call(this):this.updateResult(),ge(this,Se,Uf).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return jf(M(this,ye),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return jf(M(this,ye),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ge(this,Se,Ff).call(this),ge(this,Se,Bf).call(this),M(this,ye).removeObserver(this)}setOptions(t,n){const r=this.options,s=M(this,ye);if(this.options=M(this,Lt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof wn(this.options.enabled,M(this,ye))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ge(this,Se,Vf).call(this),M(this,ye).setOptions(this.options),r._defaulted&&!Mf(this.options,r)&&M(this,Lt).getQueryCache().notify({type:"observerOptionsUpdated",query:M(this,ye),observer:this});const a=this.hasListeners();a&&vy(M(this,ye),s,this.options,r)&&ge(this,Se,$o).call(this),this.updateResult(n),a&&(M(this,ye)!==s||wn(this.options.enabled,M(this,ye))!==wn(r.enabled,M(this,ye))||ks(this.options.staleTime,M(this,ye))!==ks(r.staleTime,M(this,ye)))&&ge(this,Se,Lf).call(this);const u=ge(this,Se,Df).call(this);a&&(M(this,ye)!==s||wn(this.options.enabled,M(this,ye))!==wn(r.enabled,M(this,ye))||u!==M(this,Ur))&&ge(this,Se,Nf).call(this,u)}getOptimisticResult(t){const n=M(this,Lt).getQueryCache().build(M(this,Lt),t),r=this.createResult(n,t);return X_(this,r)&&(X(this,Rt,r),X(this,Vs,this.options),X(this,Pi,M(this,ye).state)),r}getCurrentResult(){return M(this,Rt)}trackResult(t,n){const r={};return Object.keys(t).forEach(s=>{Object.defineProperty(r,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),n==null||n(s),t[s])})}),r}trackProp(t){M(this,Gs).add(t)}getCurrentQuery(){return M(this,ye)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=M(this,Lt).defaultQueryOptions(t),r=M(this,Lt).getQueryCache().build(M(this,Lt),n);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,n))}fetch(t){return ge(this,Se,$o).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),M(this,Rt)))}createResult(t,n){var H;const r=M(this,ye),s=this.options,a=M(this,Rt),u=M(this,Pi),h=M(this,Vs),p=t!==r?t.state:M(this,Ba),{state:v}=t;let y={...v},w=!1,P;if(n._optimisticResults){const U=this.hasListeners(),J=!U&&yy(t,n),Y=U&&vy(t,r,n,s);(J||Y)&&(y={...y,...LS(v.data,t.options)}),n._optimisticResults==="isRestoring"&&(y.fetchStatus="idle")}let{error:_,errorUpdatedAt:A,status:x}=y;if(n.select&&y.data!==void 0)if(a&&y.data===(u==null?void 0:u.data)&&n.select===M(this,Va))P=M(this,js);else try{X(this,Va,n.select),P=n.select(y.data),P=If(a==null?void 0:a.data,P,n),X(this,js,P),X(this,Un,null)}catch(U){X(this,Un,U)}else P=y.data;if(n.placeholderData!==void 0&&P===void 0&&x==="pending"){let U;if(a!=null&&a.isPlaceholderData&&n.placeholderData===(h==null?void 0:h.placeholderData))U=a.data;else if(U=typeof n.placeholderData=="function"?n.placeholderData((H=M(this,zs))==null?void 0:H.state.data,M(this,zs)):n.placeholderData,n.select&&U!==void 0)try{U=n.select(U),X(this,Un,null)}catch(J){X(this,Un,J)}U!==void 0&&(x="success",P=If(a==null?void 0:a.data,U,n),w=!0)}M(this,Un)&&(_=M(this,Un),P=M(this,js),A=Date.now(),x="error");const C=y.fetchStatus==="fetching",S=x==="pending",E=x==="error",R=S&&C,L=P!==void 0;return{status:x,fetchStatus:y.fetchStatus,isPending:S,isSuccess:x==="success",isError:E,isInitialLoading:R,isLoading:R,data:P,dataUpdatedAt:y.dataUpdatedAt,error:_,errorUpdatedAt:A,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>p.dataUpdateCount||y.errorUpdateCount>p.errorUpdateCount,isFetching:C,isRefetching:C&&!S,isLoadingError:E&&!L,isPaused:y.fetchStatus==="paused",isPlaceholderData:w,isRefetchError:E&&L,isStale:ap(t,n),refetch:this.refetch}}updateResult(t){const n=M(this,Rt),r=this.createResult(M(this,ye),this.options);if(X(this,Pi,M(this,ye).state),X(this,Vs,this.options),M(this,Pi).data!==void 0&&X(this,zs,M(this,ye)),Mf(r,n))return;X(this,Rt,r);const s={},a=()=>{if(!n)return!0;const{notifyOnChangeProps:u}=this.options,h=typeof u=="function"?u():u;if(h==="all"||!h&&!M(this,Gs).size)return!0;const f=new Set(h??M(this,Gs));return this.options.throwOnError&&f.add("error"),Object.keys(M(this,Rt)).some(p=>{const v=p;return M(this,Rt)[v]!==n[v]&&f.has(v)})};(t==null?void 0:t.listeners)!==!1&&a()&&(s.listeners=!0),ge(this,Se,DS).call(this,{...s,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ge(this,Se,Uf).call(this)}},Lt=new WeakMap,ye=new WeakMap,Ba=new WeakMap,Rt=new WeakMap,Pi=new WeakMap,Vs=new WeakMap,Un=new WeakMap,Va=new WeakMap,js=new WeakMap,zs=new WeakMap,Ai=new WeakMap,_i=new WeakMap,Ur=new WeakMap,Gs=new WeakMap,Se=new WeakSet,$o=function(t){ge(this,Se,Vf).call(this);let n=M(this,ye).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(nn)),n},Lf=function(){ge(this,Se,Ff).call(this);const t=ks(this.options.staleTime,M(this,ye));if(Js||M(this,Rt).isStale||!xf(t))return;const r=AS(M(this,Rt).dataUpdatedAt,t)+1;X(this,Ai,setTimeout(()=>{M(this,Rt).isStale||this.updateResult()},r))},Df=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(M(this,ye)):this.options.refetchInterval)??!1},Nf=function(t){ge(this,Se,Bf).call(this),X(this,Ur,t),!(Js||wn(this.options.enabled,M(this,ye))===!1||!xf(M(this,Ur))||M(this,Ur)===0)&&X(this,_i,setInterval(()=>{(this.options.refetchIntervalInBackground||op.isFocused())&&ge(this,Se,$o).call(this)},M(this,Ur)))},Uf=function(){ge(this,Se,Lf).call(this),ge(this,Se,Nf).call(this,ge(this,Se,Df).call(this))},Ff=function(){M(this,Ai)&&(clearTimeout(M(this,Ai)),X(this,Ai,void 0))},Bf=function(){M(this,_i)&&(clearInterval(M(this,_i)),X(this,_i,void 0))},Vf=function(){const t=M(this,Lt).getQueryCache().build(M(this,Lt),this.options);if(t===M(this,ye))return;const n=M(this,ye);X(this,ye,t),X(this,Ba,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},DS=function(t){at.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(M(this,Rt))}),M(this,Lt).getQueryCache().notify({query:M(this,ye),type:"observerResultsUpdated"})})},Xv);function Y_(e,t){return wn(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function yy(e,t){return Y_(e,t)||e.state.data!==void 0&&jf(e,t,t.refetchOnMount)}function jf(e,t,n){if(wn(t.enabled,e)!==!1){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&ap(e,t)}return!1}function vy(e,t,n,r){return(e!==t||wn(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&ap(e,n)}function ap(e,t){return wn(t.enabled,e)!==!1&&e.isStaleByTime(ks(t.staleTime,e))}function X_(e,t){return!Mf(e.getCurrentResult(),t)}var NS=B.createContext(void 0),J_=e=>{const t=B.useContext(NS);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},kI=({client:e,children:t})=>(B.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),Hs.jsx(NS.Provider,{value:e,children:t})),US=B.createContext(!1),Z_=()=>B.useContext(US);US.Provider;function eO(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var tO=B.createContext(eO()),nO=()=>B.useContext(tO);function rO(e,t){return typeof e=="function"?e(...t):!!e}var iO=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},sO=e=>{B.useEffect(()=>{e.clearReset()},[e])},oO=({result:e,errorResetBoundary:t,throwOnError:n,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&rO(n,[e.error,r]),aO=e=>{e.suspense&&(typeof e.staleTime!="number"&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},lO=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,uO=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function cO(e,t,n){var p,v,y,w;const r=J_(),s=Z_(),a=nO(),u=r.defaultQueryOptions(e);(v=(p=r.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||v.call(p,u),u._optimisticResults=s?"isRestoring":"optimistic",aO(u),iO(u,a),sO(a);const[h]=B.useState(()=>new t(r,u)),f=h.getOptimisticResult(u);if(B.useSyncExternalStore(B.useCallback(P=>{const _=s?()=>{}:h.subscribe(at.batchCalls(P));return h.updateResult(),_},[h,s]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),B.useEffect(()=>{h.setOptions(u,{listeners:!1})},[u,h]),lO(u,f))throw uO(u,h,a);if(oO({result:f,errorResetBoundary:a,throwOnError:u.throwOnError,query:r.getQueryCache().get(u.queryHash)}))throw f.error;return(w=(y=r.getDefaultOptions().queries)==null?void 0:y._experimental_afterQuery)==null||w.call(y,u,f),u.notifyOnChangeProps?f:h.trackResult(f)}function xI(e,t){return cO(e,Q_)}const FS=B.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Yu=B.createContext({}),lp=B.createContext(null),up=typeof window<"u",hO=up?B.useLayoutEffect:B.useEffect,BS=B.createContext({strict:!1}),Xu=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),fO="framerAppearId",VS="data-"+Xu(fO),dO={skipAnimations:!1,useManualTiming:!1};function pO(e){let t=new Set,n=new Set,r=!1,s=!1;const a=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function h(p){a.has(p)&&(f.schedule(p),e()),p(u)}const f={schedule:(p,v=!1,y=!1)=>{const P=y&&r?t:n;return v&&a.add(p),P.has(p)||P.add(p),p},cancel:p=>{n.delete(p),a.delete(p)},process:p=>{if(u=p,r){s=!0;return}r=!0,[t,n]=[n,t],n.clear(),t.forEach(h),r=!1,s&&(s=!1,f.process(p))}};return f}const bl=["read","resolveKeyframes","update","preRender","render","postRender"],mO=40;function jS(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,u=bl.reduce((C,S)=>(C[S]=pO(a),C),{}),{read:h,resolveKeyframes:f,update:p,preRender:v,render:y,postRender:w}=u,P=()=>{const C=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(C-s.timestamp,mO),1),s.timestamp=C,s.isProcessing=!0,h.process(s),f.process(s),p.process(s),v.process(s),y.process(s),w.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(P))},_=()=>{n=!0,r=!0,s.isProcessing||e(P)};return{schedule:bl.reduce((C,S)=>{const E=u[S];return C[S]=(R,L=!1,j=!1)=>(n||_(),E.schedule(R,L,j)),C},{}),cancel:C=>{for(let S=0;S<bl.length;S++)u[bl[S]].cancel(C)},state:s,steps:u}}const{schedule:cp,cancel:MI}=jS(queueMicrotask,!1);function vs(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}const zS=B.createContext({});let wy=!1;function gO(e,t,n,r,s){var a;const{visualElement:u}=B.useContext(Yu),h=B.useContext(BS),f=B.useContext(lp),p=B.useContext(FS).reducedMotion,v=B.useRef();r=r||h.renderer,!v.current&&r&&(v.current=r(e,{visualState:t,parent:u,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:p}));const y=v.current,w=B.useContext(zS);y&&!y.projection&&s&&(y.type==="html"||y.type==="svg")&&vO(v.current,n,s,w),B.useInsertionEffect(()=>{y&&y.update(n,f)});const P=n[VS],_=B.useRef(!!P&&!window.MotionHandoffIsComplete&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,P)));return hO(()=>{y&&(y.updateFeatures(),cp.render(y.render),_.current&&y.animationState&&y.animationState.animateChanges())}),B.useEffect(()=>{y&&(!_.current&&y.animationState&&y.animationState.animateChanges(),_.current=!1,wy||(wy=!0,queueMicrotask(yO)))}),y}function yO(){window.MotionHandoffIsComplete=!0}function vO(e,t,n,r){const{layoutId:s,layout:a,drag:u,dragConstraints:h,layoutScroll:f,layoutRoot:p}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:GS(e.parent)),e.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!u||h&&vs(h),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:f,layoutRoot:p})}function GS(e){if(e)return e.options.allowProjection!==!1?e.projection:GS(e.parent)}function wO(e,t,n){return B.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):vs(n)&&(n.current=r))},[t])}function ba(e){return typeof e=="string"||Array.isArray(e)}function Ia(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const hp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],fp=["initial",...hp];function Ju(e){return Ia(e.animate)||fp.some(t=>ba(e[t]))}function HS(e){return!!(Ju(e)||e.variants)}function SO(e,t){if(Ju(e)){const{initial:n,animate:r}=e;return{initial:n===!1||ba(n)?n:void 0,animate:ba(r)?r:void 0}}return e.inherit!==!1?t:{}}function CO(e){const{initial:t,animate:n}=SO(e,B.useContext(Yu));return B.useMemo(()=>({initial:t,animate:n}),[Sy(t),Sy(n)])}function Sy(e){return Array.isArray(e)?e.join(" "):e}const Cy={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Zs={};for(const e in Cy)Zs[e]={isEnabled:t=>Cy[e].some(n=>!!t[n])};function TO(e){for(const t in e)Zs[t]={...Zs[t],...e[t]}}const WS=B.createContext({}),RO=Symbol.for("motionComponentSymbol"),vt=e=>e;let zf=vt;function EO({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:s}){e&&TO(e);function a(h,f){let p;const v={...B.useContext(FS),...h,layoutId:PO(h)},{isStatic:y}=v,w=CO(h),P=r(h,y);if(!y&&up){AO();const _=_O(v);p=_.MeasureLayout,w.visualElement=gO(s,P,v,t,_.ProjectionNode)}return Hs.jsxs(Yu.Provider,{value:w,children:[p&&w.visualElement?Hs.jsx(p,{visualElement:w.visualElement,...v}):null,n(s,h,wO(P,w.visualElement,f),P,y,w.visualElement)]})}const u=B.forwardRef(a);return u[RO]=s,u}function PO({layoutId:e}){const t=B.useContext(WS).id;return t&&e!==void 0?t+"-"+e:e}function AO(e,t){B.useContext(BS).strict}function _O(e){const{drag:t,layout:n}=Zs;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function qS(e){function t(r,s={}){return EO(e(r,s))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,s)=>(n.has(s)||n.set(s,t(s)),n.get(s))})}const OO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function dp(e){return typeof e!="string"||e.includes("-")?!1:!!(OO.indexOf(e)>-1||/[A-Z]/u.test(e))}const Pu={};function kO(e){Object.assign(Pu,e)}const $a=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ni=new Set($a);function $S(e,{layout:t,layoutId:n}){return ni.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Pu[e]||e==="opacity")}const yt=e=>!!(e&&e.getVelocity),KS=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Xr=(e,t,n)=>n>t?t:n<e?e:n,lo={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},aa={...lo,transform:e=>Xr(0,1,e)},Il={...lo,default:1},la=e=>Math.round(e*1e5)/1e5,pp=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,xO=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,MO=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu;function Ka(e){return typeof e=="string"}function bO(e){return e==null}const Qa=e=>({test:t=>Ka(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),_r=Qa("deg"),jn=Qa("%"),oe=Qa("px"),IO=Qa("vh"),LO=Qa("vw"),Ty={...jn,parse:e=>jn.parse(e)/100,transform:e=>jn.transform(e*100)},Ry={...lo,transform:Math.round},mp={borderWidth:oe,borderTopWidth:oe,borderRightWidth:oe,borderBottomWidth:oe,borderLeftWidth:oe,borderRadius:oe,radius:oe,borderTopLeftRadius:oe,borderTopRightRadius:oe,borderBottomRightRadius:oe,borderBottomLeftRadius:oe,width:oe,maxWidth:oe,height:oe,maxHeight:oe,size:oe,top:oe,right:oe,bottom:oe,left:oe,padding:oe,paddingTop:oe,paddingRight:oe,paddingBottom:oe,paddingLeft:oe,margin:oe,marginTop:oe,marginRight:oe,marginBottom:oe,marginLeft:oe,rotate:_r,rotateX:_r,rotateY:_r,rotateZ:_r,scale:Il,scaleX:Il,scaleY:Il,scaleZ:Il,skew:_r,skewX:_r,skewY:_r,distance:oe,translateX:oe,translateY:oe,translateZ:oe,x:oe,y:oe,z:oe,perspective:oe,transformPerspective:oe,opacity:aa,originX:Ty,originY:Ty,originZ:oe,zIndex:Ry,backgroundPositionX:oe,backgroundPositionY:oe,fillOpacity:aa,strokeOpacity:aa,numOctaves:Ry},DO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},NO=$a.length;function UO(e,t,n){let r="",s=!0;for(let a=0;a<NO;a++){const u=$a[a],h=e[u];if(h===void 0)continue;let f=!0;if(typeof h=="number"?f=h===(u.startsWith("scale")?1:0):f=parseFloat(h)===0,!f||n){const p=KS(h,mp[u]);if(!f){s=!1;const v=DO[u]||u;r+=`${v}(${p}) `}n&&(t[u]=p)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}const QS=e=>t=>typeof t=="string"&&t.startsWith(e),YS=QS("--"),FO=QS("var(--"),gp=e=>FO(e)?BO.test(e.split("/*")[0].trim()):!1,BO=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function yp(e,t,n){const{style:r,vars:s,transformOrigin:a}=e;let u=!1,h=!1;for(const f in t){const p=t[f];if(ni.has(f)){u=!0;continue}else if(YS(f)){s[f]=p;continue}else{const v=KS(p,mp[f]);f.startsWith("origin")?(h=!0,a[f]=v):r[f]=v}}if(t.transform||(u||n?r.transform=UO(t,e.transform,n):r.transform&&(r.transform="none")),h){const{originX:f="50%",originY:p="50%",originZ:v=0}=a;r.transformOrigin=`${f} ${p} ${v}`}}const vp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function XS(e,t,n){for(const r in t)!yt(t[r])&&!$S(r,n)&&(e[r]=t[r])}function VO({transformTemplate:e},t){return B.useMemo(()=>{const n=vp();return yp(n,t,e),Object.assign({},n.vars,n.style)},[t])}function jO(e,t){const n=e.style||{},r={};return XS(r,n,e),Object.assign(r,VO(e,t)),r}function zO(e,t){const n={},r=jO(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const GO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Au(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||GO.has(e)}let JS=e=>!Au(e);function HO(e){e&&(JS=t=>t.startsWith("on")?!Au(t):e(t))}try{HO(require("@emotion/is-prop-valid").default)}catch{}function WO(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(JS(s)||n===!0&&Au(s)||!t&&!Au(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}function Ey(e,t,n){return typeof e=="string"?e:oe.transform(t+n*e)}function qO(e,t,n){const r=Ey(t,e.x,e.width),s=Ey(n,e.y,e.height);return`${r} ${s}`}const $O={offset:"stroke-dashoffset",array:"stroke-dasharray"},KO={offset:"strokeDashoffset",array:"strokeDasharray"};function QO(e,t,n=1,r=0,s=!0){e.pathLength=1;const a=s?$O:KO;e[a.offset]=oe.transform(-r);const u=oe.transform(t),h=oe.transform(n);e[a.array]=`${u} ${h}`}function wp(e,{attrX:t,attrY:n,attrScale:r,originX:s,originY:a,pathLength:u,pathSpacing:h=1,pathOffset:f=0,...p},v,y){if(yp(e,p,y),v){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:w,style:P,dimensions:_}=e;w.transform&&(_&&(P.transform=w.transform),delete w.transform),_&&(s!==void 0||a!==void 0||P.transform)&&(P.transformOrigin=qO(_,s!==void 0?s:.5,a!==void 0?a:.5)),t!==void 0&&(w.x=t),n!==void 0&&(w.y=n),r!==void 0&&(w.scale=r),u!==void 0&&QO(w,u,h,f,!1)}const ZS=()=>({...vp(),attrs:{}}),Sp=e=>typeof e=="string"&&e.toLowerCase()==="svg";function YO(e,t,n,r){const s=B.useMemo(()=>{const a=ZS();return wp(a,t,Sp(r),e.transformTemplate),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};XS(a,e.style,e),s.style={...a,...s.style}}return s}function XO(e=!1){return(n,r,s,{latestValues:a},u)=>{const f=(dp(n)?YO:zO)(r,a,u,n),p=WO(r,typeof n=="string",e),v=n!==B.Fragment?{...p,...f,ref:s}:{},{children:y}=r,w=B.useMemo(()=>yt(y)?y.get():y,[y]);return B.createElement(n,{...v,children:w})}}function eC(e,{style:t,vars:n},r,s){Object.assign(e.style,t,s&&s.getProjectionStyles(r));for(const a in n)e.style.setProperty(a,n[a])}const tC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function nC(e,t,n,r){eC(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(tC.has(s)?s:Xu(s),t.attrs[s])}function Cp(e,t,n){var r;const{style:s}=e,a={};for(const u in s)(yt(s[u])||t.style&&yt(t.style[u])||$S(u,e)||((r=n==null?void 0:n.getValue(u))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[u]=s[u]);return n&&s&&typeof s.willChange=="string"&&(n.applyWillChange=!1),a}function rC(e,t,n){const r=Cp(e,t,n);for(const s in e)if(yt(e[s])||yt(t[s])){const a=$a.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=e[s]}return r}function Py(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function Tp(e,t,n,r){if(typeof t=="function"){const[s,a]=Py(r);t=t(n!==void 0?n:e.custom,s,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,a]=Py(r);t=t(n!==void 0?n:e.custom,s,a)}return t}function JO(e){const t=B.useRef(null);return t.current===null&&(t.current=e()),t.current}const Gf=e=>Array.isArray(e),ZO=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),ek=e=>Gf(e)?e[e.length-1]||0:e;function Kl(e){const t=yt(e)?e.get():e;return ZO(t)?t.toValue():t}const iC=new Set(["opacity","clipPath","filter","transform"]);function sC(e){if(ni.has(e))return"transform";if(iC.has(e))return Xu(e)}function Zu(e,t){e.indexOf(t)===-1&&e.push(t)}function ec(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function tk({applyWillChange:e=!1,scrapeMotionValuesFromProps:t,createRenderState:n,onMount:r},s,a,u,h){const f={latestValues:rk(s,a,u,h?!1:e,t),renderState:n()};return r&&(f.mount=p=>r(s,p,f)),f}const oC=e=>(t,n)=>{const r=B.useContext(Yu),s=B.useContext(lp),a=()=>tk(e,t,r,s,n);return n?a():JO(a)};function nk(e,t){const n=sC(t);n&&Zu(e,n)}function Ay(e,t,n){const r=Array.isArray(t)?t:[t];for(let s=0;s<r.length;s++){const a=Tp(e,r[s]);if(a){const{transitionEnd:u,transition:h,...f}=a;n(f,u)}}}function rk(e,t,n,r,s){var a;const u={},h=[],f=r&&((a=e.style)===null||a===void 0?void 0:a.willChange)===void 0,p=s(e,{});for(const x in p)u[x]=Kl(p[x]);let{initial:v,animate:y}=e;const w=Ju(e),P=HS(e);t&&P&&!w&&e.inherit!==!1&&(v===void 0&&(v=t.initial),y===void 0&&(y=t.animate));let _=n?n.initial===!1:!1;_=_||v===!1;const A=_?y:v;return A&&typeof A!="boolean"&&!Ia(A)&&Ay(e,A,(x,C)=>{for(const S in x){let E=x[S];if(Array.isArray(E)){const R=_?E.length-1:0;E=E[R]}E!==null&&(u[S]=E)}for(const S in C)u[S]=C[S]}),f&&(y&&v!==!1&&!Ia(y)&&Ay(e,y,x=>{for(const C in x)nk(h,C)}),h.length&&(u.willChange=h.join(","))),u}const{schedule:Ce,cancel:pr,state:ot,steps:vh}=jS(typeof requestAnimationFrame<"u"?requestAnimationFrame:vt,!0),ik={useVisualState:oC({scrapeMotionValuesFromProps:rC,createRenderState:ZS,onMount:(e,t,{renderState:n,latestValues:r})=>{Ce.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Ce.render(()=>{wp(n,r,Sp(t.tagName),e.transformTemplate),nC(t,n)})}})},sk={useVisualState:oC({applyWillChange:!0,scrapeMotionValuesFromProps:Cp,createRenderState:vp})};function aC(e,{forwardMotionProps:t=!1},n,r){return{...dp(e)?ik:sk,preloadedFeatures:n,useRender:XO(t),createVisualElement:r,Component:e}}function nr(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const lC=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function tc(e,t="page"){return{point:{x:e[`${t}X`],y:e[`${t}Y`]}}}const ok=e=>t=>lC(t)&&e(t,tc(t));function sr(e,t,n,r){return nr(e,t,ok(n),r)}const ak=(e,t)=>n=>t(e(n)),or=(...e)=>e.reduce(ak);function uC(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const _y=uC("dragHorizontal"),Oy=uC("dragVertical");function cC(e){let t=!1;if(e==="y")t=Oy();else if(e==="x")t=_y();else{const n=_y(),r=Oy();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function hC(){const e=cC(!0);return e?(e(),!1):!0}class ri{constructor(t){this.isMounted=!1,this.node=t}update(){}}function ky(e,t){const n=t?"pointerenter":"pointerleave",r=t?"onHoverStart":"onHoverEnd",s=(a,u)=>{if(a.pointerType==="touch"||hC())return;const h=e.getProps();e.animationState&&h.whileHover&&e.animationState.setActive("whileHover",t);const f=h[r];f&&Ce.postRender(()=>f(a,u))};return sr(e.current,n,s,{passive:!e.getProps()[r]})}class lk extends ri{mount(){this.unmount=or(ky(this.node,!0),ky(this.node,!1))}unmount(){}}class uk extends ri{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=or(nr(this.node.current,"focus",()=>this.onFocus()),nr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const fC=(e,t)=>t?e===t?!0:fC(e,t.parentElement):!1;function wh(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,tc(n))}class ck extends ri{constructor(){super(...arguments),this.removeStartListeners=vt,this.removeEndListeners=vt,this.removeAccessibleListeners=vt,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),a=sr(window,"pointerup",(h,f)=>{if(!this.checkPressEnd())return;const{onTap:p,onTapCancel:v,globalTapTarget:y}=this.node.getProps(),w=!y&&!fC(this.node.current,h.target)?v:p;w&&Ce.update(()=>w(h,f))},{passive:!(r.onTap||r.onPointerUp)}),u=sr(window,"pointercancel",(h,f)=>this.cancelPress(h,f),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=or(a,u),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=a=>{if(a.key!=="Enter"||this.isPressing)return;const u=h=>{h.key!=="Enter"||!this.checkPressEnd()||wh("up",(f,p)=>{const{onTap:v}=this.node.getProps();v&&Ce.postRender(()=>v(f,p))})};this.removeEndListeners(),this.removeEndListeners=nr(this.node.current,"keyup",u),wh("down",(h,f)=>{this.startPress(h,f)})},n=nr(this.node.current,"keydown",t),r=()=>{this.isPressing&&wh("cancel",(a,u)=>this.cancelPress(a,u))},s=nr(this.node.current,"blur",r);this.removeAccessibleListeners=or(n,s)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Ce.postRender(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!hC()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Ce.postRender(()=>r(t,n))}mount(){const t=this.node.getProps(),n=sr(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=nr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=or(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Hf=new WeakMap,Sh=new WeakMap,hk=e=>{const t=Hf.get(e.target);t&&t(e)},fk=e=>{e.forEach(hk)};function dk({root:e,...t}){const n=e||document;Sh.has(n)||Sh.set(n,{});const r=Sh.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(fk,{root:e,...t})),r[s]}function pk(e,t,n){const r=dk(t);return Hf.set(e,n),r.observe(e),()=>{Hf.delete(e),r.unobserve(e)}}const mk={some:0,all:1};class gk extends ri{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:a}=t,u={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:mk[s]},h=f=>{const{isIntersecting:p}=f;if(this.isInView===p||(this.isInView=p,a&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:v,onViewportLeave:y}=this.node.getProps(),w=p?v:y;w&&w(f)};return pk(this.node.current,u,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(yk(t,n))&&this.startObserver()}unmount(){}}function yk({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const vk={inView:{Feature:gk},tap:{Feature:ck},focus:{Feature:uk},hover:{Feature:lk}};function dC(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function nc(e,t,n){const r=e.getProps();return Tp(r,t,n!==void 0?n:r.custom,e)}const ar=e=>e*1e3,lr=e=>e/1e3,wk={type:"spring",stiffness:500,damping:25,restSpeed:10},Sk=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Ck={type:"keyframes",duration:.8},Tk={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Rk=(e,{keyframes:t})=>t.length>2?Ck:ni.has(e)?e.startsWith("scale")?Sk(t[1]):wk:Tk;function Ek({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:u,repeatDelay:h,from:f,elapsed:p,...v}){return!!Object.keys(v).length}function Rp(e,t){return e[t]||e.default||e}const Pk=e=>e!==null;function rc(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(Pk),a=t&&n!=="loop"&&t%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const pC=e=>/^0[^.\s]+$/u.test(e);function Ak(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||pC(e):!0}const mC=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),_k=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Ok(e){const t=_k.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function gC(e,t,n=1){const[r,s]=Ok(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const u=a.trim();return mC(u)?parseFloat(u):u}return gp(s)?gC(s,t,n+1):s}const kk=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),xy=e=>e===lo||e===oe,My=(e,t)=>parseFloat(e.split(", ")[t]),by=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return My(s[1],t);{const a=r.match(/^matrix\((.+)\)$/u);return a?My(a[1],e):0}},xk=new Set(["x","y","z"]),Mk=$a.filter(e=>!xk.has(e));function bk(e){const t=[];return Mk.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const eo={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:by(4,13),y:by(5,14)};eo.translateX=eo.x;eo.translateY=eo.y;const yC=e=>t=>t.test(e),Ik={test:e=>e==="auto",parse:e=>e},vC=[lo,oe,jn,_r,LO,IO,Ik],Iy=e=>vC.find(yC(e)),Mi=new Set;let Wf=!1,qf=!1;function wC(){if(qf){const e=Array.from(Mi).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=bk(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([a,u])=>{var h;(h=r.getValue(a))===null||h===void 0||h.set(u)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}qf=!1,Wf=!1,Mi.forEach(e=>e.complete()),Mi.clear()}function SC(){Mi.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(qf=!0)})}function Lk(){SC(),wC()}class Ep{constructor(t,n,r,s,a,u=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=a,this.isAsync=u}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Mi.add(this),Wf||(Wf=!0,Ce.read(SC),Ce.resolveKeyframes(wC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;for(let a=0;a<t.length;a++)if(t[a]===null)if(a===0){const u=s==null?void 0:s.get(),h=t[t.length-1];if(u!==void 0)t[0]=u;else if(r&&n){const f=r.readValue(n,h);f!=null&&(t[0]=f)}t[0]===void 0&&(t[0]=h),s&&u===void 0&&s.set(t[0])}else t[a]=t[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Mi.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Mi.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Pp=(e,t)=>n=>!!(Ka(n)&&MO.test(n)&&n.startsWith(e)||t&&!bO(n)&&Object.prototype.hasOwnProperty.call(n,t)),CC=(e,t,n)=>r=>{if(!Ka(r))return r;const[s,a,u,h]=r.match(pp);return{[e]:parseFloat(s),[t]:parseFloat(a),[n]:parseFloat(u),alpha:h!==void 0?parseFloat(h):1}},Dk=e=>Xr(0,255,e),Ch={...lo,transform:e=>Math.round(Dk(e))},wi={test:Pp("rgb","red"),parse:CC("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Ch.transform(e)+", "+Ch.transform(t)+", "+Ch.transform(n)+", "+la(aa.transform(r))+")"};function Nk(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const $f={test:Pp("#"),parse:Nk,transform:wi.transform},ws={test:Pp("hsl","hue"),parse:CC("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+jn.transform(la(t))+", "+jn.transform(la(n))+", "+la(aa.transform(r))+")"},mt={test:e=>wi.test(e)||$f.test(e)||ws.test(e),parse:e=>wi.test(e)?wi.parse(e):ws.test(e)?ws.parse(e):$f.parse(e),transform:e=>Ka(e)?e:e.hasOwnProperty("red")?wi.transform(e):ws.transform(e)};function Uk(e){var t,n;return isNaN(e)&&Ka(e)&&(((t=e.match(pp))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(xO))===null||n===void 0?void 0:n.length)||0)>0}const TC="number",RC="color",Fk="var",Bk="var(",Ly="${}",Vk=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function La(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const h=t.replace(Vk,f=>(mt.test(f)?(r.color.push(a),s.push(RC),n.push(mt.parse(f))):f.startsWith(Bk)?(r.var.push(a),s.push(Fk),n.push(f)):(r.number.push(a),s.push(TC),n.push(parseFloat(f))),++a,Ly)).split(Ly);return{values:n,split:h,indexes:r,types:s}}function EC(e){return La(e).values}function PC(e){const{split:t,types:n}=La(e),r=t.length;return s=>{let a="";for(let u=0;u<r;u++)if(a+=t[u],s[u]!==void 0){const h=n[u];h===TC?a+=la(s[u]):h===RC?a+=mt.transform(s[u]):a+=s[u]}return a}}const jk=e=>typeof e=="number"?0:e;function zk(e){const t=EC(e);return PC(e)(t.map(jk))}const Jr={test:Uk,parse:EC,createTransformer:PC,getAnimatableNone:zk},Gk=new Set(["brightness","contrast","saturate","opacity"]);function Hk(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(pp)||[];if(!r)return e;const s=n.replace(r,"");let a=Gk.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+s+")"}const Wk=/\b([a-z-]*)\(.*?\)/gu,Kf={...Jr,getAnimatableNone:e=>{const t=e.match(Wk);return t?t.map(Hk).join(" "):e}},qk={...mp,color:mt,backgroundColor:mt,outlineColor:mt,fill:mt,stroke:mt,borderColor:mt,borderTopColor:mt,borderRightColor:mt,borderBottomColor:mt,borderLeftColor:mt,filter:Kf,WebkitFilter:Kf},Ap=e=>qk[e];function AC(e,t){let n=Ap(e);return n!==Kf&&(n=Jr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const $k=new Set(["auto","none","0"]);function Kk(e,t,n){let r=0,s;for(;r<e.length&&!s;){const a=e[r];typeof a=="string"&&!$k.has(a)&&La(a).values.length&&(s=e[r]),r++}if(s&&n)for(const a of t)e[a]=AC(n,s)}class _C extends Ep{constructor(t,n,r,s,a){super(t,n,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<t.length;f++){let p=t[f];if(typeof p=="string"&&(p=p.trim(),gp(p))){const v=gC(p,n.current);v!==void 0&&(t[f]=v),f===t.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!kk.has(r)||t.length!==2)return;const[s,a]=t,u=Iy(s),h=Iy(a);if(u!==h)if(xy(u)&&xy(h))for(let f=0;f<t.length;f++){const p=t[f];typeof p=="string"&&(t[f]=parseFloat(p))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)Ak(t[s])&&r.push(s);r.length&&Kk(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=eo[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var t;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const a=n.getValue(r);a&&a.jump(this.measuredOrigin,!1);const u=s.length-1,h=s[u];s[u]=eo[r](n.measureViewportBox(),window.getComputedStyle(n.current)),h!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=h),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([f,p])=>{n.getValue(f).set(p)}),this.resolveNoneKeyframes()}}function OC(e){let t;return()=>(t===void 0&&(t=e()),t)}let Ql;function Qk(){Ql=void 0}const ur={now:()=>(Ql===void 0&&ur.set(ot.isProcessing||dO.useManualTiming?ot.timestamp:performance.now()),Ql),set:e=>{Ql=e,queueMicrotask(Qk)}},Dy=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Jr.test(e)||e==="0")&&!e.startsWith("url("));function Yk(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function Xk(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],u=Dy(s,t),h=Dy(a,t);return!u||!h?!1:Yk(e)||n==="spring"&&r}const Jk=40;class kC{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:u="loop",...h}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ur.now(),this.options={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:a,repeatType:u,...h},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Jk?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Lk(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=ur.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:a,delay:u,onComplete:h,onUpdate:f,isGenerator:p}=this.options;if(!p&&!Xk(t,r,s,a))if(u)this.options.duration=0;else{f==null||f(rc(t,this.options,n)),h==null||h(),this.resolveFinishedPromise();return}const v=this.initPlayback(t,n);v!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...v},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}function xC(e,t){return t?e*(1e3/t):0}const Zk=5;function MC(e,t,n){const r=Math.max(t-Zk,0);return xC(n-e(r),t-r)}const Th=.001,ex=.01,tx=10,nx=.05,rx=1;function ix({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let s,a,u=1-t;u=Xr(nx,rx,u),e=Xr(ex,tx,lr(e)),u<1?(s=p=>{const v=p*u,y=v*e,w=v-n,P=Qf(p,u),_=Math.exp(-y);return Th-w/P*_},a=p=>{const y=p*u*e,w=y*n+n,P=Math.pow(u,2)*Math.pow(p,2)*e,_=Math.exp(-y),A=Qf(Math.pow(p,2),u);return(-s(p)+Th>0?-1:1)*((w-P)*_)/A}):(s=p=>{const v=Math.exp(-p*e),y=(p-n)*e+1;return-Th+v*y},a=p=>{const v=Math.exp(-p*e),y=(n-p)*(e*e);return v*y});const h=5/e,f=ox(s,a,h);if(e=ar(e),isNaN(f))return{stiffness:100,damping:10,duration:e};{const p=Math.pow(f,2)*r;return{stiffness:p,damping:u*2*Math.sqrt(r*p),duration:e}}}const sx=12;function ox(e,t,n){let r=n;for(let s=1;s<sx;s++)r=r-e(r)/t(r);return r}function Qf(e,t){return e*Math.sqrt(1-t*t)}const ax=["duration","bounce"],lx=["stiffness","damping","mass"];function Ny(e,t){return t.some(n=>e[n]!==void 0)}function ux(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Ny(e,lx)&&Ny(e,ax)){const n=ix(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function bC({keyframes:e,restDelta:t,restSpeed:n,...r}){const s=e[0],a=e[e.length-1],u={done:!1,value:s},{stiffness:h,damping:f,mass:p,duration:v,velocity:y,isResolvedFromDuration:w}=ux({...r,velocity:-lr(r.velocity||0)}),P=y||0,_=f/(2*Math.sqrt(h*p)),A=a-s,x=lr(Math.sqrt(h/p)),C=Math.abs(A)<5;n||(n=C?.01:2),t||(t=C?.005:.5);let S;if(_<1){const E=Qf(x,_);S=R=>{const L=Math.exp(-_*x*R);return a-L*((P+_*x*A)/E*Math.sin(E*R)+A*Math.cos(E*R))}}else if(_===1)S=E=>a-Math.exp(-x*E)*(A+(P+x*A)*E);else{const E=x*Math.sqrt(_*_-1);S=R=>{const L=Math.exp(-_*x*R),j=Math.min(E*R,300);return a-L*((P+_*x*A)*Math.sinh(j)+E*A*Math.cosh(j))/E}}return{calculatedDuration:w&&v||null,next:E=>{const R=S(E);if(w)u.done=E>=v;else{let L=0;_<1&&(L=E===0?ar(P):MC(S,E,R));const j=Math.abs(L)<=n,H=Math.abs(a-R)<=t;u.done=j&&H}return u.value=u.done?a:R,u}}}function Uy({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:u,min:h,max:f,restDelta:p=.5,restSpeed:v}){const y=e[0],w={done:!1,value:y},P=U=>h!==void 0&&U<h||f!==void 0&&U>f,_=U=>h===void 0?f:f===void 0||Math.abs(h-U)<Math.abs(f-U)?h:f;let A=n*t;const x=y+A,C=u===void 0?x:u(x);C!==x&&(A=C-y);const S=U=>-A*Math.exp(-U/r),E=U=>C+S(U),R=U=>{const J=S(U),Y=E(U);w.done=Math.abs(J)<=p,w.value=w.done?C:Y};let L,j;const H=U=>{P(w.value)&&(L=U,j=bC({keyframes:[w.value,_(w.value)],velocity:MC(E,U,w.value),damping:s,stiffness:a,restDelta:p,restSpeed:v}))};return H(0),{calculatedDuration:null,next:U=>{let J=!1;return!j&&L===void 0&&(J=!0,R(U),H(U)),L!==void 0&&U>=L?j.next(U-L):(!J&&R(U),w)}}}const IC=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,cx=1e-7,hx=12;function fx(e,t,n,r,s){let a,u,h=0;do u=t+(n-t)/2,a=IC(u,r,s)-e,a>0?n=u:t=u;while(Math.abs(a)>cx&&++h<hx);return u}function Ya(e,t,n,r){if(e===t&&n===r)return vt;const s=a=>fx(a,0,1,e,n);return a=>a===0||a===1?a:IC(s(a),t,r)}const dx=Ya(.42,0,1,1),px=Ya(0,0,.58,1),LC=Ya(.42,0,.58,1),mx=e=>Array.isArray(e)&&typeof e[0]!="number",DC=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,NC=e=>t=>1-e(1-t),_p=e=>1-Math.sin(Math.acos(e)),UC=NC(_p),gx=DC(_p),FC=Ya(.33,1.53,.69,.99),Op=NC(FC),yx=DC(Op),vx=e=>(e*=2)<1?.5*Op(e):.5*(2-Math.pow(2,-10*(e-1))),Fy={linear:vt,easeIn:dx,easeInOut:LC,easeOut:px,circIn:_p,circInOut:gx,circOut:UC,backIn:Op,backInOut:yx,backOut:FC,anticipate:vx},By=e=>{if(Array.isArray(e)){zf(e.length===4);const[t,n,r,s]=e;return Ya(t,n,r,s)}else if(typeof e=="string")return zf(Fy[e]!==void 0),Fy[e];return e},Da=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},Ue=(e,t,n)=>e+(t-e)*n;function Rh(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function wx({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,a=0,u=0;if(!t)s=a=u=n;else{const h=n<.5?n*(1+t):n+t-n*t,f=2*n-h;s=Rh(f,h,e+1/3),a=Rh(f,h,e),u=Rh(f,h,e-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(u*255),alpha:r}}function _u(e,t){return n=>n>0?t:e}const Eh=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},Sx=[$f,wi,ws],Cx=e=>Sx.find(t=>t.test(e));function Vy(e){const t=Cx(e);if(!t)return!1;let n=t.parse(e);return t===ws&&(n=wx(n)),n}const jy=(e,t)=>{const n=Vy(e),r=Vy(t);if(!n||!r)return _u(e,t);const s={...n};return a=>(s.red=Eh(n.red,r.red,a),s.green=Eh(n.green,r.green,a),s.blue=Eh(n.blue,r.blue,a),s.alpha=Ue(n.alpha,r.alpha,a),wi.transform(s))},Yf=new Set(["none","hidden"]);function Tx(e,t){return Yf.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function Rx(e,t){return n=>Ue(e,t,n)}function kp(e){return typeof e=="number"?Rx:typeof e=="string"?gp(e)?_u:mt.test(e)?jy:Ax:Array.isArray(e)?BC:typeof e=="object"?mt.test(e)?jy:Ex:_u}function BC(e,t){const n=[...e],r=n.length,s=e.map((a,u)=>kp(a)(a,t[u]));return a=>{for(let u=0;u<r;u++)n[u]=s[u](a);return n}}function Ex(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=kp(e[s])(e[s],t[s]));return s=>{for(const a in r)n[a]=r[a](s);return n}}function Px(e,t){var n;const r=[],s={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const u=t.types[a],h=e.indexes[u][s[u]],f=(n=e.values[h])!==null&&n!==void 0?n:0;r[a]=f,s[u]++}return r}const Ax=(e,t)=>{const n=Jr.createTransformer(t),r=La(e),s=La(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Yf.has(e)&&!s.values.length||Yf.has(t)&&!r.values.length?Tx(e,t):or(BC(Px(r,s),s.values),n):_u(e,t)};function VC(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Ue(e,t,n):kp(e)(e,t)}function _x(e,t,n){const r=[],s=n||VC,a=e.length-1;for(let u=0;u<a;u++){let h=s(e[u],e[u+1]);if(t){const f=Array.isArray(t)?t[u]||vt:t;h=or(f,h)}r.push(h)}return r}function Ox(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const a=e.length;if(zf(a===t.length),a===1)return()=>t[0];if(a===2&&e[0]===e[1])return()=>t[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const u=_x(t,r,s),h=u.length,f=p=>{let v=0;if(h>1)for(;v<e.length-2&&!(p<e[v+1]);v++);const y=Da(e[v],e[v+1],p);return u[v](y)};return n?p=>f(Xr(e[0],e[a-1],p)):f}function kx(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=Da(0,t,r);e.push(Ue(n,1,s))}}function xx(e){const t=[0];return kx(t,e.length-1),t}function Mx(e,t){return e.map(n=>n*t)}function bx(e,t){return e.map(()=>t||LC).splice(0,e.length-1)}function Ou({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=mx(r)?r.map(By):By(r),a={done:!1,value:t[0]},u=Mx(n&&n.length===t.length?n:xx(t),e),h=Ox(u,t,{ease:Array.isArray(s)?s:bx(t,s)});return{calculatedDuration:e,next:f=>(a.value=h(f),a.done=f>=e,a)}}const zy=2e4;function Ix(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<zy;)t+=n,r=e.next(t);return t>=zy?1/0:t}const Lx=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Ce.update(t,!0),stop:()=>pr(t),now:()=>ot.isProcessing?ot.timestamp:ur.now()}},Dx={decay:Uy,inertia:Uy,tween:Ou,keyframes:Ou,spring:bC},Nx=e=>e/100;class xp extends kC{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:f}=this.options;f&&f()};const{name:n,motionValue:r,element:s,keyframes:a}=this.options,u=(s==null?void 0:s.KeyframeResolver)||Ep,h=(f,p)=>this.onKeyframesResolved(f,p);this.resolver=new u(a,h,n,r,s),this.resolver.scheduleResolve()}initPlayback(t){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:u=0}=this.options,h=Dx[n]||Ou;let f,p;h!==Ou&&typeof t[0]!="number"&&(f=or(Nx,VC(t[0],t[1])),t=[0,100]);const v=h({...this.options,keyframes:t});a==="mirror"&&(p=h({...this.options,keyframes:[...t].reverse(),velocity:-u})),v.calculatedDuration===null&&(v.calculatedDuration=Ix(v));const{calculatedDuration:y}=v,w=y+s,P=w*(r+1)-s;return{generator:v,mirroredGenerator:p,mapPercentToKeyframes:f,calculatedDuration:y,resolvedDuration:w,totalDuration:P}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:r}=this;if(!r){const{keyframes:U}=this.options;return{done:!0,value:U[U.length-1]}}const{finalKeyframe:s,generator:a,mirroredGenerator:u,mapPercentToKeyframes:h,keyframes:f,calculatedDuration:p,totalDuration:v,resolvedDuration:y}=r;if(this.startTime===null)return a.next(0);const{delay:w,repeat:P,repeatType:_,repeatDelay:A,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-v/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const C=this.currentTime-w*(this.speed>=0?1:-1),S=this.speed>=0?C<0:C>v;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=v);let E=this.currentTime,R=a;if(P){const U=Math.min(this.currentTime,v)/y;let J=Math.floor(U),Y=U%1;!Y&&U>=1&&(Y=1),Y===1&&J--,J=Math.min(J,P+1),!!(J%2)&&(_==="reverse"?(Y=1-Y,A&&(Y-=A/y)):_==="mirror"&&(R=u)),E=Xr(0,1,Y)*y}const L=S?{done:!1,value:f[0]}:R.next(E);h&&(L.value=h(L.value));let{done:j}=L;!S&&p!==null&&(j=this.speed>=0?this.currentTime>=v:this.currentTime<=0);const H=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&j);return H&&s!==void 0&&(L.value=rc(f,this.options,s)),x&&x(L.value),H&&this.finish(),L}get duration(){const{resolved:t}=this;return t?lr(t.calculatedDuration):0}get time(){return lr(this.currentTime)}set time(t){t=ar(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=lr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=Lx,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const jC=e=>Array.isArray(e)&&typeof e[0]=="number";function zC(e){return!!(!e||typeof e=="string"&&e in Mp||jC(e)||Array.isArray(e)&&e.every(zC))}const Ko=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Mp={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ko([0,.65,.55,1]),circOut:Ko([.55,0,1,.45]),backIn:Ko([.31,.01,.66,-.59]),backOut:Ko([.33,1.53,.69,.99])};function Ux(e){return GC(e)||Mp.easeOut}function GC(e){if(e)return jC(e)?Ko(e):Array.isArray(e)?e.map(Ux):Mp[e]}function Fx(e,t,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:u="loop",ease:h,times:f}={}){const p={[t]:n};f&&(p.offset=f);const v=GC(h);return Array.isArray(v)&&(p.easing=v),e.animate(p,{delay:r,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:a+1,direction:u==="reverse"?"alternate":"normal"})}const Bx=OC(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ku=10,Vx=2e4;function jx(e){return e.type==="spring"||!zC(e.ease)}function zx(e,t){const n=new xp({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const s=[];let a=0;for(;!r.done&&a<Vx;)r=n.sample(a),s.push(r.value),a+=ku;return{times:void 0,keyframes:s,duration:a-ku,ease:"linear"}}class Gy extends kC{constructor(t){super(t);const{name:n,motionValue:r,element:s,keyframes:a}=this.options;this.resolver=new _C(a,(u,h)=>this.onKeyframesResolved(u,h),n,r,s),this.resolver.scheduleResolve()}initPlayback(t,n){var r;let{duration:s=300,times:a,ease:u,type:h,motionValue:f,name:p,startTime:v}=this.options;if(!(!((r=f.owner)===null||r===void 0)&&r.current))return!1;if(jx(this.options)){const{onComplete:w,onUpdate:P,motionValue:_,element:A,...x}=this.options,C=zx(t,x);t=C.keyframes,t.length===1&&(t[1]=t[0]),s=C.duration,a=C.times,u=C.ease,h="keyframes"}const y=Fx(f.owner.current,p,t,{...this.options,duration:s,times:a,ease:u});return y.startTime=v??this.calcStartTime(),this.pendingTimeline?(y.timeline=this.pendingTimeline,this.pendingTimeline=void 0):y.onfinish=()=>{const{onComplete:w}=this.options;f.set(rc(t,this.options,n)),w&&w(),this.cancel(),this.resolveFinishedPromise()},{animation:y,duration:s,times:a,type:h,ease:u,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return lr(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return lr(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=ar(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return vt;const{animation:r}=n;r.timeline=t,r.onfinish=null}return vt}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:r,duration:s,type:a,ease:u,times:h}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:p,onUpdate:v,onComplete:y,element:w,...P}=this.options,_=new xp({...P,keyframes:r,duration:s,type:a,ease:u,times:h,isGenerator:!0}),A=ar(this.time);p.setWithVelocity(_.sample(A-ku).value,_.sample(A).value,ku)}const{onStop:f}=this.options;f&&f(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:r,repeatDelay:s,repeatType:a,damping:u,type:h}=t;return Bx()&&r&&iC.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!s&&a!=="mirror"&&u!==0&&h!=="inertia"}}function Gx(e,t){let n;const r=()=>{const{currentTime:s}=t,u=(s===null?0:s.value)/100;n!==u&&e(u),n=u};return Ce.update(r,!0),()=>pr(r)}const Hx=OC(()=>window.ScrollTimeline!==void 0);class Wx{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,n){return Promise.all(this.animations).then(t).catch(n)}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t){const n=this.animations.map(r=>{if(Hx()&&r.attachTimeline)r.attachTimeline(t);else return r.pause(),Gx(s=>{r.time=r.duration*s},t)});return()=>{n.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}const bp=(e,t,n,r={},s,a,u)=>h=>{const f=Rp(r,e)||{},p=f.delay||r.delay||0;let{elapsed:v=0}=r;v=v-ar(p);let y={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...f,delay:-v,onUpdate:P=>{t.set(P),f.onUpdate&&f.onUpdate(P)},onComplete:()=>{h(),f.onComplete&&f.onComplete(),u&&u()},onStop:u,name:e,motionValue:t,element:a?void 0:s};Ek(f)||(y={...y,...Rk(e,y)}),y.duration&&(y.duration=ar(y.duration)),y.repeatDelay&&(y.repeatDelay=ar(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let w=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(y.duration=0,y.delay===0&&(w=!0)),w&&!a&&t.get()!==void 0){const P=rc(y.keyframes,f);if(P!==void 0)return Ce.update(()=>{y.onUpdate(P),y.onComplete()}),new Wx([])}return!a&&Gy.supports(y)?new Gy(y):new xp(y)};class Ip{constructor(){this.subscriptions=[]}add(t){return Zu(this.subscriptions,t),()=>ec(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let a=0;a<s;a++){const u=this.subscriptions[a];u&&u(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Hy=30,qx=e=>!isNaN(parseFloat(e));class HC{constructor(t,n={}){this.version="11.3.31",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const a=ur.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=ur.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=qx(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Ip);const r=this.events[t].add(n);return t==="change"?()=>{r(),Ce.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=ur.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Hy)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Hy);return xC(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Na(e,t){return new HC(e,t)}function $x(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Na(n))}function Kx(e,t){const n=nc(e,t);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const u in a){const h=ek(a[u]);$x(e,u,h)}}function WC(e){return e.props[VS]}class Qx extends HC{constructor(){super(...arguments),this.output=[],this.counts=new Map}add(t){const n=sC(t);if(!n)return;const r=this.counts.get(n)||0;this.counts.set(n,r+1),r===0&&(this.output.push(n),this.update());let s=!1;return()=>{if(s)return;s=!0;const a=this.counts.get(n)-1;this.counts.set(n,a),a===0&&(ec(this.output,n),this.update())}}update(){this.set(this.output.length?this.output.join(", "):"auto")}}function Yx(e){return!!(yt(e)&&e.add)}function Xf(e,t){var n;if(!e.applyWillChange)return;let r=e.getValue("willChange");if(!r&&!(!((n=e.props.style)===null||n===void 0)&&n.willChange)&&(r=new Qx("auto"),e.addValue("willChange",r)),Yx(r))return r.add(t)}function Xx({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function qC(e,t,{delay:n=0,transitionOverride:r,type:s}={}){var a;let{transition:u=e.getDefaultTransition(),transitionEnd:h,...f}=t;r&&(u=r);const p=[],v=s&&e.animationState&&e.animationState.getState()[s];for(const y in f){const w=e.getValue(y,(a=e.latestValues[y])!==null&&a!==void 0?a:null),P=f[y];if(P===void 0||v&&Xx(v,y))continue;const _={delay:n,...Rp(u||{},y)};let A=!1;if(window.MotionHandoffAnimation){const C=WC(e);if(C){const S=window.MotionHandoffAnimation(C,y,Ce);S!==null&&(_.startTime=S,A=!0)}}w.start(bp(y,w,P,e.shouldReduceMotion&&ni.has(y)?{type:!1}:_,e,A,Xf(e,y)));const x=w.animation;x&&p.push(x)}return h&&Promise.all(p).then(()=>{Ce.update(()=>{h&&Kx(e,h)})}),p}function Jf(e,t,n={}){var r;const s=nc(e,t,n.type==="exit"?(r=e.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(a=n.transitionOverride);const u=s?()=>Promise.all(qC(e,s,n)):()=>Promise.resolve(),h=e.variantChildren&&e.variantChildren.size?(p=0)=>{const{delayChildren:v=0,staggerChildren:y,staggerDirection:w}=a;return Jx(e,t,v+p,y,w,n)}:()=>Promise.resolve(),{when:f}=a;if(f){const[p,v]=f==="beforeChildren"?[u,h]:[h,u];return p().then(()=>v())}else return Promise.all([u(),h(n.delay)])}function Jx(e,t,n=0,r=0,s=1,a){const u=[],h=(e.variantChildren.size-1)*r,f=s===1?(p=0)=>p*r:(p=0)=>h-p*r;return Array.from(e.variantChildren).sort(Zx).forEach((p,v)=>{p.notify("AnimationStart",t),u.push(Jf(p,t,{...a,delay:n+f(v)}).then(()=>p.notify("AnimationComplete",t)))}),Promise.all(u)}function Zx(e,t){return e.sortNodePosition(t)}function eM(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(a=>Jf(e,a,n));r=Promise.all(s)}else if(typeof t=="string")r=Jf(e,t,n);else{const s=typeof t=="function"?nc(e,t,n.custom):t;r=Promise.all(qC(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const tM=[...hp].reverse(),nM=hp.length;function rM(e){return t=>Promise.all(t.map(({animation:n,options:r})=>eM(e,n,r)))}function iM(e){let t=rM(e),n=Wy(),r=!0;const s=f=>(p,v)=>{var y;const w=nc(e,v,f==="exit"?(y=e.presenceContext)===null||y===void 0?void 0:y.custom:void 0);if(w){const{transition:P,transitionEnd:_,...A}=w;p={...p,...A,..._}}return p};function a(f){t=f(e)}function u(f){const p=e.getProps(),v=e.getVariantContext(!0)||{},y=[],w=new Set;let P={},_=1/0;for(let x=0;x<nM;x++){const C=tM[x],S=n[C],E=p[C]!==void 0?p[C]:v[C],R=ba(E),L=C===f?S.isActive:null;L===!1&&(_=x);let j=E===v[C]&&E!==p[C]&&R;if(j&&r&&e.manuallyAnimateOnMount&&(j=!1),S.protectedKeys={...P},!S.isActive&&L===null||!E&&!S.prevProp||Ia(E)||typeof E=="boolean")continue;let U=sM(S.prevProp,E)||C===f&&S.isActive&&!j&&R||x>_&&R,J=!1;const Y=Array.isArray(E)?E:[E];let m=Y.reduce(s(C),{});L===!1&&(m={});const{prevResolvedValues:Ae={}}=S,Le={...Ae,...m},D=ue=>{U=!0,w.has(ue)&&(J=!0,w.delete(ue)),S.needsAnimating[ue]=!0;const Re=e.getValue(ue);Re&&(Re.liveStyle=!1)};for(const ue in Le){const Re=m[ue],Z=Ae[ue];if(P.hasOwnProperty(ue))continue;let W=!1;Gf(Re)&&Gf(Z)?W=!dC(Re,Z):W=Re!==Z,W?Re!=null?D(ue):w.add(ue):Re!==void 0&&w.has(ue)?D(ue):S.protectedKeys[ue]=!0}S.prevProp=E,S.prevResolvedValues=m,S.isActive&&(P={...P,...m}),r&&e.blockInitialAnimation&&(U=!1),U&&(!j||J)&&y.push(...Y.map(ue=>({animation:ue,options:{type:C}})))}if(w.size){const x={};w.forEach(C=>{const S=e.getBaseTarget(C),E=e.getValue(C);E&&(E.liveStyle=!0),x[C]=S??null}),y.push({animation:x})}let A=!!y.length;return r&&(p.initial===!1||p.initial===p.animate)&&!e.manuallyAnimateOnMount&&(A=!1),r=!1,A?t(y):Promise.resolve()}function h(f,p){var v;if(n[f].isActive===p)return Promise.resolve();(v=e.variantChildren)===null||v===void 0||v.forEach(w=>{var P;return(P=w.animationState)===null||P===void 0?void 0:P.setActive(f,p)}),n[f].isActive=p;const y=u(f);for(const w in n)n[w].protectedKeys={};return y}return{animateChanges:u,setActive:h,setAnimateFunction:a,getState:()=>n,reset:()=>{n=Wy(),r=!0}}}function sM(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!dC(t,e):!1}function ci(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Wy(){return{animate:ci(!0),whileInView:ci(),whileHover:ci(),whileTap:ci(),whileDrag:ci(),whileFocus:ci(),exit:ci()}}class oM extends ri{constructor(t){super(t),t.animationState||(t.animationState=iM(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Ia(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let aM=0;class lM extends ri{constructor(){super(...arguments),this.id=aM++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const uM={animation:{Feature:oM},exit:{Feature:lM}},qy=(e,t)=>Math.abs(e-t);function cM(e,t){const n=qy(e.x,t.x),r=qy(e.y,t.y);return Math.sqrt(n**2+r**2)}class $C{constructor(t,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Ah(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,P=cM(y.offset,{x:0,y:0})>=3;if(!w&&!P)return;const{point:_}=y,{timestamp:A}=ot;this.history.push({..._,timestamp:A});const{onStart:x,onMove:C}=this.handlers;w||(x&&x(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,y)},this.handlePointerMove=(y,w)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=Ph(w,this.transformPagePoint),Ce.update(this.updatePoint,!0)},this.handlePointerUp=(y,w)=>{this.end();const{onEnd:P,onSessionEnd:_,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Ah(y.type==="pointercancel"?this.lastMoveEventInfo:Ph(w,this.transformPagePoint),this.history);this.startEvent&&P&&P(y,x),_&&_(y,x)},!lC(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const u=tc(t),h=Ph(u,this.transformPagePoint),{point:f}=h,{timestamp:p}=ot;this.history=[{...f,timestamp:p}];const{onSessionStart:v}=n;v&&v(t,Ah(h,this.history)),this.removeListeners=or(sr(this.contextWindow,"pointermove",this.handlePointerMove),sr(this.contextWindow,"pointerup",this.handlePointerUp),sr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),pr(this.updatePoint)}}function Ph(e,t){return t?{point:t(e.point)}:e}function $y(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Ah({point:e},t){return{point:e,delta:$y(e,KC(t)),offset:$y(e,hM(t)),velocity:fM(t,.1)}}function hM(e){return e[0]}function KC(e){return e[e.length-1]}function fM(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=KC(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>ar(t)));)n--;if(!r)return{x:0,y:0};const a=lr(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const u={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}const QC=1e-4,dM=1-QC,pM=1+QC,YC=.01,mM=0-YC,gM=0+YC;function Qt(e){return e.max-e.min}function yM(e,t,n){return Math.abs(e-t)<=n}function Ky(e,t,n,r=.5){e.origin=r,e.originPoint=Ue(t.min,t.max,e.origin),e.scale=Qt(n)/Qt(t),e.translate=Ue(n.min,n.max,e.origin)-e.originPoint,(e.scale>=dM&&e.scale<=pM||isNaN(e.scale))&&(e.scale=1),(e.translate>=mM&&e.translate<=gM||isNaN(e.translate))&&(e.translate=0)}function ua(e,t,n,r){Ky(e.x,t.x,n.x,r?r.originX:void 0),Ky(e.y,t.y,n.y,r?r.originY:void 0)}function Qy(e,t,n){e.min=n.min+t.min,e.max=e.min+Qt(t)}function vM(e,t,n){Qy(e.x,t.x,n.x),Qy(e.y,t.y,n.y)}function Yy(e,t,n){e.min=t.min-n.min,e.max=e.min+Qt(t)}function ca(e,t,n){Yy(e.x,t.x,n.x),Yy(e.y,t.y,n.y)}function wM(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Ue(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Ue(n,e,r.max):Math.min(e,n)),e}function Xy(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function SM(e,{top:t,left:n,bottom:r,right:s}){return{x:Xy(e.x,n,s),y:Xy(e.y,t,r)}}function Jy(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function CM(e,t){return{x:Jy(e.x,t.x),y:Jy(e.y,t.y)}}function TM(e,t){let n=.5;const r=Qt(e),s=Qt(t);return s>r?n=Da(t.min,t.max-r,e.min):r>s&&(n=Da(e.min,e.max-s,t.min)),Xr(0,1,n)}function RM(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Zf=.35;function EM(e=Zf){return e===!1?e=0:e===!0&&(e=Zf),{x:Zy(e,"left","right"),y:Zy(e,"top","bottom")}}function Zy(e,t,n){return{min:ev(e,t),max:ev(e,n)}}function ev(e,t){return typeof e=="number"?e:e[t]||0}const tv=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ss=()=>({x:tv(),y:tv()}),nv=()=>({min:0,max:0}),Ge=()=>({x:nv(),y:nv()});function en(e){return[e("x"),e("y")]}function XC({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function PM({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function AM(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function _h(e){return e===void 0||e===1}function ed({scale:e,scaleX:t,scaleY:n}){return!_h(e)||!_h(t)||!_h(n)}function pi(e){return ed(e)||JC(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function JC(e){return rv(e.x)||rv(e.y)}function rv(e){return e&&e!=="0%"}function xu(e,t,n){const r=e-n,s=t*r;return n+s}function iv(e,t,n,r,s){return s!==void 0&&(e=xu(e,s,r)),xu(e,n,r)+t}function td(e,t=0,n=1,r,s){e.min=iv(e.min,t,n,r,s),e.max=iv(e.max,t,n,r,s)}function ZC(e,{x:t,y:n}){td(e.x,t.translate,t.scale,t.originPoint),td(e.y,n.translate,n.scale,n.originPoint)}const sv=.999999999999,ov=1.0000000000001;function _M(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let a,u;for(let h=0;h<s;h++){a=n[h],u=a.projectionDelta;const{visualElement:f}=a.options;f&&f.props.style&&f.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Ts(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),u&&(t.x*=u.x.scale,t.y*=u.y.scale,ZC(e,u)),r&&pi(a.latestValues)&&Ts(e,a.latestValues))}t.x<ov&&t.x>sv&&(t.x=1),t.y<ov&&t.y>sv&&(t.y=1)}function Cs(e,t){e.min=e.min+t,e.max=e.max+t}function av(e,t,n,r,s=.5){const a=Ue(e.min,e.max,s);td(e,t,n,a,r)}function Ts(e,t){av(e.x,t.x,t.scaleX,t.scale,t.originX),av(e.y,t.y,t.scaleY,t.scale,t.originY)}function e1(e,t){return XC(AM(e.getBoundingClientRect(),t))}function OM(e,t,n){const r=e1(e,n),{scroll:s}=t;return s&&(Cs(r.x,s.offset.x),Cs(r.y,s.offset.y)),r}const t1=({current:e})=>e?e.ownerDocument.defaultView:null,kM=new WeakMap;class xM{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ge(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=v=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(tc(v,"page").point)},a=(v,y)=>{var w;const{drag:P,dragPropagation:_,onDragStart:A}=this.getProps();if(P&&!_&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=cC(P),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),en(C=>{let S=this.getAxisMotionValue(C).get()||0;if(jn.test(S)){const{projection:E}=this.visualElement;if(E&&E.layout){const R=E.layout.layoutBox[C];R&&(S=Qt(R)*(parseFloat(S)/100))}}this.originPoint[C]=S}),A&&Ce.postRender(()=>A(v,y)),(w=this.removeWillChange)===null||w===void 0||w.call(this),this.removeWillChange=Xf(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},u=(v,y)=>{const{dragPropagation:w,dragDirectionLock:P,onDirectionLock:_,onDrag:A}=this.getProps();if(!w&&!this.openGlobalLock)return;const{offset:x}=y;if(P&&this.currentDirection===null){this.currentDirection=MM(x),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",y.point,x),this.updateAxis("y",y.point,x),this.visualElement.render(),A&&A(v,y)},h=(v,y)=>this.stop(v,y),f=()=>en(v=>{var y;return this.getAnimationState(v)==="paused"&&((y=this.getAxisMotionValue(v).animation)===null||y===void 0?void 0:y.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new $C(t,{onSessionStart:s,onStart:a,onMove:u,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,contextWindow:t1(this.visualElement)})}stop(t,n){var r;(r=this.removeWillChange)===null||r===void 0||r.call(this);const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:u}=this.getProps();u&&Ce.postRender(()=>u(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!Ll(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let u=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(u=wM(u,this.constraints[t],this.elastic[t])),a.set(u)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,a=this.constraints;n&&vs(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=SM(s.layoutBox,n):this.constraints=!1,this.elastic=EM(r),a!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&en(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=RM(s.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!vs(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=OM(r,s.root,this.visualElement.getTransformPagePoint());let u=CM(s.layout.layoutBox,a);if(n){const h=n(PM(u));this.hasMutatedConstraints=!!h,h&&(u=XC(h))}return u}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:u,onDragTransitionEnd:h}=this.getProps(),f=this.constraints||{},p=en(v=>{if(!Ll(v,n,this.currentDirection))return;let y=f&&f[v]||{};u&&(y={min:0,max:0});const w=s?200:1e6,P=s?40:1e7,_={type:"inertia",velocity:r?t[v]:0,bounceStiffness:w,bounceDamping:P,timeConstant:750,restDelta:1,restSpeed:10,...a,...y};return this.startAxisValueAnimation(v,_)});return Promise.all(p).then(h)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return r.start(bp(t,r,0,n,this.visualElement,!1,Xf(this.visualElement,t)))}stopAnimation(){en(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){en(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){en(n=>{const{drag:r}=this.getProps();if(!Ll(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(n);if(s&&s.layout){const{min:u,max:h}=s.layout.layoutBox[n];a.set(t[n]-Ue(u,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!vs(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};en(u=>{const h=this.getAxisMotionValue(u);if(h&&this.constraints!==!1){const f=h.get();s[u]=TM({min:f,max:f},this.constraints[u])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),en(u=>{if(!Ll(u,t,null))return;const h=this.getAxisMotionValue(u),{min:f,max:p}=this.constraints[u];h.set(Ue(f,p,s[u]))})}addListeners(){if(!this.visualElement.current)return;kM.set(this.visualElement,this);const t=this.visualElement.current,n=sr(t,"pointerdown",f=>{const{drag:p,dragListener:v=!0}=this.getProps();p&&v&&this.start(f)}),r=()=>{const{dragConstraints:f}=this.getProps();vs(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Ce.read(r);const u=nr(window,"resize",()=>this.scalePositionWithinConstraints()),h=s.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p})=>{this.isDragging&&p&&(en(v=>{const y=this.getAxisMotionValue(v);y&&(this.originPoint[v]+=f[v].translate,y.set(y.get()+f[v].translate))}),this.visualElement.render())});return()=>{u(),n(),a(),h&&h()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:u=Zf,dragMomentum:h=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:u,dragMomentum:h}}}function Ll(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function MM(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class bM extends ri{constructor(t){super(t),this.removeGroupControls=vt,this.removeListeners=vt,this.controls=new xM(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||vt}unmount(){this.removeGroupControls(),this.removeListeners()}}const lv=e=>(t,n)=>{e&&Ce.postRender(()=>e(t,n))};class IM extends ri{constructor(){super(...arguments),this.removePointerDownListener=vt}onPointerDown(t){this.session=new $C(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:t1(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:lv(t),onStart:lv(n),onMove:r,onEnd:(a,u)=>{delete this.session,s&&Ce.postRender(()=>s(a,u))}}}mount(){this.removePointerDownListener=sr(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function LM(){const e=B.useContext(lp);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,s=B.useId();B.useEffect(()=>r(s),[]);const a=B.useCallback(()=>n&&n(s),[s,n]);return!t&&n?[!1,a]:[!0]}const Yl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function uv(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const zo={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(oe.test(e))e=parseFloat(e);else return e;const n=uv(e,t.target.x),r=uv(e,t.target.y);return`${n}% ${r}%`}},DM={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=Jr.parse(e);if(s.length>5)return r;const a=Jr.createTransformer(e),u=typeof s[0]!="number"?1:0,h=n.x.scale*t.x,f=n.y.scale*t.y;s[0+u]/=h,s[1+u]/=f;const p=Ue(h,f,.5);return typeof s[2+u]=="number"&&(s[2+u]/=p),typeof s[3+u]=="number"&&(s[3+u]/=p),a(s)}};class NM extends B.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=t;kO(UM),a&&(n.group&&n.group.add(a),r&&r.register&&s&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Yl.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:a}=this.props,u=r.projection;return u&&(u.isPresent=a,s||t.layoutDependency!==n||n===void 0?u.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?u.promote():u.relegate()||Ce.postRender(()=>{const h=u.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),cp.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function n1(e){const[t,n]=LM(),r=B.useContext(WS);return Hs.jsx(NM,{...e,layoutGroup:r,switchLayoutGroup:B.useContext(zS),isPresent:t,safeToRemove:n})}const UM={borderRadius:{...zo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:zo,borderTopRightRadius:zo,borderBottomLeftRadius:zo,borderBottomRightRadius:zo,boxShadow:DM},r1=["TopLeft","TopRight","BottomLeft","BottomRight"],FM=r1.length,cv=e=>typeof e=="string"?parseFloat(e):e,hv=e=>typeof e=="number"||oe.test(e);function BM(e,t,n,r,s,a){s?(e.opacity=Ue(0,n.opacity!==void 0?n.opacity:1,VM(r)),e.opacityExit=Ue(t.opacity!==void 0?t.opacity:1,0,jM(r))):a&&(e.opacity=Ue(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let u=0;u<FM;u++){const h=`border${r1[u]}Radius`;let f=fv(t,h),p=fv(n,h);if(f===void 0&&p===void 0)continue;f||(f=0),p||(p=0),f===0||p===0||hv(f)===hv(p)?(e[h]=Math.max(Ue(cv(f),cv(p),r),0),(jn.test(p)||jn.test(f))&&(e[h]+="%")):e[h]=p}(t.rotate||n.rotate)&&(e.rotate=Ue(t.rotate||0,n.rotate||0,r))}function fv(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const VM=i1(0,.5,UC),jM=i1(.5,.95,vt);function i1(e,t,n){return r=>r<e?0:r>t?1:n(Da(e,t,r))}function dv(e,t){e.min=t.min,e.max=t.max}function Zt(e,t){dv(e.x,t.x),dv(e.y,t.y)}function pv(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function mv(e,t,n,r,s){return e-=t,e=xu(e,1/n,r),s!==void 0&&(e=xu(e,1/s,r)),e}function zM(e,t=0,n=1,r=.5,s,a=e,u=e){if(jn.test(t)&&(t=parseFloat(t),t=Ue(u.min,u.max,t/100)-u.min),typeof t!="number")return;let h=Ue(a.min,a.max,r);e===a&&(h-=t),e.min=mv(e.min,t,n,h,s),e.max=mv(e.max,t,n,h,s)}function gv(e,t,[n,r,s],a,u){zM(e,t[n],t[r],t[s],t.scale,a,u)}const GM=["x","scaleX","originX"],HM=["y","scaleY","originY"];function yv(e,t,n,r){gv(e.x,t,GM,n?n.x:void 0,r?r.x:void 0),gv(e.y,t,HM,n?n.y:void 0,r?r.y:void 0)}function vv(e){return e.translate===0&&e.scale===1}function s1(e){return vv(e.x)&&vv(e.y)}function wv(e,t){return e.min===t.min&&e.max===t.max}function WM(e,t){return wv(e.x,t.x)&&wv(e.y,t.y)}function Sv(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function o1(e,t){return Sv(e.x,t.x)&&Sv(e.y,t.y)}function Cv(e){return Qt(e.x)/Qt(e.y)}function Tv(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class qM{constructor(){this.members=[]}add(t){Zu(this.members,t),t.scheduleRender()}remove(t){if(ec(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function $M(e,t,n){let r="";const s=e.x.translate/t.x,a=e.y.translate/t.y,u=(n==null?void 0:n.z)||0;if((s||a||u)&&(r=`translate3d(${s}px, ${a}px, ${u}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:p,rotate:v,rotateX:y,rotateY:w,skewX:P,skewY:_}=n;p&&(r=`perspective(${p}px) ${r}`),v&&(r+=`rotate(${v}deg) `),y&&(r+=`rotateX(${y}deg) `),w&&(r+=`rotateY(${w}deg) `),P&&(r+=`skewX(${P}deg) `),_&&(r+=`skewY(${_}deg) `)}const h=e.x.scale*t.x,f=e.y.scale*t.y;return(h!==1||f!==1)&&(r+=`scale(${h}, ${f})`),r||"none"}const KM=(e,t)=>e.depth-t.depth;class QM{constructor(){this.children=[],this.isDirty=!1}add(t){Zu(this.children,t),this.isDirty=!0}remove(t){ec(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(KM),this.isDirty=!1,this.children.forEach(t)}}function YM(e,t){const n=ur.now(),r=({timestamp:s})=>{const a=s-n;a>=t&&(pr(r),e(a-t))};return Ce.read(r,!0),()=>pr(r)}function XM(e){return e instanceof SVGElement&&e.tagName!=="svg"}function JM(e,t,n){const r=yt(e)?e:Na(e);return r.start(bp("",r,t,n)),r.animation}const mi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Qo=typeof window<"u"&&window.MotionDebug!==void 0,Oh=["","X","Y","Z"],ZM={visibility:"hidden"},Rv=1e3;let eb=0;function kh(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function a1(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=WC(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Ce,!(s||a))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&a1(r)}function l1({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(u={},h=t==null?void 0:t()){this.id=eb++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Qo&&(mi.totalNodes=mi.resolvedTargetDeltas=mi.recalculatedProjection=0),this.nodes.forEach(rb),this.nodes.forEach(lb),this.nodes.forEach(ub),this.nodes.forEach(ib),Qo&&window.MotionDebug.record(mi)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new QM)}addEventListener(u,h){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new Ip),this.eventHandlers.get(u).add(h)}notifyListeners(u,...h){const f=this.eventHandlers.get(u);f&&f.notify(...h)}hasListeners(u){return this.eventHandlers.has(u)}mount(u,h=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=XM(u),this.instance=u;const{layoutId:f,layout:p,visualElement:v}=this.options;if(v&&!v.current&&v.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),h&&(p||f)&&(this.isLayoutDirty=!0),e){let y;const w=()=>this.root.updateBlockedByResize=!1;e(u,()=>{this.root.updateBlockedByResize=!0,y&&y(),y=YM(w,250),Yl.hasAnimatedSinceResize&&(Yl.hasAnimatedSinceResize=!1,this.nodes.forEach(Pv))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&v&&(f||p)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:w,hasRelativeTargetChanged:P,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||v.getDefaultTransition()||pb,{onLayoutAnimationStart:x,onLayoutAnimationComplete:C}=v.getProps(),S=!this.targetLayout||!o1(this.targetLayout,_)||P,E=!w&&P;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||E||w&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(y,E);const R={...Rp(A,"layout"),onPlay:x,onComplete:C};(v.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R)}else w||Pv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,pr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(cb),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&a1(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let v=0;v<this.path.length;v++){const y=this.path[v];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:h,layout:f}=this.options;if(h===void 0&&!f)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ev);return}this.isUpdating||this.nodes.forEach(ob),this.isUpdating=!1,this.nodes.forEach(ab),this.nodes.forEach(tb),this.nodes.forEach(nb),this.clearAllSnapshots();const h=ur.now();ot.delta=Xr(0,1e3/60,h-ot.timestamp),ot.timestamp=h,ot.isProcessing=!0,vh.update.process(ot),vh.preRender.process(ot),vh.render.process(ot),ot.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,cp.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(sb),this.sharedNodes.forEach(hb)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ce.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ce.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ge(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(h=!1),h){const f=r(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!s)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!s1(this.projectionDelta),f=this.getTransformTemplate(),p=f?f(this.latestValues,""):void 0,v=p!==this.prevTransformTemplateValue;u&&(h||pi(this.latestValues)||v)&&(s(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const h=this.measurePageBox();let f=this.removeElementScroll(h);return u&&(f=this.removeTransform(f)),mb(f),{animationId:this.root.animationId,measuredBox:h,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:h}=this.options;if(!h)return Ge();const f=h.measureViewportBox();if(!(((u=this.scroll)===null||u===void 0?void 0:u.wasRoot)||this.path.some(gb))){const{scroll:v}=this.root;v&&(Cs(f.x,v.offset.x),Cs(f.y,v.offset.y))}return f}removeElementScroll(u){var h;const f=Ge();if(Zt(f,u),!((h=this.scroll)===null||h===void 0)&&h.wasRoot)return f;for(let p=0;p<this.path.length;p++){const v=this.path[p],{scroll:y,options:w}=v;v!==this.root&&y&&w.layoutScroll&&(y.wasRoot&&Zt(f,u),Cs(f.x,y.offset.x),Cs(f.y,y.offset.y))}return f}applyTransform(u,h=!1){const f=Ge();Zt(f,u);for(let p=0;p<this.path.length;p++){const v=this.path[p];!h&&v.options.layoutScroll&&v.scroll&&v!==v.root&&Ts(f,{x:-v.scroll.offset.x,y:-v.scroll.offset.y}),pi(v.latestValues)&&Ts(f,v.latestValues)}return pi(this.latestValues)&&Ts(f,this.latestValues),f}removeTransform(u){const h=Ge();Zt(h,u);for(let f=0;f<this.path.length;f++){const p=this.path[f];if(!p.instance||!pi(p.latestValues))continue;ed(p.latestValues)&&p.updateSnapshot();const v=Ge(),y=p.measurePageBox();Zt(v,y),yv(h,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,v)}return pi(this.latestValues)&&yv(h,this.latestValues),h}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ot.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var h;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==f;if(!(u||p&&this.isSharedProjectionDirty||this.isProjectionDirty||!((h=this.parent)===null||h===void 0)&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:w}=this.options;if(!(!this.layout||!(y||w))){if(this.resolvedRelativeTargetAt=ot.timestamp,!this.targetDelta&&!this.relativeTarget){const P=this.getClosestProjectingParent();P&&P.layout&&this.animationProgress!==1?(this.relativeParent=P,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ge(),this.relativeTargetOrigin=Ge(),ca(this.relativeTargetOrigin,this.layout.layoutBox,P.layout.layoutBox),Zt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ge(),this.targetWithTransforms=Ge()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),vM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Zt(this.target,this.layout.layoutBox),ZC(this.target,this.targetDelta)):Zt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const P=this.getClosestProjectingParent();P&&!!P.resumingFrom==!!this.resumingFrom&&!P.options.layoutScroll&&P.target&&this.animationProgress!==1?(this.relativeParent=P,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ge(),this.relativeTargetOrigin=Ge(),ca(this.relativeTargetOrigin,this.target,P.target),Zt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Qo&&mi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||ed(this.parent.latestValues)||JC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var u;const h=this.getLead(),f=!!this.resumingFrom||this!==h;let p=!0;if((this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty)&&(p=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===ot.timestamp&&(p=!1),p)return;const{layout:v,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(v||y))return;Zt(this.layoutCorrected,this.layout.layoutBox);const w=this.treeScale.x,P=this.treeScale.y;_M(this.layoutCorrected,this.treeScale,this.path,f),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox,h.targetWithTransforms=Ge());const{target:_}=h;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(pv(this.prevProjectionDelta.x,this.projectionDelta.x),pv(this.prevProjectionDelta.y,this.projectionDelta.y)),ua(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==w||this.treeScale.y!==P||!Tv(this.projectionDelta.x,this.prevProjectionDelta.x)||!Tv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_)),Qo&&mi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var h;if((h=this.options.visualElement)===null||h===void 0||h.scheduleRender(),u){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ss(),this.projectionDelta=Ss(),this.projectionDeltaWithTransform=Ss()}setAnimationOrigin(u,h=!1){const f=this.snapshot,p=f?f.latestValues:{},v={...this.latestValues},y=Ss();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const w=Ge(),P=f?f.source:void 0,_=this.layout?this.layout.source:void 0,A=P!==_,x=this.getStack(),C=!x||x.members.length<=1,S=!!(A&&!C&&this.options.crossfade===!0&&!this.path.some(db));this.animationProgress=0;let E;this.mixTargetDelta=R=>{const L=R/1e3;Av(y.x,u.x,L),Av(y.y,u.y,L),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ca(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),fb(this.relativeTarget,this.relativeTargetOrigin,w,L),E&&WM(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=Ge()),Zt(E,this.relativeTarget)),A&&(this.animationValues=v,BM(v,p,this.latestValues,L,S,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(pr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ce.update(()=>{Yl.hasAnimatedSinceResize=!0,this.currentAnimation=JM(0,Rv,{...u,onUpdate:h=>{this.mixTargetDelta(h),u.onUpdate&&u.onUpdate(h)},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Rv),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:h,target:f,layout:p,latestValues:v}=u;if(!(!h||!f||!p)){if(this!==u&&this.layout&&p&&u1(this.options.animationType,this.layout.layoutBox,p.layoutBox)){f=this.target||Ge();const y=Qt(this.layout.layoutBox.x);f.x.min=u.target.x.min,f.x.max=f.x.min+y;const w=Qt(this.layout.layoutBox.y);f.y.min=u.target.y.min,f.y.max=f.y.min+w}Zt(h,f),Ts(h,v),ua(this.projectionDeltaWithTransform,this.layoutCorrected,h,v)}}registerSharedNode(u,h){this.sharedNodes.has(u)||this.sharedNodes.set(u,new qM),this.sharedNodes.get(u).add(h);const p=h.options.initialPromotionConfig;h.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(h):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var u;const{layoutId:h}=this.options;return h?((u=this.getStack())===null||u===void 0?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:h}=this.options;return h?(u=this.getStack())===null||u===void 0?void 0:u.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:h,preserveFollowOpacity:f}={}){const p=this.getStack();p&&p.promote(this,f),u&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let h=!1;const{latestValues:f}=u;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(h=!0),!h)return;const p={};f.z&&kh("z",u,p,this.animationValues);for(let v=0;v<Oh.length;v++)kh(`rotate${Oh[v]}`,u,p,this.animationValues),kh(`skew${Oh[v]}`,u,p,this.animationValues);u.render();for(const v in p)u.setStaticValue(v,p[v]),this.animationValues&&(this.animationValues[v]=p[v]);u.scheduleRender()}getProjectionStyles(u){var h,f;if(!this.instance||this.isSVG)return;if(!this.isVisible)return ZM;const p={visibility:""},v=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,p.opacity="",p.pointerEvents=Kl(u==null?void 0:u.pointerEvents)||"",p.transform=v?v(this.latestValues,""):"none",p;const y=this.getLead();if(!this.projectionDelta||!this.layout||!y.target){const A={};return this.options.layoutId&&(A.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,A.pointerEvents=Kl(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!pi(this.latestValues)&&(A.transform=v?v({},""):"none",this.hasProjected=!1),A}const w=y.animationValues||y.latestValues;this.applyTransformsToTarget(),p.transform=$M(this.projectionDeltaWithTransform,this.treeScale,w),v&&(p.transform=v(w,p.transform));const{x:P,y:_}=this.projectionDelta;p.transformOrigin=`${P.origin*100}% ${_.origin*100}% 0`,y.animationValues?p.opacity=y===this?(f=(h=w.opacity)!==null&&h!==void 0?h:this.latestValues.opacity)!==null&&f!==void 0?f:1:this.preserveOpacity?this.latestValues.opacity:w.opacityExit:p.opacity=y===this?w.opacity!==void 0?w.opacity:"":w.opacityExit!==void 0?w.opacityExit:0;for(const A in Pu){if(w[A]===void 0)continue;const{correct:x,applyTo:C}=Pu[A],S=p.transform==="none"?w[A]:x(w[A],y);if(C){const E=C.length;for(let R=0;R<E;R++)p[C[R]]=S}else p[A]=S}return this.options.layoutId&&(p.pointerEvents=y===this?Kl(u==null?void 0:u.pointerEvents)||"":"none"),p}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var h;return(h=u.currentAnimation)===null||h===void 0?void 0:h.stop()}),this.root.nodes.forEach(Ev),this.root.sharedNodes.clear()}}}function tb(e){e.updateLayout()}function nb(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:a}=e.options,u=n.source!==e.layout.source;a==="size"?en(y=>{const w=u?n.measuredBox[y]:n.layoutBox[y],P=Qt(w);w.min=r[y].min,w.max=w.min+P}):u1(a,n.layoutBox,r)&&en(y=>{const w=u?n.measuredBox[y]:n.layoutBox[y],P=Qt(r[y]);w.max=w.min+P,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[y].max=e.relativeTarget[y].min+P)});const h=Ss();ua(h,r,n.layoutBox);const f=Ss();u?ua(f,e.applyTransform(s,!0),n.measuredBox):ua(f,r,n.layoutBox);const p=!s1(h);let v=!1;if(!e.resumeFrom){const y=e.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:w,layout:P}=y;if(w&&P){const _=Ge();ca(_,n.layoutBox,w.layoutBox);const A=Ge();ca(A,r,P.layoutBox),o1(_,A)||(v=!0),y.options.layoutRoot&&(e.relativeTarget=A,e.relativeTargetOrigin=_,e.relativeParent=y)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:f,layoutDelta:h,hasLayoutChanged:p,hasRelativeTargetChanged:v})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function rb(e){Qo&&mi.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function ib(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function sb(e){e.clearSnapshot()}function Ev(e){e.clearMeasurements()}function ob(e){e.isLayoutDirty=!1}function ab(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Pv(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function lb(e){e.resolveTargetDelta()}function ub(e){e.calcProjection()}function cb(e){e.resetSkewAndRotation()}function hb(e){e.removeLeadSnapshot()}function Av(e,t,n){e.translate=Ue(t.translate,0,n),e.scale=Ue(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function _v(e,t,n,r){e.min=Ue(t.min,n.min,r),e.max=Ue(t.max,n.max,r)}function fb(e,t,n,r){_v(e.x,t.x,n.x,r),_v(e.y,t.y,n.y,r)}function db(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const pb={duration:.45,ease:[.4,0,.1,1]},Ov=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),kv=Ov("applewebkit/")&&!Ov("chrome/")?Math.round:vt;function xv(e){e.min=kv(e.min),e.max=kv(e.max)}function mb(e){xv(e.x),xv(e.y)}function u1(e,t,n){return e==="position"||e==="preserve-aspect"&&!yM(Cv(t),Cv(n),.2)}function gb(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const yb=l1({attachResizeListener:(e,t)=>nr(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),xh={current:void 0},c1=l1({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!xh.current){const e=new yb({});e.mount(window),e.setOptions({layoutScroll:!0}),xh.current=e}return xh.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),vb={pan:{Feature:IM},drag:{Feature:bM,ProjectionNode:c1,MeasureLayout:n1}},nd={current:null},h1={current:!1};function wb(){if(h1.current=!0,!!up)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>nd.current=e.matches;e.addListener(t),t()}else nd.current=!1}function Sb(e,t,n){for(const r in t){const s=t[r],a=n[r];if(yt(s))e.addValue(r,s);else if(yt(a))e.addValue(r,Na(s,{owner:e}));else if(a!==s)if(e.hasValue(r)){const u=e.getValue(r);u.liveStyle===!0?u.jump(s):u.hasAnimated||u.set(s)}else{const u=e.getStaticValue(r);e.addValue(r,Na(u!==void 0?u:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Mv=new WeakMap,Cb=[...vC,mt,Jr],Tb=e=>Cb.find(yC(e)),bv=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Rb=fp.length;class Eb{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:u},h={}){this.applyWillChange=!1,this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ep,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.isRenderScheduled=!1,this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.isRenderScheduled=!1,this.scheduleRender=()=>{this.isRenderScheduled||(this.isRenderScheduled=!0,Ce.render(this.render,!1,!0))};const{latestValues:f,renderState:p}=u;this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=p,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=h,this.blockInitialAnimation=!!a,this.isControllingVariants=Ju(n),this.isVariantNode=HS(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:v,...y}=this.scrapeMotionValuesFromProps(n,{},this);for(const w in y){const P=y[w];f[w]!==void 0&&yt(P)&&P.set(f[w],!1)}}mount(t){this.current=t,Mv.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),h1.current||wb(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:nd.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Mv.delete(this.current),this.projection&&this.projection.unmount(),pr(this.notifyUpdate),pr(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=ni.has(t),s=n.on("change",h=>{this.latestValues[t]=h,this.props.onUpdate&&Ce.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),a(),u&&u(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Zs){const n=Zs[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ge()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<bv.length;r++){const s=bv[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,u=t[a];u&&(this.propEventSubscriptions[s]=this.on(s,u))}this.prevMotionValues=Sb(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<Rb;r++){const s=fp[r],a=this.props[s];(ba(a)||a===!1)&&(n[s]=a)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Na(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){var r;let s=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options);return s!=null&&(typeof s=="string"&&(mC(s)||pC(s))?s=parseFloat(s):!Tb(s)&&Jr.test(n)&&(s=AC(t,n)),this.setBaseTarget(t,yt(s)?s.get():s)),yt(s)?s.get():s}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const u=Tp(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);u&&(s=u[t])}if(r&&s!==void 0)return s;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!yt(a)?a:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Ip),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class f1 extends Eb{constructor(){super(...arguments),this.KeyframeResolver=_C}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}}function Pb(e){return window.getComputedStyle(e)}class Ab extends f1{constructor(){super(...arguments),this.type="html",this.applyWillChange=!0,this.renderInstance=eC}readValueFromInstance(t,n){if(ni.has(n)){const r=Ap(n);return r&&r.default||0}else{const r=Pb(t),s=(YS(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return e1(t,n)}build(t,n,r){yp(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return Cp(t,n,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;yt(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class _b extends f1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ge}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(ni.has(n)){const r=Ap(n);return r&&r.default||0}return n=tC.has(n)?n:Xu(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return rC(t,n,r)}build(t,n,r){wp(t,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,r,s){nC(t,n,r,s)}mount(t){this.isSVGTag=Sp(t.tagName),super.mount(t)}}const Ob=(e,t)=>dp(e)?new _b(t):new Ab(t,{allowProjection:e!==B.Fragment}),kb={layout:{ProjectionNode:c1,MeasureLayout:n1}},xb={...uM,...vk,...vb,...kb},II=qS((e,t)=>aC(e,t,xb,Ob)),LI=qS(aC);var d1={exports:{}};(function(e){(function(){function t(A,x){document.addEventListener?A.addEventListener("scroll",x,!1):A.attachEvent("scroll",x)}function n(A){document.body?A():document.addEventListener?document.addEventListener("DOMContentLoaded",function x(){document.removeEventListener("DOMContentLoaded",x),A()}):document.attachEvent("onreadystatechange",function x(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",x),A())})}function r(A){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(A)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function s(A,x){A.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+x+";"}function a(A){var x=A.g.offsetWidth,C=x+100;return A.j.style.width=C+"px",A.i.scrollLeft=C,A.h.scrollLeft=A.h.scrollWidth+100,A.l!==x?(A.l=x,!0):!1}function u(A,x){function C(){var E=S;a(E)&&E.g.parentNode!==null&&x(E.l)}var S=A;t(A.h,C),t(A.i,C),a(A)}function h(A,x,C){x=x||{},C=C||window,this.family=A,this.style=x.style||"normal",this.weight=x.weight||"normal",this.stretch=x.stretch||"normal",this.context=C}var f=null,p=null,v=null,y=null;function w(A){return p===null&&(P(A)&&/Apple/.test(window.navigator.vendor)?(A=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),p=!!A&&603>parseInt(A[1],10)):p=!1),p}function P(A){return y===null&&(y=!!A.document.fonts),y}function _(A,x){var C=A.style,S=A.weight;if(v===null){var E=document.createElement("div");try{E.style.font="condensed 100px sans-serif"}catch{}v=E.style.font!==""}return[C,S,v?A.stretch:"","100px",x].join(" ")}h.prototype.load=function(A,x){var C=this,S=A||"BESbswy",E=0,R=x||3e3,L=new Date().getTime();return new Promise(function(j,H){if(P(C.context)&&!w(C.context)){var U=new Promise(function(Y,m){function Ae(){new Date().getTime()-L>=R?m(Error(""+R+"ms timeout exceeded")):C.context.document.fonts.load(_(C,'"'+C.family+'"'),S).then(function(Le){1<=Le.length?Y():setTimeout(Ae,25)},m)}Ae()}),J=new Promise(function(Y,m){E=setTimeout(function(){m(Error(""+R+"ms timeout exceeded"))},R)});Promise.race([J,U]).then(function(){clearTimeout(E),j(C)},H)}else n(function(){function Y(){var re;(re=ue!=-1&&Re!=-1||ue!=-1&&Z!=-1||Re!=-1&&Z!=-1)&&((re=ue!=Re&&ue!=Z&&Re!=Z)||(f===null&&(re=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),f=!!re&&(536>parseInt(re[1],10)||parseInt(re[1],10)===536&&11>=parseInt(re[2],10))),re=f&&(ue==W&&Re==W&&Z==W||ue==se&&Re==se&&Z==se||ue==ie&&Re==ie&&Z==ie)),re=!re),re&&(ne.parentNode!==null&&ne.parentNode.removeChild(ne),clearTimeout(E),j(C))}function m(){if(new Date().getTime()-L>=R)ne.parentNode!==null&&ne.parentNode.removeChild(ne),H(Error(""+R+"ms timeout exceeded"));else{var re=C.context.document.hidden;(re===!0||re===void 0)&&(ue=Ae.g.offsetWidth,Re=Le.g.offsetWidth,Z=D.g.offsetWidth,Y()),E=setTimeout(m,50)}}var Ae=new r(S),Le=new r(S),D=new r(S),ue=-1,Re=-1,Z=-1,W=-1,se=-1,ie=-1,ne=document.createElement("div");ne.dir="ltr",s(Ae,_(C,"sans-serif")),s(Le,_(C,"serif")),s(D,_(C,"monospace")),ne.appendChild(Ae.g),ne.appendChild(Le.g),ne.appendChild(D.g),C.context.document.body.appendChild(ne),W=Ae.g.offsetWidth,se=Le.g.offsetWidth,ie=D.g.offsetWidth,m(),u(Ae,function(re){ue=re,Y()}),s(Ae,_(C,'"'+C.family+'",sans-serif')),u(Le,function(re){Re=re,Y()}),s(Le,_(C,'"'+C.family+'",serif')),u(D,function(re){Z=re,Y()}),s(D,_(C,'"'+C.family+'",monospace'))})})},e.exports=h})()})(d1);var Mb=d1.exports;const DI=Jv(Mb),bb="2.3.1";function Ib(e){return Object.assign(Object.assign({},e),{params:Object.assign(Object.assign({},e==null?void 0:e.params),{agent:`react-hooks/${bb}`})})}const Iv=Symbol.for("__ABLY_CONTEXT__"),Lv=typeof globalThis<"u"?globalThis:{};function Lb(){let e=Lv[Iv];return e||(e=Lv[Iv]=ro.createContext({})),e}const to=Lb();function p1(e="default"){const t=ro.useContext(to)[e].client;if(!t)throw new Error("Could not find ably client in context. Make sure your ably hooks are called inside an <AblyProvider>");return t}function m1(e,t,n){const r=B.useRef(t);B.useEffect(()=>{r.current=t},[t]),B.useEffect(()=>(n?e.on(n,r.current):e.on(t),()=>{n?e.off(n,t):e.off(t)}),[e,n,t])}function Dv(e,t,n="default"){const s=p1(typeof t=="string"?t:n),a=typeof t=="function"?t:e,u=typeof e!="function"?e:void 0;m1(s.connection,a,u)}function g1(e="default",t){const n=ro.useContext(to)[e]._channelNameToChannelContext[t];if(!n)throw new Error(`Could not find a parent ChannelProvider in the component tree for channelName="${t}". Make sure your channel based hooks (usePresence, useChannel, useChannelStateListener) are called inside a <ChannelProvider> component`);return n}function Nv(e,t,n){const r=typeof e=="object"?e:{channelName:e},{ablyId:s,channelName:a}=r,{channel:u}=g1(s,a);m1(u,typeof n=="function"?n:t,typeof t!="function"?t:void 0)}function Db(e){const[t,n]=B.useState(null),[r,s]=B.useState(null);return Dv(["suspended","failed","disconnected"],a=>{var u;a.reason&&((u=e.onConnectionError)===null||u===void 0||u.call(e,a.reason),n(a.reason))},e.ablyId),Dv(["connected","closed"],()=>{n(null)},e.ablyId),Nv(e,["suspended","failed","detached"],a=>{var u;a.reason&&((u=e.onChannelError)===null||u===void 0||u.call(e,a.reason),s(a.reason))}),Nv(e,["attached"],()=>{s(null)}),{connectionError:t,channelError:r}}function NI(e,t,n){const r=typeof e=="object"?e:{channelName:e},s=p1(r.ablyId),{channelName:a,skip:u}=r,{channel:h,derived:f}=g1(r.ablyId,a),p=B.useMemo(()=>{if(!f)return h.publish.bind(h);const A=s.channels.get(a);return A.publish.bind(A)},[s.channels,f,h,a]),v=typeof t=="string"?t:null,y=typeof t=="string"?n:t,w=B.useRef(y),{connectionError:P,channelError:_}=Db(r);return B.useEffect(()=>{w.current=y},[y]),B.useEffect(()=>{const A=w.current?C=>{w.current&&w.current(C)}:null,x=A?v===null?[A]:[v,A]:null;return!u&&x&&Nb(h,...x),()=>{!u&&x&&Ub(h,...x)}},[v,h,u]),{channel:h,publish:p,ably:s,connectionError:P,channelError:_}}async function Nb(e,...t){await e.subscribe(...t)}async function Ub(e,...t){await e.unsubscribe(...t)}const UI=({client:e,children:t,ablyId:n="default"})=>{if(!e)throw new Error("AblyProvider: the `client` prop is required");const r=ro.useContext(to),s=B.useMemo(()=>Object.assign(Object.assign({},r),{[n]:{client:e,_channelNameToChannelContext:{}}}),[r,e,n]);return Hs.jsx(to.Provider,Object.assign({value:s},{children:t}))},FI=({ablyId:e="default",channelName:t,options:n,deriveOptions:r,children:s})=>{const a=ro.useContext(to),{client:u,_channelNameToChannelContext:h}=a[e];if(h[t])throw new Error("You can not use more than one `ChannelProvider` with the same channel name");const f=!!r,p=f?u.channels.getDerived(t,r):u.channels.get(t),v=B.useMemo(()=>Object.assign(Object.assign({},a),{[e]:{client:u,_channelNameToChannelContext:Object.assign(Object.assign({},h),{[t]:{channel:p,derived:f}})}}),[f,u,p,t,h,e,a]);return B.useLayoutEffect(()=>{p.setOptions(Ib(n))},[p,n]),Hs.jsx(to.Provider,Object.assign({value:v},{children:s}))};var ic={},Lp={},y1={exports:{}},Fb="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Bb=Fb,Vb=Bb;function v1(){}function w1(){}w1.resetWarningCache=v1;var jb=function(){function e(r,s,a,u,h,f){if(f!==Vb){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:w1,resetWarningCache:v1};return n.PropTypes=n,n};y1.exports=jb();var zb=y1.exports,Dp={};Object.defineProperty(Dp,"__esModule",{value:!0});Dp.default=Gb;function Gb(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var s=Object.prototype.hasOwnProperty,a=0;a<n.length;a++)if(!s.call(t,n[a])||e[n[a]]!==t[n[a]])return!1;return!0}var Np={},S1={exports:{}},We=S1.exports={},bn,In;function rd(){throw new Error("setTimeout has not been defined")}function id(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?bn=setTimeout:bn=rd}catch{bn=rd}try{typeof clearTimeout=="function"?In=clearTimeout:In=id}catch{In=id}})();function C1(e){if(bn===setTimeout)return setTimeout(e,0);if((bn===rd||!bn)&&setTimeout)return bn=setTimeout,setTimeout(e,0);try{return bn(e,0)}catch{try{return bn.call(null,e,0)}catch{return bn.call(this,e,0)}}}function Hb(e){if(In===clearTimeout)return clearTimeout(e);if((In===id||!In)&&clearTimeout)return In=clearTimeout,clearTimeout(e);try{return In(e)}catch{try{return In.call(null,e)}catch{return In.call(this,e)}}}var rr=[],xs=!1,Si,Xl=-1;function Wb(){!xs||!Si||(xs=!1,Si.length?rr=Si.concat(rr):Xl=-1,rr.length&&T1())}function T1(){if(!xs){var e=C1(Wb);xs=!0;for(var t=rr.length;t;){for(Si=rr,rr=[];++Xl<t;)Si&&Si[Xl].run();Xl=-1,t=rr.length}Si=null,xs=!1,Hb(e)}}We.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];rr.push(new R1(e,t)),rr.length===1&&!xs&&C1(T1)};function R1(e,t){this.fun=e,this.array=t}R1.prototype.run=function(){this.fun.apply(null,this.array)};We.title="browser";We.browser=!0;We.env={};We.argv=[];We.version="";We.versions={};function gr(){}We.on=gr;We.addListener=gr;We.once=gr;We.off=gr;We.removeListener=gr;We.removeAllListeners=gr;We.emit=gr;We.prependListener=gr;We.prependOnceListener=gr;We.listeners=function(e){return[]};We.binding=function(e){throw new Error("process.binding is not supported")};We.cwd=function(){return"/"};We.chdir=function(e){throw new Error("process.chdir is not supported")};We.umask=function(){return 0};var qb=S1.exports;Object.defineProperty(Np,"__esModule",{value:!0});Np.default=Yb;var $b=qb,Kb=Qb($b);function Qb(e){return e&&e.__esModule?e:{default:e}}function Yb(e,t){var n=[],r=0,s=!0;function a(h){function f(){t&&t(h,n)}s?Kb.default.nextTick(f):f()}function u(h,f){n.push(f),++r>=e.length||h?a(h):e[r](u)}e.length>0?e[0](u):a(null),s=!1}var Up={};Object.defineProperty(Up,"__esModule",{value:!0});Up.default=Jb;var Xb=function(){};function Jb(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Xb;e()?t(function r(s){for(var a=arguments.length,u=Array(a>1?a-1:0),h=1;h<a;h++)u[h-1]=arguments[h];s?n(s):e.apply(this,u)?t(r):n(null)}):n(null)}var Fp={};Object.defineProperty(Fp,"__esModule",{value:!0});Fp.default=Zb;function Zb(e,t){var n=void 0,r=void 0,s=void 0,a=void 0,u=0;function h(){a=0,u=+new Date,s=e.apply(n,r),n=null,r=null}return function(){n=this,r=arguments;var p=new Date-u;return a||(p>=t?h():a=setTimeout(h,t-p)),s}}var Bp={};Object.defineProperty(Bp,"__esModule",{value:!0});Bp.default=tI;var eI=0;function tI(){return eI++}var sc={};Object.defineProperty(sc,"__esModule",{value:!0});sc.innerHeight=nI;sc.innerWidth=rI;function nI(e){var t=window.getComputedStyle(e,null);return t?e.clientHeight-parseInt(t.getPropertyValue("padding-top"),10)-parseInt(t.getPropertyValue("padding-bottom"),10):e.clientHeight}function rI(e){var t=window.getComputedStyle(e,null);return t?e.clientWidth-parseInt(t.getPropertyValue("padding-left"),10)-parseInt(t.getPropertyValue("padding-right"),10):e.clientWidth}Object.defineProperty(Lp,"__esModule",{value:!0});var Uv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iI=function(){function e(t,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),sI=B,Mh=Bi(sI),oI=zb,Pr=Bi(oI),aI=Dp,lI=Bi(aI),uI=Np,cI=Bi(uI),hI=Up,Fv=Bi(hI),fI=Fp,dI=Bi(fI),pI=Bp,Bv=Bi(pI),Vv=sc;function Bi(e){return e&&e.__esModule?e:{default:e}}function mI(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function gI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yI(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function vI(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function jv(e,t){return e.scrollWidth-1<=t}function zv(e,t){return e.scrollHeight-1<=t}function wI(){}var Vp=function(e){vI(t,e);function t(n){gI(this,t);var r=yI(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return r.state={fontSize:null,ready:!1},r.handleWindowResize=function(){r.process()},"perfectFit"in n&&console.warn("TextFit property perfectFit has been removed."),r.handleWindowResize=(0,dI.default)(r.handleWindowResize,n.throttle),r}return iI(t,[{key:"componentDidMount",value:function(){var r=this.props.autoResize;r&&window.addEventListener("resize",this.handleWindowResize),this.process()}},{key:"componentDidUpdate",value:function(r){var s=this.state.ready;s&&((0,lI.default)(this.props,r)||this.process())}},{key:"componentWillUnmount",value:function(){var r=this.props.autoResize;r&&window.removeEventListener("resize",this.handleWindowResize),this.pid=(0,Bv.default)()}},{key:"process",value:function(){var r=this,s=this.props,a=s.min,u=s.max,h=s.mode,f=s.forceSingleModeWidth,p=s.onReady,v=this._parent,y=this._child,w=(0,Vv.innerWidth)(v),P=(0,Vv.innerHeight)(v);if(P<=0||isNaN(P)){console.warn("Can not process element without height. Make sure the element is displayed and has a static height.");return}if(w<=0||isNaN(w)){console.warn("Can not process element without width. Make sure the element is displayed and has a static width.");return}var _=(0,Bv.default)();this.pid=_;var A=function(){return _!==r.pid},x=h==="multi"?function(){return zv(y,P)}:function(){return jv(y,w)},C=h==="multi"?function(){return jv(y,w)}:function(){return zv(y,P)},S=void 0,E=a,R=u;this.setState({ready:!1}),(0,cI.default)([function(L){return(0,Fv.default)(function(){return E<=R},function(j){if(A())return j(!0);S=parseInt((E+R)/2,10),r.setState({fontSize:S},function(){return A()?j(!0):(x()?E=S+1:R=S-1,j())})},L)},function(L){return h==="single"&&f||C()?L():(E=a,R=S,(0,Fv.default)(function(){return E<R},function(j){if(A())return j(!0);S=parseInt((E+R)/2,10),r.setState({fontSize:S},function(){return _!==r.pid?j(!0):(C()?E=S+1:R=S-1,j())})},L))},function(L){if(S=Math.min(E,R),S=Math.max(S,a),S=Math.min(S,u),S=Math.max(S,0),A())return L(!0);r.setState({fontSize:S},L)}],function(L){L||A()||r.setState({ready:!0},function(){return p(S)})})}},{key:"render",value:function(){var r=this,s=this.props,a=s.children,u=s.text,h=s.style;s.min,s.max;var f=s.mode;s.forceWidth,s.forceSingleModeWidth,s.throttle,s.autoResize,s.onReady;var p=mI(s,["children","text","style","min","max","mode","forceWidth","forceSingleModeWidth","throttle","autoResize","onReady"]),v=this.state,y=v.fontSize,w=v.ready,P=Uv({},h,{fontSize:y}),_={display:w?"block":"inline-block"};return f==="single"&&(_.whiteSpace="nowrap"),Mh.default.createElement("div",Uv({ref:function(x){return r._parent=x},style:P},p),Mh.default.createElement("div",{ref:function(x){return r._child=x},style:_},u&&typeof a=="function"?w?a(u):u:a))}}]),t}(Mh.default.Component);Vp.propTypes={children:Pr.default.node,text:Pr.default.string,min:Pr.default.number,max:Pr.default.number,mode:Pr.default.oneOf(["single","multi"]),forceSingleModeWidth:Pr.default.bool,throttle:Pr.default.number,onReady:Pr.default.func};Vp.defaultProps={min:1,max:100,mode:"multi",forceSingleModeWidth:!0,throttle:50,autoResize:!0,onReady:wI};Lp.default=Vp;Object.defineProperty(ic,"__esModule",{value:!0});var SI=ic.Textfit=void 0,CI=Lp,E1=TI(CI);function TI(e){return e&&e.__esModule?e:{default:e}}SI=ic.Textfit=E1.default;ic.default=E1.default;var P1={exports:{}};/*@license Copyright 2015-2022 Ably Real-time Ltd (ably.com)

Ably JavaScript Library v2.3.1
https://github.com/ably/ably-js

Released under the Apache Licence v2.0*/(function(e,t){(function(n,r){e.exports=r()})(Yn,()=>{var n={},r={exports:n},s=Object.defineProperty,a=Object.defineProperties,u=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,w=(i,o,l)=>o in i?s(i,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):i[o]=l,P=(i,o)=>{for(var l in o||(o={}))v.call(o,l)&&w(i,l,o[l]);if(p)for(var l of p(o))y.call(o,l)&&w(i,l,o[l]);return i},_=(i,o)=>a(i,h(o)),A=(i,o)=>{var l={};for(var c in i)v.call(i,c)&&o.indexOf(c)<0&&(l[c]=i[c]);if(i!=null&&p)for(var c of p(i))o.indexOf(c)<0&&y.call(i,c)&&(l[c]=i[c]);return l},x=(i,o)=>{for(var l in o)s(i,l,{get:o[l],enumerable:!0})},C=(i,o,l,c)=>{if(o&&typeof o=="object"||typeof o=="function")for(let d of f(o))!v.call(i,d)&&d!==l&&s(i,d,{get:()=>o[d],enumerable:!(c=u(o,d))||c.enumerable});return i},S=i=>C(s({},"__esModule",{value:!0}),i),E={};x(E,{ErrorInfo:()=>D,Realtime:()=>_c,Rest:()=>gc,default:()=>HR,msgpack:()=>Nc,protocolMessageFromDeserialized:()=>AT}),r.exports=S(E);var R=class{},L=typeof Yn<"u"?Yn:typeof window<"u"?window:self;function j(i,o){return`${i}`.padStart(o?3:2,"0")}function H(i){return R.Config.logTimestamps?function(o){const l=new Date;i(j(l.getHours())+":"+j(l.getMinutes())+":"+j(l.getSeconds())+"."+j(l.getMilliseconds(),1)+" "+o)}:function(o){i(o)}}var U=()=>{var i;let o,l;return typeof((i=L==null?void 0:L.console)==null?void 0:i.log)=="function"?(o=function(...c){console.log.apply(console,c)},l=console.warn?function(...c){console.warn.apply(console,c)}:o):o=l=function(){},[o,l].map(H)},J=class Yo{constructor(){this.deprecated=(o,l)=>{this.deprecationWarning(`${o} is deprecated and will be removed in a future version. ${l}`)},this.shouldLog=o=>o<=this.logLevel,this.setLog=(o,l)=>{o!==void 0&&(this.logLevel=o),l!==void 0&&(this.logHandler=this.logErrorHandler=l)},this.logLevel=Yo.defaultLogLevel,this.logHandler=Yo.defaultLogHandler,this.logErrorHandler=Yo.defaultLogErrorHandler}static initLogHandlers(){const[o,l]=U();this.defaultLogHandler=o,this.defaultLogErrorHandler=l,this.defaultLogger=new Yo}static logActionNoStrip(o,l,c,d){o.logAction(l,c,d)}logAction(o,l,c){this.shouldLog(o)&&(o===1?this.logErrorHandler:this.logHandler)("Ably: "+l+": "+c,o)}renamedClientOption(o,l){this.deprecationWarning(`The \`${o}\` client option has been renamed to \`${l}\`. Please update your code to use \`${l}\` instead. \`${o}\` will be removed in a future version.`)}renamedMethod(o,l,c){this.deprecationWarning(`\`${o}\`’s \`${l}\` method has been renamed to \`${c}\`. Please update your code to use \`${c}\` instead. \`${l}\` will be removed in a future version.`)}deprecationWarning(o){this.shouldLog(1)&&this.logErrorHandler(`Ably: Deprecation warning - ${o}`,1)}};J.defaultLogLevel=1,J.LOG_NONE=0,J.LOG_ERROR=1,J.LOG_MAJOR=2,J.LOG_MINOR=3,J.LOG_MICRO=4,J.logAction=(i,o,l,c)=>{J.logActionNoStrip(i,o,l,c)};var Y=J,m=Y,Ae={};x(Ae,{Format:()=>Gn,allSame:()=>zi,allToLowerCase:()=>Wi,allToUpperCase:()=>si,arrChooseN:()=>ho,arrDeleteValue:()=>co,arrEquals:()=>Za,arrIntersect:()=>uo,arrIntersectOb:()=>Vi,arrPopRandomElement:()=>vr,arrSubtract:()=>Xa,arrWithoutValue:()=>yr,cheapRandStr:()=>Pn,containsValue:()=>St,copy:()=>W,createMissingPluginError:()=>$i,dataSizeBytes:()=>wr,decodeBody:()=>kt,encodeBody:()=>xt,ensureArray:()=>se,forInOwnNonNullProperties:()=>ji,getBackoffCoefficient:()=>oi,getGlobalObject:()=>ai,getJitterCoefficient:()=>Jt,getRetryTime:()=>An,inherits:()=>Ee,inspectBody:()=>Hi,inspectError:()=>xe,intersect:()=>hn,isEmpty:()=>ne,isErrorInfoOrPartialErrorInfo:()=>Gi,isNil:()=>re,isObject:()=>ie,keysArray:()=>zn,matchDerivedChannel:()=>Ja,mixin:()=>Z,parseQueryString:()=>ii,prototypicalClone:()=>Vt,randomString:()=>Hn,shallowClone:()=>ke,shallowEquals:()=>qi,throwMissingPluginError:()=>we,toBase64:()=>_n,toQueryString:()=>En,valuesArray:()=>Rn,whenPromiseSettles:()=>tt,withTimeoutAsync:()=>Wn});function Le(i){let o="["+i.constructor.name;return i.message&&(o+=": "+i.message),i.statusCode&&(o+="; statusCode="+i.statusCode),i.code&&(o+="; code="+i.code),i.cause&&(o+="; cause="+xe(i.cause)),i.href&&!(i.message&&i.message.indexOf("help.ably.io")>-1)&&(o+="; see "+i.href+" "),o+="]",o}var D=class sd extends Error{constructor(o,l,c,d){super(o),typeof Object.setPrototypeOf<"u"&&Object.setPrototypeOf(this,sd.prototype),this.code=l,this.statusCode=c,this.cause=d}toString(){return Le(this)}static fromValues(o){const{message:l,code:c,statusCode:d}=o;if(typeof l!="string"||typeof c!="number"||typeof d!="number")throw new Error("ErrorInfo.fromValues(): invalid values: "+R.Config.inspect(o));const g=Object.assign(new sd(l,c,d),o);return g.code&&!g.href&&(g.href="https://help.ably.io/error/"+g.code),g}},ue=class od extends Error{constructor(o,l,c,d){super(o),typeof Object.setPrototypeOf<"u"&&Object.setPrototypeOf(this,od.prototype),this.code=l,this.statusCode=c,this.cause=d}toString(){return Le(this)}static fromValues(o){const{message:l,code:c,statusCode:d}=o;if(typeof l!="string"||!re(c)&&typeof c!="number"||!re(d)&&typeof d!="number")throw new Error("PartialErrorInfo.fromValues(): invalid values: "+R.Config.inspect(o));const g=Object.assign(new od(l,c,d),o);return g.code&&!g.href&&(g.href="https://help.ably.io/error/"+g.code),g}};function Re(i){return Math.floor(Math.random()*i.length)}function Z(i,...o){for(let l=0;l<o.length;l++){const c=o[l];if(!c)break;for(const d in c)Object.prototype.hasOwnProperty.call(c,d)&&(i[d]=c[d])}return i}function W(i){return Z({},i)}function se(i){return re(i)?[]:Array.isArray(i)?i:[i]}function ie(i){return Object.prototype.toString.call(i)=="[object Object]"}function ne(i){for(const o in i)return!1;return!0}function re(i){return i==null}function ke(i){const o=new Object;for(const l in i)o[l]=i[l];return o}function Vt(i,o){class l{}l.prototype=i;const c=new l;return o&&Z(c,o),c}var Ee=function(i,o){if(R.Config.inherits){R.Config.inherits(i,o);return}i.super_=o,i.prototype=Vt(o.prototype,{constructor:i})};function St(i,o){for(const l in i)if(i[l]==o)return!0;return!1}function hn(i,o){return Array.isArray(o)?uo(i,o):Vi(i,o)}function uo(i,o){const l=[];for(let c=0;c<i.length;c++){const d=i[c];o.indexOf(d)!=-1&&l.push(d)}return l}function Vi(i,o){const l=[];for(let c=0;c<i.length;c++){const d=i[c];d in o&&l.push(d)}return l}function Xa(i,o){const l=[];for(let c=0;c<i.length;c++){const d=i[c];o.indexOf(d)==-1&&l.push(d)}return l}function co(i,o){const l=i.indexOf(o),c=l!=-1;return c&&i.splice(l,1),c}function yr(i,o){const l=i.slice();return co(l,o),l}function zn(i,o){const l=[];for(const c in i)o&&!Object.prototype.hasOwnProperty.call(i,c)||l.push(c);return l}function Rn(i,o){const l=[];for(const c in i)o&&!Object.prototype.hasOwnProperty.call(i,c)||l.push(i[c]);return l}function ji(i,o){for(const l in i)Object.prototype.hasOwnProperty.call(i,l)&&i[l]&&o(l)}function zi(i,o){if(i.length===0)return!0;const l=i[0][o];return i.every(function(c){return c[o]===l})}var Gn=(i=>(i.msgpack="msgpack",i.json="json",i))(Gn||{});function vr(i){return i.splice(Re(i),1)[0]}function En(i){const o=[];if(i)for(const l in i)o.push(encodeURIComponent(l)+"="+encodeURIComponent(i[l]));return o.length?"?"+o.join("&"):""}function ii(i){let o;const l=/([^?&=]+)=?([^&]*)/g,c={};for(;o=l.exec(i);)c[decodeURIComponent(o[1])]=decodeURIComponent(o[2]);return c}function Gi(i){return typeof i=="object"&&i!==null&&(i instanceof D||i instanceof ue)}function xe(i){var o,l;return i instanceof Error||((o=i==null?void 0:i.constructor)==null?void 0:o.name)==="ErrorInfo"||((l=i==null?void 0:i.constructor)==null?void 0:l.name)==="PartialErrorInfo"?i.toString():R.Config.inspect(i)}function Hi(i){return R.BufferUtils.isBuffer(i)?i.toString():typeof i=="string"?i:R.Config.inspect(i)}function wr(i){if(R.BufferUtils.isBuffer(i))return R.BufferUtils.byteLength(i);if(typeof i=="string")return R.Config.stringByteSize(i);throw new Error("Expected input of Utils.dataSizeBytes to be a buffer or string, but was: "+typeof i)}function Pn(){return String(Math.random()).substr(2)}var Hn=async i=>{const o=await R.Config.getRandomArrayBuffer(i);return R.BufferUtils.base64Encode(o)};function ho(i,o){const l=Math.min(o,i.length),c=i.slice(),d=[];for(let g=0;g<l;g++)d.push(vr(c));return d}function tt(i,o){i.then(l=>{o==null||o(null,l)}).catch(l=>{o==null||o(l)})}function kt(i,o,l){return l=="msgpack"?(o||we("MsgPack"),o.decode(i)):JSON.parse(String(i))}function xt(i,o,l){return l=="msgpack"?(o||we("MsgPack"),o.encode(i,!0)):JSON.stringify(i)}function Wi(i){return i.map(function(o){return o&&o.toLowerCase()})}function si(i){return i.map(function(o){return o&&o.toUpperCase()})}function oi(i){return Math.min((i+2)/3,2)}function Jt(){return 1-Math.random()*.2}function An(i,o){return i*oi(o)*Jt()}function ai(){return typeof Yn<"u"?Yn:typeof window<"u"?window:self}function qi(i,o){return Object.keys(i).every(l=>i[l]===o[l])&&Object.keys(o).every(l=>o[l]===i[l])}function Ja(i){const o=/^(\[([^?]*)(?:(.*))\])?(.+)$/,l=i.match(o);if(!l||!l.length||l.length<5)throw new D("regex match failed",400,40010);if(l[2])throw new D(`cannot use a derived option with a ${l[2]} channel`,400,40010);return{qualifierParam:l[3]||"",channelName:l[4]}}function _n(i){const o=R.BufferUtils,l=o.utf8Encode(i);return o.base64Encode(l)}function Za(i,o){return i.length===o.length&&i.every(function(l,c){return l===o[c]})}function $i(i){return new D(`${i} plugin not provided`,40019,400)}function we(i){throw $i(i)}async function Wn(i,o=5e3,l="Timeout expired"){const c=new D(l,5e4,500);return Promise.race([i,new Promise((d,g)=>setTimeout(()=>g(c),o))])}var el="2.3.1",tl="ably-js/"+el,qe={ENVIRONMENT:"",REST_HOST:"rest.ably.io",REALTIME_HOST:"realtime.ably.io",FALLBACK_HOSTS:["A.ably-realtime.com","B.ably-realtime.com","C.ably-realtime.com","D.ably-realtime.com","E.ably-realtime.com"],PORT:80,TLS_PORT:443,TIMEOUTS:{disconnectedRetryTimeout:15e3,suspendedRetryTimeout:3e4,httpRequestTimeout:1e4,httpMaxRetryDuration:15e3,channelRetryTimeout:15e3,fallbackRetryTimeout:6e5,connectionStateTtl:12e4,realtimeRequestTimeout:1e4,recvTimeout:9e4,webSocketConnectTimeout:1e4,webSocketSlowTimeout:4e3},httpMaxRetryCount:3,maxMessageSize:65536,version:el,protocolVersion:3,agent:tl,getHost:fo,getPort:nl,getHttpScheme:oc,environmentFallbackHosts:po,getFallbackHosts:mo,getHosts:ac,checkHost:jt,objectifyOptions:il,normaliseOptions:sl,defaultGetHeaders:ol,defaultPostHeaders:al};function fo(i,o,l){return l?o=o==i.restHost&&i.realtimeHost||o||i.realtimeHost:o=o||i.restHost,o}function nl(i,o){return o||i.tls?i.tlsPort:i.port}function oc(i){return i.tls?"https://":"http://"}function po(i){return[i+"-a-fallback.ably-realtime.com",i+"-b-fallback.ably-realtime.com",i+"-c-fallback.ably-realtime.com",i+"-d-fallback.ably-realtime.com",i+"-e-fallback.ably-realtime.com"]}function mo(i){const o=i.fallbackHosts,l=typeof i.httpMaxRetryCount<"u"?i.httpMaxRetryCount:qe.httpMaxRetryCount;return o?ho(o,l):[]}function ac(i,o){const l=[i.restHost].concat(mo(i));return o?l.map(c=>fo(i,c,!0)):l}function jt(i){if(typeof i!="string")throw new D("host must be a string; was a "+typeof i,4e4,400);if(!i.length)throw new D("host must not be zero-length",4e4,400)}function Ki(i,o,l,c){return i.realtimeHost?i.realtimeHost:i.restHost?(m.logAction(c,m.LOG_MINOR,"Defaults.normaliseOptions",'restHost is set to "'+i.restHost+'" but realtimeHost is not set, so setting realtimeHost to "'+i.restHost+'" too. If this is not what you want, please set realtimeHost explicitly.'),i.restHost):o?qe.REALTIME_HOST:l+"-"+qe.REALTIME_HOST}function rl(i){const o={};for(const l in qe.TIMEOUTS)o[l]=i[l]||qe.TIMEOUTS[l];return o}function Qi(i){let o=qe.agent;if(i.agents)for(var l in i.agents)o+=" "+l+"/"+i.agents[l];return o}function il(i,o,l,c,d){if(i===void 0){const T=o?`${l} must be initialized with either a client options object, an Ably API key, or an Ably Token`:`${l} must be initialized with a client options object`;throw m.logAction(c,m.LOG_ERROR,`${l}()`,T),new Error(T)}let g;if(typeof i=="string")if(i.indexOf(":")==-1){if(!o){const T=`${l} cannot be initialized with just an Ably Token; you must provide a client options object with a \`plugins\` property. (Set this Ably Token as the object’s \`token\` property.)`;throw m.logAction(c,m.LOG_ERROR,`${l}()`,T),new Error(T)}g={token:i}}else{if(!o){const T=`${l} cannot be initialized with just an Ably API key; you must provide a client options object with a \`plugins\` property. (Set this Ably API key as the object’s \`key\` property.)`;throw m.logAction(c,m.LOG_ERROR,`${l}()`,T),new Error(T)}g={key:i}}else g=i;return d&&(g=_(P({},g),{plugins:P(P({},d),g.plugins)})),g}function sl(i,o,l){const c=l??m.defaultLogger;typeof i.recover=="function"&&i.closeOnUnload===!0&&(m.logAction(c,m.LOG_ERROR,"Defaults.normaliseOptions","closeOnUnload was true and a session recovery function was set - these are mutually exclusive, so unsetting the latter"),i.recover=void 0),"closeOnUnload"in i||(i.closeOnUnload=!i.recover),"queueMessages"in i||(i.queueMessages=!0);const d=i.environment&&String(i.environment).toLowerCase()||qe.ENVIRONMENT,g=!d||d==="production";!i.fallbackHosts&&!i.restHost&&!i.realtimeHost&&!i.port&&!i.tlsPort&&(i.fallbackHosts=g?qe.FALLBACK_HOSTS:po(d));const T=i.restHost||(g?qe.REST_HOST:d+"-"+qe.REST_HOST),O=Ki(i,g,d,c);(i.fallbackHosts||[]).concat(T,O).forEach(jt),i.port=i.port||qe.PORT,i.tlsPort=i.tlsPort||qe.TLS_PORT,"tls"in i||(i.tls=!0);const I=rl(i);o?"useBinaryProtocol"in i?i.useBinaryProtocol=R.Config.supportsBinary&&i.useBinaryProtocol:i.useBinaryProtocol=R.Config.preferBinary:i.useBinaryProtocol=!1;const b={};i.clientId&&(b["X-Ably-ClientId"]=R.BufferUtils.base64Encode(R.BufferUtils.utf8Encode(i.clientId))),"idempotentRestPublishing"in i||(i.idempotentRestPublishing=!0);let N=null,F=i.connectivityCheckUrl;if(i.connectivityCheckUrl){let[q,V]=i.connectivityCheckUrl.split("?");N=V?ii(V):{},q.indexOf("://")===-1&&(q="https://"+q),F=q}return _(P({},i),{realtimeHost:O,restHost:T,maxMessageSize:i.maxMessageSize||qe.maxMessageSize,timeouts:I,connectivityCheckParams:N,connectivityCheckUrl:F,headers:b})}function Mt(i,o,l){const c=l||{};if(c.cipher){i||we("Crypto");const d=i.getCipher(c.cipher,o);c.cipher=d.cipherParams,c.channelCipher=d.cipher}else"cipher"in c&&(c.cipher=void 0,c.channelCipher=null);return c}var go={json:"application/json",xml:"application/xml",html:"text/html",msgpack:"application/x-msgpack",text:"text/plain"},li={format:"json",protocolVersion:qe.protocolVersion};function ol(i,{format:o=li.format,protocolVersion:l=li.protocolVersion}={}){return{accept:go[o],"X-Ably-Version":l.toString(),"Ably-Agent":Qi(i)}}function al(i,{format:o=li.format,protocolVersion:l=li.protocolVersion}={}){let c;return{accept:c=go[o],"content-type":c,"X-Ably-Version":l.toString(),"Ably-Agent":Qi(i)}}var ae=qe;function te(i){return Object.assign(qe,i)}var k=class A1{constructor(o,l){this.logger=o,this.members=l||[]}call(o,l){for(const c of this.members)if(c)try{c(o,l)}catch(d){m.logAction(this.logger,m.LOG_ERROR,"Multicaster multiple callback handler","Unexpected exception: "+d+"; stack = "+d.stack)}}push(...o){this.members.push(...o)}createPromise(){return new Promise((o,l)=>{this.push((c,d)=>{c?l(c):o(d)})})}resolveAll(o){this.call(null,o)}rejectAll(o){this.call(o)}static create(o,l){const c=new A1(o,l);return Object.assign((d,g)=>c.call(d,g),{push:d=>c.push(d),createPromise:()=>c.createPromise(),resolveAll:d=>c.resolveAll(d),rejectAll:d=>c.rejectAll(d)})}},G=k,Q=(i=>(i.Get="get",i.Delete="delete",i.Post="post",i.Put="put",i.Patch="patch",i))(Q||{}),le=Q,Ke=(i=>(i[i.Success=200]="Success",i[i.NoContent=204]="NoContent",i[i.BadRequest=400]="BadRequest",i[i.Unauthorized=401]="Unauthorized",i[i.Forbidden=403]="Forbidden",i[i.RequestTimeout=408]="RequestTimeout",i[i.InternalServerError=500]="InternalServerError",i))(Ke||{});function Qe(i){return i>=200&&i<400}var Ye=Ke,bt=Math.pow(2,17);function ui(){return("000000"+Math.floor(Math.random()*1e16)).slice(-16)}function it(i){return!!i.connection}function yo(i){return Gi(i)?(i.code||(i.statusCode===403?i.code=40300:(i.code=40170,i.statusCode=401)),i):new D(xe(i),i.code||40170,i.statusCode||401)}var ll=(i,o)=>{const l=R.BufferUtils,c=l.utf8Encode(i),d=l.utf8Encode(o),g=l.hmacSha256(c,d);return l.base64Encode(g)};function jp(i){if(!i)return"";typeof i=="string"&&(i=JSON.parse(i));const o=Object.create(null),l=zn(i,!0);if(!l)return"";l.sort();for(let c=0;c<l.length;c++)o[l[c]]=i[l[c]].sort();return JSON.stringify(o)}function zp(i,o){if(i.authCallback)m.logAction(o,m.LOG_MINOR,"Auth()","using token auth with authCallback");else if(i.authUrl)m.logAction(o,m.LOG_MINOR,"Auth()","using token auth with authUrl");else if(i.key)m.logAction(o,m.LOG_MINOR,"Auth()","using token auth with client-side signing");else if(i.tokenDetails)m.logAction(o,m.LOG_MINOR,"Auth()","using token auth with supplied token only");else{const l="authOptions must include valid authentication parameters";throw m.logAction(o,m.LOG_ERROR,"Auth()",l),new Error(l)}}function b1(i){return"useTokenAuth"in i&&!i.useTokenAuth}function Gp(i){return i.useTokenAuth||!b1(i)&&(i.authCallback||i.authUrl||i.token||i.tokenDetails)}function I1(i){return!i.key&&!i.authCallback&&!i.authUrl}var L1=0;function D1(){return L1++}var N1=class{constructor(i,o){if(this.authOptions={},this.client=i,this.tokenParams=o.defaultTokenParams||{},this.currentTokenRequestId=null,this.waitingForTokenRequest=null,Gp(o))I1(o)&&m.logAction(this.logger,m.LOG_ERROR,"Auth()","Warning: library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),this._saveTokenOptions(o.defaultTokenParams,o),zp(this.authOptions,this.logger);else{if(!o.key){const l="No authentication options provided; need one of: key, authUrl, or authCallback (or for testing only, token or tokenDetails)";throw m.logAction(this.logger,m.LOG_ERROR,"Auth()",l),new D(l,40160,401)}m.logAction(this.logger,m.LOG_MINOR,"Auth()","anonymous, using basic auth"),this._saveBasicOptions(o)}}get logger(){return this.client.logger}async authorize(i,o){if(o&&o.key&&this.authOptions.key!==o.key)throw new D("Unable to update auth options with incompatible key",40102,401);try{let l=await this._forceNewToken(i??null,o??null);return it(this.client)?new Promise((c,d)=>{this.client.connection.connectionManager.onAuthUpdated(l,(g,T)=>g?d(g):c(T))}):l}catch(l){throw this.client.connection&&l.statusCode===Ye.Forbidden&&this.client.connection.connectionManager.actOnErrorFromAuthorize(l),l}}async _forceNewToken(i,o){this.tokenDetails=null,this._saveTokenOptions(i,o),zp(this.authOptions,this.logger);try{return this._ensureValidAuthCredentials(!0)}finally{delete this.tokenParams.timestamp,delete this.authOptions.queryTime}}async requestToken(i,o){const l=o||this.authOptions,c=i||W(this.tokenParams);let d,g=this.client;if(l.authCallback)m.logAction(this.logger,m.LOG_MINOR,"Auth.requestToken()","using token auth with authCallback"),d=l.authCallback;else if(l.authUrl)m.logAction(this.logger,m.LOG_MINOR,"Auth.requestToken()","using token auth with authUrl"),d=(O,I)=>{const b=Z({accept:"application/json, text/plain"},l.authHeaders),N=l.authMethod&&l.authMethod.toLowerCase()==="post";let F;const q=l.authUrl.indexOf("?");q>-1&&(F=ii(l.authUrl.slice(q)),l.authUrl=l.authUrl.slice(0,q),N||(l.authParams=Z(F,l.authParams)));const V=Z({},l.authParams||{},O),K=ee=>{var ce,Pe;let _e=(ce=ee.body)!=null?ce:null,De=null;if(ee.error)m.logAction(this.logger,m.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received Error: "+xe(ee.error));else{const ht=(Pe=ee.headers["content-type"])!=null?Pe:null;Array.isArray(ht)?De=ht.join(", "):De=ht,m.logAction(this.logger,m.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received; content-type: "+De+"; body: "+Hi(_e))}if(ee.error){I(ee.error,null);return}if(ee.unpacked){I(null,_e);return}if(R.BufferUtils.isBuffer(_e)&&(_e=_e.toString()),!De){I(new D("authUrl response is missing a content-type header",40170,401),null);return}const fe=De.indexOf("application/json")>-1,zt=De.indexOf("text/plain")>-1||De.indexOf("application/jwt")>-1;if(!fe&&!zt){I(new D("authUrl responded with unacceptable content-type "+De+", should be either text/plain, application/jwt or application/json",40170,401),null);return}if(fe){if(_e.length>bt){I(new D("authUrl response exceeded max permitted length",40170,401),null);return}try{_e=JSON.parse(_e)}catch(ht){I(new D("Unexpected error processing authURL response; err = "+ht.message,40170,401),null);return}}I(null,_e,De)};if(m.logAction(this.logger,m.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Requesting token from "+l.authUrl+"; Params: "+JSON.stringify(V)+"; method: "+(N?"POST":"GET")),N){const ee=b||{};ee["content-type"]="application/x-www-form-urlencoded";const ce=En(V).slice(1);tt(this.client.http.doUri(le.Post,l.authUrl,ee,ce,F),(Pe,_e)=>K(Pe||_e))}else tt(this.client.http.doUri(le.Get,l.authUrl,b||{},null,V),(ee,ce)=>K(ee||ce))};else if(l.key)m.logAction(this.logger,m.LOG_MINOR,"Auth.requestToken()","using token auth with client-side signing"),d=(O,I)=>{tt(this.createTokenRequest(O,l),(b,N)=>I(b,N??null))};else{const O="Need a new token, but authOptions does not include any way to request one (no authUrl, authCallback, or key)";throw m.logAction(this.logger,m.LOG_ERROR,"Auth()","library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),new D(O,40171,403)}"capability"in c&&(c.capability=jp(c.capability));const T=(O,I)=>{const b=O.keyName,N="/keys/"+b+"/requestToken",F=function(V){return g.baseUri(V)+N},q=ae.defaultPostHeaders(this.client.options);l.requestHeaders&&Z(q,l.requestHeaders),m.logAction(this.logger,m.LOG_MICRO,"Auth.requestToken().requestToken","Sending POST to "+N+"; Token params: "+JSON.stringify(O)),tt(this.client.http.do(le.Post,F,q,JSON.stringify(O),null),(V,K)=>V?I(V):I(K.error,K.body,K.unpacked))};return new Promise((O,I)=>{let b=!1,N=this.client.options.timeouts.realtimeRequestTimeout,F=setTimeout(()=>{b=!0;const q="Token request callback timed out after "+N/1e3+" seconds";m.logAction(this.logger,m.LOG_ERROR,"Auth.requestToken()",q),I(new D(q,40170,401))},N);d(c,(q,V,K)=>{if(b)return;if(clearTimeout(F),q){m.logAction(this.logger,m.LOG_ERROR,"Auth.requestToken()","token request signing call returned error; err = "+xe(q)),I(yo(q));return}if(typeof V=="string"){V.length===0?I(new D("Token string is empty",40170,401)):V.length>bt?I(new D("Token string exceeded max permitted length (was "+V.length+" bytes)",40170,401)):V==="undefined"||V==="null"?I(new D("Token string was literal null/undefined",40170,401)):V[0]==="{"&&!(K&&K.indexOf("application/jwt")>-1)?I(new D("Token was double-encoded; make sure you're not JSON-encoding an already encoded token request or details",40170,401)):O({token:V});return}if(typeof V!="object"||V===null){const ce="Expected token request callback to call back with a token string or token request/details object, but got a "+typeof V;m.logAction(this.logger,m.LOG_ERROR,"Auth.requestToken()",ce),I(new D(ce,40170,401));return}const ee=JSON.stringify(V).length;if(ee>bt&&!l.suppressMaxLengthCheck){I(new D("Token request/details object exceeded max permitted stringified size (was "+ee+" bytes)",40170,401));return}if("issued"in V){O(V);return}if(!("keyName"in V)){const ce="Expected token request callback to call back with a token string, token request object, or token details object";m.logAction(this.logger,m.LOG_ERROR,"Auth.requestToken()",ce),I(new D(ce,40170,401));return}T(V,(ce,Pe,_e)=>{if(ce){m.logAction(this.logger,m.LOG_ERROR,"Auth.requestToken()","token request API call returned error; err = "+xe(ce)),I(yo(ce));return}_e||(Pe=JSON.parse(Pe)),m.logAction(this.logger,m.LOG_MINOR,"Auth.getToken()","token received"),O(Pe)})})})}async createTokenRequest(i,o){o=o||this.authOptions,i=i||W(this.tokenParams);const l=o.key;if(!l)throw new D("No key specified",40101,403);const c=l.split(":"),d=c[0],g=c[1];if(!g)throw new D("Invalid key specified",40101,403);if(i.clientId==="")throw new D("clientId can’t be an empty string",40012,400);"capability"in i&&(i.capability=jp(i.capability));const T=Z({keyName:d},i),O=i.clientId||"",I=i.ttl||"",b=i.capability||"";T.timestamp||(T.timestamp=await this.getTimestamp(o&&o.queryTime));const N=T.nonce||(T.nonce=ui()),F=T.timestamp,q=T.keyName+`
`+I+`
`+b+`
`+O+`
`+F+`
`+N+`
`;return T.mac=T.mac||ll(q,g),m.logAction(this.logger,m.LOG_MINOR,"Auth.getTokenRequest()","generated signed request"),T}async getAuthParams(){if(this.method=="basic")return{key:this.key};{let i=await this._ensureValidAuthCredentials(!1);if(!i)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");return{access_token:i.token}}}async getAuthHeaders(){if(this.method=="basic")return{authorization:"Basic "+this.basicKey};{const i=await this._ensureValidAuthCredentials(!1);if(!i)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");return{authorization:"Bearer "+_n(i.token)}}}async getTimestamp(i){return!this.isTimeOffsetSet()&&(i||this.authOptions.queryTime)?this.client.time():this.getTimestampUsingOffset()}getTimestampUsingOffset(){return Date.now()+(this.client.serverTimeOffset||0)}isTimeOffsetSet(){return this.client.serverTimeOffset!==null}_saveBasicOptions(i){this.method="basic",this.key=i.key,this.basicKey=_n(i.key),this.authOptions=i||{},"clientId"in i&&this._userSetClientId(i.clientId)}_saveTokenOptions(i,o){this.method="token",i&&(this.tokenParams=i),o&&(o.token&&(o.tokenDetails=typeof o.token=="string"?{token:o.token}:o.token),o.tokenDetails&&(this.tokenDetails=o.tokenDetails),"clientId"in o&&this._userSetClientId(o.clientId),this.authOptions=o)}async _ensureValidAuthCredentials(i){const o=this.tokenDetails;if(o){if(this._tokenClientIdMismatch(o.clientId))throw new D("Mismatch between clientId in token ("+o.clientId+") and current clientId ("+this.clientId+")",40102,403);if(!this.isTimeOffsetSet()||!o.expires||o.expires>=this.getTimestampUsingOffset())return m.logAction(this.logger,m.LOG_MINOR,"Auth.getToken()","using cached token; expires = "+o.expires),o;m.logAction(this.logger,m.LOG_MINOR,"Auth.getToken()","deleting expired token"),this.tokenDetails=null}const l=(this.waitingForTokenRequest||(this.waitingForTokenRequest=G.create(this.logger))).createPromise();if(this.currentTokenRequestId!==null&&!i)return l;const c=this.currentTokenRequestId=D1();let d,g=null;try{d=await this.requestToken(this.tokenParams,this.authOptions)}catch(O){g=O}if(this.currentTokenRequestId>c)return m.logAction(this.logger,m.LOG_MINOR,"Auth._ensureValidAuthCredentials()","Discarding token request response; overtaken by newer one"),l;this.currentTokenRequestId=null;const T=this.waitingForTokenRequest;return this.waitingForTokenRequest=null,g?(T==null||T.rejectAll(g),l):(T==null||T.resolveAll(this.tokenDetails=d),l)}_userSetClientId(i){if(typeof i=="string"||i===null){if(i==="*")throw new D('Can’t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, instantiate the library with {defaultTokenParams: {clientId: "*"}}), or if calling authorize(), pass it in as a tokenParam: authorize({clientId: "*"}, authOptions)',40012,400);{const o=this._uncheckedSetClientId(i);if(o)throw o}}else throw new D("clientId must be either a string or null",40012,400)}_uncheckedSetClientId(i){if(this._tokenClientIdMismatch(i)){const o="Unexpected clientId mismatch: client has "+this.clientId+", requested "+i,l=new D(o,40102,401);return m.logAction(this.logger,m.LOG_ERROR,"Auth._uncheckedSetClientId()",o),l}else return this.clientId=this.tokenParams.clientId=i,null}_tokenClientIdMismatch(i){return!!(this.clientId&&this.clientId!=="*"&&i&&i!=="*"&&this.clientId!==i)}static isTokenErr(i){return i.code&&i.code>=40140&&i.code<40150}revokeTokens(i,o){return this.client.rest.revokeTokens(i,o)}},qn=N1;function lc(i){const o=[];if(i)for(const l in i)o.push(l+"="+i[l]);return o.join("&")}function Yi(i,o){return i+(o?"?":"")+lc(o)}function U1(i,o,l,c,d){i.error?m.logActionNoStrip(d,m.LOG_MICRO,"Http."+o+"()","Received Error; "+Yi(l,c)+"; Error: "+xe(i.error)):m.logActionNoStrip(d,m.LOG_MICRO,"Http."+o+"()","Received; "+Yi(l,c)+"; Headers: "+lc(i.headers)+"; StatusCode: "+i.statusCode+"; Body"+(R.BufferUtils.isBuffer(i.body)?" (Base64): "+R.BufferUtils.base64Encode(i.body):": "+i.body))}function F1(i,o,l,c,d){d.shouldLog(m.LOG_MICRO)&&m.logActionNoStrip(d,m.LOG_MICRO,"Http."+i+"()","Sending; "+Yi(o,c)+"; Body"+(R.BufferUtils.isBuffer(l)?" (Base64): "+R.BufferUtils.base64Encode(l):": "+l))}var uc=class{constructor(i){this.client=i,this.platformHttp=new R.Http(i),this.checkConnectivity=this.platformHttp.checkConnectivity?()=>this.platformHttp.checkConnectivity():void 0}get logger(){var i,o;return(o=(i=this.client)==null?void 0:i.logger)!=null?o:m.defaultLogger}get supportsAuthHeaders(){return this.platformHttp.supportsAuthHeaders}get supportsLinkHeaders(){return this.platformHttp.supportsLinkHeaders}_getHosts(i){const o=i.connection,l=o&&o.connectionManager.host;return l?[l].concat(ae.getFallbackHosts(i.options)):ae.getHosts(i.options)}async do(i,o,l,c,d){try{const g=this.client;if(!g)return{error:new D("http.do called without client",5e4,500)};const T=typeof o=="function"?o:function(F){return g.baseUri(F)+o},O=g._currentFallback;if(O)if(O.validUntil>Date.now()){const F=await this.doUri(i,T(O.host),l,c,d);return F.error&&this.platformHttp.shouldFallback(F.error)?(g._currentFallback=null,this.do(i,o,l,c,d)):F}else g._currentFallback=null;const I=this._getHosts(g);if(I.length===1)return this.doUri(i,T(I[0]),l,c,d);let b=null;const N=async(F,q)=>{const V=F.shift();b=b??new Date;const K=await this.doUri(i,T(V),l,c,d);return K.error&&this.platformHttp.shouldFallback(K.error)&&F.length?Date.now()-b.getTime()>g.options.timeouts.httpMaxRetryDuration?{error:new D(`Timeout for trying fallback hosts retries. Total elapsed time exceeded the ${g.options.timeouts.httpMaxRetryDuration}ms limit`,50003,500)}:N(F,!0):(q&&(g._currentFallback={host:V,validUntil:Date.now()+g.options.timeouts.fallbackRetryTimeout}),K)};return N(I)}catch(g){return{error:new D(`Unexpected error in Http.do: ${xe(g)}`,500,5e4)}}}async doUri(i,o,l,c,d){try{F1(i,o,c,d,this.logger);const g=await this.platformHttp.doUri(i,o,l,c,d);return this.logger.shouldLog(m.LOG_MICRO)&&U1(g,i,o,d,this.logger),g}catch(g){return{error:new D(`Unexpected error in Http.doUri: ${xe(g)}`,500,5e4)}}}},Hp=class{constructor(i){this.Platform=R,this.ErrorInfo=D,this.Logger=m,this.Defaults=ae,this.Utils=Ae;var o,l,c,d,g,T,O,I;this._additionalHTTPRequestImplementations=(o=i.plugins)!=null?o:null,this.logger=new m,this.logger.setLog(i.logLevel,i.logHandler),m.logAction(this.logger,m.LOG_MICRO,"BaseClient()","initialized with clientOptions "+R.Config.inspect(i)),this._MsgPack=(c=(l=i.plugins)==null?void 0:l.MsgPack)!=null?c:null;const b=this.options=ae.normaliseOptions(i,this._MsgPack,this.logger);if(b.key){const N=b.key.match(/^([^:\s]+):([^:.\s]+)$/);if(!N){const F="invalid key parameter";throw m.logAction(this.logger,m.LOG_ERROR,"BaseClient()",F),new D(F,40400,404)}b.keyName=N[1],b.keySecret=N[2]}if("clientId"in b)if(typeof b.clientId=="string"||b.clientId===null){if(b.clientId==="*")throw new D('Can’t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, use {defaultTokenParams: {clientId: "*"}})',40012,400)}else throw new D("clientId must be either a string or null",40012,400);m.logAction(this.logger,m.LOG_MINOR,"BaseClient()","started; version = "+ae.version),this._currentFallback=null,this.serverTimeOffset=null,this.http=new uc(this),this.auth=new qn(this,b),this._rest=(d=i.plugins)!=null&&d.Rest?new i.plugins.Rest(this):null,this._Crypto=(T=(g=i.plugins)==null?void 0:g.Crypto)!=null?T:null,this.__FilteredSubscriptions=(I=(O=i.plugins)==null?void 0:O.MessageInteractions)!=null?I:null}get rest(){return this._rest||we("Rest"),this._rest}get _FilteredSubscriptions(){return this.__FilteredSubscriptions||we("MessageInteractions"),this.__FilteredSubscriptions}get channels(){return this.rest.channels}get push(){return this.rest.push}get device(){var i;return(!((i=this.options.plugins)!=null&&i.Push)||!this.push.LocalDevice)&&we("Push"),this._device||(this._device=this.push.LocalDevice.load(this)),this._device}baseUri(i){return ae.getHttpScheme(this.options)+i+":"+ae.getPort(this.options,!1)}async stats(i){return this.rest.stats(i)}async time(i){return this.rest.time(i)}async request(i,o,l,c,d,g){return this.rest.request(i,o,l,c,d,g)}batchPublish(i){return this.rest.batchPublish(i)}batchPresence(i){return this.rest.batchPresence(i)}setLog(i){this.logger.setLog(i.level,i.handler)}};Hp.Platform=R;var Wp=Hp,B1=class is{toJSON(){var o,l,c;return{id:this.id,deviceSecret:this.deviceSecret,platform:this.platform,formFactor:this.formFactor,clientId:this.clientId,metadata:this.metadata,deviceIdentityToken:this.deviceIdentityToken,push:{recipient:(o=this.push)==null?void 0:o.recipient,state:(l=this.push)==null?void 0:l.state,error:(c=this.push)==null?void 0:c.error}}}toString(){var o,l,c,d;let g="[DeviceDetails";return this.id&&(g+="; id="+this.id),this.platform&&(g+="; platform="+this.platform),this.formFactor&&(g+="; formFactor="+this.formFactor),this.clientId&&(g+="; clientId="+this.clientId),this.metadata&&(g+="; metadata="+this.metadata),this.deviceIdentityToken&&(g+="; deviceIdentityToken="+JSON.stringify(this.deviceIdentityToken)),(o=this.push)!=null&&o.recipient&&(g+="; push.recipient="+JSON.stringify(this.push.recipient)),(l=this.push)!=null&&l.state&&(g+="; push.state="+this.push.state),(c=this.push)!=null&&c.error&&(g+="; push.error="+JSON.stringify(this.push.error)),(d=this.push)!=null&&d.metadata&&(g+="; push.metadata="+this.push.metadata),g+="]",g}static toRequestBody(o,l,c){return xt(o,l,c)}static fromResponseBody(o,l,c){return c&&(o=kt(o,l,c)),Array.isArray(o)?is.fromValuesArray(o):is.fromValues(o)}static fromValues(o){return o.error=o.error&&D.fromValues(o.error),Object.assign(new is,o)}static fromLocalDevice(o){return Object.assign(new is,o)}static fromValuesArray(o){const l=o.length,c=new Array(l);for(let d=0;d<l;d++)c[d]=is.fromValues(o[d]);return c}},Xi=B1;async function qp(i,o,l,c){if(i.http.supportsAuthHeaders){const d=await i.auth.getAuthHeaders();return c(Z(d,o),l)}else{const d=await i.auth.getAuthParams();return c(o,Z(d,l))}}function V1(i,o,l){if(i.err&&!i.body)return{err:i.err};if(i.statusCode===Ye.NoContent)return _(P({},i),{body:[],unpacked:!0});let c=i.body;if(!i.unpacked)try{c=kt(c,o,l)}catch(O){return Gi(O)?{err:O}:{err:new ue(xe(O),null)}}if(!c)return{err:new ue("unenvelope(): Response body is missing",null)};const{statusCode:d,response:g,headers:T}=c;if(d===void 0)return _(P({},i),{body:c,unpacked:!0});if(d<200||d>=300){let O=g&&g.error||i.err;return O||(O=new Error("Error in unenveloping "+c),O.statusCode=d),{err:O,body:g,headers:T,unpacked:!0,statusCode:d}}return{err:i.err,body:g,headers:T,unpacked:!0,statusCode:d}}function j1(i,o,l,c,d){i.err?m.logAction(d,m.LOG_MICRO,"Resource."+o+"()","Received Error; "+Yi(l,c)+"; Error: "+xe(i.err)):m.logAction(d,m.LOG_MICRO,"Resource."+o+"()","Received; "+Yi(l,c)+"; Headers: "+lc(i.headers)+"; StatusCode: "+i.statusCode+"; Body: "+(R.BufferUtils.isBuffer(i.body)?" (Base64): "+R.BufferUtils.base64Encode(i.body):": "+R.Config.inspect(i.body)))}var z1=class ss{static async get(o,l,c,d,g,T){return ss.do(le.Get,o,l,null,c,d,g,T??!1)}static async delete(o,l,c,d,g,T){return ss.do(le.Delete,o,l,null,c,d,g,T)}static async post(o,l,c,d,g,T,O){return ss.do(le.Post,o,l,c,d,g,T,O)}static async patch(o,l,c,d,g,T,O){return ss.do(le.Patch,o,l,c,d,g,T,O)}static async put(o,l,c,d,g,T,O){return ss.do(le.Put,o,l,c,d,g,T,O)}static async do(o,l,c,d,g,T,O,I){O&&((T=T||{}).envelope=O);const b=l.logger;async function N(q,V){var K;if(b.shouldLog(m.LOG_MICRO)){let ce=d;if(((K=q["content-type"])==null?void 0:K.indexOf("msgpack"))>0)try{l._MsgPack||we("MsgPack"),ce=l._MsgPack.decode(d)}catch(Pe){m.logAction(b,m.LOG_MICRO,"Resource."+o+"()","Sending MsgPack Decoding Error: "+xe(Pe))}m.logAction(b,m.LOG_MICRO,"Resource."+o+"()","Sending; "+Yi(c,V)+"; Body: "+ce)}const ee=await l.http.do(o,c,q,d,V);return ee.error&&qn.isTokenErr(ee.error)?(await l.auth.authorize(null,null),qp(l,q,V,N)):{err:ee.error,body:ee.body,headers:ee.headers,unpacked:ee.unpacked,statusCode:ee.statusCode}}let F=await qp(l,g,T,N);if(O&&(F=V1(F,l._MsgPack,O)),b.shouldLog(m.LOG_MICRO)&&j1(F,o,c,T,b),I){if(F.err)throw F.err;{const q=P({},F);return delete q.err,q}}return F}},Xe=z1;function G1(i){const o=i.match(/^\.\/(\w+)\?(.*)$/);return o&&o[2]&&ii(o[2])}function H1(i){typeof i=="string"&&(i=i.split(","));const o={};for(let l=0;l<i.length;l++){const c=i[l].match(/^\s*<(.+)>;\s*rel="(\w+)"$/);if(c){const d=G1(c[1]);d&&(o[c[2]]=d)}}return o}function W1(i,o,l){return!(l&&(o||typeof i.code=="number"))}var q1=class{constructor(i,o,l,c,d,g){this.client=i,this.path=o,this.headers=l,this.envelope=c??null,this.bodyHandler=d,this.useHttpPaginatedResponse=g||!1}get logger(){return this.client.logger}async get(i){const o=await Xe.get(this.client,this.path,this.headers,i,this.envelope,!1);return this.handlePage(o)}async delete(i){const o=await Xe.delete(this.client,this.path,this.headers,i,this.envelope,!1);return this.handlePage(o)}async post(i,o){const l=await Xe.post(this.client,this.path,o,this.headers,i,this.envelope,!1);return this.handlePage(l)}async put(i,o){const l=await Xe.put(this.client,this.path,o,this.headers,i,this.envelope,!1);return this.handlePage(l)}async patch(i,o){const l=await Xe.patch(this.client,this.path,o,this.headers,i,this.envelope,!1);return this.handlePage(l)}async handlePage(i){if(i.err&&W1(i.err,i.body,this.useHttpPaginatedResponse))throw m.logAction(this.logger,m.LOG_ERROR,"PaginatedResource.handlePage()","Unexpected error getting resource: err = "+xe(i.err)),i.err;let o,l,c;try{o=i.statusCode==Ye.NoContent?[]:await this.bodyHandler(i.body,i.headers||{},i.unpacked)}catch(d){throw i.err||d}return i.headers&&(l=i.headers.Link||i.headers.link)&&(c=H1(l)),this.useHttpPaginatedResponse?new $1(this,o,i.headers||{},i.statusCode,c,i.err):new $p(this,o,c)}},$p=class{constructor(i,o,l){this.resource=i,this.items=o;const c=this;l&&("first"in l&&(this.first=async function(){return c.get(l.first)}),"current"in l&&(this.current=async function(){return c.get(l.current)}),this.next=async function(){return"next"in l?c.get(l.next):null},this.hasNext=function(){return"next"in l},this.isLast=()=>{var d;return!((d=this.hasNext)!=null&&d.call(this))})}async get(i){const o=this.resource,l=await Xe.get(o.client,o.path,o.headers,i,o.envelope,!1);return o.handlePage(l)}},$1=class extends $p{constructor(i,o,l,c,d,g){super(i,o,d),this.statusCode=c,this.success=c<300&&c>=200,this.headers=l,this.errorCode=g&&g.code,this.errorMessage=g&&g.message}toJSON(){return{items:this.items,statusCode:this.statusCode,success:this.success,headers:this.headers,errorCode:this.errorCode,errorMessage:this.errorMessage}}},Sr=q1,Kp=class Xo{toJSON(){return{channel:this.channel,deviceId:this.deviceId,clientId:this.clientId}}toString(){let o="[PushChannelSubscription";return this.channel&&(o+="; channel="+this.channel),this.deviceId&&(o+="; deviceId="+this.deviceId),this.clientId&&(o+="; clientId="+this.clientId),o+="]",o}static fromResponseBody(o,l,c){return c&&(o=kt(o,l,c)),Array.isArray(o)?Xo.fromValuesArray(o):Xo.fromValues(o)}static fromValues(o){return Object.assign(new Xo,o)}static fromValuesArray(o){const l=o.length,c=new Array(l);for(let d=0;d<l;d++)c[d]=Xo.fromValues(o[d]);return c}};Kp.toRequestBody=xt;var K1=Kp,cc=K1,Q1=class{constructor(i){var o;this.client=i,this.admin=new Y1(i),R.Config.push&&((o=i.options.plugins)!=null&&o.Push)&&(this.stateMachine=new i.options.plugins.Push.ActivationStateMachine(i),this.LocalDevice=i.options.plugins.Push.localDeviceFactory(Xi))}async activate(i,o){await new Promise((l,c)=>{var d;if(!((d=this.client.options.plugins)!=null&&d.Push)){c($i("Push"));return}if(!this.stateMachine){c(new D("This platform is not supported as a target of push notifications",4e4,400));return}if(this.stateMachine.activatedCallback){c(new D("Activation already in progress",4e4,400));return}this.stateMachine.activatedCallback=g=>{if(g){c(g);return}l()},this.stateMachine.updateFailedCallback=o,this.stateMachine.handleEvent(new this.client.options.plugins.Push.CalledActivate(this.stateMachine,i))})}async deactivate(i){await new Promise((o,l)=>{var c;if(!((c=this.client.options.plugins)!=null&&c.Push)){l($i("Push"));return}if(!this.stateMachine){l(new D("This platform is not supported as a target of push notifications",4e4,400));return}if(this.stateMachine.deactivatedCallback){l(new D("Deactivation already in progress",4e4,400));return}this.stateMachine.deactivatedCallback=d=>{if(d){l(d);return}o()},this.stateMachine.handleEvent(new this.client.options.plugins.Push.CalledDeactivate(this.stateMachine,i))})}},Y1=class{constructor(i){this.client=i,this.deviceRegistrations=new X1(i),this.channelSubscriptions=new J1(i)}async publish(i,o){const l=this.client,c=l.options.useBinaryProtocol?"msgpack":"json",d=ae.defaultPostHeaders(l.options,{format:c}),g={},T=Z({recipient:i},o);Z(d,l.options.headers),l.options.pushFullWait&&Z(g,{fullWait:"true"});const O=xt(T,l._MsgPack,c);await Xe.post(l,"/push/publish",O,d,g,null,!0)}},X1=class{constructor(i){this.client=i}async save(i){const o=this.client,l=Xi.fromValues(i),c=o.options.useBinaryProtocol?"msgpack":"json",d=ae.defaultPostHeaders(o.options,{format:c}),g={};Z(d,o.options.headers),o.options.pushFullWait&&Z(g,{fullWait:"true"});const T=xt(l,o._MsgPack,c),O=await Xe.put(o,"/push/deviceRegistrations/"+encodeURIComponent(i.id),T,d,g,null,!0);return Xi.fromResponseBody(O.body,o._MsgPack,O.unpacked?void 0:c)}async get(i){const o=this.client,l=o.options.useBinaryProtocol?"msgpack":"json",c=ae.defaultGetHeaders(o.options,{format:l}),d=i.id||i;if(typeof d!="string"||!d.length)throw new D("First argument to DeviceRegistrations#get must be a deviceId string or DeviceDetails",4e4,400);Z(c,o.options.headers);const g=await Xe.get(o,"/push/deviceRegistrations/"+encodeURIComponent(d),c,{},null,!0);return Xi.fromResponseBody(g.body,o._MsgPack,g.unpacked?void 0:l)}async list(i){const o=this.client,l=o.options.useBinaryProtocol?"msgpack":"json",c=this.client.http.supportsLinkHeaders?void 0:l,d=ae.defaultGetHeaders(o.options,{format:l});return Z(d,o.options.headers),new Sr(o,"/push/deviceRegistrations",d,c,async function(g,T,O){return Xi.fromResponseBody(g,o._MsgPack,O?void 0:l)}).get(i)}async remove(i){const o=this.client,l=o.options.useBinaryProtocol?"msgpack":"json",c=ae.defaultGetHeaders(o.options,{format:l}),d={},g=i.id||i;if(typeof g!="string"||!g.length)throw new D("First argument to DeviceRegistrations#remove must be a deviceId string or DeviceDetails",4e4,400);Z(c,o.options.headers),o.options.pushFullWait&&Z(d,{fullWait:"true"}),await Xe.delete(o,"/push/deviceRegistrations/"+encodeURIComponent(g),c,d,null,!0)}async removeWhere(i){const o=this.client,l=o.options.useBinaryProtocol?"msgpack":"json",c=ae.defaultGetHeaders(o.options,{format:l});Z(c,o.options.headers),o.options.pushFullWait&&Z(i,{fullWait:"true"}),await Xe.delete(o,"/push/deviceRegistrations",c,i,null,!0)}},J1=class _1{constructor(o){this.remove=_1.prototype.removeWhere,this.client=o}async save(o){const l=this.client,c=cc.fromValues(o),d=l.options.useBinaryProtocol?"msgpack":"json",g=ae.defaultPostHeaders(l.options,{format:d}),T={};Z(g,l.options.headers),l.options.pushFullWait&&Z(T,{fullWait:"true"});const O=xt(c,l._MsgPack,d),I=await Xe.post(l,"/push/channelSubscriptions",O,g,T,null,!0);return cc.fromResponseBody(I.body,l._MsgPack,I.unpacked?void 0:d)}async list(o){const l=this.client,c=l.options.useBinaryProtocol?"msgpack":"json",d=this.client.http.supportsLinkHeaders?void 0:c,g=ae.defaultGetHeaders(l.options,{format:c});return Z(g,l.options.headers),new Sr(l,"/push/channelSubscriptions",g,d,async function(T,O,I){return cc.fromResponseBody(T,l._MsgPack,I?void 0:c)}).get(o)}async removeWhere(o){const l=this.client,c=l.options.useBinaryProtocol?"msgpack":"json",d=ae.defaultGetHeaders(l.options,{format:c});Z(d,l.options.headers),l.options.pushFullWait&&Z(o,{fullWait:"true"}),await Xe.delete(l,"/push/channelSubscriptions",d,o,null,!0)}async listChannels(o){const l=this.client,c=l.options.useBinaryProtocol?"msgpack":"json",d=this.client.http.supportsLinkHeaders?void 0:c,g=ae.defaultGetHeaders(l.options,{format:c});return Z(g,l.options.headers),l.options.pushFullWait&&Z(o,{fullWait:"true"}),new Sr(l,"/push/channels",g,d,async function(T,O,I){const b=!I&&c?kt(T,l._MsgPack,c):T;for(let N=0;N<b.length;N++)b[N]=String(b[N]);return b}).get(o)}},Z1=Q1;function eT(i){return!i||!i.channelOptions?{channelOptions:i,plugins:{},baseEncodedPreviousPayload:void 0}:i}function tT(i,o,l){if(l&&l.cipher){i||we("Crypto");const c=i.getCipher(l.cipher,o);return{cipher:c.cipherParams,channelCipher:c.cipher}}return l??{}}function nT(i){let o=0;return i.name&&(o+=i.name.length),i.clientId&&(o+=i.clientId.length),i.extras&&(o+=JSON.stringify(i.extras).length),i.data&&(o+=wr(i.data)),o}async function Qp(i,o,l,c){const d=Cr(l),g=tT(o,i,c??null);try{await vo(d,g)}catch(T){m.logAction(i,m.LOG_ERROR,"Message.fromEncoded()",T.toString())}return d}async function rT(i,o,l,c){return Promise.all(l.map(function(d){return Qp(i,o,d,c)}))}async function iT(i,o){let l=i.data,c=i.encoding,d=o.channelCipher;c=c?c+"/":"",R.BufferUtils.isBuffer(l)||(l=R.BufferUtils.utf8Encode(String(l)),c=c+"utf-8/");const g=await d.encrypt(l);return i.data=g,i.encoding=c+"cipher+"+d.algorithm,i}async function hc(i,o){const l=i.data;if(!(typeof l=="string"||R.BufferUtils.isBuffer(l)||l===null||l===void 0))if(ie(l)||Array.isArray(l))i.data=JSON.stringify(l),i.encoding=i.encoding?i.encoding+"/json":"json";else throw new D("Data type is unsupported",40013,400);return o!=null&&o.cipher?iT(i,o):i}async function Yp(i,o){return Promise.all(i.map(l=>hc(l,o)))}var sT=xt;async function vo(i,o){const l=eT(o);let c=i.data;const d=i.encoding;if(d){const g=d.split("/");let T,O=g.length,I=i.data,b="";try{for(;(T=O)>0;){const N=g[--O].match(/([-\w]+)(\+([\w-]+))?/);if(!N)break;switch(b=N[1],b){case"base64":I=R.BufferUtils.base64Decode(String(I)),T==g.length&&(c=I);continue;case"utf-8":I=R.BufferUtils.utf8Decode(I);continue;case"json":I=JSON.parse(I);continue;case"cipher":if(l.channelOptions!=null&&l.channelOptions.cipher&&l.channelOptions.channelCipher){const F=N[3],q=l.channelOptions.channelCipher;if(F!=q.algorithm)throw new Error("Unable to decrypt message with given cipher; incompatible cipher params");I=await q.decrypt(I);continue}else throw new Error("Unable to decrypt message; not an encrypted channel");case"vcdiff":if(!l.plugins||!l.plugins.vcdiff)throw new D("Missing Vcdiff decoder (https://github.com/ably-forks/vcdiff-decoder)",40019,400);if(typeof Uint8Array>"u")throw new D("Delta decoding not supported on this browser (need ArrayBuffer & Uint8Array)",40020,400);try{let F=l.baseEncodedPreviousPayload;typeof F=="string"&&(F=R.BufferUtils.utf8Encode(F));const q=R.BufferUtils.toBuffer(F);I=R.BufferUtils.toBuffer(I),I=R.BufferUtils.arrayBufferViewToBuffer(l.plugins.vcdiff.decode(I,q)),c=I}catch(F){throw new D("Vcdiff delta decode failed with "+F,40018,400)}continue;default:throw new Error("Unknown encoding")}}}catch(N){const F=N;throw new D("Error processing the "+b+" encoding, decoder returned ‘"+F.message+"’",F.code||40013,400)}finally{i.encoding=T<=0?null:g.slice(0,T).join("/"),i.data=I}}l.baseEncodedPreviousPayload=c}async function oT(i,o,l,c,d){d&&(i=kt(i,c,d));for(let g=0;g<i.length;g++){const T=i[g]=Cr(i[g]);try{await vo(T,o)}catch(O){m.logAction(l,m.LOG_ERROR,"Message.fromResponseBody()",O.toString())}}return i}function Cr(i){return Object.assign(new Xp,i)}function fc(i){const o=i.length,l=new Array(o);for(let c=0;c<o;c++)l[c]=Cr(i[c]);return l}function dc(i){let o,l=0;for(let c=0;c<i.length;c++)o=i[c],l+=o.size||(o.size=nT(o));return l}var Xp=class{toJSON(){let i=this.encoding,o=this.data;return o&&R.BufferUtils.isBuffer(o)&&(arguments.length>0?(i=i?i+"/base64":"base64",o=R.BufferUtils.base64Encode(o)):o=R.BufferUtils.toBuffer(o)),{name:this.name,id:this.id,clientId:this.clientId,connectionId:this.connectionId,connectionKey:this.connectionKey,extras:this.extras,encoding:i,data:o}}toString(){let i="[Message";return this.name&&(i+="; name="+this.name),this.id&&(i+="; id="+this.id),this.timestamp&&(i+="; timestamp="+this.timestamp),this.clientId&&(i+="; clientId="+this.clientId),this.connectionId&&(i+="; connectionId="+this.connectionId),this.encoding&&(i+="; encoding="+this.encoding),this.extras&&(i+="; extras ="+JSON.stringify(this.extras)),this.data&&(typeof this.data=="string"?i+="; data="+this.data:R.BufferUtils.isBuffer(this.data)?i+="; data (buffer)="+R.BufferUtils.base64Encode(this.data):i+="; data (json)="+JSON.stringify(this.data)),this.extras&&(i+="; extras="+JSON.stringify(this.extras)),i+="]",i}},Jp=Xp,Zp=["absent","present","enter","leave","update"];function aT(i){return Zp.indexOf(i)}async function em(i,o,l){const c=fn(o,!0);try{await pc(c,l??{})}catch(d){m.logAction(i,m.LOG_ERROR,"PresenceMessage.fromEncoded()",d.toString())}return c}async function lT(i,o,l){return Promise.all(o.map(function(c){return em(i,c,l)}))}function fn(i,o){return o&&(i.action=Zp[i.action]),Object.assign(new mc,i)}var pc=vo;async function tm(i,o,l,c,d){const g=[];d&&(i=kt(i,c,d));for(let T=0;T<i.length;T++){const O=g[T]=fn(i[T],!0);try{await pc(O,o)}catch(I){m.logAction(l,m.LOG_ERROR,"PresenceMessage.fromResponseBody()",I.toString())}}return g}function nm(i){const o=i.length,l=new Array(o);for(let c=0;c<o;c++)l[c]=fn(i[c]);return l}function rm(i){return i instanceof mc?i:fn({data:i})}var mc=class{isSynthesized(){return!this.id||!this.connectionId?!0:this.id.substring(this.connectionId.length,0)!==this.connectionId}parseId(){if(!this.id)throw new Error("parseId(): Presence message does not contain an id");const i=this.id.split(":");return{connectionId:i[0],msgSerial:parseInt(i[1],10),index:parseInt(i[2],10)}}toJSON(){let i=this.data,o=this.encoding;return i&&R.BufferUtils.isBuffer(i)&&(arguments.length>0?(o=o?o+"/base64":"base64",i=R.BufferUtils.base64Encode(i)):i=R.BufferUtils.toBuffer(i)),{id:this.id,clientId:this.clientId,action:aT(this.action),data:i,encoding:o,extras:this.extras}}toString(){let i="[PresenceMessage";return i+="; action="+this.action,this.id&&(i+="; id="+this.id),this.timestamp&&(i+="; timestamp="+this.timestamp),this.clientId&&(i+="; clientId="+this.clientId),this.connectionId&&(i+="; connectionId="+this.connectionId),this.encoding&&(i+="; encoding="+this.encoding),this.data&&(typeof this.data=="string"?i+="; data="+this.data:R.BufferUtils.isBuffer(this.data)?i+="; data (buffer)="+R.BufferUtils.base64Encode(this.data):i+="; data (json)="+JSON.stringify(this.data)),this.extras&&(i+="; extras="+JSON.stringify(this.extras)),i+="]",i}},uT=mc,cT=class{constructor(i){this.channel=i}get logger(){return this.channel.logger}async get(i){m.logAction(this.logger,m.LOG_MICRO,"RestPresence.get()","channel = "+this.channel.name);const o=this.channel.client,l=o.options.useBinaryProtocol?"msgpack":"json",c=this.channel.client.http.supportsLinkHeaders?void 0:l,d=ae.defaultGetHeaders(o.options,{format:l});Z(d,o.options.headers);const g=this.channel.channelOptions;return new Sr(o,this.channel.client.rest.presenceMixin.basePath(this),d,c,async(T,O,I)=>await tm(T,g,this.logger,o._MsgPack,I?void 0:l)).get(i)}async history(i){return m.logAction(this.logger,m.LOG_MICRO,"RestPresence.history()","channel = "+this.channel.name),this.channel.client.rest.presenceMixin.history(this,i)}},hT=cT,fT=9;function dT(i){return i.every(function(o){return!o.id})}var pT=class{constructor(i,o,l){var c,d;m.logAction(i.logger,m.LOG_MINOR,"RestChannel()","started; name = "+o),this.name=o,this.client=i,this.presence=new hT(this),this.channelOptions=Mt((c=i._Crypto)!=null?c:null,this.logger,l),(d=i.options.plugins)!=null&&d.Push&&(this._push=new i.options.plugins.Push.PushChannel(this))}get push(){return this._push||we("Push"),this._push}get logger(){return this.client.logger}setOptions(i){var o;this.channelOptions=Mt((o=this.client._Crypto)!=null?o:null,this.logger,i)}async history(i){return m.logAction(this.logger,m.LOG_MICRO,"RestChannel.history()","channel = "+this.name),this.client.rest.channelMixin.history(this,i)}async publish(...i){const o=i[0],l=i[1];let c,d;if(typeof o=="string"||o===null)c=[Cr({name:o,data:l})],d=i[2];else if(ie(o))c=[Cr(o)],d=i[1];else if(Array.isArray(o))c=fc(o),d=i[1];else throw new D("The single-argument form of publish() expects a message object or an array of message objects",40013,400);d||(d={});const g=this.client,T=g.options,O=T.useBinaryProtocol?"msgpack":"json",I=g.options.idempotentRestPublishing,b=ae.defaultPostHeaders(g.options,{format:O});if(Z(b,T.headers),I&&dT(c)){const q=await Hn(fT);c.forEach(function(V,K){V.id=q+":"+K.toString()})}await Yp(c,this.channelOptions);const N=dc(c),F=T.maxMessageSize;if(N>F)throw new D("Maximum size of messages that can be published at once exceeded ( was "+N+" bytes; limit is "+F+" bytes)",40009,400);await this._publish(sT(c,g._MsgPack,O),b,d)}async _publish(i,o,l){await Xe.post(this.client,this.client.rest.channelMixin.basePath(this)+"/messages",i,o,l,null,!0)}async status(){return this.client.rest.channelMixin.status(this)}},mT=pT,gT=class O1{constructor(o){this.entries=o&&o.entries||void 0,this.schema=o&&o.schema||void 0,this.appId=o&&o.appId||void 0,this.inProgress=o&&o.inProgress||void 0,this.unit=o&&o.unit||void 0,this.intervalId=o&&o.intervalId||void 0}static fromValues(o){return new O1(o)}},yT=gT,im=class{static basePath(i){return"/channels/"+encodeURIComponent(i.name)}static history(i,o){const l=i.client,c=l.options.useBinaryProtocol?"msgpack":"json",d=i.client.http.supportsLinkHeaders?void 0:c,g=ae.defaultGetHeaders(l.options,{format:c});Z(g,l.options.headers);const T=i.channelOptions;return new Sr(l,this.basePath(i)+"/messages",g,d,async function(O,I,b){return await oT(O,T,i.logger,l._MsgPack,b?void 0:c)}).get(o)}static async status(i){const o=i.client.options.useBinaryProtocol?"msgpack":"json",l=ae.defaultPostHeaders(i.client.options,{format:o});return(await Xe.get(i.client,this.basePath(i),l,{},o,!0)).body}},vT=class{static basePath(i){return im.basePath(i.channel)+"/presence"}static async history(i,o){const l=i.channel.client,c=l.options.useBinaryProtocol?"msgpack":"json",d=i.channel.client.http.supportsLinkHeaders?void 0:c,g=ae.defaultGetHeaders(l.options,{format:c});Z(g,l.options.headers);const T=i.channel.channelOptions;return new Sr(l,this.basePath(i)+"/history",g,d,async function(O,I,b){return await tm(O,T,i.logger,l._MsgPack,b?void 0:c)}).get(o)}},sm=class{constructor(i){this.channelMixin=im,this.presenceMixin=vT,this.Resource=Xe,this.DeviceDetails=Xi,this.client=i,this.channels=new wT(this.client),this.push=new Z1(this.client)}async stats(i){const o=ae.defaultGetHeaders(this.client.options),l=this.client.options.useBinaryProtocol?"msgpack":"json",c=this.client.http.supportsLinkHeaders?void 0:l;return Z(o,this.client.options.headers),new Sr(this.client,"/stats",o,c,function(d,g,T){const O=T?d:JSON.parse(d);for(let I=0;I<O.length;I++)O[I]=yT.fromValues(O[I]);return O}).get(i)}async time(i){const o=ae.defaultGetHeaders(this.client.options);this.client.options.headers&&Z(o,this.client.options.headers);const l=O=>this.client.baseUri(O)+"/time";let{error:c,body:d,unpacked:g}=await this.client.http.do(le.Get,l,o,null,i);if(c)throw c;g||(d=JSON.parse(d));const T=d[0];if(!T)throw new D("Internal error (unexpected result type from GET /time)",5e4,500);return this.client.serverTimeOffset=T-Date.now(),T}async request(i,o,l,c,d,g){var T;const[O,I,b]=this.client.options.useBinaryProtocol?(this.client._MsgPack||we("MsgPack"),[this.client._MsgPack.encode,this.client._MsgPack.decode,"msgpack"]):[JSON.stringify,JSON.parse,"json"],N=this.client.http.supportsLinkHeaders?void 0:b;c=c||{};const F=i.toLowerCase(),q=F=="get"?ae.defaultGetHeaders(this.client.options,{format:b,protocolVersion:l}):ae.defaultPostHeaders(this.client.options,{format:b,protocolVersion:l});typeof d!="string"&&(d=(T=O(d))!=null?T:null),Z(q,this.client.options.headers),g&&Z(q,g);const V=new Sr(this.client,o,q,N,async function(K,ee,ce){return se(ce?K:I(K))},!0);if(!R.Http.methods.includes(F))throw new D("Unsupported method "+F,40500,405);return R.Http.methodsWithBody.includes(F)?V[F](c,d):V[F](c)}async batchPublish(i){let o,l;Array.isArray(i)?(o=i,l=!1):(o=[i],l=!0);const c=this.client.options.useBinaryProtocol?"msgpack":"json",d=ae.defaultPostHeaders(this.client.options,{format:c});this.client.options.headers&&Z(d,this.client.options.headers);const g=xt(o,this.client._MsgPack,c),T=await Xe.post(this.client,"/messages",g,d,{},null,!0),O=T.unpacked?T.body:kt(T.body,this.client._MsgPack,c);return l?O[0]:O}async batchPresence(i){const o=this.client.options.useBinaryProtocol?"msgpack":"json",l=ae.defaultPostHeaders(this.client.options,{format:o});this.client.options.headers&&Z(l,this.client.options.headers);const c=i.join(","),d=await Xe.get(this.client,"/presence",l,{channels:c},null,!0);return d.unpacked?d.body:kt(d.body,this.client._MsgPack,o)}async revokeTokens(i,o){if(Gp(this.client.options))throw new D("Cannot revoke tokens when using token auth",40162,401);const l=this.client.options.keyName;let c=o??{};const d=P({targets:i.map(b=>`${b.type}:${b.value}`)},c),g=this.client.options.useBinaryProtocol?"msgpack":"json",T=ae.defaultPostHeaders(this.client.options,{format:g});this.client.options.headers&&Z(T,this.client.options.headers);const O=xt(d,this.client._MsgPack,g),I=await Xe.post(this.client,`/keys/${l}/revokeTokens`,O,T,{},null,!0);return I.unpacked?I.body:kt(I.body,this.client._MsgPack,g)}},wT=class{constructor(i){this.client=i,this.all=Object.create(null)}get(i,o){i=String(i);let l=this.all[i];return l?o&&l.setOptions(o):this.all[i]=l=new mT(this.client,i,o),l}release(i){delete this.all[String(i)]}},ST=class extends Wp{constructor(i){super(ae.objectifyOptions(i,!1,"BaseRest",m.defaultLogger,{Rest:sm}))}},om={Rest:sm},am=class extends Jp{static async fromEncoded(i,o){return Qp(m.defaultLogger,R.Crypto,i,o)}static async fromEncodedArray(i,o){return rT(m.defaultLogger,R.Crypto,i,o)}static fromValues(i){return Object.assign(new Jp,i)}static async encode(i,o){return hc(i,o)}static async decode(i,o){return vo(i,o)}},lm=class extends uT{static async fromEncoded(i,o){return em(m.defaultLogger,i,o)}static async fromEncodedArray(i,o){return lT(m.defaultLogger,i,o)}static fromValues(i,o){return fn(i,o)}},Ji=class Jl extends ST{constructor(o){var l,c;if(!Jl._MsgPack)throw new Error("Expected DefaultRest._MsgPack to have been set");super(ae.objectifyOptions(o,!0,"Rest",m.defaultLogger,_(P({},om),{Crypto:(l=Jl.Crypto)!=null?l:void 0,MsgPack:(c=Jl._MsgPack)!=null?c:void 0})))}static get Crypto(){if(this._Crypto===null)throw new Error("Encryption not enabled; use ably.encryption.js instead");return this._Crypto}static set Crypto(o){this._Crypto=o}};Ji._Crypto=null,Ji.Message=am,Ji.PresenceMessage=lm,Ji._MsgPack=null,Ji._Http=uc;var gc=Ji;function CT(i,o,l,c){try{l.apply(o,c)}catch(d){m.logAction(i,m.LOG_ERROR,"EventEmitter.emit()","Unexpected listener exception: "+d+"; stack = "+(d&&d.stack))}}function yc(i,o,l){let c,d,g;for(let T=0;T<i.length;T++)if(c=i[T],l&&(c=c[l]),Array.isArray(c)){for(;(d=c.indexOf(o))!==-1;)c.splice(d,1);l&&c.length===0&&delete i[T][l]}else if(ie(c))for(g in c)Object.prototype.hasOwnProperty.call(c,g)&&Array.isArray(c[g])&&yc([c],o,g)}var TT=class{constructor(i){this.logger=i,this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null)}on(...i){if(i.length===1){const o=i[0];if(typeof o=="function")this.any.push(o);else throw new Error("EventListener.on(): Invalid arguments: "+R.Config.inspect(i))}if(i.length===2){const[o,l]=i;if(typeof l!="function")throw new Error("EventListener.on(): Invalid arguments: "+R.Config.inspect(i));if(re(o))this.any.push(l);else if(Array.isArray(o))o.forEach(c=>{this.on(c,l)});else{if(typeof o!="string")throw new Error("EventListener.on(): Invalid arguments: "+R.Config.inspect(i));(this.events[o]||(this.events[o]=[])).push(l)}}}off(...i){if(i.length==0||re(i[0])&&re(i[1])){this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null);return}const[o,l]=i;let c=null,d=null;if(i.length===1||!l)typeof o=="function"?c=o:d=o;else{if(typeof l!="function")throw new Error("EventEmitter.off(): invalid arguments:"+R.Config.inspect(i));[d,c]=[o,l]}if(c&&re(d)){yc([this.any,this.events,this.anyOnce,this.eventsOnce],c);return}if(Array.isArray(d)){d.forEach(g=>{this.off(g,c)});return}if(typeof d!="string")throw new Error("EventEmitter.off(): invalid arguments:"+R.Config.inspect(i));c?yc([this.events,this.eventsOnce],c,d):(delete this.events[d],delete this.eventsOnce[d])}listeners(i){if(i){const o=this.events[i]||[];return this.eventsOnce[i]&&Array.prototype.push.apply(o,this.eventsOnce[i]),o.length?o:null}return this.any.length?this.any:null}emit(i,...o){const l={event:i},c=[];this.anyOnce.length&&(Array.prototype.push.apply(c,this.anyOnce),this.anyOnce=[]),this.any.length&&Array.prototype.push.apply(c,this.any);const d=this.eventsOnce[i];d&&(Array.prototype.push.apply(c,d),delete this.eventsOnce[i]);const g=this.events[i];g&&Array.prototype.push.apply(c,g),c.forEach(T=>{CT(this.logger,l,T,o)})}once(...i){const o=i.length;if(o===0||o===1&&typeof i[0]!="function"){const d=i[0];return new Promise(g=>{this.once(d,g)})}const[l,c]=i;if(i.length===1&&typeof l=="function")this.anyOnce.push(l);else if(re(l)){if(typeof c!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+R.Config.inspect(i));this.anyOnce.push(c)}else if(Array.isArray(l)){const d=this,g=function(){const T=Array.prototype.slice.call(arguments);if(l.forEach(function(O){d.off(O,g)}),typeof c!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+R.Config.inspect(i));c.apply(this,T)};l.forEach(function(T){d.on(T,g)})}else{if(typeof l!="string")throw new Error("EventEmitter.once(): Invalid arguments:"+R.Config.inspect(i));const d=this.eventsOnce[l]||(this.eventsOnce[l]=[]);if(c){if(typeof c!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+R.Config.inspect(i));d.push(c)}}}async whenState(i,o){if(typeof i!="string"||typeof o!="string")throw new Error("whenState requires a valid state String argument");return i===o?null:this.once(i)}},ct=TT,de={HEARTBEAT:0,ACK:1,NACK:2,CONNECT:3,CONNECTED:4,DISCONNECT:5,DISCONNECTED:6,CLOSE:7,CLOSED:8,ERROR:9,ATTACH:10,ATTACHED:11,DETACH:12,DETACHED:13,PRESENCE:14,MESSAGE:15,SYNC:16,AUTH:17,ACTIVATE:18},um=[];Object.keys(de).forEach(function(i){um[de[i]]=i});var $n={HAS_PRESENCE:1,HAS_BACKLOG:2,RESUMED:4,TRANSIENT:16,ATTACH_RESUME:32,PRESENCE:65536,PUBLISH:1<<17,SUBSCRIBE:1<<18,PRESENCE_SUBSCRIBE:1<<19},RT=Object.keys($n);$n.MODE_ALL=$n.PRESENCE|$n.PUBLISH|$n.SUBSCRIBE|$n.PRESENCE_SUBSCRIBE;function cm(i){const o=[];if(i)for(let l=0;l<i.length;l++)o.push(i[l].toString());return"[ "+o.join(", ")+" ]"}var hm=["PRESENCE","PUBLISH","SUBSCRIBE","PRESENCE_SUBSCRIBE"],ET=xt;function PT(i,o,l,c){const d=kt(i,o,c);return vc(d,l)}function vc(i,o){const l=i.error;l&&(i.error=D.fromValues(l));const c=i.messages;if(c)for(let g=0;g<c.length;g++)c[g]=Cr(c[g]);const d=o?i.presence:void 0;if(o&&d&&o)for(let g=0;g<d.length;g++)d[g]=o.presenceMessageFromValues(d[g],!0);return Object.assign(new Sc,_(P({},i),{presence:d}))}function AT(i){return vc(i,{presenceMessageFromValues:fn,presenceMessagesFromValuesArray:nm})}function On(i){return Object.assign(new Sc,i)}function wc(i,o){let l="[ProtocolMessage";i.action!==void 0&&(l+="; action="+um[i.action]||i.action);const c=["id","channel","channelSerial","connectionId","count","msgSerial","timestamp"];let d;for(let g=0;g<c.length;g++)d=c[g],i[d]!==void 0&&(l+="; "+d+"="+i[d]);if(i.messages&&(l+="; messages="+cm(fc(i.messages))),i.presence&&o&&(l+="; presence="+cm(o.presenceMessagesFromValuesArray(i.presence))),i.error&&(l+="; error="+D.fromValues(i.error).toString()),i.auth&&i.auth.accessToken&&(l+="; token="+i.auth.accessToken),i.flags&&(l+="; flags="+RT.filter(i.hasFlag).join(",")),i.params){let g="";ji(i.params,function(T){g.length>0&&(g+="; "),g+=T+"="+i.params[T]}),g.length>0&&(l+="; params=["+g+"]")}return l+="]",l}var Sc=class{constructor(){this.hasFlag=i=>(this.flags&$n[i])>0}setFlag(i){return this.flags=this.flags|$n[i]}getMode(){return this.flags&&this.flags&$n.MODE_ALL}encodeModesToFlags(i){i.forEach(o=>this.setFlag(o))}decodeModesFromFlags(){const i=[];return hm.forEach(o=>{this.hasFlag(o)&&i.push(o)}),i.length>0?i:void 0}},fm=Sc,_T=class extends ct{constructor(i){super(i),this.messages=[]}count(){return this.messages.length}push(i){this.messages.push(i)}shift(){return this.messages.shift()}last(){return this.messages[this.messages.length-1]}copyAll(){return this.messages.slice()}append(i){this.messages.push.apply(this.messages,i)}prepend(i){this.messages.unshift.apply(this.messages,i)}completeMessages(i,o,l){m.logAction(this.logger,m.LOG_MICRO,"MessageQueue.completeMessages()","serial = "+i+"; count = "+o),l=l||null;const c=this.messages;if(c.length===0)throw new Error("MessageQueue.completeMessages(): completeMessages called on any empty MessageQueue");const d=c[0];if(d){const g=d.message.msgSerial,T=i+o;if(T>g){const O=c.splice(0,T-g);for(const I of O)I.callback(l)}c.length==0&&this.emit("idle")}}completeAllMessages(i){this.completeMessages(0,Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,i)}resetSendAttempted(){for(let i of this.messages)i.sendAttempted=!1}clear(){m.logAction(this.logger,m.LOG_MICRO,"MessageQueue.clear()","clearing "+this.messages.length+" messages"),this.messages=[],this.emit("idle")}},dm=_T,pm=class{constructor(i,o){this.message=i,this.callback=o,this.merged=!1;const l=i.action;this.sendAttempted=!1,this.ackRequired=l==de.MESSAGE||l==de.PRESENCE}},OT=class extends ct{constructor(i){super(i.logger),this.transport=i,this.messageQueue=new dm(this.logger),i.on("ack",(o,l)=>{this.onAck(o,l)}),i.on("nack",(o,l,c)=>{this.onNack(o,l,c)})}onAck(i,o){m.logAction(this.logger,m.LOG_MICRO,"Protocol.onAck()","serial = "+i+"; count = "+o),this.messageQueue.completeMessages(i,o)}onNack(i,o,l){m.logAction(this.logger,m.LOG_ERROR,"Protocol.onNack()","serial = "+i+"; count = "+o+"; err = "+xe(l)),l||(l=new D("Unable to send message; channel not responding",50001,500)),this.messageQueue.completeMessages(i,o,l)}onceIdle(i){const o=this.messageQueue;if(o.count()===0){i();return}o.once("idle",i)}send(i){i.ackRequired&&this.messageQueue.push(i),this.logger.shouldLog(m.LOG_MICRO)&&m.logActionNoStrip(this.logger,m.LOG_MICRO,"Protocol.send()","sending msg; "+wc(i.message,this.transport.connectionManager.realtime._RealtimePresence)),i.sendAttempted=!0,this.transport.send(i.message)}getTransport(){return this.transport}getPendingMessages(){return this.messageQueue.copyAll()}clearPendingMessages(){return this.messageQueue.clear()}finish(){const i=this.transport;this.onceIdle(function(){i.disconnect()})}},kT=OT,xT=class{constructor(i,o,l,c){this.previous=i,this.current=o,l&&(this.retryIn=l),c&&(this.reason=c)}},ul=xT,Tr={DISCONNECTED:80003,SUSPENDED:80002,FAILED:8e4,CLOSING:80017,CLOSED:80017,UNKNOWN_CONNECTION_ERR:50002,UNKNOWN_CHANNEL_ERR:50001},MT={disconnected:()=>D.fromValues({statusCode:400,code:Tr.DISCONNECTED,message:"Connection to server temporarily unavailable"}),suspended:()=>D.fromValues({statusCode:400,code:Tr.SUSPENDED,message:"Connection to server unavailable"}),failed:()=>D.fromValues({statusCode:400,code:Tr.FAILED,message:"Connection failed or disconnected by server"}),closing:()=>D.fromValues({statusCode:400,code:Tr.CLOSING,message:"Connection closing"}),closed:()=>D.fromValues({statusCode:400,code:Tr.CLOSED,message:"Connection closed"}),unknownConnectionErr:()=>D.fromValues({statusCode:500,code:Tr.UNKNOWN_CONNECTION_ERR,message:"Internal connection error"}),unknownChannelErr:()=>D.fromValues({statusCode:500,code:Tr.UNKNOWN_CONNECTION_ERR,message:"Internal channel error"})};function bT(i){return!i.statusCode||!i.code||i.statusCode>=500?!0:Object.values(Tr).includes(i.code)}var Rr=MT,IT=On({action:de.CLOSE}),LT=On({action:de.DISCONNECT}),DT=class extends ct{constructor(i,o,l,c){super(i.logger),c&&(l.format=void 0,l.heartbeats=!0),this.connectionManager=i,this.auth=o,this.params=l,this.timeouts=l.options.timeouts,this.format=l.format,this.isConnected=!1,this.isFinished=!1,this.isDisposed=!1,this.maxIdleInterval=null,this.idleTimer=null,this.lastActivity=null}connect(){}close(){this.isConnected&&this.requestClose(),this.finish("closed",Rr.closed())}disconnect(i){this.isConnected&&this.requestDisconnect(),this.finish("disconnected",i||Rr.disconnected())}fail(i){this.isConnected&&this.requestDisconnect(),this.finish("failed",i||Rr.failed())}finish(i,o){var l;this.isFinished||(this.isFinished=!0,this.isConnected=!1,this.maxIdleInterval=null,clearTimeout((l=this.idleTimer)!=null?l:void 0),this.idleTimer=null,this.emit(i,o),this.dispose())}onProtocolMessage(i){switch(this.logger.shouldLog(m.LOG_MICRO)&&m.logActionNoStrip(this.logger,m.LOG_MICRO,"Transport.onProtocolMessage()","received on "+this.shortName+": "+wc(i,this.connectionManager.realtime._RealtimePresence)+"; connectionId = "+this.connectionManager.connectionId),this.onActivity(),i.action){case de.HEARTBEAT:m.logActionNoStrip(this.logger,m.LOG_MICRO,"Transport.onProtocolMessage()",this.shortName+" heartbeat; connectionId = "+this.connectionManager.connectionId),this.emit("heartbeat",i.id);break;case de.CONNECTED:this.onConnect(i),this.emit("connected",i.error,i.connectionId,i.connectionDetails,i);break;case de.CLOSED:this.onClose(i);break;case de.DISCONNECTED:this.onDisconnect(i);break;case de.ACK:this.emit("ack",i.msgSerial,i.count);break;case de.NACK:this.emit("nack",i.msgSerial,i.count,i.error);break;case de.SYNC:this.connectionManager.onChannelMessage(i,this);break;case de.ACTIVATE:break;case de.AUTH:tt(this.auth.authorize(),o=>{o&&m.logAction(this.logger,m.LOG_ERROR,"Transport.onProtocolMessage()","Ably requested re-authentication, but unable to obtain a new token: "+xe(o))});break;case de.ERROR:if(m.logAction(this.logger,m.LOG_MINOR,"Transport.onProtocolMessage()","received error action; connectionId = "+this.connectionManager.connectionId+"; err = "+R.Config.inspect(i.error)+(i.channel?", channel: "+i.channel:"")),i.channel===void 0){this.onFatalError(i);break}this.connectionManager.onChannelMessage(i,this);break;default:this.connectionManager.onChannelMessage(i,this)}}onConnect(i){if(this.isConnected=!0,!i.connectionDetails)throw new Error("Transport.onConnect(): Connect message recieved without connectionDetails");const o=i.connectionDetails.maxIdleInterval;o&&(this.maxIdleInterval=o+this.timeouts.realtimeRequestTimeout,this.onActivity())}onDisconnect(i){const o=i&&i.error;m.logAction(this.logger,m.LOG_MINOR,"Transport.onDisconnect()","err = "+xe(o)),this.finish("disconnected",o)}onFatalError(i){const o=i&&i.error;m.logAction(this.logger,m.LOG_MINOR,"Transport.onFatalError()","err = "+xe(o)),this.finish("failed",o)}onClose(i){const o=i&&i.error;m.logAction(this.logger,m.LOG_MINOR,"Transport.onClose()","err = "+xe(o)),this.finish("closed",o)}requestClose(){m.logAction(this.logger,m.LOG_MINOR,"Transport.requestClose()",""),this.send(IT)}requestDisconnect(){m.logAction(this.logger,m.LOG_MINOR,"Transport.requestDisconnect()",""),this.send(LT)}ping(i){const o={action:de.HEARTBEAT};i&&(o.id=i),this.send(On(o))}dispose(){m.logAction(this.logger,m.LOG_MINOR,"Transport.dispose()",""),this.isDisposed=!0,this.off()}onActivity(){this.maxIdleInterval&&(this.lastActivity=this.connectionManager.lastActivity=Date.now(),this.setIdleTimer(this.maxIdleInterval+100))}setIdleTimer(i){this.idleTimer||(this.idleTimer=setTimeout(()=>{this.onIdleTimerExpire()},i))}onIdleTimerExpire(){if(!this.lastActivity||!this.maxIdleInterval)throw new Error("Transport.onIdleTimerExpire(): lastActivity/maxIdleInterval not set");this.idleTimer=null;const i=Date.now()-this.lastActivity,o=this.maxIdleInterval-i;if(o<=0){const l="No activity seen from realtime in "+i+"ms; assuming connection has dropped";m.logAction(this.logger,m.LOG_ERROR,"Transport.onIdleTimerExpire()",l),this.disconnect(new D(l,80003,408))}else this.setIdleTimer(o+100)}static tryConnect(i,o,l,c,d){const g=new i(o,l,c);let T;const O=function(b){clearTimeout(T),d({event:this.event,error:b})},I=o.options.timeouts.realtimeRequestTimeout;return T=setTimeout(()=>{g.off(["preconnect","disconnected","failed"]),g.dispose(),O.call({event:"disconnected"},new D("Timeout waiting for transport to indicate itself viable",5e4,500))},I),g.on(["failed","disconnected"],O),g.on("preconnect",function(){m.logAction(o.logger,m.LOG_MINOR,"Transport.tryConnect()","viable transport "+g),clearTimeout(T),g.off(["failed","disconnected"],O),d(null,g)}),g.connect(),g}static isAvailable(){throw new D("isAvailable not implemented for transport",5e4,500)}},Zi=DT,It;(i=>{i.WebSocket="web_socket",i.Comet="comet",i.XhrPolling="xhr_polling"})(It||(It={}));var NT=typeof Yn<"u"?Yn:typeof window<"u"?window:self,Cc=()=>{var i;return typeof R.WebStorage<"u"&&((i=R.WebStorage)==null?void 0:i.localSupported)},wo=()=>{var i;return typeof R.WebStorage<"u"&&((i=R.WebStorage)==null?void 0:i.sessionSupported)},mm=function(){},Tc="ably-transport-preference";function UT(i,o,l){let c;if(i.channel!==o.channel||(c=i.action)!==de.PRESENCE&&c!==de.MESSAGE||c!==o.action)return!1;const d=c===de.PRESENCE?"presence":"messages",g=i[d].concat(o[d]);return dc(g)>l||!zi(g,"clientId")||!g.every(function(O){return!O.id})?!1:(i[d]=g,!0)}function Rc(i){try{return JSON.parse(i)}catch{return null}}var FT=class{constructor(i,o,l,c){this.options=i,this.host=o,this.mode=l,this.connectionKey=c,this.format=i.useBinaryProtocol?"msgpack":"json"}getConnectParams(i){const o=i?W(i):{},l=this.options;switch(this.mode){case"resume":o.resume=this.connectionKey;break;case"recover":{const c=Rc(l.recover);c&&(o.recover=c.connectionKey);break}}return l.clientId!==void 0&&(o.clientId=l.clientId),l.echoMessages===!1&&(o.echo="false"),this.format!==void 0&&(o.format=this.format),this.stream!==void 0&&(o.stream=this.stream),this.heartbeats!==void 0&&(o.heartbeats=this.heartbeats),o.v=ae.protocolVersion,o.agent=Qi(this.options),l.transportParams!==void 0&&Z(o,l.transportParams),o}toString(){let i="[mode="+this.mode;return this.host&&(i+=",host="+this.host),this.connectionKey&&(i+=",connectionKey="+this.connectionKey),this.format&&(i+=",format="+this.format),i+="]",i}},BT=class k1 extends ct{constructor(o,l){super(o.logger),this.supportedTransports={},this.disconnectedRetryCount=0,this.pendingChannelMessagesState={isProcessing:!1,queue:[]},this.realtime=o,this.initTransports(),this.options=l;const c=l.timeouts,d=c.webSocketConnectTimeout+c.realtimeRequestTimeout;if(this.states={initialized:{state:"initialized",terminal:!1,queueEvents:!0,sendEvents:!1,failState:"disconnected"},connecting:{state:"connecting",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:d,failState:"disconnected"},connected:{state:"connected",terminal:!1,queueEvents:!1,sendEvents:!0,failState:"disconnected"},disconnected:{state:"disconnected",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:c.disconnectedRetryTimeout,failState:"disconnected"},suspended:{state:"suspended",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:c.suspendedRetryTimeout,failState:"suspended"},closing:{state:"closing",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:c.realtimeRequestTimeout,failState:"closed"},closed:{state:"closed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"closed"},failed:{state:"failed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"failed"}},this.state=this.states.initialized,this.errorReason=null,this.queuedMessages=new dm(this.logger),this.msgSerial=0,this.connectionDetails=void 0,this.connectionId=void 0,this.connectionKey=void 0,this.connectionStateTtl=c.connectionStateTtl,this.maxIdleInterval=null,this.transports=hn(l.transports||ae.defaultTransports,this.supportedTransports),this.transportPreference=null,this.transports.includes(It.WebSocket)&&(this.webSocketTransportAvailable=!0),this.transports.includes(It.XhrPolling)?this.baseTransport=It.XhrPolling:this.transports.includes(It.Comet)&&(this.baseTransport=It.Comet),this.httpHosts=ae.getHosts(l),this.wsHosts=ae.getHosts(l,!0),this.activeProtocol=null,this.host=null,this.lastAutoReconnectAttempt=null,this.lastActivity=null,this.forceFallbackHost=!1,this.connectCounter=0,this.wsCheckResult=null,this.webSocketSlowTimer=null,this.webSocketGiveUpTimer=null,this.abandonedWebSocket=!1,m.logAction(this.logger,m.LOG_MINOR,"Realtime.ConnectionManager()","started"),m.logAction(this.logger,m.LOG_MICRO,"Realtime.ConnectionManager()","requested transports = ["+(l.transports||ae.defaultTransports)+"]"),m.logAction(this.logger,m.LOG_MICRO,"Realtime.ConnectionManager()","available transports = ["+this.transports+"]"),m.logAction(this.logger,m.LOG_MICRO,"Realtime.ConnectionManager()","http hosts = ["+this.httpHosts+"]"),!this.transports.length){const T="no requested transports available";throw m.logAction(this.logger,m.LOG_ERROR,"realtime.ConnectionManager()",T),new Error(T)}const g=R.Config.addEventListener;g&&(wo()&&typeof l.recover=="function"&&g("beforeunload",this.persistConnection.bind(this)),l.closeOnUnload===!0&&g("beforeunload",()=>{m.logAction(this.logger,m.LOG_MAJOR,"Realtime.ConnectionManager()","beforeunload event has triggered the connection to close as closeOnUnload is true"),this.requestState({state:"closing"})}),g("online",()=>{var T;this.state==this.states.disconnected||this.state==this.states.suspended?(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager caught browser ‘online’ event","reattempting connection"),this.requestState({state:"connecting"})):this.state==this.states.connecting&&((T=this.pendingTransport)==null||T.off(),this.disconnectAllTransports(),this.startConnect())}),g("offline",()=>{this.state==this.states.connected&&(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager caught browser ‘offline’ event","disconnecting active transport"),this.disconnectAllTransports())}))}static supportedTransports(o){const l={supportedTransports:{}};return this.initTransports(o,l),l.supportedTransports}static initTransports(o,l){const c=P(P({},R.Transports.bundledImplementations),o);[It.WebSocket,...R.Transports.order].forEach(d=>{const g=c[d];g&&g.isAvailable()&&(l.supportedTransports[d]=g)})}initTransports(){k1.initTransports(this.realtime._additionalTransportImplementations,this)}createTransportParams(o,l){return new FT(this.options,o,l,this.connectionKey)}getTransportParams(o){(c=>{if(this.connectionKey){c("resume");return}if(typeof this.options.recover=="string"){c("recover");return}const d=this.options.recover,g=this.getSessionRecoverData(),T=this.sessionRecoveryName();if(g&&typeof d=="function"){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.getTransportParams()","Calling clientOptions-provided recover function with last session data (recovery scope: "+T+")"),d(g,O=>{O?(this.options.recover=g.recoveryKey,c("recover")):c("clean")});return}c("clean")})(c=>{const d=this.createTransportParams(null,c);if(c==="recover"){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport recovery mode = recover; recoveryKey = "+this.options.recover);const g=Rc(this.options.recover);g&&(this.msgSerial=g.msgSerial)}else m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport params = "+d.toString());o(d)})}tryATransport(o,l,c){m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.tryATransport()","trying "+l),this.proposedTransport=Zi.tryConnect(this.supportedTransports[l],this,this.realtime.auth,o,(d,g)=>{const T=this.state;if(T==this.states.closing||T==this.states.closed||T==this.states.failed){g&&(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.tryATransport()","connection "+T.state+" while we were attempting the transport; closing "+g),g.close()),c(!0);return}if(d){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.tryATransport()","transport "+l+" "+d.event+", err: "+d.error.toString()),qn.isTokenErr(d.error)&&!(this.errorReason&&qn.isTokenErr(this.errorReason))?(this.errorReason=d.error,tt(this.realtime.auth._forceNewToken(null,null),O=>{if(O){this.actOnErrorFromAuthorize(O);return}this.tryATransport(o,l,c)})):d.event==="failed"?(this.notifyState({state:"failed",error:d.error}),c(!0)):d.event==="disconnected"&&(bT(d.error)?c(!1):(this.notifyState({state:this.states.connecting.failState,error:d.error}),c(!0)));return}m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.tryATransport()","viable transport "+l+"; setting pending"),this.setTransportPending(g,o),c(null,g)})}setTransportPending(o,l){const c=l.mode;m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.setTransportPending()","transport = "+o+"; mode = "+c),this.pendingTransport=o,this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),o.once("connected",(g,T,O)=>{this.activateTransport(g,o,T,O),c==="recover"&&this.options.recover&&(delete this.options.recover,this.unpersistConnection())});const d=this;o.on(["disconnected","closed","failed"],function(g){d.deactivateTransport(o,this.event,g)}),this.emit("transport.pending",o)}activateTransport(o,l,c,d){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.activateTransport()","transport = "+l),o&&m.logAction(this.logger,m.LOG_ERROR,"ConnectionManager.activateTransport()","error = "+o),c&&m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.activateTransport()","connectionId =  "+c),d&&m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.activateTransport()","connectionDetails =  "+JSON.stringify(d)),this.persistTransportPreference(l);const g=this.state,T=this.states.connected.state;if(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.activateTransport()","current state = "+g.state),g.state==this.states.closing.state||g.state==this.states.closed.state||g.state==this.states.failed.state)return m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.activateTransport()","Disconnecting transport and abandoning"),l.disconnect(),!1;if(delete this.pendingTransport,!l.isConnected)return m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.activateTransport()","Declining to activate transport "+l+" since it appears to no longer be connected"),!1;const O=this.activeProtocol;this.activeProtocol=new kT(l),this.host=l.params.host;const I=d.connectionKey;if(I&&this.connectionKey!=I&&this.setConnection(c,d,!!o),this.onConnectionDetailsUpdate(d,l),R.Config.nextTick(()=>{l.on("connected",(b,N,F)=>{this.onConnectionDetailsUpdate(F,l),this.emit("update",new ul(T,T,null,b))})}),g.state===this.states.connected.state?o&&(this.errorReason=this.realtime.connection.errorReason=o,this.emit("update",new ul(T,T,null,o))):(this.notifyState({state:"connected",error:o}),this.errorReason=this.realtime.connection.errorReason=o||null),this.emit("transport.active",l),O)if(O.messageQueue.count()>0&&m.logAction(this.logger,m.LOG_ERROR,"ConnectionManager.activateTransport()","Previous active protocol (for transport "+O.transport.shortName+", new one is "+l.shortName+") finishing with "+O.messageQueue.count()+" messages still pending"),O.transport===l){const b="Assumption violated: activating a transport that was also the transport for the previous active protocol; transport = "+l.shortName+"; stack = "+new Error().stack;m.logAction(this.logger,m.LOG_ERROR,"ConnectionManager.activateTransport()",b)}else O.finish();return!0}deactivateTransport(o,l,c){const d=this.activeProtocol,g=d&&d.getTransport()===o,T=o===this.pendingTransport,O=this.noTransportsScheduledForActivation();if(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.deactivateTransport()","transport = "+o),m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.deactivateTransport()","state = "+l+(g?"; was active":T?"; was pending":"")+(O?"":"; another transport is scheduled for activation")),c&&c.message&&m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.deactivateTransport()","reason =  "+c.message),g&&(m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.deactivateTransport()","Getting, clearing, and requeuing "+this.activeProtocol.messageQueue.count()+" pending messages"),this.queuePendingMessages(d.getPendingMessages()),d.clearPendingMessages(),this.activeProtocol=this.host=null),this.emit("transport.inactive",o),g&&O||g&&l==="failed"||l==="closed"||d===null&&T){if(l==="disconnected"&&c&&c.statusCode>500&&this.httpHosts.length>1){this.unpersistTransportPreference(),this.forceFallbackHost=!0,this.notifyState({state:l,error:c,retryImmediately:!0});return}const I=l==="failed"&&qn.isTokenErr(c)?"disconnected":l;this.notifyState({state:I,error:c});return}}noTransportsScheduledForActivation(){return!this.pendingTransport||!this.pendingTransport.isConnected}setConnection(o,l,c){const d=this.connectionId;(d&&d!==o||!d&&c)&&(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.setConnection()","Resetting msgSerial"),this.msgSerial=0,this.queuedMessages.resetSendAttempted()),this.connectionId!==o&&m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.setConnection()","New connectionId; reattaching any attached channels"),this.realtime.connection.id=this.connectionId=o,this.realtime.connection.key=this.connectionKey=l.connectionKey}clearConnection(){this.realtime.connection.id=this.connectionId=void 0,this.realtime.connection.key=this.connectionKey=void 0,this.msgSerial=0,this.unpersistConnection()}createRecoveryKey(){return this.connectionKey?JSON.stringify({connectionKey:this.connectionKey,msgSerial:this.msgSerial,channelSerials:this.realtime.channels.channelSerials()}):null}checkConnectionStateFreshness(){if(!this.lastActivity||!this.connectionId)return;const o=Date.now()-this.lastActivity;o>this.connectionStateTtl+this.maxIdleInterval&&(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.checkConnectionStateFreshness()","Last known activity from realtime was "+o+"ms ago; discarding connection state"),this.clearConnection(),this.states.connecting.failState="suspended")}persistConnection(){if(wo()){const o=this.createRecoveryKey();o&&this.setSessionRecoverData({recoveryKey:o,disconnectedAt:Date.now(),location:NT.location,clientId:this.realtime.auth.clientId})}}unpersistConnection(){this.clearSessionRecoverData()}getError(){if(this.errorReason){const o=ue.fromValues(this.errorReason);return o.cause=this.errorReason,o}return this.getStateError()}getStateError(){var o,l;return(l=(o=Rr)[this.state.state])==null?void 0:l.call(o)}activeState(){return this.state.queueEvents||this.state.sendEvents}enactStateChange(o){const l="Connection state",c=o.current+(o.reason?"; reason: "+o.reason:"");o.current==="failed"?m.logAction(this.logger,m.LOG_ERROR,l,c):m.logAction(this.logger,m.LOG_MAJOR,l,c),m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.enactStateChange","setting new state: "+o.current+"; reason = "+(o.reason&&o.reason.message));const d=this.state=this.states[o.current];o.reason&&(this.errorReason=o.reason,this.realtime.connection.errorReason=o.reason),(d.terminal||d.state==="suspended")&&this.clearConnection(),this.emit("connectionstate",o)}startTransitionTimer(o){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.startTransitionTimer()","transitionState: "+o.state),this.transitionTimer&&(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.startTransitionTimer()","clearing already-running timer"),clearTimeout(this.transitionTimer)),this.transitionTimer=setTimeout(()=>{this.transitionTimer&&(this.transitionTimer=null,m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager "+o.state+" timer expired","requesting new state: "+o.failState),this.notifyState({state:o.failState}))},o.retryDelay)}cancelTransitionTimer(){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.cancelTransitionTimer()",""),this.transitionTimer&&(clearTimeout(this.transitionTimer),this.transitionTimer=null)}startSuspendTimer(){this.suspendTimer||(this.suspendTimer=setTimeout(()=>{this.suspendTimer&&(this.suspendTimer=null,m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager suspend timer expired","requesting new state: suspended"),this.states.connecting.failState="suspended",this.notifyState({state:"suspended"}))},this.connectionStateTtl))}checkSuspendTimer(o){o!=="disconnected"&&o!=="suspended"&&o!=="connecting"&&this.cancelSuspendTimer()}cancelSuspendTimer(){this.states.connecting.failState="disconnected",this.suspendTimer&&(clearTimeout(this.suspendTimer),this.suspendTimer=null)}startRetryTimer(o){this.retryTimer=setTimeout(()=>{m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager retry timer expired","retrying"),this.retryTimer=null,this.requestState({state:"connecting"})},o)}cancelRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)}startWebSocketSlowTimer(){this.webSocketSlowTimer=setTimeout(()=>{m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager WebSocket slow timer","checking connectivity"),this.wsCheckResult===null&&this.checkWsConnectivity().then(()=>{m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager WebSocket slow timer","ws connectivity check succeeded"),this.wsCheckResult=!0}).catch(()=>{m.logAction(this.logger,m.LOG_MAJOR,"ConnectionManager WebSocket slow timer","ws connectivity check failed"),this.wsCheckResult=!1}),this.realtime.http.checkConnectivity&&tt(this.realtime.http.checkConnectivity(),(o,l)=>{o||!l?(m.logAction(this.logger,m.LOG_MAJOR,"ConnectionManager WebSocket slow timer","http connectivity check failed"),this.cancelWebSocketGiveUpTimer(),this.notifyState({state:"disconnected",error:new D("Unable to connect (network unreachable)",80003,404)})):m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager WebSocket slow timer","http connectivity check succeeded")})},this.options.timeouts.webSocketSlowTimeout)}cancelWebSocketSlowTimer(){this.webSocketSlowTimer&&(clearTimeout(this.webSocketSlowTimer),this.webSocketSlowTimer=null)}startWebSocketGiveUpTimer(o){this.webSocketGiveUpTimer=setTimeout(()=>{var l,c;this.wsCheckResult||(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager WebSocket give up timer","websocket connection took more than 10s; "+(this.baseTransport?"trying base transport":"")),this.baseTransport?(this.abandonedWebSocket=!0,(l=this.proposedTransport)==null||l.dispose(),(c=this.pendingTransport)==null||c.dispose(),this.connectBase(o,++this.connectCounter)):m.logAction(this.logger,m.LOG_MAJOR,"ConnectionManager WebSocket give up timer","websocket connectivity appears to be unavailable but no other transports to try"))},this.options.timeouts.webSocketConnectTimeout)}cancelWebSocketGiveUpTimer(){this.webSocketGiveUpTimer&&(clearTimeout(this.webSocketGiveUpTimer),this.webSocketGiveUpTimer=null)}notifyState(o){var l,c;const d=o.state,g=d==="disconnected"&&(this.state===this.states.connected||o.retryImmediately||this.state===this.states.connecting&&o.error&&qn.isTokenErr(o.error)&&!(this.errorReason&&qn.isTokenErr(this.errorReason)));if(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.notifyState()","new state: "+d+(g?"; will retry connection immediately":"")),d==this.state.state||(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),this.checkSuspendTimer(o.state),(d==="suspended"||d==="connected")&&(this.disconnectedRetryCount=0),this.state.terminal))return;const T=this.states[o.state];let O=T.retryDelay;T.state==="disconnected"&&(this.disconnectedRetryCount++,O=An(T.retryDelay,this.disconnectedRetryCount));const I=new ul(this.state.state,T.state,O,o.error||((c=(l=Rr)[T.state])==null?void 0:c.call(l)));if(g){const b=()=>{this.state===this.states.disconnected&&(this.lastAutoReconnectAttempt=Date.now(),this.requestState({state:"connecting"}))},N=this.lastAutoReconnectAttempt&&Date.now()-this.lastAutoReconnectAttempt+1;N&&N<1e3?(m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.notifyState()","Last reconnect attempt was only "+N+"ms ago, waiting another "+(1e3-N)+"ms before trying again"),setTimeout(b,1e3-N)):R.Config.nextTick(b)}else(d==="disconnected"||d==="suspended")&&this.startRetryTimer(O);(d==="disconnected"&&!g||d==="suspended"||T.terminal)&&R.Config.nextTick(()=>{this.disconnectAllTransports()}),d=="connected"&&!this.activeProtocol&&m.logAction(this.logger,m.LOG_ERROR,"ConnectionManager.notifyState()","Broken invariant: attempted to go into connected state, but there is no active protocol"),this.enactStateChange(I),this.state.sendEvents?this.sendQueuedMessages():this.state.queueEvents||(this.realtime.channels.propogateConnectionInterruption(d,I.reason),this.failQueuedMessages(I.reason))}requestState(o){var l,c;const d=o.state;if(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.requestState()","requested state: "+d+"; current state: "+this.state.state),d==this.state.state||(this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(d),d=="connecting"&&this.state.state=="connected")||d=="closing"&&this.state.state=="closed")return;const g=this.states[d],T=new ul(this.state.state,g.state,null,o.error||((c=(l=Rr)[g.state])==null?void 0:c.call(l)));this.enactStateChange(T),d=="connecting"&&R.Config.nextTick(()=>{this.startConnect()}),d=="closing"&&this.closeImpl()}startConnect(){if(this.state!==this.states.connecting){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.startConnect()","Must be in connecting state to connect, but was "+this.state.state);return}const o=this.realtime.auth,l=++this.connectCounter,c=()=>{this.checkConnectionStateFreshness(),this.getTransportParams(d=>{if(d.mode==="recover"&&d.options.recover){const g=Rc(d.options.recover);g&&this.realtime.channels.recoverChannels(g.channelSerials)}l===this.connectCounter&&this.connectImpl(d,l)})};if(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.startConnect()","starting connection"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),o.method==="basic")c();else{const d=g=>{l===this.connectCounter&&(g?this.actOnErrorFromAuthorize(g):c())};this.errorReason&&qn.isTokenErr(this.errorReason)?tt(o._forceNewToken(null,null),d):tt(o._ensureValidAuthCredentials(!1),d)}}connectImpl(o,l){const c=this.state.state;if(c!==this.states.connecting.state){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.connectImpl()","Must be in connecting state to connect, but was "+c);return}const d=this.getTransportPreference();d&&d===this.baseTransport&&this.webSocketTransportAvailable&&this.checkWsConnectivity().then(()=>{this.wsCheckResult=!0,this.abandonedWebSocket=!1,this.unpersistTransportPreference(),this.state===this.states.connecting&&(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.connectImpl():","web socket connectivity available, cancelling connection attempt with "+this.baseTransport),this.disconnectAllTransports(),this.connectWs(o,++this.connectCounter))}).catch(mm),d&&d===this.baseTransport||this.baseTransport&&!this.webSocketTransportAvailable?this.connectBase(o,l):this.connectWs(o,l)}connectWs(o,l){m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.connectWs()"),this.startWebSocketSlowTimer(),this.startWebSocketGiveUpTimer(o),this.tryTransportWithFallbacks("web_socket",o,!0,l,()=>this.wsCheckResult!==!1&&!this.abandonedWebSocket)}connectBase(o,l){m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.connectBase()"),this.baseTransport?this.tryTransportWithFallbacks(this.baseTransport,o,!1,l,()=>!0):this.notifyState({state:"disconnected",error:new D("No transports left to try",8e4,404)})}tryTransportWithFallbacks(o,l,c,d,g){m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.tryTransportWithFallbacks()",o);const T=F=>{this.notifyState({state:this.states.connecting.failState,error:F})},O=c?this.wsHosts.slice():this.httpHosts.slice(),I=(F,q)=>{if(d===this.connectCounter){if(!g()){q&&q.dispose();return}!q&&!F&&N()}},b=O.shift();if(!b){T(new D("Unable to connect (no available host)",80003,404));return}l.host=b;const N=()=>{if(!O.length){T(new D("Unable to connect (and no more fallback hosts to try)",80003,404));return}if(!this.realtime.http.checkConnectivity){T(new ue("Internal error: Http.checkConnectivity not set",null,500));return}tt(this.realtime.http.checkConnectivity(),(F,q)=>{if(d===this.connectCounter&&g()){if(F){T(F);return}if(!q){T(new D("Unable to connect (network unreachable)",80003,404));return}l.host=vr(O),this.tryATransport(l,o,I)}})};if(this.forceFallbackHost&&O.length){this.forceFallbackHost=!1,N();return}this.tryATransport(l,o,I)}closeImpl(){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.closeImpl()","closing connection"),this.cancelSuspendTimer(),this.startTransitionTimer(this.states.closing),this.pendingTransport&&(m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.closeImpl()","Closing pending transport: "+this.pendingTransport),this.pendingTransport.close()),this.activeProtocol&&(m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.closeImpl()","Closing active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().close()),this.notifyState({state:"closed"})}onAuthUpdated(o,l){var c;switch(this.state.state){case"connected":{m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Sending AUTH message on active transport");const d=(c=this.activeProtocol)==null?void 0:c.getTransport();d&&d.onAuthUpdated&&d.onAuthUpdated(o);const g=On({action:de.AUTH,auth:{accessToken:o.token}});this.send(g);const T=()=>{this.off(O),l(null,o)},O=I=>{I.current==="failed"&&(this.off(T),this.off(O),l(I.reason||this.getStateError()))};this.once("connectiondetails",T),this.on("connectionstate",O);break}case"connecting":m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Aborting current connection attempts in order to start again with the new auth details"),this.disconnectAllTransports();default:{m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Connection state is "+this.state.state+"; waiting until either connected or failed");const d=g=>{switch(g.current){case"connected":this.off(d),l(null,o);break;case"failed":case"closed":case"suspended":this.off(d),l(g.reason||this.getStateError());break}};this.on("connectionstate",d),this.state.state==="connecting"?this.startConnect():this.requestState({state:"connecting"})}}}disconnectAllTransports(){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.disconnectAllTransports()","Disconnecting all transports"),this.connectCounter++,this.pendingTransport&&(m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting pending transport: "+this.pendingTransport),this.pendingTransport.disconnect()),delete this.pendingTransport,this.proposedTransport&&(m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting proposed transport: "+this.pendingTransport),this.proposedTransport.disconnect()),delete this.pendingTransport,this.activeProtocol&&(m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().disconnect())}send(o,l,c){c=c||mm;const d=this.state;if(d.sendEvents){m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.send()","sending event"),this.sendImpl(new pm(o,c));return}if(!(l&&d.queueEvents)){const T="rejecting event, queueEvent was "+l+", state was "+d.state;m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.send()",T),c(this.errorReason||new D(T,9e4,400));return}this.logger.shouldLog(m.LOG_MICRO)&&m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.send()","queueing msg; "+wc(o,this.realtime._RealtimePresence)),this.queue(o,c)}sendImpl(o){const l=o.message;o.ackRequired&&!o.sendAttempted&&(l.msgSerial=this.msgSerial++);try{this.activeProtocol.send(o)}catch(c){m.logAction(this.logger,m.LOG_ERROR,"ConnectionManager.sendImpl()","Unexpected exception in transport.send(): "+c.stack)}}queue(o,l){m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.queue()","queueing event");const c=this.queuedMessages.last(),d=this.options.maxMessageSize;c&&!c.sendAttempted&&UT(c.message,o,d)?(c.merged||(c.callback=G.create(this.logger,[c.callback]),c.merged=!0),c.callback.push(l)):this.queuedMessages.push(new pm(o,l))}sendQueuedMessages(){m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.sendQueuedMessages()","sending "+this.queuedMessages.count()+" queued messages");let o;for(;o=this.queuedMessages.shift();)this.sendImpl(o)}queuePendingMessages(o){o&&o.length&&(m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.queuePendingMessages()","queueing "+o.length+" pending messages"),this.queuedMessages.prepend(o))}failQueuedMessages(o){const l=this.queuedMessages.count();l>0&&(m.logAction(this.logger,m.LOG_ERROR,"ConnectionManager.failQueuedMessages()","failing "+l+" queued messages, err = "+xe(o)),this.queuedMessages.completeAllMessages(o))}onChannelMessage(o,l){this.pendingChannelMessagesState.queue.push({message:o,transport:l}),this.pendingChannelMessagesState.isProcessing||this.processNextPendingChannelMessage()}processNextPendingChannelMessage(){if(this.pendingChannelMessagesState.queue.length>0){this.pendingChannelMessagesState.isProcessing=!0;const o=this.pendingChannelMessagesState.queue.shift();this.processChannelMessage(o.message).catch(l=>{m.logAction(this.logger,m.LOG_ERROR,"ConnectionManager.processNextPendingChannelMessage() received error ",l)}).finally(()=>{this.pendingChannelMessagesState.isProcessing=!1,this.processNextPendingChannelMessage()})}}async processChannelMessage(o){await this.realtime.channels.processChannelMessage(o)}async ping(){var o;if(this.state.state!=="connected")throw new D("Unable to ping service; not connected",4e4,400);const l=(o=this.activeProtocol)==null?void 0:o.getTransport();if(!l)throw this.getStateError();m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.ping()","transport = "+l);const c=Date.now(),d=Pn();return Wn(new Promise(g=>{const T=O=>{O===d&&(l.off("heartbeat",T),g(Date.now()-c))};l.on("heartbeat",T),l.ping(d)}),this.options.timeouts.realtimeRequestTimeout,"Timeout waiting for heartbeat response")}abort(o){this.activeProtocol.getTransport().fail(o)}getTransportPreference(){var o,l;return this.transportPreference||Cc()&&((l=(o=R.WebStorage)==null?void 0:o.get)==null?void 0:l.call(o,Tc))}persistTransportPreference(o){var l,c;this.transportPreference=o.shortName,Cc()&&((c=(l=R.WebStorage)==null?void 0:l.set)==null||c.call(l,Tc,o.shortName))}unpersistTransportPreference(){var o,l;this.transportPreference=null,Cc()&&((l=(o=R.WebStorage)==null?void 0:o.remove)==null||l.call(o,Tc))}actOnErrorFromAuthorize(o){if(o.code===40171)this.notifyState({state:"failed",error:o});else if(o.code===40102)this.notifyState({state:"failed",error:o});else if(o.statusCode===Ye.Forbidden){const l="Client configured authentication provider returned 403; failing the connection";m.logAction(this.logger,m.LOG_ERROR,"ConnectionManager.actOnErrorFromAuthorize()",l),this.notifyState({state:"failed",error:new D(l,80019,403,o)})}else{const l="Client configured authentication provider request failed";m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.actOnErrorFromAuthorize",l),this.notifyState({state:this.state.failState,error:new D(l,80019,401,o)})}}onConnectionDetailsUpdate(o,l){if(!o)return;this.connectionDetails=o,o.maxMessageSize&&(this.options.maxMessageSize=o.maxMessageSize);const c=o.clientId;if(c){const g=this.realtime.auth._uncheckedSetClientId(c);if(g){m.logAction(this.logger,m.LOG_ERROR,"ConnectionManager.onConnectionDetailsUpdate()",g.message),l.fail(g);return}}const d=o.connectionStateTtl;d&&(this.connectionStateTtl=d),this.maxIdleInterval=o.maxIdleInterval,this.emit("connectiondetails",o)}checkWsConnectivity(){const o=new R.Config.WebSocket(ae.wsConnectivityUrl);return new Promise((l,c)=>{let d=!1;o.onopen=()=>{d||(d=!0,l(),o.close())},o.onclose=o.onerror=()=>{d||(d=!0,c())}})}sessionRecoveryName(){return this.options.recoveryKeyStorageName||"ably-connection-recovery"}getSessionRecoverData(){var o,l;return wo()&&((l=(o=R.WebStorage)==null?void 0:o.getSession)==null?void 0:l.call(o,this.sessionRecoveryName()))}setSessionRecoverData(o){var l,c;return wo()&&((c=(l=R.WebStorage)==null?void 0:l.setSession)==null?void 0:c.call(l,this.sessionRecoveryName(),o))}clearSessionRecoverData(){var o,l;return wo()&&((l=(o=R.WebStorage)==null?void 0:o.removeSession)==null?void 0:l.call(o,this.sessionRecoveryName()))}},gm=BT,VT=class extends ct{constructor(i,o){super(i.logger),this.whenState=l=>ct.prototype.whenState.call(this,l,this.state),this.ably=i,this.connectionManager=new gm(i,o),this.state=this.connectionManager.state.state,this.key=void 0,this.id=void 0,this.errorReason=null,this.connectionManager.on("connectionstate",l=>{const c=this.state=l.current;R.Config.nextTick(()=>{this.emit(c,l)})}),this.connectionManager.on("update",l=>{R.Config.nextTick(()=>{this.emit("update",l)})})}connect(){m.logAction(this.logger,m.LOG_MINOR,"Connection.connect()",""),this.connectionManager.requestState({state:"connecting"})}async ping(){return m.logAction(this.logger,m.LOG_MINOR,"Connection.ping()",""),this.connectionManager.ping()}close(){m.logAction(this.logger,m.LOG_MINOR,"Connection.close()","connectionKey = "+this.key),this.connectionManager.requestState({state:"closing"})}get recoveryKey(){return this.logger.deprecationWarning("The `Connection.recoveryKey` attribute has been replaced by the `Connection.createRecoveryKey()` method. Replace your usage of `recoveryKey` with the return value of `createRecoveryKey()`. `recoveryKey` will be removed in a future version."),this.createRecoveryKey()}createRecoveryKey(){return this.connectionManager.createRecoveryKey()}},jT=VT,zT=class{constructor(i,o,l,c,d){this.previous=i,this.current=o,o==="attached"&&(this.resumed=l,this.hasBacklog=c),d&&(this.reason=d)}},Ec=zT,ym=function(){};function GT(i){if(i&&"params"in i&&!ie(i.params))return new D("options.params must be an object",4e4,400);if(i&&"modes"in i){if(!Array.isArray(i.modes))return new D("options.modes must be an array",4e4,400);for(let o=0;o<i.modes.length;o++){const l=i.modes[o];if(!l||typeof l!="string"||!hm.includes(String.prototype.toUpperCase.call(l)))return new D("Invalid channel mode: "+l,4e4,400)}}}var HT=class ad extends ct{constructor(o,l,c){var d,g;super(o.logger),this.retryCount=0,this.history=async function(T){m.logAction(this.logger,m.LOG_MICRO,"RealtimeChannel.history()","channel = "+this.name);const O=this.client.rest.channelMixin;if(T&&T.untilAttach){if(this.state!=="attached")throw new D("option untilAttach requires the channel to be attached",4e4,400);if(!this.properties.attachSerial)throw new D("untilAttach was specified and channel is attached, but attachSerial is not defined",4e4,400);delete T.untilAttach,T.from_serial=this.properties.attachSerial}return O.history(this,T)},this.whenState=T=>ct.prototype.whenState.call(this,T,this.state),m.logAction(this.logger,m.LOG_MINOR,"RealtimeChannel()","started; name = "+l),this.name=l,this.channelOptions=Mt((d=o._Crypto)!=null?d:null,this.logger,c),this.client=o,this._presence=o._RealtimePresence?new o._RealtimePresence.RealtimePresence(this):null,this.connectionManager=o.connection.connectionManager,this.state="initialized",this.subscriptions=new ct(this.logger),this.syncChannelSerial=void 0,this.properties={attachSerial:void 0,channelSerial:void 0},this.setOptions(c),this.errorReason=null,this._requestedFlags=null,this._mode=null,this._attachResume=!1,this._decodingContext={channelOptions:this.channelOptions,plugins:o.options.plugins||{},baseEncodedPreviousPayload:void 0},this._lastPayload={messageId:null,protocolMessageChannelSerial:null,decodeFailureRecoveryInProgress:null},this._allChannelChanges=new ct(this.logger),(g=o.options.plugins)!=null&&g.Push&&(this._push=new o.options.plugins.Push.PushChannel(this))}get presence(){return this._presence||we("RealtimePresence"),this._presence}get push(){return this._push||we("Push"),this._push}invalidStateError(){return new D("Channel operation failed as channel state is "+this.state,90001,400,this.errorReason||void 0)}static processListenerArgs(o){return o=Array.prototype.slice.call(o),typeof o[0]=="function"&&o.unshift(null),o}async setOptions(o){var l;const c=this.channelOptions,d=GT(o);if(d)throw d;if(this.channelOptions=Mt((l=this.client._Crypto)!=null?l:null,this.logger,o),this._decodingContext&&(this._decodingContext.channelOptions=this.channelOptions),this._shouldReattachToSetOptions(o,c))return this.attachImpl(),new Promise((g,T)=>{this._allChannelChanges.once(["attached","update","detached","failed"],function(O){switch(this.event){case"update":case"attached":g();break;default:T(O.reason)}})})}_shouldReattachToSetOptions(o,l){if(!(this.state==="attached"||this.state==="attaching"))return!1;if(o!=null&&o.params){const c=vm(o.params),d=vm(l.params);if(Object.keys(c).length!==Object.keys(d).length||!qi(d,c))return!0}return!!(o!=null&&o.modes&&(!l.modes||!Za(o.modes,l.modes)))}async publish(...o){let l=o[0],c=o.length;if(!this.connectionManager.activeState())throw this.connectionManager.getError();if(c==1)if(ie(l))l=[Cr(l)];else if(Array.isArray(l))l=fc(l);else throw new D("The single-argument form of publish() expects a message object or an array of message objects",40013,400);else l=[Cr({name:o[0],data:o[1]})];const d=this.client.options.maxMessageSize;await Yp(l,this.channelOptions);const g=dc(l);if(g>d)throw new D("Maximum size of messages that can be published at once exceeded ( was "+g+" bytes; limit is "+d+" bytes)",40009,400);return new Promise((T,O)=>{this._publish(l,I=>I?O(I):T())})}_publish(o,l){m.logAction(this.logger,m.LOG_MICRO,"RealtimeChannel.publish()","message count = "+o.length);const c=this.state;switch(c){case"failed":case"suspended":l(D.fromValues(this.invalidStateError()));break;default:{m.logAction(this.logger,m.LOG_MICRO,"RealtimeChannel.publish()","sending message; channel state is "+c);const d=new fm;d.action=de.MESSAGE,d.channel=this.name,d.messages=o,this.sendMessage(d,l);break}}}onEvent(o){m.logAction(this.logger,m.LOG_MICRO,"RealtimeChannel.onEvent()","received message");const l=this.subscriptions;for(let c=0;c<o.length;c++){const d=o[c];l.emit(d.name,d)}}async attach(){return this.state==="attached"?null:new Promise((o,l)=>{this._attach(!1,null,(c,d)=>c?l(c):o(d))})}_attach(o,l,c){c||(c=g=>{g&&m.logAction(this.logger,m.LOG_ERROR,"RealtimeChannel._attach()","Channel attach failed: "+g.toString())});const d=this.connectionManager;if(!d.activeState()){c(d.getError());return}(this.state!=="attaching"||o)&&this.requestState("attaching",l),this.once(function(g){switch(this.event){case"attached":c==null||c(null,g);break;case"detached":case"suspended":case"failed":c==null||c(g.reason||d.getError()||new D("Unable to attach; reason unknown; state = "+this.event,9e4,500));break;case"detaching":c==null||c(new D("Attach request superseded by a subsequent detach request",9e4,409));break}})}attachImpl(){m.logAction(this.logger,m.LOG_MICRO,"RealtimeChannel.attachImpl()","sending ATTACH message");const o=On({action:de.ATTACH,channel:this.name,params:this.channelOptions.params,channelSerial:this.properties.channelSerial});this._requestedFlags?o.encodeModesToFlags(this._requestedFlags):this.channelOptions.modes&&o.encodeModesToFlags(si(this.channelOptions.modes)),this._attachResume&&o.setFlag("ATTACH_RESUME"),this._lastPayload.decodeFailureRecoveryInProgress&&(o.channelSerial=this._lastPayload.protocolMessageChannelSerial),this.sendMessage(o,ym)}async detach(){const o=this.connectionManager;if(!o.activeState())throw o.getError();switch(this.state){case"suspended":this.notifyState("detached");return;case"detached":return;case"failed":throw new D("Unable to detach; channel state = failed",90001,400);default:this.requestState("detaching");case"detaching":return new Promise((l,c)=>{this.once(function(d){switch(this.event){case"detached":l();break;case"attached":case"suspended":case"failed":c(d.reason||o.getError()||new D("Unable to detach; reason unknown; state = "+this.event,9e4,500));break;case"attaching":c(new D("Detach request superseded by a subsequent attach request",9e4,409));break}})})}}detachImpl(o){m.logAction(this.logger,m.LOG_MICRO,"RealtimeChannel.detach()","sending DETACH message");const l=On({action:de.DETACH,channel:this.name});this.sendMessage(l,o||ym)}async subscribe(...o){const[l,c]=ad.processListenerArgs(o);if(this.state==="failed")throw D.fromValues(this.invalidStateError());return l&&typeof l=="object"&&!Array.isArray(l)?this.client._FilteredSubscriptions.subscribeFilter(this,l,c):this.subscriptions.on(l,c),this.attach()}unsubscribe(...o){var l;const[c,d]=ad.processListenerArgs(o);if(typeof c=="object"&&!d||(l=this.filteredSubscriptions)!=null&&l.has(d)){this.client._FilteredSubscriptions.getAndDeleteFilteredSubscriptions(this,c,d).forEach(g=>this.subscriptions.off(g));return}this.subscriptions.off(c,d)}sync(){switch(this.state){case"initialized":case"detaching":case"detached":throw new ue("Unable to sync to channel; not attached",4e4)}const o=this.connectionManager;if(!o.activeState())throw o.getError();const l=On({action:de.SYNC,channel:this.name});this.syncChannelSerial&&(l.channelSerial=this.syncChannelSerial),o.send(l)}sendMessage(o,l){this.connectionManager.send(o,this.client.options.queueMessages,l)}sendPresence(o,l){const c=On({action:de.PRESENCE,channel:this.name,presence:Array.isArray(o)?this.client._RealtimePresence.presenceMessagesFromValuesArray(o):[this.client._RealtimePresence.presenceMessageFromValues(o)]});this.sendMessage(c,l)}async processMessage(o){(o.action===de.ATTACHED||o.action===de.MESSAGE||o.action===de.PRESENCE)&&this.setChannelSerial(o.channelSerial);let l,c=!1;switch(o.action){case de.ATTACHED:{this.properties.attachSerial=o.channelSerial,this._mode=o.getMode(),this.params=o.params||{};const d=o.decodeModesFromFlags();this.modes=d&&Wi(d)||void 0;const g=o.hasFlag("RESUMED"),T=o.hasFlag("HAS_PRESENCE"),O=o.hasFlag("HAS_BACKLOG");if(this.state==="attached"){g||this._presence&&this._presence.onAttached(T);const I=new Ec(this.state,this.state,g,O,o.error);this._allChannelChanges.emit("update",I),(!g||this.channelOptions.updateOnAttached)&&this.emit("update",I)}else this.state==="detaching"?this.checkPendingState():this.notifyState("attached",o.error,g,T,O);break}case de.DETACHED:{const d=o.error?D.fromValues(o.error):new D("Channel detached",90001,404);this.state==="detaching"?this.notifyState("detached",d):this.state==="attaching"?this.notifyState("suspended",d):(this.state==="attached"||this.state==="suspended")&&this.requestState("attaching",d);break}case de.SYNC:if(c=!0,l=this.syncChannelSerial=o.channelSerial,!o.presence)break;case de.PRESENCE:{const d=o.presence;if(!d)break;const{id:g,connectionId:T,timestamp:O}=o,I=this.channelOptions;let b;for(let N=0;N<d.length;N++)try{b=d[N],await pc(b,I),b.connectionId||(b.connectionId=T),b.timestamp||(b.timestamp=O),b.id||(b.id=g+":"+N)}catch(F){m.logAction(this.logger,m.LOG_ERROR,"RealtimeChannel.processMessage()",F.toString())}this._presence&&this._presence.setPresence(d,c,l);break}case de.MESSAGE:{if(this.state!=="attached"){m.logAction(this.logger,m.LOG_MAJOR,"RealtimeChannel.processMessage()",'Message "'+o.id+'" skipped as this channel "'+this.name+'" state is not "attached" (state is "'+this.state+'").');return}const d=o.messages,g=d[0],T=d[d.length-1],O=o.id,I=o.connectionId,b=o.timestamp;if(g.extras&&g.extras.delta&&g.extras.delta.from!==this._lastPayload.messageId){const N='Delta message decode failure - previous message not available for message "'+o.id+'" on this channel "'+this.name+'".';m.logAction(this.logger,m.LOG_ERROR,"RealtimeChannel.processMessage()",N),this._startDecodeFailureRecovery(new D(N,40018,400));break}for(let N=0;N<d.length;N++){const F=d[N];try{await vo(F,this._decodingContext)}catch(q){switch(m.logAction(this.logger,m.LOG_ERROR,"RealtimeChannel.processMessage()",q.toString()),q.code){case 40018:this._startDecodeFailureRecovery(q);return;case 40019:case 40021:this.notifyState("failed",q);return}}F.connectionId||(F.connectionId=I),F.timestamp||(F.timestamp=b),F.id||(F.id=O+":"+N)}this._lastPayload.messageId=T.id,this._lastPayload.protocolMessageChannelSerial=o.channelSerial,this.onEvent(d);break}case de.ERROR:{const d=o.error;d&&d.code==80016?this.checkPendingState():this.notifyState("failed",D.fromValues(d));break}default:m.logAction(this.logger,m.LOG_ERROR,"RealtimeChannel.processMessage()","Fatal protocol error: unrecognised action ("+o.action+")"),this.connectionManager.abort(Rr.unknownChannelErr())}}_startDecodeFailureRecovery(o){this._lastPayload.decodeFailureRecoveryInProgress||(m.logAction(this.logger,m.LOG_MAJOR,"RealtimeChannel.processMessage()","Starting decode failure recovery process."),this._lastPayload.decodeFailureRecoveryInProgress=!0,this._attach(!0,o,()=>{this._lastPayload.decodeFailureRecoveryInProgress=!1}))}onAttached(){m.logAction(this.logger,m.LOG_MINOR,"RealtimeChannel.onAttached","activating channel; name = "+this.name)}notifyState(o,l,c,d,g){if(m.logAction(this.logger,m.LOG_MICRO,"RealtimeChannel.notifyState","name = "+this.name+", current state = "+this.state+", notifying state "+o),this.clearStateTimer(),["detached","suspended","failed"].includes(o)&&(this.properties.channelSerial=null),o===this.state)return;this._presence&&this._presence.actOnChannelState(o,d,l),o==="suspended"&&this.connectionManager.state.sendEvents?this.startRetryTimer():this.cancelRetryTimer(),l&&(this.errorReason=l);const T=new Ec(this.state,o,c,g,l),O='Channel state for channel "'+this.name+'"',I=o+(l?"; reason: "+l:"");o==="failed"?m.logAction(this.logger,m.LOG_ERROR,O,I):m.logAction(this.logger,m.LOG_MAJOR,O,I),o!=="attaching"&&o!=="suspended"&&(this.retryCount=0),o==="attached"&&this.onAttached(),o==="attached"?this._attachResume=!0:(o==="detaching"||o==="failed")&&(this._attachResume=!1),this.state=o,this._allChannelChanges.emit(o,T),this.emit(o,T)}requestState(o,l){m.logAction(this.logger,m.LOG_MINOR,"RealtimeChannel.requestState","name = "+this.name+", state = "+o),this.notifyState(o,l),this.checkPendingState()}checkPendingState(){if(!this.connectionManager.state.sendEvents){m.logAction(this.logger,m.LOG_MINOR,"RealtimeChannel.checkPendingState","sendEvents is false; state is "+this.connectionManager.state.state);return}switch(m.logAction(this.logger,m.LOG_MINOR,"RealtimeChannel.checkPendingState","name = "+this.name+", state = "+this.state),this.state){case"attaching":this.startStateTimerIfNotRunning(),this.attachImpl();break;case"detaching":this.startStateTimerIfNotRunning(),this.detachImpl();break;case"attached":this.sync();break}}timeoutPendingState(){switch(this.state){case"attaching":{const o=new D("Channel attach timed out",90007,408);this.notifyState("suspended",o);break}case"detaching":{const o=new D("Channel detach timed out",90007,408);this.notifyState("attached",o);break}default:this.checkPendingState();break}}startStateTimerIfNotRunning(){this.stateTimer||(this.stateTimer=setTimeout(()=>{m.logAction(this.logger,m.LOG_MINOR,"RealtimeChannel.startStateTimerIfNotRunning","timer expired"),this.stateTimer=null,this.timeoutPendingState()},this.client.options.timeouts.realtimeRequestTimeout))}clearStateTimer(){const o=this.stateTimer;o&&(clearTimeout(o),this.stateTimer=null)}startRetryTimer(){if(this.retryTimer)return;this.retryCount++;const o=An(this.client.options.timeouts.channelRetryTimeout,this.retryCount);this.retryTimer=setTimeout(()=>{this.state==="suspended"&&this.connectionManager.state.sendEvents&&(this.retryTimer=null,m.logAction(this.logger,m.LOG_MINOR,"RealtimeChannel retry timer expired","attempting a new attach"),this.requestState("attaching"))},o)}cancelRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)}getReleaseErr(){const o=this.state;return o==="initialized"||o==="detached"||o==="failed"?null:new D("Can only release a channel in a state where there is no possibility of further updates from the server being received (initialized, detached, or failed); was "+o,90001,400)}setChannelSerial(o){m.logAction(this.logger,m.LOG_MICRO,"RealtimeChannel.setChannelSerial()","Updating channel serial; serial = "+o+"; previous = "+this.properties.channelSerial),o&&(this.properties.channelSerial=o)}async status(){return this.client.rest.channelMixin.status(this)}};function vm(i){return A(i||{},["agent"])}var Pc=HT,wm=class x1 extends Wp{constructor(o){var l,c;if(super(ae.objectifyOptions(o,!1,"BaseRealtime",m.defaultLogger)),m.logAction(this.logger,m.LOG_MINOR,"Realtime()",""),typeof EdgeRuntime=="string")throw new D(`Ably.Realtime instance cannot be used in Vercel Edge runtime. If you are running Vercel Edge functions, please replace your "new Ably.Realtime()" with "new Ably.Rest()" and use Ably Rest API instead of the Realtime API. If you are server-rendering your application in the Vercel Edge runtime, please use the condition "if (typeof EdgeRuntime === 'string')" to prevent instantiating Ably.Realtime instance during SSR in the Vercel Edge runtime.`,4e4,400);this._additionalTransportImplementations=x1.transportImplementationsFromPlugins(this.options.plugins),this._RealtimePresence=(c=(l=this.options.plugins)==null?void 0:l.RealtimePresence)!=null?c:null,this.connection=new jT(this,this.options),this._channels=new qT(this),this.options.autoConnect!==!1&&this.connect()}static transportImplementationsFromPlugins(o){const l={};return o!=null&&o.WebSocketTransport&&(l[It.WebSocket]=o.WebSocketTransport),o!=null&&o.XHRPolling&&(l[It.XhrPolling]=o.XHRPolling),l}get channels(){return this._channels}connect(){m.logAction(this.logger,m.LOG_MINOR,"Realtime.connect()",""),this.connection.connect()}close(){m.logAction(this.logger,m.LOG_MINOR,"Realtime.close()",""),this.connection.close()}};wm.EventEmitter=ct;var WT=wm,qT=class extends ct{constructor(i){super(i.logger),this.realtime=i,this.all=Object.create(null),i.connection.connectionManager.on("transport.active",()=>{this.onTransportActive()})}channelSerials(){let i={};for(const o of zn(this.all,!0)){const l=this.all[o];l.properties.channelSerial&&(i[o]=l.properties.channelSerial)}return i}recoverChannels(i){for(const o of zn(i,!0)){const l=this.get(o);l.properties.channelSerial=i[o]}}async processChannelMessage(i){const o=i.channel;if(o===void 0){m.logAction(this.logger,m.LOG_ERROR,"Channels.processChannelMessage()","received event unspecified channel, action = "+i.action);return}const l=this.all[o];if(!l){m.logAction(this.logger,m.LOG_ERROR,"Channels.processChannelMessage()","received event for non-existent channel: "+o);return}await l.processMessage(i)}onTransportActive(){for(const i in this.all){const o=this.all[i];o.state==="attaching"||o.state==="detaching"?o.checkPendingState():o.state==="suspended"?o._attach(!1,null):o.state==="attached"&&o.requestState("attaching")}}propogateConnectionInterruption(i,o){const l={closing:"detached",closed:"detached",failed:"failed",suspended:"suspended"},c=["attaching","attached","detaching","suspended"],d=l[i];for(const g in this.all){const T=this.all[g];c.includes(T.state)&&T.notifyState(d,o)}}get(i,o){i=String(i);let l=this.all[i];if(!l)l=this.all[i]=new Pc(this.realtime,i,o);else if(o){if(l._shouldReattachToSetOptions(o,l.channelOptions))throw new D("Channels.get() cannot be used to set channel options that would cause the channel to reattach. Please, use RealtimeChannel.setOptions() instead.",4e4,400);l.setOptions(o)}return l}getDerived(i,o,l){if(o.filter){const c=_n(o.filter),d=Ja(i);i=`[filter=${c}${d.qualifierParam}]${d.channelName}`}return this.get(i,l)}release(i){i=String(i);const o=this.all[i];if(!o)return;const l=o.getReleaseErr();if(l)throw l;delete this.all[i]}},$T=WT;function KT(i){return i.channel.client.auth.clientId}function Ac(i){const o=i.channel.client,l=o.auth.clientId;return(!l||l==="*")&&o.connection.state==="connected"}function QT(i,o,l){switch(i.state){case"attached":case"suspended":l();break;case"initialized":case"detached":case"detaching":case"attaching":tt(i.attach(),function(c){c?o(c):l()});break;default:o(D.fromValues(i.invalidStateError()))}}function Sm(i,o){if(i.isSynthesized()||o.isSynthesized())return i.timestamp>=o.timestamp;const l=i.parseId(),c=o.parseId();return l.msgSerial===c.msgSerial?l.index>c.index:l.msgSerial>c.msgSerial}var YT=class extends ct{constructor(i){super(i.logger),this.channel=i,this.syncComplete=!1,this.members=new Cm(this,o=>o.clientId+":"+o.connectionId),this._myMembers=new Cm(this,o=>o.clientId),this.subscriptions=new ct(this.logger),this.pendingPresence=[]}async enter(i){if(Ac(this))throw new D("clientId must be specified to enter a presence channel",40012,400);return this._enterOrUpdateClient(void 0,void 0,i,"enter")}async update(i){if(Ac(this))throw new D("clientId must be specified to update presence data",40012,400);return this._enterOrUpdateClient(void 0,void 0,i,"update")}async enterClient(i,o){return this._enterOrUpdateClient(void 0,i,o,"enter")}async updateClient(i,o){return this._enterOrUpdateClient(void 0,i,o,"update")}async _enterOrUpdateClient(i,o,l,c){const d=this.channel;if(!d.connectionManager.activeState())throw d.connectionManager.getError();m.logAction(this.logger,m.LOG_MICRO,"RealtimePresence."+c+"Client()","channel = "+d.name+", id = "+i+", client = "+(o||"(implicit) "+KT(this)));const g=rm(l);switch(g.action=c,i&&(g.id=i),o&&(g.clientId=o),await hc(g,d.channelOptions),d.state){case"attached":return new Promise((T,O)=>{d.sendPresence(g,I=>I?O(I):T())});case"initialized":case"detached":d.attach();case"attaching":return new Promise((T,O)=>{this.pendingPresence.push({presence:g,callback:I=>I?O(I):T()})});default:{const T=new ue("Unable to "+c+" presence channel while in "+d.state+" state",90001);throw T.code=90001,T}}}async leave(i){if(Ac(this))throw new D("clientId must have been specified to enter or leave a presence channel",40012,400);return this.leaveClient(void 0,i)}async leaveClient(i,o){const l=this.channel;if(!l.connectionManager.activeState())throw l.connectionManager.getError();m.logAction(this.logger,m.LOG_MICRO,"RealtimePresence.leaveClient()","leaving; channel = "+this.channel.name+", client = "+i);const c=rm(o);return c.action="leave",i&&(c.clientId=i),new Promise((d,g)=>{switch(l.state){case"attached":l.sendPresence(c,T=>T?g(T):d());break;case"attaching":this.pendingPresence.push({presence:c,callback:T=>T?g(T):d()});break;case"initialized":case"failed":{const T=new ue("Unable to leave presence channel (incompatible state)",90001);g(T);break}default:g(l.invalidStateError())}})}async get(i){const o=!i||("waitForSync"in i?i.waitForSync:!0);return new Promise((l,c)=>{function d(g){l(i?g.list(i):g.values())}if(this.channel.state==="suspended"){o?c(D.fromValues({statusCode:400,code:91005,message:"Presence state is out of sync due to channel being in the SUSPENDED state"})):d(this.members);return}QT(this.channel,g=>c(g),()=>{const g=this.members;o?g.waitSync(function(){d(g)}):d(g)})})}async history(i){m.logAction(this.logger,m.LOG_MICRO,"RealtimePresence.history()","channel = "+this.name);const o=this.channel.client.rest.presenceMixin;if(i&&i.untilAttach)if(this.channel.state==="attached")delete i.untilAttach,i.from_serial=this.channel.properties.attachSerial;else throw new D("option untilAttach requires the channel to be attached, was: "+this.channel.state,4e4,400);return o.history(this,i)}setPresence(i,o,l){m.logAction(this.logger,m.LOG_MICRO,"RealtimePresence.setPresence()","received presence for "+i.length+" participants; syncChannelSerial = "+l);let c,d;const g=this.members,T=this._myMembers,O=[],I=this.channel.connectionManager.connectionId;o&&(this.members.startSync(),l&&(d=l.match(/^[\w-]+:(.*)$/))&&(c=d[1]));for(let b=0;b<i.length;b++){const N=fn(i[b]);switch(N.action){case"leave":g.remove(N)&&O.push(N),N.connectionId===I&&!N.isSynthesized()&&T.remove(N);break;case"enter":case"present":case"update":g.put(N)&&O.push(N),N.connectionId===I&&T.put(N);break}}o&&!c&&(g.endSync(),this.channel.syncChannelSerial=null);for(let b=0;b<O.length;b++){const N=O[b];this.subscriptions.emit(N.action,N)}}onAttached(i){m.logAction(this.logger,m.LOG_MINOR,"RealtimePresence.onAttached()","channel = "+this.channel.name+", hasPresence = "+i),i?this.members.startSync():(this._synthesizeLeaves(this.members.values()),this.members.clear()),this._ensureMyMembersPresent();const o=this.pendingPresence,l=o.length;if(l){this.pendingPresence=[];const c=[],d=G.create(this.logger);m.logAction(this.logger,m.LOG_MICRO,"RealtimePresence.onAttached","sending "+l+" queued presence messages");for(let g=0;g<l;g++){const T=o[g];c.push(T.presence),d.push(T.callback)}this.channel.sendPresence(c,d)}}actOnChannelState(i,o,l){switch(i){case"attached":this.onAttached(o);break;case"detached":case"failed":this._clearMyMembers(),this.members.clear();case"suspended":this.failPendingPresence(l);break}}failPendingPresence(i){if(this.pendingPresence.length){m.logAction(this.logger,m.LOG_MINOR,"RealtimeChannel.failPendingPresence","channel; name = "+this.channel.name+", err = "+xe(i));for(let o=0;o<this.pendingPresence.length;o++)try{this.pendingPresence[o].callback(i)}catch{}this.pendingPresence=[]}}_clearMyMembers(){this._myMembers.clear()}_ensureMyMembersPresent(){const i=this._myMembers,o=l=>{if(l){const c="Presence auto-re-enter failed: "+l.toString(),d=new D(c,91004,400);m.logAction(this.logger,m.LOG_ERROR,"RealtimePresence._ensureMyMembersPresent()",c);const g=new Ec(this.channel.state,this.channel.state,!0,!1,d);this.channel.emit("update",g)}};for(const l in i.map){const c=i.map[l];m.logAction(this.logger,m.LOG_MICRO,"RealtimePresence._ensureMyMembersPresent()",'Auto-reentering clientId "'+c.clientId+'" into the presence set'),tt(this._enterOrUpdateClient(c.id,c.clientId,c.data,"enter"),o)}}_synthesizeLeaves(i){const o=this.subscriptions;i.forEach(function(l){const c=fn({action:"leave",connectionId:l.connectionId,clientId:l.clientId,data:l.data,encoding:l.encoding,timestamp:Date.now()});o.emit("leave",c)})}async subscribe(...i){const o=Pc.processListenerArgs(i),l=o[0],c=o[1],d=this.channel;if(d.state==="failed")throw D.fromValues(d.invalidStateError());this.subscriptions.on(l,c),await d.attach()}unsubscribe(...i){const o=Pc.processListenerArgs(i),l=o[0],c=o[1];this.subscriptions.off(l,c)}},Cm=class extends ct{constructor(i,o){super(i.logger),this.presence=i,this.map=Object.create(null),this.syncInProgress=!1,this.residualMembers=null,this.memberKey=o}get(i){return this.map[i]}getClient(i){const o=this.map,l=[];for(const c in o){const d=o[c];d.clientId==i&&d.action!="absent"&&l.push(d)}return l}list(i){const o=this.map,l=i&&i.clientId,c=i&&i.connectionId,d=[];for(const g in o){const T=o[g];T.action!=="absent"&&(l&&l!=T.clientId||c&&c!=T.connectionId||d.push(T))}return d}put(i){(i.action==="enter"||i.action==="update")&&(i=fn(i),i.action="present");const o=this.map,l=this.memberKey(i);this.residualMembers&&delete this.residualMembers[l];const c=o[l];return c&&!Sm(i,c)?!1:(o[l]=i,!0)}values(){const i=this.map,o=[];for(const l in i){const c=i[l];c.action!="absent"&&o.push(c)}return o}remove(i){const o=this.map,l=this.memberKey(i),c=o[l];return c&&!Sm(i,c)?!1:(this.syncInProgress?(i=fn(i),i.action="absent",o[l]=i):delete o[l],!0)}startSync(){const i=this.map,o=this.syncInProgress;m.logAction(this.logger,m.LOG_MINOR,"PresenceMap.startSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+o),this.syncInProgress||(this.residualMembers=W(i),this.setInProgress(!0))}endSync(){const i=this.map,o=this.syncInProgress;if(m.logAction(this.logger,m.LOG_MINOR,"PresenceMap.endSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+o),o){for(const l in i)i[l].action==="absent"&&delete i[l];this.presence._synthesizeLeaves(Rn(this.residualMembers));for(const l in this.residualMembers)delete i[l];this.residualMembers=null,this.setInProgress(!1)}this.emit("sync")}waitSync(i){const o=this.syncInProgress;if(m.logAction(this.logger,m.LOG_MINOR,"PresenceMap.waitSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+o),!o){i();return}this.once("sync",i)}clear(){this.map={},this.setInProgress(!1),this.residualMembers=null}setInProgress(i){m.logAction(this.logger,m.LOG_MICRO,"PresenceMap.setInProgress()","inProgress = "+i),this.syncInProgress=i,this.presence.syncComplete=!i}},XT=YT,JT=It.WebSocket;function ZT(i){return!!i.on}var eR=class extends Zi{constructor(i,o,l){super(i,o,l),this.shortName=JT,l.heartbeats=R.Config.useProtocolHeartbeats,this.wsHost=l.host}static isAvailable(){return!!R.Config.WebSocket}createWebSocket(i,o){return this.uri=i+En(o),new R.Config.WebSocket(this.uri)}toString(){return"WebSocketTransport; uri="+this.uri}connect(){m.logAction(this.logger,m.LOG_MINOR,"WebSocketTransport.connect()","starting"),Zi.prototype.connect.call(this);const i=this,o=this.params,l=o.options,d=(l.tls?"wss://":"ws://")+this.wsHost+":"+ae.getPort(l)+"/";m.logAction(this.logger,m.LOG_MINOR,"WebSocketTransport.connect()","uri: "+d),tt(this.auth.getAuthParams(),function(g,T){if(i.isDisposed)return;let O="";for(const b in T)O+=" "+b+": "+T[b]+";";if(m.logAction(i.logger,m.LOG_MINOR,"WebSocketTransport.connect()","authParams:"+O+" err: "+g),g){i.disconnect(g);return}const I=o.getConnectParams(T);try{const b=i.wsConnection=i.createWebSocket(d,I);b.binaryType=R.Config.binaryType,b.onopen=function(){i.onWsOpen()},b.onclose=function(N){i.onWsClose(N)},b.onmessage=function(N){i.onWsData(N.data)},b.onerror=function(N){i.onWsError(N)},ZT(b)&&b.on("ping",function(){i.onActivity()})}catch(b){m.logAction(i.logger,m.LOG_ERROR,"WebSocketTransport.connect()","Unexpected exception creating websocket: err = "+(b.stack||b.message)),i.disconnect(b)}})}send(i){const o=this.wsConnection;if(!o){m.logAction(this.logger,m.LOG_ERROR,"WebSocketTransport.send()","No socket connection");return}try{o.send(ET(i,this.connectionManager.realtime._MsgPack,this.params.format))}catch(l){const c="Exception from ws connection when trying to send: "+xe(l);m.logAction(this.logger,m.LOG_ERROR,"WebSocketTransport.send()",c),this.finish("disconnected",new D(c,5e4,500))}}onWsData(i){m.logAction(this.logger,m.LOG_MICRO,"WebSocketTransport.onWsData()","data received; length = "+i.length+"; type = "+typeof i);try{this.onProtocolMessage(PT(i,this.connectionManager.realtime._MsgPack,this.connectionManager.realtime._RealtimePresence,this.format))}catch(o){m.logAction(this.logger,m.LOG_ERROR,"WebSocketTransport.onWsData()","Unexpected exception handing channel message: "+o.stack)}}onWsOpen(){m.logAction(this.logger,m.LOG_MINOR,"WebSocketTransport.onWsOpen()","opened WebSocket"),this.emit("preconnect")}onWsClose(i){let o,l;if(typeof i=="object"?(l=i.code,o=i.wasClean||l===1e3):(l=i,o=l==1e3),delete this.wsConnection,o){m.logAction(this.logger,m.LOG_MINOR,"WebSocketTransport.onWsClose()","Cleanly closed WebSocket");const c=new D("Websocket closed",80003,400);this.finish("disconnected",c)}else{const c="Unclean disconnection of WebSocket ; code = "+l,d=new D(c,80003,400);m.logAction(this.logger,m.LOG_MINOR,"WebSocketTransport.onWsClose()",c),this.finish("disconnected",d)}this.emit("disposed")}onWsError(i){m.logAction(this.logger,m.LOG_MINOR,"WebSocketTransport.onError()","Error from WebSocket: "+i.message),R.Config.nextTick(()=>{this.disconnect(Error(i.message))})}dispose(){m.logAction(this.logger,m.LOG_MINOR,"WebSocketTransport.dispose()",""),this.isDisposed=!0;const i=this.wsConnection;i&&(i.onmessage=function(){},delete this.wsConnection,R.Config.nextTick(()=>{if(m.logAction(this.logger,m.LOG_MICRO,"WebSocketTransport.dispose()","closing websocket"),!i)throw new Error("WebSocketTransport.dispose(): wsConnection is not defined");i.close()}))}},Tm=eR,tR=class{static subscribeFilter(i,o,l){const c=d=>{var g,T,O,I,b,N;const F={name:d.name,refTimeserial:(T=(g=d.extras)==null?void 0:g.ref)==null?void 0:T.timeserial,refType:(I=(O=d.extras)==null?void 0:O.ref)==null?void 0:I.type,isRef:!!((N=(b=d.extras)==null?void 0:b.ref)!=null&&N.timeserial),clientId:d.clientId};Object.entries(o).find(([q,V])=>V!==void 0?F[q]!==V:!1)||l(d)};this.addFilteredSubscription(i,o,l,c),i.subscriptions.on(c)}static addFilteredSubscription(i,o,l,c){var d;if(i.filteredSubscriptions||(i.filteredSubscriptions=new Map),i.filteredSubscriptions.has(l)){const g=i.filteredSubscriptions.get(l);g.set(o,((d=g==null?void 0:g.get(o))==null?void 0:d.concat(c))||[c])}else i.filteredSubscriptions.set(l,new Map([[o,[c]]]))}static getAndDeleteFilteredSubscriptions(i,o,l){if(!i.filteredSubscriptions)return[];if(!l&&o)return Array.from(i.filteredSubscriptions.entries()).map(([g,T])=>{var O;let I=T.get(o);return T.delete(o),T.size===0&&((O=i.filteredSubscriptions)==null||O.delete(g)),I}).reduce((g,T)=>T?g.concat(...T):g,[]);if(!l||!i.filteredSubscriptions.has(l))return[];const c=i.filteredSubscriptions.get(l);if(!o){const g=Array.from(c.values()).reduce((T,O)=>T.concat(...O),[]);return i.filteredSubscriptions.delete(l),g}let d=c.get(o);return c.delete(o),d||[]}},Kn=class ld extends $T{constructor(o){var l;const c=ld._MsgPack;if(!c)throw new Error("Expected DefaultRealtime._MsgPack to have been set");super(ae.objectifyOptions(o,!0,"Realtime",m.defaultLogger,_(P({},om),{Crypto:(l=ld.Crypto)!=null?l:void 0,MsgPack:c,RealtimePresence:{RealtimePresence:XT,presenceMessageFromValues:fn,presenceMessagesFromValuesArray:nm},WebSocketTransport:Tm,MessageInteractions:tR})))}static get Crypto(){if(this._Crypto===null)throw new Error("Encryption not enabled; use ably.encryption.js instead");return this._Crypto}static set Crypto(o){this._Crypto=o}};Kn.Utils=Ae,Kn.ConnectionManager=gm,Kn.ProtocolMessage=fm,Kn._Crypto=null,Kn.Message=am,Kn.PresenceMessage=lm,Kn._MsgPack=null,Kn._Http=uc;var _c=Kn,Oc=Uint8Array,So=Uint32Array,kc=Math.pow,Rm=new So(8),Em=[],Co=new So(64);function Pm(i){return(i-(i|0))*kc(2,32)|0}for(var To=2,Ro=0;Ro<64;){for(xc=!0,cl=2;cl<=To/2;cl++)To%cl===0&&(xc=!1);xc&&(Ro<8&&(Rm[Ro]=Pm(kc(To,1/2))),Em[Ro]=Pm(kc(To,1/3)),Ro++),To++}var xc,cl,nR=!!new Oc(new So([1]).buffer)[0];function Mc(i){return nR?i>>>24|(i>>>16&255)<<8|(i&65280)<<8|i<<24:i}function kn(i,o){return i>>>o|i<<32-o}function bc(i){var o=Rm.slice(),l=i.length,c=l*8,d=512-(c+64)%512-1+c+65,g=new Oc(d/8),T=new So(g.buffer);g.set(i,0),g[l]=128,T[T.length-1]=Mc(c);for(var O,I=0;I<d/32;I+=16){var b=o.slice();for(O=0;O<64;O++){var N;if(O<16)N=Mc(T[I+O]);else{var F=Co[O-15],q=Co[O-2];N=Co[O-7]+Co[O-16]+(kn(F,7)^kn(F,18)^F>>>3)+(kn(q,17)^kn(q,19)^q>>>10)}Co[O]=N|=0;for(var V=(kn(b[4],6)^kn(b[4],11)^kn(b[4],25))+(b[4]&b[5]^~b[4]&b[6])+b[7]+N+Em[O],K=(kn(b[0],2)^kn(b[0],13)^kn(b[0],22))+(b[0]&b[1]^b[2]&(b[0]^b[1])),ee=7;ee>0;ee--)b[ee]=b[ee-1];b[0]=V+K|0,b[4]=b[4]+V|0}for(O=0;O<8;O++)o[O]=o[O]+b[O]|0}return new Oc(new So(o.map(function(ce){return Mc(ce)})).buffer)}function rR(i,o){if(i.length>64&&(i=bc(i)),i.length<64){const O=new Uint8Array(64);O.set(i,0),i=O}for(var l=new Uint8Array(64),c=new Uint8Array(64),d=0;d<64;d++)l[d]=54^i[d],c[d]=92^i[d];var g=new Uint8Array(o.length+64);g.set(l,0),g.set(o,64);var T=new Uint8Array(96);return T.set(c,0),T.set(bc(g),64),bc(T)}var iR=class{constructor(){this.base64CharSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.hexCharSet="0123456789abcdef"}uint8ViewToBase64(i){let o="";const l=this.base64CharSet,c=i.byteLength,d=c%3,g=c-d;let T,O,I,b,N;for(let F=0;F<g;F=F+3)N=i[F]<<16|i[F+1]<<8|i[F+2],T=(N&16515072)>>18,O=(N&258048)>>12,I=(N&4032)>>6,b=N&63,o+=l[T]+l[O]+l[I]+l[b];return d==1?(N=i[g],T=(N&252)>>2,O=(N&3)<<4,o+=l[T]+l[O]+"=="):d==2&&(N=i[g]<<8|i[g+1],T=(N&64512)>>10,O=(N&1008)>>4,I=(N&15)<<2,o+=l[T]+l[O]+l[I]+"="),o}base64ToArrayBuffer(i){const o=atob==null?void 0:atob(i),l=o.length,c=new Uint8Array(l);for(let d=0;d<l;d++){const g=o.charCodeAt(d);c[d]=g}return this.toArrayBuffer(c)}isBuffer(i){return i instanceof ArrayBuffer||ArrayBuffer.isView(i)}toBuffer(i){if(!ArrayBuffer)throw new Error("Can't convert to Buffer: browser does not support the necessary types");if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(this.toArrayBuffer(i));throw new Error("BufferUtils.toBuffer expected an ArrayBuffer or a view onto one")}toArrayBuffer(i){if(!ArrayBuffer)throw new Error("Can't convert to ArrayBuffer: browser does not support the necessary types");if(i instanceof ArrayBuffer)return i;if(ArrayBuffer.isView(i))return i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength);throw new Error("BufferUtils.toArrayBuffer expected an ArrayBuffer or a view onto one")}base64Encode(i){return this.uint8ViewToBase64(this.toBuffer(i))}base64Decode(i){if(ArrayBuffer&&R.Config.atob)return this.base64ToArrayBuffer(i);throw new Error("Expected ArrayBuffer to exist and Platform.Config.atob to be configured")}hexEncode(i){return this.toBuffer(i).reduce((l,c)=>l+c.toString(16).padStart(2,"0"),"")}hexDecode(i){if(i.length%2!==0)throw new Error("Can't create a byte array from a hex string of odd length");const o=new Uint8Array(i.length/2);for(let l=0;l<o.length;l++)o[l]=parseInt(i.slice(2*l,2*(l+1)),16);return this.toArrayBuffer(o)}utf8Encode(i){if(R.Config.TextEncoder){const o=new R.Config.TextEncoder().encode(i);return this.toArrayBuffer(o)}else throw new Error("Expected TextEncoder to be configured")}utf8Decode(i){if(!this.isBuffer(i))throw new Error("Expected input of utf8decode to be an arraybuffer or typed array");if(TextDecoder)return new TextDecoder().decode(i);throw new Error("Expected TextDecoder to be configured")}areBuffersEqual(i,o){if(!i||!o)return!1;const l=this.toArrayBuffer(i),c=this.toArrayBuffer(o);if(l.byteLength!=c.byteLength)return!1;const d=new Uint8Array(l),g=new Uint8Array(c);for(var T=0;T<d.length;T++)if(d[T]!=g[T])return!1;return!0}byteLength(i){return i instanceof ArrayBuffer||ArrayBuffer.isView(i)?i.byteLength:-1}arrayBufferViewToBuffer(i){return this.toArrayBuffer(i)}hmacSha256(i,o){const l=rR(this.toBuffer(o),this.toBuffer(i));return this.toArrayBuffer(l)}},Am=new iR,sR=function(i,o){var l="aes",c=256,d="cbc",g=16;function T(q){if(q.algorithm==="aes"&&q.mode==="cbc"){if(q.keyLength===128||q.keyLength===256)return;throw new Error("Unsupported key length "+q.keyLength+" for aes-cbc encryption. Encryption key must be 128 or 256 bits (16 or 32 ASCII characters)")}}function O(q){return q.replace("_","/").replace("-","+")}function I(q){return q instanceof b}class b{constructor(V,K,ee,ce){this.algorithm=V,this.keyLength=K,this.mode=ee,this.key=ce}}class N{static getDefaultParams(V){var K;if(!V.key)throw new Error("Crypto.getDefaultParams: a key is required");typeof V.key=="string"?K=o.toArrayBuffer(o.base64Decode(O(V.key))):V.key instanceof ArrayBuffer?K=V.key:K=o.toArrayBuffer(V.key);var ee=V.algorithm||l,ce=K.byteLength*8,Pe=V.mode||d,_e=new b(ee,ce,Pe,K);if(V.keyLength&&V.keyLength!==_e.keyLength)throw new Error("Crypto.getDefaultParams: a keyLength of "+V.keyLength+" was specified, but the key actually has length "+_e.keyLength);return T(_e),_e}static async generateRandomKey(V){try{return i.getRandomArrayBuffer((V||c)/8)}catch(K){throw new D("Failed to generate random key: "+K.message,400,5e4,K)}}static getCipher(V,K){var ee,ce=I(V)?V:this.getDefaultParams(V);return{cipherParams:ce,cipher:new F(ce,(ee=V.iv)!=null?ee:null,K)}}}N.CipherParams=b;class F{constructor(V,K,ee){if(this.logger=ee,!crypto.subtle)throw isSecureContext?new Error("Crypto operations are not possible since the browser’s SubtleCrypto class is unavailable (reason unknown)."):new Error("Crypto operations are is not possible since the current environment is a non-secure context and hence the browser’s SubtleCrypto class is not available.");this.algorithm=V.algorithm+"-"+String(V.keyLength)+"-"+V.mode,this.webCryptoAlgorithm=V.algorithm+"-"+V.mode,this.key=o.toArrayBuffer(V.key),this.iv=K?o.toArrayBuffer(K):null}concat(V,K){const ee=new ArrayBuffer(V.byteLength+K.byteLength),ce=new DataView(ee),Pe=new DataView(o.toArrayBuffer(V));for(let De=0;De<Pe.byteLength;De++)ce.setInt8(De,Pe.getInt8(De));const _e=new DataView(o.toArrayBuffer(K));for(let De=0;De<_e.byteLength;De++)ce.setInt8(Pe.byteLength+De,_e.getInt8(De));return ee}async encrypt(V){m.logAction(this.logger,m.LOG_MICRO,"CBCCipher.encrypt()","");const K=await this.getIv(),ee=await crypto.subtle.importKey("raw",this.key,this.webCryptoAlgorithm,!1,["encrypt"]),ce=await crypto.subtle.encrypt({name:this.webCryptoAlgorithm,iv:K},ee,V);return this.concat(K,ce)}async decrypt(V){m.logAction(this.logger,m.LOG_MICRO,"CBCCipher.decrypt()","");const K=o.toArrayBuffer(V),ee=K.slice(0,g),ce=K.slice(g),Pe=await crypto.subtle.importKey("raw",this.key,this.webCryptoAlgorithm,!1,["decrypt"]);return crypto.subtle.decrypt({name:this.webCryptoAlgorithm,iv:ee},Pe,ce)}async getIv(){if(this.iv){var V=this.iv;return this.iv=null,V}const K=await i.getRandomArrayBuffer(g);return o.toArrayBuffer(K)}}return N},_m=(i=>(i[i.REQ_SEND=0]="REQ_SEND",i[i.REQ_RECV=1]="REQ_RECV",i[i.REQ_RECV_POLL=2]="REQ_RECV_POLL",i[i.REQ_RECV_STREAM=3]="REQ_RECV_STREAM",i))(_m||{}),Qn=_m;function Om(){return new D("No HTTP request plugin provided. Provide at least one of the FetchRequest or XHRRequest plugins.",400,4e4)}var Eo,km=(Eo=class{constructor(i){this.checksInProgress=null,this.checkConnectivity=void 0,this.supportsAuthHeaders=!1,this.supportsLinkHeaders=!1;var o;this.client=i??null;const l=(i==null?void 0:i.options.connectivityCheckUrl)||ae.connectivityCheckUrl,c=(o=i==null?void 0:i.options.connectivityCheckParams)!=null?o:null,d=!(i!=null&&i.options.connectivityCheckUrl),g=P(P({},km.bundledRequestImplementations),i==null?void 0:i._additionalHTTPRequestImplementations),T=g.XHRRequest,O=g.FetchRequest,I=!!(T||O);if(!I)throw Om();R.Config.xhrSupported&&T?(this.supportsAuthHeaders=!0,this.Request=async function(b,N,F,q,V){return new Promise(K=>{var ee;const ce=T.createRequest(N,F,q,V,Qn.REQ_SEND,(ee=i&&i.options.timeouts)!=null?ee:null,this.logger,b);ce.once("complete",(Pe,_e,De,fe,zt)=>K({error:Pe,body:_e,headers:De,unpacked:fe,statusCode:zt})),ce.exec()})},i!=null&&i.options.disableConnectivityCheck?this.checkConnectivity=async function(){return!0}:this.checkConnectivity=async function(){var b;m.logAction(this.logger,m.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Sending; "+l);const N=await this.doUri(le.Get,l,null,null,c);let F=!1;return d?F=!N.error&&((b=N.body)==null?void 0:b.replace(/\n/,""))=="yes":F=!N.error&&Qe(N.statusCode),m.logAction(this.logger,m.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Result: "+F),F}):R.Config.fetchSupported&&O?(this.supportsAuthHeaders=!0,this.Request=async(b,N,F,q,V)=>O(b,i??null,N,F,q,V),this.checkConnectivity=async function(){var b;m.logAction(this.logger,m.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Sending; "+l);const N=await this.doUri(le.Get,l,null,null,null),F=!N.error&&((b=N.body)==null?void 0:b.replace(/\n/,""))=="yes";return m.logAction(this.logger,m.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Result: "+F),F}):this.Request=async()=>({error:I?new ue("no supported HTTP transports available",null,400):Om()})}get logger(){var i,o;return(o=(i=this.client)==null?void 0:i.logger)!=null?o:m.defaultLogger}async doUri(i,o,l,c,d){return this.Request?this.Request(i,o,l,d,c):{error:new ue("Request invoked before assigned to",null,500)}}shouldFallback(i){const o=i.statusCode;return o===408&&!i.code||o===400&&!i.code||o>=500&&o<=504}},Eo.methods=[le.Get,le.Delete,le.Post,le.Put,le.Patch],Eo.methodsWithoutBody=[le.Get,le.Delete],Eo.methodsWithBody=[le.Post,le.Put,le.Patch],Eo),xm=km,es="ablyjs-storage-test",ts=typeof Yn<"u"?Yn:typeof window<"u"?window:self,oR=class{constructor(){try{ts.sessionStorage.setItem(es,es),ts.sessionStorage.removeItem(es),this.sessionSupported=!0}catch{this.sessionSupported=!1}try{ts.localStorage.setItem(es,es),ts.localStorage.removeItem(es),this.localSupported=!0}catch{this.localSupported=!1}}get(i){return this._get(i,!1)}getSession(i){return this._get(i,!0)}remove(i){return this._remove(i,!1)}removeSession(i){return this._remove(i,!0)}set(i,o,l){return this._set(i,o,l,!1)}setSession(i,o,l){return this._set(i,o,l,!0)}_set(i,o,l,c){const d={value:o};return l&&(d.expires=Date.now()+l),this.storageInterface(c).setItem(i,JSON.stringify(d))}_get(i,o){if(o&&!this.sessionSupported)throw new Error("Session Storage not supported");if(!o&&!this.localSupported)throw new Error("Local Storage not supported");const l=this.storageInterface(o).getItem(i);if(!l)return null;const c=JSON.parse(l);return c.expires&&c.expires<Date.now()?(this.storageInterface(o).removeItem(i),null):c.value}_remove(i,o){return this.storageInterface(o).removeItem(i)}storageInterface(i){return i?ts.sessionStorage:ts.localStorage}},Mm=new oR,ze=ai(),aR=typeof EdgeRuntime=="string";typeof Window>"u"&&typeof WorkerGlobalScope>"u"&&!aR&&console.log("Warning: this distribution of Ably is intended for browsers. On nodejs, please use the 'ably' package on npm");function lR(){const i=ze.location;return!ze.WebSocket||!i||!i.origin||i.origin.indexOf("http")>-1}function uR(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}var cR=ze.navigator&&ze.navigator.userAgent.toString(),hR=ze.location&&ze.location.href,fR={agent:"browser",logTimestamps:!0,userAgent:cR,currentUrl:hR,binaryType:"arraybuffer",WebSocket:ze.WebSocket,fetchSupported:!!ze.fetch,xhrSupported:ze.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,allowComet:lR(),useProtocolHeartbeats:!0,supportsBinary:!!ze.TextDecoder,preferBinary:!1,ArrayBuffer:ze.ArrayBuffer,atob:ze.atob,nextTick:typeof ze.setImmediate<"u"?ze.setImmediate.bind(ze):function(i){setTimeout(i,0)},addEventListener:ze.addEventListener,inspect:JSON.stringify,stringByteSize:function(i){return ze.TextDecoder&&new ze.TextEncoder().encode(i).length||i.length},TextEncoder:ze.TextEncoder,TextDecoder:ze.TextDecoder,getRandomArrayBuffer:async function(i){const o=new Uint8Array(i);return ze.crypto.getRandomValues(o),o.buffer},isWebworker:uR(),push:{platform:"browser",formFactor:"desktop",storage:Mm}},bm=fR;function dR(i){const o=[80015,80017,80030];return i.code?qn.isTokenErr(i)?!1:o.includes(i.code)?!0:i.code>=4e4&&i.code<5e4:!1}function Ic(i){return dR(i)?[On({action:de.ERROR,error:i})]:[On({action:de.DISCONNECTED,error:i})]}var pR=class extends Zi{constructor(i,o,l){super(i,o,l,!0),this.onAuthUpdated=c=>{this.authParams={access_token:c.token}},this.stream="stream"in l?l.stream:!0,this.sendRequest=null,this.recvRequest=null,this.pendingCallback=null,this.pendingItems=null}connect(){m.logAction(this.logger,m.LOG_MINOR,"CometTransport.connect()","starting"),Zi.prototype.connect.call(this);const i=this.params,o=i.options,l=ae.getHost(o,i.host),c=ae.getPort(o),d=o.tls?"https://":"http://";this.baseUri=d+l+":"+c+"/comet/";const g=this.baseUri+"connect";m.logAction(this.logger,m.LOG_MINOR,"CometTransport.connect()","uri: "+g),tt(this.auth.getAuthParams(),(T,O)=>{if(T){this.disconnect(T);return}if(this.isDisposed)return;this.authParams=O;const I=this.params.getConnectParams(O);"stream"in I&&(this.stream=I.stream),m.logAction(this.logger,m.LOG_MINOR,"CometTransport.connect()","connectParams:"+En(I));let b=!1;const N=this.recvRequest=this.createRequest(g,null,I,null,this.stream?Qn.REQ_RECV_STREAM:Qn.REQ_RECV);N.on("data",F=>{this.recvRequest&&(b||(b=!0,this.emit("preconnect")),this.onData(F))}),N.on("complete",F=>{if(this.recvRequest||(F=F||new D("Request cancelled",80003,400)),this.recvRequest=null,!b&&!F&&(b=!0,this.emit("preconnect")),this.onActivity(),F){F.code?this.onData(Ic(F)):this.disconnect(F);return}R.Config.nextTick(()=>{this.recv()})}),N.exec()})}requestClose(){m.logAction(this.logger,m.LOG_MINOR,"CometTransport.requestClose()"),this._requestCloseOrDisconnect(!0)}requestDisconnect(){m.logAction(this.logger,m.LOG_MINOR,"CometTransport.requestDisconnect()"),this._requestCloseOrDisconnect(!1)}_requestCloseOrDisconnect(i){const o=i?this.closeUri:this.disconnectUri;if(o){const l=this.createRequest(o,null,this.authParams,null,Qn.REQ_SEND);l.on("complete",c=>{c&&(m.logAction(this.logger,m.LOG_ERROR,"CometTransport.request"+(i?"Close()":"Disconnect()"),"request returned err = "+xe(c)),this.finish("disconnected",c))}),l.exec()}}dispose(){m.logAction(this.logger,m.LOG_MINOR,"CometTransport.dispose()",""),this.isDisposed||(this.isDisposed=!0,this.recvRequest&&(m.logAction(this.logger,m.LOG_MINOR,"CometTransport.dispose()","aborting recv request"),this.recvRequest.abort(),this.recvRequest=null),this.finish("disconnected",Rr.disconnected()),R.Config.nextTick(()=>{this.emit("disposed")}))}onConnect(i){var o;if(this.isDisposed)return;const l=(o=i.connectionDetails)==null?void 0:o.connectionKey;Zi.prototype.onConnect.call(this,i);const c=this.baseUri+l;m.logAction(this.logger,m.LOG_MICRO,"CometTransport.onConnect()","baseUri = "+c),this.sendUri=c+"/send",this.recvUri=c+"/recv",this.closeUri=c+"/close",this.disconnectUri=c+"/disconnect"}send(i){if(this.sendRequest){this.pendingItems=this.pendingItems||[],this.pendingItems.push(i);return}const o=this.pendingItems||[];o.push(i),this.pendingItems=null,this.sendItems(o)}sendAnyPending(){const i=this.pendingItems;i&&(this.pendingItems=null,this.sendItems(i))}sendItems(i){const o=this.sendRequest=this.createRequest(this.sendUri,null,this.authParams,this.encodeRequest(i),Qn.REQ_SEND);o.on("complete",(l,c)=>{if(l&&m.logAction(this.logger,m.LOG_ERROR,"CometTransport.sendItems()","on complete: err = "+xe(l)),this.sendRequest=null,l){l.code?this.onData(Ic(l)):this.disconnect(l);return}c&&this.onData(c),this.pendingItems&&R.Config.nextTick(()=>{this.sendRequest||this.sendAnyPending()})}),o.exec()}recv(){if(this.recvRequest||!this.isConnected)return;const i=this.recvRequest=this.createRequest(this.recvUri,null,this.authParams,null,this.stream?Qn.REQ_RECV_STREAM:Qn.REQ_RECV_POLL);i.on("data",o=>{this.onData(o)}),i.on("complete",o=>{if(this.recvRequest=null,this.onActivity(),o){o.code?this.onData(Ic(o)):this.disconnect(o);return}R.Config.nextTick(()=>{this.recv()})}),i.exec()}onData(i){try{const o=this.decodeResponse(i);if(o&&o.length)for(let l=0;l<o.length;l++)this.onProtocolMessage(vc(o[l],this.connectionManager.realtime._RealtimePresence))}catch(o){m.logAction(this.logger,m.LOG_ERROR,"CometTransport.onData()","Unexpected exception handing channel event: "+o.stack)}}encodeRequest(i){return JSON.stringify(i)}decodeResponse(i){return typeof i=="string"?JSON.parse(i):i}},mR=pR;function gR(i,o){return Wi(zn(o)).includes("x-ably-errorcode")}function yR(i,o){if(gR(i,o))return i.error&&D.fromValues(i.error)}var vR=function(){},wR=0,Im={};function SR(i,o){return i.getResponseHeader&&i.getResponseHeader(o)}function CR(i){return i.getResponseHeader&&(i.getResponseHeader("transfer-encoding")||!i.getResponseHeader("content-length"))}function TR(i){const o=i.getAllResponseHeaders().trim().split(`\r
`),l={};for(let c=0;c<o.length;c++){const d=o[c].split(":").map(g=>g.trim());l[d[0].toLowerCase()]=d[1]}return l}var RR=class M1 extends ct{constructor(o,l,c,d,g,T,O,I){super(O),c=c||{},c.rnd=Pn(),this.uri=o+En(c),this.headers=l||{},this.body=d,this.method=I?I.toUpperCase():re(d)?"GET":"POST",this.requestMode=g,this.timeouts=T,this.timedOut=!1,this.requestComplete=!1,this.id=String(++wR),Im[this.id]=this}static createRequest(o,l,c,d,g,T,O,I){const b=T||ae.TIMEOUTS;return new M1(o,l,W(c),d,g,b,O,I)}complete(o,l,c,d,g){this.requestComplete||(this.requestComplete=!0,!o&&l&&this.emit("data",l),this.emit("complete",o,l,c,d,g),this.dispose())}abort(){this.dispose()}exec(){let o=this.headers;const l=this.requestMode==Qn.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout,c=this.timer=setTimeout(()=>{this.timedOut=!0,g.abort()},l),d=this.method,g=this.xhr=new XMLHttpRequest,T=o.accept;let O=this.body,I="text";T?T.indexOf("application/x-msgpack")===0&&(I="arraybuffer"):o.accept="application/json",O&&(o["content-type"]||(o["content-type"]="application/json")).indexOf("application/json")>-1&&typeof O!="string"&&(O=JSON.stringify(O)),g.open(d,this.uri,!0),g.responseType=I,"authorization"in o&&(g.withCredentials=!0);for(const fe in o)g.setRequestHeader(fe,o[fe]);const b=(fe,zt,ht,Oo)=>{var ns;let Uc=zt+" (event type: "+fe.type+")";(ns=this==null?void 0:this.xhr)!=null&&ns.statusText&&(Uc+=", current statusText is "+this.xhr.statusText),m.logAction(this.logger,m.LOG_ERROR,"Request.on"+fe.type+"()",Uc),this.complete(new ue(Uc,ht,Oo))};g.onerror=function(fe){b(fe,"XHR error occurred",null,400)},g.onabort=fe=>{this.timedOut?b(fe,"Request aborted due to request timeout expiring",null,408):b(fe,"Request cancelled",null,400)},g.ontimeout=function(fe){b(fe,"Request timed out",null,408)};let N,F,q,V=0,K=!1;const ee=()=>{if(clearTimeout(c),q=F<400,F==204){this.complete(null,null,null,null,F);return}N=this.requestMode==Qn.REQ_RECV_STREAM&&q&&CR(g)},ce=()=>{let fe;try{const ht=SR(g,"content-type");if(ht?ht.indexOf("application/json")>=0:g.responseType=="text"){const ns=g.responseType==="arraybuffer"?R.BufferUtils.utf8Decode(g.response):String(g.responseText);ns.length?fe=JSON.parse(ns):fe=ns,K=!0}else fe=g.response;fe.response!==void 0?(F=fe.statusCode,q=F<400,o=fe.headers,fe=fe.response):o=TR(g)}catch(ht){this.complete(new ue("Malformed response body from server: "+ht.message,null,400));return}if(q||Array.isArray(fe)){this.complete(null,fe,o,K,F);return}let zt=yR(fe,o);zt||(zt=new ue("Error response received from server: "+F+" body was: "+R.Config.inspect(fe),null,F)),this.complete(zt,fe,o,K,F)};function Pe(){const fe=g.responseText,zt=fe.length-1;let ht,Oo;for(;V<zt&&(ht=fe.indexOf(`
`,V))>-1;)Oo=fe.slice(V,ht),V=ht+1,_e(Oo)}const _e=fe=>{try{fe=JSON.parse(fe)}catch(zt){this.complete(new ue("Malformed response body from server: "+zt.message,null,400));return}this.emit("data",fe)},De=()=>{Pe(),this.streamComplete=!0,R.Config.nextTick(()=>{this.complete()})};g.onreadystatechange=function(){const fe=g.readyState;fe<3||g.status!==0&&(F===void 0&&(F=g.status,ee()),fe==3&&N?Pe():fe==4&&(N?De():ce()))},g.send(O)}dispose(){const o=this.xhr;if(o){o.onreadystatechange=o.onerror=o.onabort=o.ontimeout=vR,this.xhr=null;const l=this.timer;l&&(clearTimeout(l),this.timer=null),this.requestComplete||o.abort()}delete Im[this.id]}},Lm=RR,Dm=It.XhrPolling,ER=class extends mR{constructor(i,o,l){super(i,o,l),this.shortName=Dm,l.stream=!1,this.shortName=Dm}static isAvailable(){return!!(R.Config.xhrSupported&&R.Config.allowComet)}toString(){return"XHRPollingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected}createRequest(i,o,l,c,d){return Lm.createRequest(i,o,l,c,d,this.timeouts,this.logger)}},PR=ER,AR=["xhr_polling"],_R={order:AR,bundledImplementations:{web_socket:Tm,xhr_polling:PR}},OR=_R,kR={connectivityCheckUrl:"https://internet-up.ably-realtime.com/is-the-internet-up.txt",wsConnectivityUrl:"wss://ws-up.ably-realtime.com",defaultTransports:[It.XhrPolling,It.WebSocket]},xR=kR;function MR(i){if(i===void 0)return"undefined";let o,l;if(i instanceof ArrayBuffer?(l="ArrayBuffer",o=new DataView(i)):i instanceof DataView&&(l="DataView",o=i),!o)return JSON.stringify(i);const c=[];for(let d=0;d<i.byteLength;d++){if(d>20){c.push("...");break}let g=o.getUint8(d).toString(16);g.length===1&&(g="0"+g),c.push(g)}return"<"+l+" "+c.join(" ")+">"}function Po(i,o,l){for(let c=0,d=l.length;c<d;c++){const g=l.charCodeAt(c);if(g<128){i.setUint8(o++,g>>>0&127|0);continue}if(g<2048){i.setUint8(o++,g>>>6&31|192),i.setUint8(o++,g>>>0&63|128);continue}if(g<65536){i.setUint8(o++,g>>>12&15|224),i.setUint8(o++,g>>>6&63|128),i.setUint8(o++,g>>>0&63|128);continue}if(g<1114112){i.setUint8(o++,g>>>18&7|240),i.setUint8(o++,g>>>12&63|128),i.setUint8(o++,g>>>6&63|128),i.setUint8(o++,g>>>0&63|128);continue}throw new Error("bad codepoint "+g)}}function Nm(i,o,l){let c="";for(let d=o,g=o+l;d<g;d++){const T=i.getUint8(d);if(!(T&128)){c+=String.fromCharCode(T);continue}if((T&224)===192){c+=String.fromCharCode((T&15)<<6|i.getUint8(++d)&63);continue}if((T&240)===224){c+=String.fromCharCode((T&15)<<12|(i.getUint8(++d)&63)<<6|(i.getUint8(++d)&63)<<0);continue}if((T&248)===240){c+=String.fromCharCode((T&7)<<18|(i.getUint8(++d)&63)<<12|(i.getUint8(++d)&63)<<6|(i.getUint8(++d)&63)<<0);continue}throw new Error("Invalid byte "+T.toString(16))}return c}function Lc(i){let o=0;for(let l=0,c=i.length;l<c;l++){const d=i.charCodeAt(l);if(d<128){o+=1;continue}if(d<2048){o+=2;continue}if(d<65536){o+=3;continue}if(d<1114112){o+=4;continue}throw new Error("bad codepoint "+d)}return o}function bR(i,o){const l=_o(i,o);if(l===0)return;const c=new ArrayBuffer(l),d=new DataView(c);return Ao(i,d,0,o),c}var Dc=65536*65536,Um=1/Dc;function IR(i,o){return o=o||0,i.getInt32(o)*Dc+i.getUint32(o+4)}function LR(i,o){return o=o||0,i.getUint32(o)*Dc+i.getUint32(o+4)}function DR(i,o,l){l<9223372036854776e3?(i.setInt32(o,Math.floor(l*Um)),i.setInt32(o+4,l&-1)):(i.setUint32(o,2147483647),i.setUint32(o+4,2147483647))}function NR(i,o,l){l<18446744073709552e3?(i.setUint32(o,Math.floor(l*Um)),i.setInt32(o+4,l&-1)):(i.setUint32(o,4294967295),i.setUint32(o+4,4294967295))}var UR=class{constructor(i,o){this.map=l=>{const c={};for(let d=0;d<l;d++){const g=this.parse();c[g]=this.parse()}return c},this.bin=l=>{const c=new ArrayBuffer(l);return new Uint8Array(c).set(new Uint8Array(this.view.buffer,this.offset,l),0),this.offset+=l,c},this.buf=this.bin,this.str=l=>{const c=Nm(this.view,this.offset,l);return this.offset+=l,c},this.array=l=>{const c=new Array(l);for(let d=0;d<l;d++)c[d]=this.parse();return c},this.ext=l=>(this.offset+=l,{type:this.view.getInt8(this.offset),data:this.buf(l)}),this.parse=()=>{const l=this.view.getUint8(this.offset);let c,d;if(!(l&128))return this.offset++,l;if((l&240)===128)return d=l&15,this.offset++,this.map(d);if((l&240)===144)return d=l&15,this.offset++,this.array(d);if((l&224)===160)return d=l&31,this.offset++,this.str(d);if((l&224)===224)return c=this.view.getInt8(this.offset),this.offset++,c;switch(l){case 192:return this.offset++,null;case 193:this.offset++;return;case 194:return this.offset++,!1;case 195:return this.offset++,!0;case 196:return d=this.view.getUint8(this.offset+1),this.offset+=2,this.bin(d);case 197:return d=this.view.getUint16(this.offset+1),this.offset+=3,this.bin(d);case 198:return d=this.view.getUint32(this.offset+1),this.offset+=5,this.bin(d);case 199:return d=this.view.getUint8(this.offset+1),this.offset+=2,this.ext(d);case 200:return d=this.view.getUint16(this.offset+1),this.offset+=3,this.ext(d);case 201:return d=this.view.getUint32(this.offset+1),this.offset+=5,this.ext(d);case 202:return c=this.view.getFloat32(this.offset+1),this.offset+=5,c;case 203:return c=this.view.getFloat64(this.offset+1),this.offset+=9,c;case 204:return c=this.view.getUint8(this.offset+1),this.offset+=2,c;case 205:return c=this.view.getUint16(this.offset+1),this.offset+=3,c;case 206:return c=this.view.getUint32(this.offset+1),this.offset+=5,c;case 207:return c=LR(this.view,this.offset+1),this.offset+=9,c;case 208:return c=this.view.getInt8(this.offset+1),this.offset+=2,c;case 209:return c=this.view.getInt16(this.offset+1),this.offset+=3,c;case 210:return c=this.view.getInt32(this.offset+1),this.offset+=5,c;case 211:return c=IR(this.view,this.offset+1),this.offset+=9,c;case 212:return d=1,this.offset++,this.ext(d);case 213:return d=2,this.offset++,this.ext(d);case 214:return d=4,this.offset++,this.ext(d);case 215:return d=8,this.offset++,this.ext(d);case 216:return d=16,this.offset++,this.ext(d);case 217:return d=this.view.getUint8(this.offset+1),this.offset+=2,this.str(d);case 218:return d=this.view.getUint16(this.offset+1),this.offset+=3,this.str(d);case 219:return d=this.view.getUint32(this.offset+1),this.offset+=5,this.str(d);case 220:return d=this.view.getUint16(this.offset+1),this.offset+=3,this.array(d);case 221:return d=this.view.getUint32(this.offset+1),this.offset+=5,this.array(d);case 222:return d=this.view.getUint16(this.offset+1),this.offset+=3,this.map(d);case 223:return d=this.view.getUint32(this.offset+1),this.offset+=5,this.map(d)}throw new Error("Unknown type 0x"+l.toString(16))},this.offset=o||0,this.view=i}};function FR(i){const o=new DataView(i),l=new UR(o),c=l.parse();if(l.offset!==i.byteLength)throw new Error(i.byteLength-l.offset+" trailing bytes");return c}function Fm(i,o){return Object.keys(i).filter(function(l){const c=i[l],d=typeof c;return(!o||c!=null)&&(d!=="function"||!!c.toJSON)})}function Ao(i,o,l,c){const d=typeof i;if(typeof i=="string"){const g=Lc(i);if(g<32)return o.setUint8(l,g|160),Po(o,l+1,i),1+g;if(g<256)return o.setUint8(l,217),o.setUint8(l+1,g),Po(o,l+2,i),2+g;if(g<65536)return o.setUint8(l,218),o.setUint16(l+1,g),Po(o,l+3,i),3+g;if(g<4294967296)return o.setUint8(l,219),o.setUint32(l+1,g),Po(o,l+5,i),5+g}if(ArrayBuffer.isView&&ArrayBuffer.isView(i)&&(i=i.buffer),i instanceof ArrayBuffer){const g=i.byteLength;if(g<256)return o.setUint8(l,196),o.setUint8(l+1,g),new Uint8Array(o.buffer).set(new Uint8Array(i),l+2),2+g;if(g<65536)return o.setUint8(l,197),o.setUint16(l+1,g),new Uint8Array(o.buffer).set(new Uint8Array(i),l+3),3+g;if(g<4294967296)return o.setUint8(l,198),o.setUint32(l+1,g),new Uint8Array(o.buffer).set(new Uint8Array(i),l+5),5+g}if(typeof i=="number"){if(Math.floor(i)!==i)return o.setUint8(l,203),o.setFloat64(l+1,i),9;if(i>=0){if(i<128)return o.setUint8(l,i),1;if(i<256)return o.setUint8(l,204),o.setUint8(l+1,i),2;if(i<65536)return o.setUint8(l,205),o.setUint16(l+1,i),3;if(i<4294967296)return o.setUint8(l,206),o.setUint32(l+1,i),5;if(i<18446744073709552e3)return o.setUint8(l,207),NR(o,l+1,i),9;throw new Error("Number too big 0x"+i.toString(16))}if(i>=-32)return o.setInt8(l,i),1;if(i>=-128)return o.setUint8(l,208),o.setInt8(l+1,i),2;if(i>=-32768)return o.setUint8(l,209),o.setInt16(l+1,i),3;if(i>=-2147483648)return o.setUint8(l,210),o.setInt32(l+1,i),5;if(i>=-9223372036854776e3)return o.setUint8(l,211),DR(o,l+1,i),9;throw new Error("Number too small -0x"+(-i).toString(16).substr(1))}if(d==="undefined")return c?0:(o.setUint8(l,212),o.setUint8(l+1,0),o.setUint8(l+2,0),3);if(i===null)return c?0:(o.setUint8(l,192),1);if(d==="boolean")return o.setUint8(l,i?195:194),1;if(typeof i.toJSON=="function")return Ao(i.toJSON(),o,l,c);if(d==="object"){let g,T=0,O;const I=Array.isArray(i);if(I?g=i.length:(O=Fm(i,c),g=O.length),g<16?(o.setUint8(l,g|(I?144:128)),T=1):g<65536?(o.setUint8(l,I?220:222),o.setUint16(l+1,g),T=3):g<4294967296&&(o.setUint8(l,I?221:223),o.setUint32(l+1,g),T=5),I)for(let b=0;b<g;b++)T+=Ao(i[b],o,l+T,c);else if(O)for(let b=0;b<g;b++){const N=O[b];T+=Ao(N,o,l+T),T+=Ao(i[N],o,l+T,c)}return T}if(d==="function")return 0;throw new Error("Unknown type "+d)}function _o(i,o){const l=typeof i;if(l==="string"){const c=Lc(i);if(c<32)return 1+c;if(c<256)return 2+c;if(c<65536)return 3+c;if(c<4294967296)return 5+c}if(ArrayBuffer.isView&&ArrayBuffer.isView(i)&&(i=i.buffer),i instanceof ArrayBuffer){const c=i.byteLength;if(c<256)return 2+c;if(c<65536)return 3+c;if(c<4294967296)return 5+c}if(typeof i=="number"){if(Math.floor(i)!==i)return 9;if(i>=0){if(i<128)return 1;if(i<256)return 2;if(i<65536)return 3;if(i<4294967296)return 5;if(i<18446744073709552e3)return 9;throw new Error("Number too big 0x"+i.toString(16))}if(i>=-32)return 1;if(i>=-128)return 2;if(i>=-32768)return 3;if(i>=-2147483648)return 5;if(i>=-9223372036854776e3)return 9;throw new Error("Number too small -0x"+i.toString(16).substr(1))}if(l==="boolean")return 1;if(i===null)return o?0:1;if(i===void 0)return o?0:3;if(typeof i.toJSON=="function")return _o(i.toJSON(),o);if(l==="object"){let c,d=0;if(Array.isArray(i)){c=i.length;for(let g=0;g<c;g++)d+=_o(i[g],o)}else{const g=Fm(i,o);c=g.length;for(let T=0;T<c;T++){const O=g[T];d+=_o(O)+_o(i[O],o)}}if(c<16)return 1+d;if(c<65536)return 3+d;if(c<4294967296)return 5+d;throw new Error("Array or object too long 0x"+c.toString(16))}if(l==="function")return 0;throw new Error("Unknown type "+l)}var Nc={encode:bR,decode:FR,inspect:MR,utf8Write:Po,utf8Read:Nm,utf8ByteCount:Lc};function BR(i,o){return!!o.get("x-ably-errorcode")}function VR(i,o){if(BR(i,o))return i.error&&D.fromValues(i.error)}function jR(i){const o={};return i.forEach((l,c)=>{o[c]=l}),o}async function zR(i,o,l,c,d,g){const T=new Headers(c||{}),O=i?i.toUpperCase():re(g)?"GET":"POST",I=new AbortController;let b;const N=new Promise(V=>{b=setTimeout(()=>{I.abort(),V({error:new ue("Request timed out",null,408)})},o?o.options.timeouts.httpRequestTimeout:ae.TIMEOUTS.httpRequestTimeout)}),F={method:O,headers:T,body:g,signal:I.signal};R.Config.isWebworker||(F.credentials=T.has("authorization")?"include":"same-origin");const q=(async()=>{try{const V=await ai().fetch(l+"?"+new URLSearchParams(d||{}),F);if(clearTimeout(b),V.status==204)return{error:null,statusCode:V.status};const K=V.headers.get("Content-Type");let ee;K&&K.indexOf("application/x-msgpack")>-1?ee=await V.arrayBuffer():K&&K.indexOf("application/json")>-1?ee=await V.json():ee=await V.text();const ce=!!K&&K.indexOf("application/x-msgpack")===-1,Pe=jR(V.headers);return V.ok?{error:null,body:ee,headers:Pe,unpacked:ce,statusCode:V.status}:{error:VR(ee,V.headers)||new ue("Error response received from server: "+V.status+" body was: "+R.Config.inspect(ee),null,V.status),body:ee,headers:Pe,unpacked:ce,statusCode:V.status}}catch(V){return clearTimeout(b),{error:V}}})();return Promise.race([N,q])}var GR={XHRRequest:Lm,FetchRequest:zR},Bm=sR(bm,Am);R.Crypto=Bm,R.BufferUtils=Am,R.Http=xm,R.Config=bm,R.Transports=OR,R.WebStorage=Mm;for(const i of[gc,_c])i.Crypto=Bm,i._MsgPack=Nc;xm.bundledRequestImplementations=GR,m.initLogHandlers(),R.Defaults=te(xR),R.Config.agent&&(R.Defaults.agent+=" "+R.Config.agent);var HR={ErrorInfo:D,Rest:gc,Realtime:_c,msgpack:Nc};if(typeof r.exports=="object"&&typeof n=="object"){var WR=(i,o,l,c)=>{if(o&&typeof o=="object"||typeof o=="function")for(let d of Object.getOwnPropertyNames(o))!Object.prototype.hasOwnProperty.call(i,d)&&d!==l&&Object.defineProperty(i,d,{get:()=>o[d],enumerable:!(c=Object.getOwnPropertyDescriptor(o,d))||c.enumerable});return i};r.exports=WR(r.exports,n)}return r.exports})})(P1);var BI=P1.exports;export{UI as A,PI as B,FI as C,DI as F,OI as Q,EI as R,SI as T,J_ as a,AI as b,ip as c,xI as d,LI as e,BI as f,SA as g,kI as h,u_ as i,Hs as j,II as m,_I as p,B as r,NI as u};
