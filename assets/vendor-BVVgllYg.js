var Hm=e=>{throw TypeError(e)};var Vc=(e,t,n)=>t.has(e)||Hm("Cannot "+n);var M=(e,t,n)=>(Vc(e,t,"read from private field"),n?n.call(e):t.get(e)),he=(e,t,n)=>t.has(e)?Hm("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),X=(e,t,n,r)=>(Vc(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ge=(e,t,n)=>(Vc(e,t,"access private method"),n);var hl=(e,t,n,r)=>({set _(s){X(e,t,s,n)},get _(){return M(e,t,r)}});function KR(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var Xn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function r0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var i0={exports:{}},Iu={},s0={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ja=Symbol.for("react.element"),QR=Symbol.for("react.portal"),YR=Symbol.for("react.fragment"),XR=Symbol.for("react.strict_mode"),JR=Symbol.for("react.profiler"),ZR=Symbol.for("react.provider"),eE=Symbol.for("react.context"),tE=Symbol.for("react.forward_ref"),nE=Symbol.for("react.suspense"),rE=Symbol.for("react.memo"),iE=Symbol.for("react.lazy"),Wm=Symbol.iterator;function sE(e){return e===null||typeof e!="object"?null:(e=Wm&&e[Wm]||e["@@iterator"],typeof e=="function"?e:null)}var o0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},a0=Object.assign,l0={};function no(e,t,n){this.props=e,this.context=t,this.refs=l0,this.updater=n||o0}no.prototype.isReactComponent={};no.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};no.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function u0(){}u0.prototype=no.prototype;function hd(e,t,n){this.props=e,this.context=t,this.refs=l0,this.updater=n||o0}var fd=hd.prototype=new u0;fd.constructor=hd;a0(fd,no.prototype);fd.isPureReactComponent=!0;var qm=Array.isArray,c0=Object.prototype.hasOwnProperty,dd={current:null},h0={key:!0,ref:!0,__self:!0,__source:!0};function f0(e,t,n){var r,s={},a=null,u=null;if(t!=null)for(r in t.ref!==void 0&&(u=t.ref),t.key!==void 0&&(a=""+t.key),t)c0.call(t,r)&&!h0.hasOwnProperty(r)&&(s[r]=t[r]);var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){for(var f=Array(h),p=0;p<h;p++)f[p]=arguments[p+2];s.children=f}if(e&&e.defaultProps)for(r in h=e.defaultProps,h)s[r]===void 0&&(s[r]=h[r]);return{$$typeof:ja,type:e,key:a,ref:u,props:s,_owner:dd.current}}function oE(e,t){return{$$typeof:ja,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function pd(e){return typeof e=="object"&&e!==null&&e.$$typeof===ja}function aE(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var $m=/\/+/g;function jc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?aE(""+e.key):t.toString(36)}function Nl(e,t,n,r,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var u=!1;if(e===null)u=!0;else switch(a){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case ja:case QR:u=!0}}if(u)return u=e,s=s(u),e=r===""?"."+jc(u,0):r,qm(s)?(n="",e!=null&&(n=e.replace($m,"$&/")+"/"),Nl(s,t,n,"",function(p){return p})):s!=null&&(pd(s)&&(s=oE(s,n+(!s.key||u&&u.key===s.key?"":(""+s.key).replace($m,"$&/")+"/")+e)),t.push(s)),1;if(u=0,r=r===""?".":r+":",qm(e))for(var h=0;h<e.length;h++){a=e[h];var f=r+jc(a,h);u+=Nl(a,t,n,f,s)}else if(f=sE(e),typeof f=="function")for(e=f.call(e),h=0;!(a=e.next()).done;)a=a.value,f=r+jc(a,h++),u+=Nl(a,t,n,f,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function fl(e,t,n){if(e==null)return e;var r=[],s=0;return Nl(e,r,"","",function(a){return t.call(n,a,s++)}),r}function lE(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var _t={current:null},Ul={transition:null},uE={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:Ul,ReactCurrentOwner:dd};function d0(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:fl,forEach:function(e,t,n){fl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return fl(e,function(){t++}),t},toArray:function(e){return fl(e,function(t){return t})||[]},only:function(e){if(!pd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};me.Component=no;me.Fragment=YR;me.Profiler=JR;me.PureComponent=hd;me.StrictMode=XR;me.Suspense=nE;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uE;me.act=d0;me.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=a0({},e.props),s=e.key,a=e.ref,u=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,u=dd.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var h=e.type.defaultProps;for(f in t)c0.call(t,f)&&!h0.hasOwnProperty(f)&&(r[f]=t[f]===void 0&&h!==void 0?h[f]:t[f])}var f=arguments.length-2;if(f===1)r.children=n;else if(1<f){h=Array(f);for(var p=0;p<f;p++)h[p]=arguments[p+2];r.children=h}return{$$typeof:ja,type:e.type,key:s,ref:a,props:r,_owner:u}};me.createContext=function(e){return e={$$typeof:eE,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ZR,_context:e},e.Consumer=e};me.createElement=f0;me.createFactory=function(e){var t=f0.bind(null,e);return t.type=e,t};me.createRef=function(){return{current:null}};me.forwardRef=function(e){return{$$typeof:tE,render:e}};me.isValidElement=pd;me.lazy=function(e){return{$$typeof:iE,_payload:{_status:-1,_result:e},_init:lE}};me.memo=function(e,t){return{$$typeof:rE,type:e,compare:t===void 0?null:t}};me.startTransition=function(e){var t=Ul.transition;Ul.transition={};try{e()}finally{Ul.transition=t}};me.unstable_act=d0;me.useCallback=function(e,t){return _t.current.useCallback(e,t)};me.useContext=function(e){return _t.current.useContext(e)};me.useDebugValue=function(){};me.useDeferredValue=function(e){return _t.current.useDeferredValue(e)};me.useEffect=function(e,t){return _t.current.useEffect(e,t)};me.useId=function(){return _t.current.useId()};me.useImperativeHandle=function(e,t,n){return _t.current.useImperativeHandle(e,t,n)};me.useInsertionEffect=function(e,t){return _t.current.useInsertionEffect(e,t)};me.useLayoutEffect=function(e,t){return _t.current.useLayoutEffect(e,t)};me.useMemo=function(e,t){return _t.current.useMemo(e,t)};me.useReducer=function(e,t,n){return _t.current.useReducer(e,t,n)};me.useRef=function(e){return _t.current.useRef(e)};me.useState=function(e){return _t.current.useState(e)};me.useSyncExternalStore=function(e,t,n){return _t.current.useSyncExternalStore(e,t,n)};me.useTransition=function(){return _t.current.useTransition()};me.version="18.3.1";s0.exports=me;var D=s0.exports;const ro=r0(D),cE=KR({__proto__:null,default:ro},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hE=D,fE=Symbol.for("react.element"),dE=Symbol.for("react.fragment"),pE=Object.prototype.hasOwnProperty,mE=hE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gE={key:!0,ref:!0,__self:!0,__source:!0};function p0(e,t,n){var r,s={},a=null,u=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(u=t.ref);for(r in t)pE.call(t,r)&&!gE.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:fE,type:e,key:a,ref:u,props:s,_owner:mE.current}}Iu.Fragment=dE;Iu.jsx=p0;Iu.jsxs=p0;i0.exports=Iu;var an=i0.exports,m0={exports:{}},Yt={},g0={exports:{}},y0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(W,se){var ie=W.length;W.push(se);e:for(;0<ie;){var ne=ie-1>>>1,re=W[ne];if(0<s(re,se))W[ne]=se,W[ie]=re,ie=ne;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var se=W[0],ie=W.pop();if(ie!==se){W[0]=ie;e:for(var ne=0,re=W.length,ke=re>>>1;ne<ke;){var Vt=2*(ne+1)-1,Ee=W[Vt],St=Vt+1,fn=W[St];if(0>s(Ee,ie))St<re&&0>s(fn,Ee)?(W[ne]=fn,W[St]=ie,ne=St):(W[ne]=Ee,W[Vt]=ie,ne=Vt);else if(St<re&&0>s(fn,ie))W[ne]=fn,W[St]=ie,ne=St;else break e}}return se}function s(W,se){var ie=W.sortIndex-se.sortIndex;return ie!==0?ie:W.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var u=Date,h=u.now();e.unstable_now=function(){return u.now()-h}}var f=[],p=[],v=1,y=null,w=3,P=!1,_=!1,A=!1,k=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(W){for(var se=n(p);se!==null;){if(se.callback===null)r(p);else if(se.startTime<=W)r(p),se.sortIndex=se.expirationTime,t(f,se);else break;se=n(p)}}function T(W){if(A=!1,E(W),!_)if(n(f)!==null)_=!0,Re(L);else{var se=n(p);se!==null&&Z(T,se.startTime-W)}}function L(W,se){_=!1,A&&(A=!1,C(F),F=-1),P=!0;var ie=w;try{for(E(se),y=n(f);y!==null&&(!(y.expirationTime>se)||W&&!m());){var ne=y.callback;if(typeof ne=="function"){y.callback=null,w=y.priorityLevel;var re=ne(y.expirationTime<=se);se=e.unstable_now(),typeof re=="function"?y.callback=re:y===n(f)&&r(f),E(se)}else r(f);y=n(f)}if(y!==null)var ke=!0;else{var Vt=n(p);Vt!==null&&Z(T,Vt.startTime-se),ke=!1}return ke}finally{y=null,w=ie,P=!1}}var V=!1,H=null,F=-1,J=5,Y=-1;function m(){return!(e.unstable_now()-Y<J)}function Ae(){if(H!==null){var W=e.unstable_now();Y=W;var se=!0;try{se=H(!0,W)}finally{se?Le():(V=!1,H=null)}}else V=!1}var Le;if(typeof S=="function")Le=function(){S(Ae)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,ue=N.port2;N.port1.onmessage=Ae,Le=function(){ue.postMessage(null)}}else Le=function(){k(Ae,0)};function Re(W){H=W,V||(V=!0,Le())}function Z(W,se){F=k(function(){W(e.unstable_now())},se)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_continueExecution=function(){_||P||(_=!0,Re(L))},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_getFirstCallbackNode=function(){return n(f)},e.unstable_next=function(W){switch(w){case 1:case 2:case 3:var se=3;break;default:se=w}var ie=w;w=se;try{return W()}finally{w=ie}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(W,se){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ie=w;w=W;try{return se()}finally{w=ie}},e.unstable_scheduleCallback=function(W,se,ie){var ne=e.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?ne+ie:ne):ie=ne,W){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=ie+re,W={id:v++,callback:se,priorityLevel:W,startTime:ie,expirationTime:re,sortIndex:-1},ie>ne?(W.sortIndex=ie,t(p,W),n(f)===null&&W===n(p)&&(A?(C(F),F=-1):A=!0,Z(T,ie-ne))):(W.sortIndex=re,t(f,W),_||P||(_=!0,Re(L))),W},e.unstable_shouldYield=m,e.unstable_wrapCallback=function(W){var se=w;return function(){var ie=w;w=se;try{return W.apply(this,arguments)}finally{w=ie}}}})(y0);g0.exports=y0;var yE=g0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vE=D,$t=yE;function z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v0=new Set,ha={};function Fi(e,t){Ws(e,t),Ws(e+"Capture",t)}function Ws(e,t){for(ha[e]=t,e=0;e<t.length;e++)v0.add(t[e])}var hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lh=Object.prototype.hasOwnProperty,wE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Km={},Qm={};function SE(e){return Lh.call(Qm,e)?!0:Lh.call(Km,e)?!1:wE.test(e)?Qm[e]=!0:(Km[e]=!0,!1)}function CE(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function TE(e,t,n,r){if(t===null||typeof t>"u"||CE(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ot(e,t,n,r,s,a,u){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=u}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ut[e]=new Ot(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ut[t]=new Ot(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ut[e]=new Ot(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ut[e]=new Ot(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ut[e]=new Ot(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ut[e]=new Ot(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ut[e]=new Ot(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ut[e]=new Ot(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ut[e]=new Ot(e,5,!1,e.toLowerCase(),null,!1,!1)});var md=/[\-:]([a-z])/g;function gd(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(md,gd);ut[t]=new Ot(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(md,gd);ut[t]=new Ot(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(md,gd);ut[t]=new Ot(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ut[e]=new Ot(e,1,!1,e.toLowerCase(),null,!1,!1)});ut.xlinkHref=new Ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ut[e]=new Ot(e,1,!1,e.toLowerCase(),null,!0,!0)});function yd(e,t,n,r){var s=ut.hasOwnProperty(t)?ut[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(TE(t,n,s,r)&&(n=null),r||s===null?SE(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var gr=vE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dl=Symbol.for("react.element"),as=Symbol.for("react.portal"),ls=Symbol.for("react.fragment"),vd=Symbol.for("react.strict_mode"),Dh=Symbol.for("react.profiler"),w0=Symbol.for("react.provider"),S0=Symbol.for("react.context"),wd=Symbol.for("react.forward_ref"),Nh=Symbol.for("react.suspense"),Uh=Symbol.for("react.suspense_list"),Sd=Symbol.for("react.memo"),kr=Symbol.for("react.lazy"),C0=Symbol.for("react.offscreen"),Ym=Symbol.iterator;function ko(e){return e===null||typeof e!="object"?null:(e=Ym&&e[Ym]||e["@@iterator"],typeof e=="function"?e:null)}var Be=Object.assign,zc;function Go(e){if(zc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);zc=t&&t[1]||""}return`
`+zc+e}var Gc=!1;function Hc(e,t){if(!e||Gc)return"";Gc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(p){var r=p}Reflect.construct(e,[],t)}else{try{t.call()}catch(p){r=p}e.call(t.prototype)}else{try{throw Error()}catch(p){r=p}e()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var s=p.stack.split(`
`),a=r.stack.split(`
`),u=s.length-1,h=a.length-1;1<=u&&0<=h&&s[u]!==a[h];)h--;for(;1<=u&&0<=h;u--,h--)if(s[u]!==a[h]){if(u!==1||h!==1)do if(u--,h--,0>h||s[u]!==a[h]){var f=`
`+s[u].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=u&&0<=h);break}}}finally{Gc=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Go(e):""}function RE(e){switch(e.tag){case 5:return Go(e.type);case 16:return Go("Lazy");case 13:return Go("Suspense");case 19:return Go("SuspenseList");case 0:case 2:case 15:return e=Hc(e.type,!1),e;case 11:return e=Hc(e.type.render,!1),e;case 1:return e=Hc(e.type,!0),e;default:return""}}function Fh(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ls:return"Fragment";case as:return"Portal";case Dh:return"Profiler";case vd:return"StrictMode";case Nh:return"Suspense";case Uh:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case S0:return(e.displayName||"Context")+".Consumer";case w0:return(e._context.displayName||"Context")+".Provider";case wd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Sd:return t=e.displayName||null,t!==null?t:Fh(e.type)||"Memo";case kr:t=e._payload,e=e._init;try{return Fh(e(t))}catch{}}return null}function EE(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fh(t);case 8:return t===vd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Yr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function T0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function PE(e){var t=T0(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(u){r=""+u,a.call(this,u)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(u){r=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function pl(e){e._valueTracker||(e._valueTracker=PE(e))}function R0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=T0(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function eu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Bh(e,t){var n=t.checked;return Be({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Xm(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Yr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function E0(e,t){t=t.checked,t!=null&&yd(e,"checked",t,!1)}function Vh(e,t){E0(e,t);var n=Yr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?jh(e,t.type,n):t.hasOwnProperty("defaultValue")&&jh(e,t.type,Yr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Jm(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function jh(e,t,n){(t!=="number"||eu(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ho=Array.isArray;function Es(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Yr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function zh(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(z(91));return Be({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Zm(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(z(92));if(Ho(n)){if(1<n.length)throw Error(z(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Yr(n)}}function P0(e,t){var n=Yr(t.value),r=Yr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function eg(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function A0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?A0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ml,_0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ml=ml||document.createElement("div"),ml.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ml.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function fa(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Jo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AE=["Webkit","ms","Moz","O"];Object.keys(Jo).forEach(function(e){AE.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Jo[t]=Jo[e]})});function O0(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Jo.hasOwnProperty(e)&&Jo[e]?(""+t).trim():t+"px"}function k0(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=O0(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var _E=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hh(e,t){if(t){if(_E[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(z(62))}}function Wh(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qh=null;function Cd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $h=null,Ps=null,As=null;function tg(e){if(e=Ha(e)){if(typeof $h!="function")throw Error(z(280));var t=e.stateNode;t&&(t=Uu(t),$h(e.stateNode,e.type,t))}}function x0(e){Ps?As?As.push(e):As=[e]:Ps=e}function M0(){if(Ps){var e=Ps,t=As;if(As=Ps=null,tg(e),t)for(e=0;e<t.length;e++)tg(t[e])}}function I0(e,t){return e(t)}function b0(){}var Wc=!1;function L0(e,t,n){if(Wc)return e(t,n);Wc=!0;try{return I0(e,t,n)}finally{Wc=!1,(Ps!==null||As!==null)&&(b0(),M0())}}function da(e,t){var n=e.stateNode;if(n===null)return null;var r=Uu(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(z(231,t,typeof n));return n}var Kh=!1;if(hr)try{var xo={};Object.defineProperty(xo,"passive",{get:function(){Kh=!0}}),window.addEventListener("test",xo,xo),window.removeEventListener("test",xo,xo)}catch{Kh=!1}function OE(e,t,n,r,s,a,u,h,f){var p=Array.prototype.slice.call(arguments,3);try{t.apply(n,p)}catch(v){this.onError(v)}}var Zo=!1,tu=null,nu=!1,Qh=null,kE={onError:function(e){Zo=!0,tu=e}};function xE(e,t,n,r,s,a,u,h,f){Zo=!1,tu=null,OE.apply(kE,arguments)}function ME(e,t,n,r,s,a,u,h,f){if(xE.apply(this,arguments),Zo){if(Zo){var p=tu;Zo=!1,tu=null}else throw Error(z(198));nu||(nu=!0,Qh=p)}}function Bi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function D0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ng(e){if(Bi(e)!==e)throw Error(z(188))}function IE(e){var t=e.alternate;if(!t){if(t=Bi(e),t===null)throw Error(z(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return ng(s),e;if(a===r)return ng(s),t;a=a.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=a;else{for(var u=!1,h=s.child;h;){if(h===n){u=!0,n=s,r=a;break}if(h===r){u=!0,r=s,n=a;break}h=h.sibling}if(!u){for(h=a.child;h;){if(h===n){u=!0,n=a,r=s;break}if(h===r){u=!0,r=a,n=s;break}h=h.sibling}if(!u)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?e:t}function N0(e){return e=IE(e),e!==null?U0(e):null}function U0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=U0(e);if(t!==null)return t;e=e.sibling}return null}var F0=$t.unstable_scheduleCallback,rg=$t.unstable_cancelCallback,bE=$t.unstable_shouldYield,LE=$t.unstable_requestPaint,He=$t.unstable_now,DE=$t.unstable_getCurrentPriorityLevel,Td=$t.unstable_ImmediatePriority,B0=$t.unstable_UserBlockingPriority,ru=$t.unstable_NormalPriority,NE=$t.unstable_LowPriority,V0=$t.unstable_IdlePriority,bu=null,Vn=null;function UE(e){if(Vn&&typeof Vn.onCommitFiberRoot=="function")try{Vn.onCommitFiberRoot(bu,e,void 0,(e.current.flags&128)===128)}catch{}}var Cn=Math.clz32?Math.clz32:VE,FE=Math.log,BE=Math.LN2;function VE(e){return e>>>=0,e===0?32:31-(FE(e)/BE|0)|0}var gl=64,yl=4194304;function Wo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function iu(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes,u=n&268435455;if(u!==0){var h=u&~s;h!==0?r=Wo(h):(a&=u,a!==0&&(r=Wo(a)))}else u=n&~s,u!==0?r=Wo(u):a!==0&&(r=Wo(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Cn(t),s=1<<n,r|=e[n],t&=~s;return r}function jE(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zE(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var u=31-Cn(a),h=1<<u,f=s[u];f===-1?(!(h&n)||h&r)&&(s[u]=jE(h,t)):f<=t&&(e.expiredLanes|=h),a&=~h}}function Yh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function j0(){var e=gl;return gl<<=1,!(gl&4194240)&&(gl=64),e}function qc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function za(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Cn(t),e[t]=n}function GE(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Cn(n),a=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~a}}function Rd(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Cn(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Te=0;function z0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var G0,Ed,H0,W0,q0,Xh=!1,vl=[],zr=null,Gr=null,Hr=null,pa=new Map,ma=new Map,Mr=[],HE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ig(e,t){switch(e){case"focusin":case"focusout":zr=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":Hr=null;break;case"pointerover":case"pointerout":pa.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ma.delete(t.pointerId)}}function Mo(e,t,n,r,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},t!==null&&(t=Ha(t),t!==null&&Ed(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function WE(e,t,n,r,s){switch(t){case"focusin":return zr=Mo(zr,e,t,n,r,s),!0;case"dragenter":return Gr=Mo(Gr,e,t,n,r,s),!0;case"mouseover":return Hr=Mo(Hr,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return pa.set(a,Mo(pa.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,ma.set(a,Mo(ma.get(a)||null,e,t,n,r,s)),!0}return!1}function $0(e){var t=yi(e.target);if(t!==null){var n=Bi(t);if(n!==null){if(t=n.tag,t===13){if(t=D0(n),t!==null){e.blockedOn=t,q0(e.priority,function(){H0(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jh(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);qh=r,n.target.dispatchEvent(r),qh=null}else return t=Ha(n),t!==null&&Ed(t),e.blockedOn=n,!1;t.shift()}return!0}function sg(e,t,n){Fl(e)&&n.delete(t)}function qE(){Xh=!1,zr!==null&&Fl(zr)&&(zr=null),Gr!==null&&Fl(Gr)&&(Gr=null),Hr!==null&&Fl(Hr)&&(Hr=null),pa.forEach(sg),ma.forEach(sg)}function Io(e,t){e.blockedOn===t&&(e.blockedOn=null,Xh||(Xh=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,qE)))}function ga(e){function t(s){return Io(s,e)}if(0<vl.length){Io(vl[0],e);for(var n=1;n<vl.length;n++){var r=vl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(zr!==null&&Io(zr,e),Gr!==null&&Io(Gr,e),Hr!==null&&Io(Hr,e),pa.forEach(t),ma.forEach(t),n=0;n<Mr.length;n++)r=Mr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Mr.length&&(n=Mr[0],n.blockedOn===null);)$0(n),n.blockedOn===null&&Mr.shift()}var _s=gr.ReactCurrentBatchConfig,su=!0;function $E(e,t,n,r){var s=Te,a=_s.transition;_s.transition=null;try{Te=1,Pd(e,t,n,r)}finally{Te=s,_s.transition=a}}function KE(e,t,n,r){var s=Te,a=_s.transition;_s.transition=null;try{Te=4,Pd(e,t,n,r)}finally{Te=s,_s.transition=a}}function Pd(e,t,n,r){if(su){var s=Jh(e,t,n,r);if(s===null)nh(e,t,r,ou,n),ig(e,r);else if(WE(s,e,t,n,r))r.stopPropagation();else if(ig(e,r),t&4&&-1<HE.indexOf(e)){for(;s!==null;){var a=Ha(s);if(a!==null&&G0(a),a=Jh(e,t,n,r),a===null&&nh(e,t,r,ou,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else nh(e,t,r,null,n)}}var ou=null;function Jh(e,t,n,r){if(ou=null,e=Cd(r),e=yi(e),e!==null)if(t=Bi(e),t===null)e=null;else if(n=t.tag,n===13){if(e=D0(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ou=e,null}function K0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(DE()){case Td:return 1;case B0:return 4;case ru:case NE:return 16;case V0:return 536870912;default:return 16}default:return 16}}var Br=null,Ad=null,Bl=null;function Q0(){if(Bl)return Bl;var e,t=Ad,n=t.length,r,s="value"in Br?Br.value:Br.textContent,a=s.length;for(e=0;e<n&&t[e]===s[e];e++);var u=n-e;for(r=1;r<=u&&t[n-r]===s[a-r];r++);return Bl=s.slice(e,1<r?1-r:void 0)}function Vl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function wl(){return!0}function og(){return!1}function Xt(e){function t(n,r,s,a,u){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=u,this.currentTarget=null;for(var h in e)e.hasOwnProperty(h)&&(n=e[h],this[h]=n?n(a):a[h]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?wl:og,this.isPropagationStopped=og,this}return Be(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wl)},persist:function(){},isPersistent:wl}),t}var io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_d=Xt(io),Ga=Be({},io,{view:0,detail:0}),QE=Xt(Ga),$c,Kc,bo,Lu=Be({},Ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Od,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bo&&(bo&&e.type==="mousemove"?($c=e.screenX-bo.screenX,Kc=e.screenY-bo.screenY):Kc=$c=0,bo=e),$c)},movementY:function(e){return"movementY"in e?e.movementY:Kc}}),ag=Xt(Lu),YE=Be({},Lu,{dataTransfer:0}),XE=Xt(YE),JE=Be({},Ga,{relatedTarget:0}),Qc=Xt(JE),ZE=Be({},io,{animationName:0,elapsedTime:0,pseudoElement:0}),eP=Xt(ZE),tP=Be({},io,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),nP=Xt(tP),rP=Be({},io,{data:0}),lg=Xt(rP),iP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aP(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=oP[e])?!!t[e]:!1}function Od(){return aP}var lP=Be({},Ga,{key:function(e){if(e.key){var t=iP[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Vl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?sP[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Od,charCode:function(e){return e.type==="keypress"?Vl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),uP=Xt(lP),cP=Be({},Lu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ug=Xt(cP),hP=Be({},Ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Od}),fP=Xt(hP),dP=Be({},io,{propertyName:0,elapsedTime:0,pseudoElement:0}),pP=Xt(dP),mP=Be({},Lu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),gP=Xt(mP),yP=[9,13,27,32],kd=hr&&"CompositionEvent"in window,ea=null;hr&&"documentMode"in document&&(ea=document.documentMode);var vP=hr&&"TextEvent"in window&&!ea,Y0=hr&&(!kd||ea&&8<ea&&11>=ea),cg=" ",hg=!1;function X0(e,t){switch(e){case"keyup":return yP.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function J0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var us=!1;function wP(e,t){switch(e){case"compositionend":return J0(t);case"keypress":return t.which!==32?null:(hg=!0,cg);case"textInput":return e=t.data,e===cg&&hg?null:e;default:return null}}function SP(e,t){if(us)return e==="compositionend"||!kd&&X0(e,t)?(e=Q0(),Bl=Ad=Br=null,us=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Y0&&t.locale!=="ko"?null:t.data;default:return null}}var CP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!CP[e.type]:t==="textarea"}function Z0(e,t,n,r){x0(r),t=au(t,"onChange"),0<t.length&&(n=new _d("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ta=null,ya=null;function TP(e){cw(e,0)}function Du(e){var t=fs(e);if(R0(t))return e}function RP(e,t){if(e==="change")return t}var ew=!1;if(hr){var Yc;if(hr){var Xc="oninput"in document;if(!Xc){var dg=document.createElement("div");dg.setAttribute("oninput","return;"),Xc=typeof dg.oninput=="function"}Yc=Xc}else Yc=!1;ew=Yc&&(!document.documentMode||9<document.documentMode)}function pg(){ta&&(ta.detachEvent("onpropertychange",tw),ya=ta=null)}function tw(e){if(e.propertyName==="value"&&Du(ya)){var t=[];Z0(t,ya,e,Cd(e)),L0(TP,t)}}function EP(e,t,n){e==="focusin"?(pg(),ta=t,ya=n,ta.attachEvent("onpropertychange",tw)):e==="focusout"&&pg()}function PP(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Du(ya)}function AP(e,t){if(e==="click")return Du(t)}function _P(e,t){if(e==="input"||e==="change")return Du(t)}function OP(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Rn=typeof Object.is=="function"?Object.is:OP;function va(e,t){if(Rn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Lh.call(t,s)||!Rn(e[s],t[s]))return!1}return!0}function mg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gg(e,t){var n=mg(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mg(n)}}function nw(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?nw(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rw(){for(var e=window,t=eu();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=eu(e.document)}return t}function xd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function kP(e){var t=rw(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&nw(n.ownerDocument.documentElement,n)){if(r!==null&&xd(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!e.extend&&a>r&&(s=r,r=a,a=s),s=gg(n,a);var u=gg(n,r);s&&u&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(u.node,u.offset)):(t.setEnd(u.node,u.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var xP=hr&&"documentMode"in document&&11>=document.documentMode,cs=null,Zh=null,na=null,ef=!1;function yg(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ef||cs==null||cs!==eu(r)||(r=cs,"selectionStart"in r&&xd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),na&&va(na,r)||(na=r,r=au(Zh,"onSelect"),0<r.length&&(t=new _d("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=cs)))}function Sl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hs={animationend:Sl("Animation","AnimationEnd"),animationiteration:Sl("Animation","AnimationIteration"),animationstart:Sl("Animation","AnimationStart"),transitionend:Sl("Transition","TransitionEnd")},Jc={},iw={};hr&&(iw=document.createElement("div").style,"AnimationEvent"in window||(delete hs.animationend.animation,delete hs.animationiteration.animation,delete hs.animationstart.animation),"TransitionEvent"in window||delete hs.transitionend.transition);function Nu(e){if(Jc[e])return Jc[e];if(!hs[e])return e;var t=hs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in iw)return Jc[e]=t[n];return e}var sw=Nu("animationend"),ow=Nu("animationiteration"),aw=Nu("animationstart"),lw=Nu("transitionend"),uw=new Map,vg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ei(e,t){uw.set(e,t),Fi(t,[e])}for(var Zc=0;Zc<vg.length;Zc++){var eh=vg[Zc],MP=eh.toLowerCase(),IP=eh[0].toUpperCase()+eh.slice(1);ei(MP,"on"+IP)}ei(sw,"onAnimationEnd");ei(ow,"onAnimationIteration");ei(aw,"onAnimationStart");ei("dblclick","onDoubleClick");ei("focusin","onFocus");ei("focusout","onBlur");ei(lw,"onTransitionEnd");Ws("onMouseEnter",["mouseout","mouseover"]);Ws("onMouseLeave",["mouseout","mouseover"]);Ws("onPointerEnter",["pointerout","pointerover"]);Ws("onPointerLeave",["pointerout","pointerover"]);Fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bP=new Set("cancel close invalid load scroll toggle".split(" ").concat(qo));function wg(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,ME(r,t,void 0,e),e.currentTarget=null}function cw(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var u=r.length-1;0<=u;u--){var h=r[u],f=h.instance,p=h.currentTarget;if(h=h.listener,f!==a&&s.isPropagationStopped())break e;wg(s,h,p),a=f}else for(u=0;u<r.length;u++){if(h=r[u],f=h.instance,p=h.currentTarget,h=h.listener,f!==a&&s.isPropagationStopped())break e;wg(s,h,p),a=f}}}if(nu)throw e=Qh,nu=!1,Qh=null,e}function Me(e,t){var n=t[of];n===void 0&&(n=t[of]=new Set);var r=e+"__bubble";n.has(r)||(hw(t,e,2,!1),n.add(r))}function th(e,t,n){var r=0;t&&(r|=4),hw(n,e,r,t)}var Cl="_reactListening"+Math.random().toString(36).slice(2);function wa(e){if(!e[Cl]){e[Cl]=!0,v0.forEach(function(n){n!=="selectionchange"&&(bP.has(n)||th(n,!1,e),th(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Cl]||(t[Cl]=!0,th("selectionchange",!1,t))}}function hw(e,t,n,r){switch(K0(t)){case 1:var s=$E;break;case 4:s=KE;break;default:s=Pd}n=s.bind(null,t,n,e),s=void 0,!Kh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function nh(e,t,n,r,s){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var u=r.tag;if(u===3||u===4){var h=r.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(u===4)for(u=r.return;u!==null;){var f=u.tag;if((f===3||f===4)&&(f=u.stateNode.containerInfo,f===s||f.nodeType===8&&f.parentNode===s))return;u=u.return}for(;h!==null;){if(u=yi(h),u===null)return;if(f=u.tag,f===5||f===6){r=a=u;continue e}h=h.parentNode}}r=r.return}L0(function(){var p=a,v=Cd(n),y=[];e:{var w=uw.get(e);if(w!==void 0){var P=_d,_=e;switch(e){case"keypress":if(Vl(n)===0)break e;case"keydown":case"keyup":P=uP;break;case"focusin":_="focus",P=Qc;break;case"focusout":_="blur",P=Qc;break;case"beforeblur":case"afterblur":P=Qc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=ag;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=XE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=fP;break;case sw:case ow:case aw:P=eP;break;case lw:P=pP;break;case"scroll":P=QE;break;case"wheel":P=gP;break;case"copy":case"cut":case"paste":P=nP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=ug}var A=(t&4)!==0,k=!A&&e==="scroll",C=A?w!==null?w+"Capture":null:w;A=[];for(var S=p,E;S!==null;){E=S;var T=E.stateNode;if(E.tag===5&&T!==null&&(E=T,C!==null&&(T=da(S,C),T!=null&&A.push(Sa(S,T,E)))),k)break;S=S.return}0<A.length&&(w=new P(w,_,null,n,v),y.push({event:w,listeners:A}))}}if(!(t&7)){e:{if(w=e==="mouseover"||e==="pointerover",P=e==="mouseout"||e==="pointerout",w&&n!==qh&&(_=n.relatedTarget||n.fromElement)&&(yi(_)||_[fr]))break e;if((P||w)&&(w=v.window===v?v:(w=v.ownerDocument)?w.defaultView||w.parentWindow:window,P?(_=n.relatedTarget||n.toElement,P=p,_=_?yi(_):null,_!==null&&(k=Bi(_),_!==k||_.tag!==5&&_.tag!==6)&&(_=null)):(P=null,_=p),P!==_)){if(A=ag,T="onMouseLeave",C="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(A=ug,T="onPointerLeave",C="onPointerEnter",S="pointer"),k=P==null?w:fs(P),E=_==null?w:fs(_),w=new A(T,S+"leave",P,n,v),w.target=k,w.relatedTarget=E,T=null,yi(v)===p&&(A=new A(C,S+"enter",_,n,v),A.target=E,A.relatedTarget=k,T=A),k=T,P&&_)t:{for(A=P,C=_,S=0,E=A;E;E=is(E))S++;for(E=0,T=C;T;T=is(T))E++;for(;0<S-E;)A=is(A),S--;for(;0<E-S;)C=is(C),E--;for(;S--;){if(A===C||C!==null&&A===C.alternate)break t;A=is(A),C=is(C)}A=null}else A=null;P!==null&&Sg(y,w,P,A,!1),_!==null&&k!==null&&Sg(y,k,_,A,!0)}}e:{if(w=p?fs(p):window,P=w.nodeName&&w.nodeName.toLowerCase(),P==="select"||P==="input"&&w.type==="file")var L=RP;else if(fg(w))if(ew)L=_P;else{L=PP;var V=EP}else(P=w.nodeName)&&P.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(L=AP);if(L&&(L=L(e,p))){Z0(y,L,n,v);break e}V&&V(e,w,p),e==="focusout"&&(V=w._wrapperState)&&V.controlled&&w.type==="number"&&jh(w,"number",w.value)}switch(V=p?fs(p):window,e){case"focusin":(fg(V)||V.contentEditable==="true")&&(cs=V,Zh=p,na=null);break;case"focusout":na=Zh=cs=null;break;case"mousedown":ef=!0;break;case"contextmenu":case"mouseup":case"dragend":ef=!1,yg(y,n,v);break;case"selectionchange":if(xP)break;case"keydown":case"keyup":yg(y,n,v)}var H;if(kd)e:{switch(e){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else us?X0(e,n)&&(F="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(F="onCompositionStart");F&&(Y0&&n.locale!=="ko"&&(us||F!=="onCompositionStart"?F==="onCompositionEnd"&&us&&(H=Q0()):(Br=v,Ad="value"in Br?Br.value:Br.textContent,us=!0)),V=au(p,F),0<V.length&&(F=new lg(F,e,null,n,v),y.push({event:F,listeners:V}),H?F.data=H:(H=J0(n),H!==null&&(F.data=H)))),(H=vP?wP(e,n):SP(e,n))&&(p=au(p,"onBeforeInput"),0<p.length&&(v=new lg("onBeforeInput","beforeinput",null,n,v),y.push({event:v,listeners:p}),v.data=H))}cw(y,t)})}function Sa(e,t,n){return{instance:e,listener:t,currentTarget:n}}function au(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=da(e,n),a!=null&&r.unshift(Sa(e,a,s)),a=da(e,t),a!=null&&r.push(Sa(e,a,s))),e=e.return}return r}function is(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Sg(e,t,n,r,s){for(var a=t._reactName,u=[];n!==null&&n!==r;){var h=n,f=h.alternate,p=h.stateNode;if(f!==null&&f===r)break;h.tag===5&&p!==null&&(h=p,s?(f=da(n,a),f!=null&&u.unshift(Sa(n,f,h))):s||(f=da(n,a),f!=null&&u.push(Sa(n,f,h)))),n=n.return}u.length!==0&&e.push({event:t,listeners:u})}var LP=/\r\n?/g,DP=/\u0000|\uFFFD/g;function Cg(e){return(typeof e=="string"?e:""+e).replace(LP,`
`).replace(DP,"")}function Tl(e,t,n){if(t=Cg(t),Cg(e)!==t&&n)throw Error(z(425))}function lu(){}var tf=null,nf=null;function rf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var sf=typeof setTimeout=="function"?setTimeout:void 0,NP=typeof clearTimeout=="function"?clearTimeout:void 0,Tg=typeof Promise=="function"?Promise:void 0,UP=typeof queueMicrotask=="function"?queueMicrotask:typeof Tg<"u"?function(e){return Tg.resolve(null).then(e).catch(FP)}:sf;function FP(e){setTimeout(function(){throw e})}function rh(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),ga(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ga(t)}function Wr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Rg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var so=Math.random().toString(36).slice(2),Bn="__reactFiber$"+so,Ca="__reactProps$"+so,fr="__reactContainer$"+so,of="__reactEvents$"+so,BP="__reactListeners$"+so,VP="__reactHandles$"+so;function yi(e){var t=e[Bn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fr]||n[Bn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Rg(e);e!==null;){if(n=e[Bn])return n;e=Rg(e)}return t}e=n,n=e.parentNode}return null}function Ha(e){return e=e[Bn]||e[fr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function fs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(z(33))}function Uu(e){return e[Ca]||null}var af=[],ds=-1;function ti(e){return{current:e}}function Ie(e){0>ds||(e.current=af[ds],af[ds]=null,ds--)}function Oe(e,t){ds++,af[ds]=e.current,e.current=t}var Xr={},wt=ti(Xr),Ut=ti(!1),bi=Xr;function qs(e,t){var n=e.type.contextTypes;if(!n)return Xr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ft(e){return e=e.childContextTypes,e!=null}function uu(){Ie(Ut),Ie(wt)}function Eg(e,t,n){if(wt.current!==Xr)throw Error(z(168));Oe(wt,t),Oe(Ut,n)}function fw(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(z(108,EE(e)||"Unknown",s));return Be({},n,r)}function cu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Xr,bi=wt.current,Oe(wt,e),Oe(Ut,Ut.current),!0}function Pg(e,t,n){var r=e.stateNode;if(!r)throw Error(z(169));n?(e=fw(e,t,bi),r.__reactInternalMemoizedMergedChildContext=e,Ie(Ut),Ie(wt),Oe(wt,e)):Ie(Ut),Oe(Ut,n)}var er=null,Fu=!1,ih=!1;function dw(e){er===null?er=[e]:er.push(e)}function jP(e){Fu=!0,dw(e)}function ni(){if(!ih&&er!==null){ih=!0;var e=0,t=Te;try{var n=er;for(Te=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}er=null,Fu=!1}catch(s){throw er!==null&&(er=er.slice(e+1)),F0(Td,ni),s}finally{Te=t,ih=!1}}return null}var ps=[],ms=0,hu=null,fu=0,rn=[],sn=0,Li=null,tr=1,nr="";function fi(e,t){ps[ms++]=fu,ps[ms++]=hu,hu=e,fu=t}function pw(e,t,n){rn[sn++]=tr,rn[sn++]=nr,rn[sn++]=Li,Li=e;var r=tr;e=nr;var s=32-Cn(r)-1;r&=~(1<<s),n+=1;var a=32-Cn(t)+s;if(30<a){var u=s-s%5;a=(r&(1<<u)-1).toString(32),r>>=u,s-=u,tr=1<<32-Cn(t)+s|n<<s|r,nr=a+e}else tr=1<<a|n<<s|r,nr=e}function Md(e){e.return!==null&&(fi(e,1),pw(e,1,0))}function Id(e){for(;e===hu;)hu=ps[--ms],ps[ms]=null,fu=ps[--ms],ps[ms]=null;for(;e===Li;)Li=rn[--sn],rn[sn]=null,nr=rn[--sn],rn[sn]=null,tr=rn[--sn],rn[sn]=null}var qt=null,Wt=null,be=!1,wn=null;function mw(e,t){var n=on(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ag(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,qt=e,Wt=Wr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,qt=e,Wt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Li!==null?{id:tr,overflow:nr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=on(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,qt=e,Wt=null,!0):!1;default:return!1}}function lf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function uf(e){if(be){var t=Wt;if(t){var n=t;if(!Ag(e,t)){if(lf(e))throw Error(z(418));t=Wr(n.nextSibling);var r=qt;t&&Ag(e,t)?mw(r,n):(e.flags=e.flags&-4097|2,be=!1,qt=e)}}else{if(lf(e))throw Error(z(418));e.flags=e.flags&-4097|2,be=!1,qt=e}}}function _g(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;qt=e}function Rl(e){if(e!==qt)return!1;if(!be)return _g(e),be=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!rf(e.type,e.memoizedProps)),t&&(t=Wt)){if(lf(e))throw gw(),Error(z(418));for(;t;)mw(e,t),t=Wr(t.nextSibling)}if(_g(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Wt=Wr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Wt=null}}else Wt=qt?Wr(e.stateNode.nextSibling):null;return!0}function gw(){for(var e=Wt;e;)e=Wr(e.nextSibling)}function $s(){Wt=qt=null,be=!1}function bd(e){wn===null?wn=[e]:wn.push(e)}var zP=gr.ReactCurrentBatchConfig;function Lo(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,e));var s=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(u){var h=s.refs;u===null?delete h[a]:h[a]=u},t._stringRef=a,t)}if(typeof e!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,e))}return e}function El(e,t){throw e=Object.prototype.toString.call(t),Error(z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Og(e){var t=e._init;return t(e._payload)}function yw(e){function t(C,S){if(e){var E=C.deletions;E===null?(C.deletions=[S],C.flags|=16):E.push(S)}}function n(C,S){if(!e)return null;for(;S!==null;)t(C,S),S=S.sibling;return null}function r(C,S){for(C=new Map;S!==null;)S.key!==null?C.set(S.key,S):C.set(S.index,S),S=S.sibling;return C}function s(C,S){return C=Qr(C,S),C.index=0,C.sibling=null,C}function a(C,S,E){return C.index=E,e?(E=C.alternate,E!==null?(E=E.index,E<S?(C.flags|=2,S):E):(C.flags|=2,S)):(C.flags|=1048576,S)}function u(C){return e&&C.alternate===null&&(C.flags|=2),C}function h(C,S,E,T){return S===null||S.tag!==6?(S=hh(E,C.mode,T),S.return=C,S):(S=s(S,E),S.return=C,S)}function f(C,S,E,T){var L=E.type;return L===ls?v(C,S,E.props.children,T,E.key):S!==null&&(S.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===kr&&Og(L)===S.type)?(T=s(S,E.props),T.ref=Lo(C,S,E),T.return=C,T):(T=$l(E.type,E.key,E.props,null,C.mode,T),T.ref=Lo(C,S,E),T.return=C,T)}function p(C,S,E,T){return S===null||S.tag!==4||S.stateNode.containerInfo!==E.containerInfo||S.stateNode.implementation!==E.implementation?(S=fh(E,C.mode,T),S.return=C,S):(S=s(S,E.children||[]),S.return=C,S)}function v(C,S,E,T,L){return S===null||S.tag!==7?(S=xi(E,C.mode,T,L),S.return=C,S):(S=s(S,E),S.return=C,S)}function y(C,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return S=hh(""+S,C.mode,E),S.return=C,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case dl:return E=$l(S.type,S.key,S.props,null,C.mode,E),E.ref=Lo(C,null,S),E.return=C,E;case as:return S=fh(S,C.mode,E),S.return=C,S;case kr:var T=S._init;return y(C,T(S._payload),E)}if(Ho(S)||ko(S))return S=xi(S,C.mode,E,null),S.return=C,S;El(C,S)}return null}function w(C,S,E,T){var L=S!==null?S.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return L!==null?null:h(C,S,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case dl:return E.key===L?f(C,S,E,T):null;case as:return E.key===L?p(C,S,E,T):null;case kr:return L=E._init,w(C,S,L(E._payload),T)}if(Ho(E)||ko(E))return L!==null?null:v(C,S,E,T,null);El(C,E)}return null}function P(C,S,E,T,L){if(typeof T=="string"&&T!==""||typeof T=="number")return C=C.get(E)||null,h(S,C,""+T,L);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case dl:return C=C.get(T.key===null?E:T.key)||null,f(S,C,T,L);case as:return C=C.get(T.key===null?E:T.key)||null,p(S,C,T,L);case kr:var V=T._init;return P(C,S,E,V(T._payload),L)}if(Ho(T)||ko(T))return C=C.get(E)||null,v(S,C,T,L,null);El(S,T)}return null}function _(C,S,E,T){for(var L=null,V=null,H=S,F=S=0,J=null;H!==null&&F<E.length;F++){H.index>F?(J=H,H=null):J=H.sibling;var Y=w(C,H,E[F],T);if(Y===null){H===null&&(H=J);break}e&&H&&Y.alternate===null&&t(C,H),S=a(Y,S,F),V===null?L=Y:V.sibling=Y,V=Y,H=J}if(F===E.length)return n(C,H),be&&fi(C,F),L;if(H===null){for(;F<E.length;F++)H=y(C,E[F],T),H!==null&&(S=a(H,S,F),V===null?L=H:V.sibling=H,V=H);return be&&fi(C,F),L}for(H=r(C,H);F<E.length;F++)J=P(H,C,F,E[F],T),J!==null&&(e&&J.alternate!==null&&H.delete(J.key===null?F:J.key),S=a(J,S,F),V===null?L=J:V.sibling=J,V=J);return e&&H.forEach(function(m){return t(C,m)}),be&&fi(C,F),L}function A(C,S,E,T){var L=ko(E);if(typeof L!="function")throw Error(z(150));if(E=L.call(E),E==null)throw Error(z(151));for(var V=L=null,H=S,F=S=0,J=null,Y=E.next();H!==null&&!Y.done;F++,Y=E.next()){H.index>F?(J=H,H=null):J=H.sibling;var m=w(C,H,Y.value,T);if(m===null){H===null&&(H=J);break}e&&H&&m.alternate===null&&t(C,H),S=a(m,S,F),V===null?L=m:V.sibling=m,V=m,H=J}if(Y.done)return n(C,H),be&&fi(C,F),L;if(H===null){for(;!Y.done;F++,Y=E.next())Y=y(C,Y.value,T),Y!==null&&(S=a(Y,S,F),V===null?L=Y:V.sibling=Y,V=Y);return be&&fi(C,F),L}for(H=r(C,H);!Y.done;F++,Y=E.next())Y=P(H,C,F,Y.value,T),Y!==null&&(e&&Y.alternate!==null&&H.delete(Y.key===null?F:Y.key),S=a(Y,S,F),V===null?L=Y:V.sibling=Y,V=Y);return e&&H.forEach(function(Ae){return t(C,Ae)}),be&&fi(C,F),L}function k(C,S,E,T){if(typeof E=="object"&&E!==null&&E.type===ls&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case dl:e:{for(var L=E.key,V=S;V!==null;){if(V.key===L){if(L=E.type,L===ls){if(V.tag===7){n(C,V.sibling),S=s(V,E.props.children),S.return=C,C=S;break e}}else if(V.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===kr&&Og(L)===V.type){n(C,V.sibling),S=s(V,E.props),S.ref=Lo(C,V,E),S.return=C,C=S;break e}n(C,V);break}else t(C,V);V=V.sibling}E.type===ls?(S=xi(E.props.children,C.mode,T,E.key),S.return=C,C=S):(T=$l(E.type,E.key,E.props,null,C.mode,T),T.ref=Lo(C,S,E),T.return=C,C=T)}return u(C);case as:e:{for(V=E.key;S!==null;){if(S.key===V)if(S.tag===4&&S.stateNode.containerInfo===E.containerInfo&&S.stateNode.implementation===E.implementation){n(C,S.sibling),S=s(S,E.children||[]),S.return=C,C=S;break e}else{n(C,S);break}else t(C,S);S=S.sibling}S=fh(E,C.mode,T),S.return=C,C=S}return u(C);case kr:return V=E._init,k(C,S,V(E._payload),T)}if(Ho(E))return _(C,S,E,T);if(ko(E))return A(C,S,E,T);El(C,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,S!==null&&S.tag===6?(n(C,S.sibling),S=s(S,E),S.return=C,C=S):(n(C,S),S=hh(E,C.mode,T),S.return=C,C=S),u(C)):n(C,S)}return k}var Ks=yw(!0),vw=yw(!1),du=ti(null),pu=null,gs=null,Ld=null;function Dd(){Ld=gs=pu=null}function Nd(e){var t=du.current;Ie(du),e._currentValue=t}function cf(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Os(e,t){pu=e,Ld=gs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Nt=!0),e.firstContext=null)}function un(e){var t=e._currentValue;if(Ld!==e)if(e={context:e,memoizedValue:t,next:null},gs===null){if(pu===null)throw Error(z(308));gs=e,pu.dependencies={lanes:0,firstContext:e}}else gs=gs.next=e;return t}var vi=null;function Ud(e){vi===null?vi=[e]:vi.push(e)}function ww(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Ud(t)):(n.next=s.next,s.next=n),t.interleaved=n,dr(e,r)}function dr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var xr=!1;function Fd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sw(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function sr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function qr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ve&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,dr(e,n)}return s=r.interleaved,s===null?(t.next=t,Ud(r)):(t.next=s.next,s.next=t),r.interleaved=t,dr(e,n)}function jl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Rd(e,n)}}function kg(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var u={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=u:a=a.next=u,n=n.next}while(n!==null);a===null?s=a=t:a=a.next=t}else s=a=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function mu(e,t,n,r){var s=e.updateQueue;xr=!1;var a=s.firstBaseUpdate,u=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var f=h,p=f.next;f.next=null,u===null?a=p:u.next=p,u=f;var v=e.alternate;v!==null&&(v=v.updateQueue,h=v.lastBaseUpdate,h!==u&&(h===null?v.firstBaseUpdate=p:h.next=p,v.lastBaseUpdate=f))}if(a!==null){var y=s.baseState;u=0,v=p=f=null,h=a;do{var w=h.lane,P=h.eventTime;if((r&w)===w){v!==null&&(v=v.next={eventTime:P,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var _=e,A=h;switch(w=t,P=n,A.tag){case 1:if(_=A.payload,typeof _=="function"){y=_.call(P,y,w);break e}y=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=A.payload,w=typeof _=="function"?_.call(P,y,w):_,w==null)break e;y=Be({},y,w);break e;case 2:xr=!0}}h.callback!==null&&h.lane!==0&&(e.flags|=64,w=s.effects,w===null?s.effects=[h]:w.push(h))}else P={eventTime:P,lane:w,tag:h.tag,payload:h.payload,callback:h.callback,next:null},v===null?(p=v=P,f=y):v=v.next=P,u|=w;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;w=h,h=w.next,w.next=null,s.lastBaseUpdate=w,s.shared.pending=null}}while(!0);if(v===null&&(f=y),s.baseState=f,s.firstBaseUpdate=p,s.lastBaseUpdate=v,t=s.shared.interleaved,t!==null){s=t;do u|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);Ni|=u,e.lanes=u,e.memoizedState=y}}function xg(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var Wa={},jn=ti(Wa),Ta=ti(Wa),Ra=ti(Wa);function wi(e){if(e===Wa)throw Error(z(174));return e}function Bd(e,t){switch(Oe(Ra,t),Oe(Ta,e),Oe(jn,Wa),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Gh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Gh(t,e)}Ie(jn),Oe(jn,t)}function Qs(){Ie(jn),Ie(Ta),Ie(Ra)}function Cw(e){wi(Ra.current);var t=wi(jn.current),n=Gh(t,e.type);t!==n&&(Oe(Ta,e),Oe(jn,n))}function Vd(e){Ta.current===e&&(Ie(jn),Ie(Ta))}var Ne=ti(0);function gu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sh=[];function jd(){for(var e=0;e<sh.length;e++)sh[e]._workInProgressVersionPrimary=null;sh.length=0}var zl=gr.ReactCurrentDispatcher,oh=gr.ReactCurrentBatchConfig,Di=0,Fe=null,Je=null,nt=null,yu=!1,ra=!1,Ea=0,GP=0;function ft(){throw Error(z(321))}function zd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Rn(e[n],t[n]))return!1;return!0}function Gd(e,t,n,r,s,a){if(Di=a,Fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,zl.current=e===null||e.memoizedState===null?$P:KP,e=n(r,s),ra){a=0;do{if(ra=!1,Ea=0,25<=a)throw Error(z(301));a+=1,nt=Je=null,t.updateQueue=null,zl.current=QP,e=n(r,s)}while(ra)}if(zl.current=vu,t=Je!==null&&Je.next!==null,Di=0,nt=Je=Fe=null,yu=!1,t)throw Error(z(300));return e}function Hd(){var e=Ea!==0;return Ea=0,e}function In(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?Fe.memoizedState=nt=e:nt=nt.next=e,nt}function cn(){if(Je===null){var e=Fe.alternate;e=e!==null?e.memoizedState:null}else e=Je.next;var t=nt===null?Fe.memoizedState:nt.next;if(t!==null)nt=t,Je=e;else{if(e===null)throw Error(z(310));Je=e,e={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},nt===null?Fe.memoizedState=nt=e:nt=nt.next=e}return nt}function Pa(e,t){return typeof t=="function"?t(e):t}function ah(e){var t=cn(),n=t.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=e;var r=Je,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var u=s.next;s.next=a.next,a.next=u}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var h=u=null,f=null,p=a;do{var v=p.lane;if((Di&v)===v)f!==null&&(f=f.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:e(r,p.action);else{var y={lane:v,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};f===null?(h=f=y,u=r):f=f.next=y,Fe.lanes|=v,Ni|=v}p=p.next}while(p!==null&&p!==a);f===null?u=r:f.next=h,Rn(r,t.memoizedState)||(Nt=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=f,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do a=s.lane,Fe.lanes|=a,Ni|=a,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function lh(e){var t=cn(),n=t.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(s!==null){n.pending=null;var u=s=s.next;do a=e(a,u.action),u=u.next;while(u!==s);Rn(a,t.memoizedState)||(Nt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Tw(){}function Rw(e,t){var n=Fe,r=cn(),s=t(),a=!Rn(r.memoizedState,s);if(a&&(r.memoizedState=s,Nt=!0),r=r.queue,Wd(Aw.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||nt!==null&&nt.memoizedState.tag&1){if(n.flags|=2048,Aa(9,Pw.bind(null,n,r,s,t),void 0,null),rt===null)throw Error(z(349));Di&30||Ew(n,t,s)}return s}function Ew(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Pw(e,t,n,r){t.value=n,t.getSnapshot=r,_w(t)&&Ow(e)}function Aw(e,t,n){return n(function(){_w(t)&&Ow(e)})}function _w(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Rn(e,n)}catch{return!0}}function Ow(e){var t=dr(e,1);t!==null&&Tn(t,e,1,-1)}function Mg(e){var t=In();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:e},t.queue=e,e=e.dispatch=qP.bind(null,Fe,e),[t.memoizedState,e]}function Aa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function kw(){return cn().memoizedState}function Gl(e,t,n,r){var s=In();Fe.flags|=e,s.memoizedState=Aa(1|t,n,void 0,r===void 0?null:r)}function Bu(e,t,n,r){var s=cn();r=r===void 0?null:r;var a=void 0;if(Je!==null){var u=Je.memoizedState;if(a=u.destroy,r!==null&&zd(r,u.deps)){s.memoizedState=Aa(t,n,a,r);return}}Fe.flags|=e,s.memoizedState=Aa(1|t,n,a,r)}function Ig(e,t){return Gl(8390656,8,e,t)}function Wd(e,t){return Bu(2048,8,e,t)}function xw(e,t){return Bu(4,2,e,t)}function Mw(e,t){return Bu(4,4,e,t)}function Iw(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function bw(e,t,n){return n=n!=null?n.concat([e]):null,Bu(4,4,Iw.bind(null,t,e),n)}function qd(){}function Lw(e,t){var n=cn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&zd(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Dw(e,t){var n=cn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&zd(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Nw(e,t,n){return Di&21?(Rn(n,t)||(n=j0(),Fe.lanes|=n,Ni|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Nt=!0),e.memoizedState=n)}function HP(e,t){var n=Te;Te=n!==0&&4>n?n:4,e(!0);var r=oh.transition;oh.transition={};try{e(!1),t()}finally{Te=n,oh.transition=r}}function Uw(){return cn().memoizedState}function WP(e,t,n){var r=Kr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Fw(e))Bw(t,n);else if(n=ww(e,t,n,r),n!==null){var s=Pt();Tn(n,e,r,s),Vw(n,t,r)}}function qP(e,t,n){var r=Kr(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Fw(e))Bw(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var u=t.lastRenderedState,h=a(u,n);if(s.hasEagerState=!0,s.eagerState=h,Rn(h,u)){var f=t.interleaved;f===null?(s.next=s,Ud(t)):(s.next=f.next,f.next=s),t.interleaved=s;return}}catch{}finally{}n=ww(e,t,s,r),n!==null&&(s=Pt(),Tn(n,e,r,s),Vw(n,t,r))}}function Fw(e){var t=e.alternate;return e===Fe||t!==null&&t===Fe}function Bw(e,t){ra=yu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Vw(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Rd(e,n)}}var vu={readContext:un,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},$P={readContext:un,useCallback:function(e,t){return In().memoizedState=[e,t===void 0?null:t],e},useContext:un,useEffect:Ig,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Gl(4194308,4,Iw.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Gl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Gl(4,2,e,t)},useMemo:function(e,t){var n=In();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=In();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=WP.bind(null,Fe,e),[r.memoizedState,e]},useRef:function(e){var t=In();return e={current:e},t.memoizedState=e},useState:Mg,useDebugValue:qd,useDeferredValue:function(e){return In().memoizedState=e},useTransition:function(){var e=Mg(!1),t=e[0];return e=HP.bind(null,e[1]),In().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Fe,s=In();if(be){if(n===void 0)throw Error(z(407));n=n()}else{if(n=t(),rt===null)throw Error(z(349));Di&30||Ew(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,Ig(Aw.bind(null,r,a,e),[e]),r.flags|=2048,Aa(9,Pw.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=In(),t=rt.identifierPrefix;if(be){var n=nr,r=tr;n=(r&~(1<<32-Cn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ea++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=GP++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},KP={readContext:un,useCallback:Lw,useContext:un,useEffect:Wd,useImperativeHandle:bw,useInsertionEffect:xw,useLayoutEffect:Mw,useMemo:Dw,useReducer:ah,useRef:kw,useState:function(){return ah(Pa)},useDebugValue:qd,useDeferredValue:function(e){var t=cn();return Nw(t,Je.memoizedState,e)},useTransition:function(){var e=ah(Pa)[0],t=cn().memoizedState;return[e,t]},useMutableSource:Tw,useSyncExternalStore:Rw,useId:Uw,unstable_isNewReconciler:!1},QP={readContext:un,useCallback:Lw,useContext:un,useEffect:Wd,useImperativeHandle:bw,useInsertionEffect:xw,useLayoutEffect:Mw,useMemo:Dw,useReducer:lh,useRef:kw,useState:function(){return lh(Pa)},useDebugValue:qd,useDeferredValue:function(e){var t=cn();return Je===null?t.memoizedState=e:Nw(t,Je.memoizedState,e)},useTransition:function(){var e=lh(Pa)[0],t=cn().memoizedState;return[e,t]},useMutableSource:Tw,useSyncExternalStore:Rw,useId:Uw,unstable_isNewReconciler:!1};function gn(e,t){if(e&&e.defaultProps){t=Be({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function hf(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Be({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Vu={isMounted:function(e){return(e=e._reactInternals)?Bi(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Pt(),s=Kr(e),a=sr(r,s);a.payload=t,n!=null&&(a.callback=n),t=qr(e,a,s),t!==null&&(Tn(t,e,s,r),jl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Pt(),s=Kr(e),a=sr(r,s);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=qr(e,a,s),t!==null&&(Tn(t,e,s,r),jl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Pt(),r=Kr(e),s=sr(n,r);s.tag=2,t!=null&&(s.callback=t),t=qr(e,s,r),t!==null&&(Tn(t,e,r,n),jl(t,e,r))}};function bg(e,t,n,r,s,a,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,u):t.prototype&&t.prototype.isPureReactComponent?!va(n,r)||!va(s,a):!0}function jw(e,t,n){var r=!1,s=Xr,a=t.contextType;return typeof a=="object"&&a!==null?a=un(a):(s=Ft(t)?bi:wt.current,r=t.contextTypes,a=(r=r!=null)?qs(e,s):Xr),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Vu,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function Lg(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Vu.enqueueReplaceState(t,t.state,null)}function ff(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Fd(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=un(a):(a=Ft(t)?bi:wt.current,s.context=qs(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(hf(e,t,a,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Vu.enqueueReplaceState(s,s.state,null),mu(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ys(e,t){try{var n="",r=t;do n+=RE(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function uh(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function df(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var YP=typeof WeakMap=="function"?WeakMap:Map;function zw(e,t,n){n=sr(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Su||(Su=!0,Rf=r),df(e,t)},n}function Gw(e,t,n){n=sr(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){df(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){df(e,t),typeof r!="function"&&($r===null?$r=new Set([this]):$r.add(this));var u=t.stack;this.componentDidCatch(t.value,{componentStack:u!==null?u:""})}),n}function Dg(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new YP;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=cA.bind(null,e,t,n),t.then(e,e))}function Ng(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ug(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=sr(-1,1),t.tag=2,qr(n,t,1))),n.lanes|=1),e)}var XP=gr.ReactCurrentOwner,Nt=!1;function Et(e,t,n,r){t.child=e===null?vw(t,null,n,r):Ks(t,e.child,n,r)}function Fg(e,t,n,r,s){n=n.render;var a=t.ref;return Os(t,s),r=Gd(e,t,n,r,a,s),n=Hd(),e!==null&&!Nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,pr(e,t,s)):(be&&n&&Md(t),t.flags|=1,Et(e,t,r,s),t.child)}function Bg(e,t,n,r,s){if(e===null){var a=n.type;return typeof a=="function"&&!ep(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,Hw(e,t,a,r,s)):(e=$l(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var u=a.memoizedProps;if(n=n.compare,n=n!==null?n:va,n(u,r)&&e.ref===t.ref)return pr(e,t,s)}return t.flags|=1,e=Qr(a,r),e.ref=t.ref,e.return=t,t.child=e}function Hw(e,t,n,r,s){if(e!==null){var a=e.memoizedProps;if(va(a,r)&&e.ref===t.ref)if(Nt=!1,t.pendingProps=r=a,(e.lanes&s)!==0)e.flags&131072&&(Nt=!0);else return t.lanes=e.lanes,pr(e,t,s)}return pf(e,t,n,r,s)}function Ww(e,t,n){var r=t.pendingProps,s=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(vs,Ht),Ht|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Oe(vs,Ht),Ht|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Oe(vs,Ht),Ht|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,Oe(vs,Ht),Ht|=r;return Et(e,t,s,n),t.child}function qw(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function pf(e,t,n,r,s){var a=Ft(n)?bi:wt.current;return a=qs(t,a),Os(t,s),n=Gd(e,t,n,r,a,s),r=Hd(),e!==null&&!Nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,pr(e,t,s)):(be&&r&&Md(t),t.flags|=1,Et(e,t,n,s),t.child)}function Vg(e,t,n,r,s){if(Ft(n)){var a=!0;cu(t)}else a=!1;if(Os(t,s),t.stateNode===null)Hl(e,t),jw(t,n,r),ff(t,n,r,s),r=!0;else if(e===null){var u=t.stateNode,h=t.memoizedProps;u.props=h;var f=u.context,p=n.contextType;typeof p=="object"&&p!==null?p=un(p):(p=Ft(n)?bi:wt.current,p=qs(t,p));var v=n.getDerivedStateFromProps,y=typeof v=="function"||typeof u.getSnapshotBeforeUpdate=="function";y||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==r||f!==p)&&Lg(t,u,r,p),xr=!1;var w=t.memoizedState;u.state=w,mu(t,r,u,s),f=t.memoizedState,h!==r||w!==f||Ut.current||xr?(typeof v=="function"&&(hf(t,n,v,r),f=t.memoizedState),(h=xr||bg(t,n,h,r,w,f,p))?(y||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=f),u.props=r,u.state=f,u.context=p,r=h):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{u=t.stateNode,Sw(e,t),h=t.memoizedProps,p=t.type===t.elementType?h:gn(t.type,h),u.props=p,y=t.pendingProps,w=u.context,f=n.contextType,typeof f=="object"&&f!==null?f=un(f):(f=Ft(n)?bi:wt.current,f=qs(t,f));var P=n.getDerivedStateFromProps;(v=typeof P=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==y||w!==f)&&Lg(t,u,r,f),xr=!1,w=t.memoizedState,u.state=w,mu(t,r,u,s);var _=t.memoizedState;h!==y||w!==_||Ut.current||xr?(typeof P=="function"&&(hf(t,n,P,r),_=t.memoizedState),(p=xr||bg(t,n,p,r,w,_,f)||!1)?(v||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,_,f),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,_,f)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=_),u.props=r,u.state=_,u.context=f,r=p):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),r=!1)}return mf(e,t,n,r,a,s)}function mf(e,t,n,r,s,a){qw(e,t);var u=(t.flags&128)!==0;if(!r&&!u)return s&&Pg(t,n,!1),pr(e,t,a);r=t.stateNode,XP.current=t;var h=u&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&u?(t.child=Ks(t,e.child,null,a),t.child=Ks(t,null,h,a)):Et(e,t,h,a),t.memoizedState=r.state,s&&Pg(t,n,!0),t.child}function $w(e){var t=e.stateNode;t.pendingContext?Eg(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Eg(e,t.context,!1),Bd(e,t.containerInfo)}function jg(e,t,n,r,s){return $s(),bd(s),t.flags|=256,Et(e,t,n,r),t.child}var gf={dehydrated:null,treeContext:null,retryLane:0};function yf(e){return{baseLanes:e,cachePool:null,transitions:null}}function Kw(e,t,n){var r=t.pendingProps,s=Ne.current,a=!1,u=(t.flags&128)!==0,h;if((h=u)||(h=e!==null&&e.memoizedState===null?!1:(s&2)!==0),h?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Oe(Ne,s&1),e===null)return uf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(u=r.children,e=r.fallback,a?(r=t.mode,a=t.child,u={mode:"hidden",children:u},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=u):a=Gu(u,r,0,null),e=xi(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=yf(n),t.memoizedState=gf,e):$d(t,u));if(s=e.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return JP(e,t,u,r,h,s,n);if(a){a=r.fallback,u=t.mode,s=e.child,h=s.sibling;var f={mode:"hidden",children:r.children};return!(u&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=f,t.deletions=null):(r=Qr(s,f),r.subtreeFlags=s.subtreeFlags&14680064),h!==null?a=Qr(h,a):(a=xi(a,u,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,u=e.child.memoizedState,u=u===null?yf(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},a.memoizedState=u,a.childLanes=e.childLanes&~n,t.memoizedState=gf,r}return a=e.child,e=a.sibling,r=Qr(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function $d(e,t){return t=Gu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Pl(e,t,n,r){return r!==null&&bd(r),Ks(t,e.child,null,n),e=$d(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function JP(e,t,n,r,s,a,u){if(n)return t.flags&256?(t.flags&=-257,r=uh(Error(z(422))),Pl(e,t,u,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Gu({mode:"visible",children:r.children},s,0,null),a=xi(a,s,u,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&Ks(t,e.child,null,u),t.child.memoizedState=yf(u),t.memoizedState=gf,a);if(!(t.mode&1))return Pl(e,t,u,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var h=r.dgst;return r=h,a=Error(z(419)),r=uh(a,r,void 0),Pl(e,t,u,r)}if(h=(u&e.childLanes)!==0,Nt||h){if(r=rt,r!==null){switch(u&-u){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|u)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,dr(e,s),Tn(r,e,s,-1))}return Zd(),r=uh(Error(z(421))),Pl(e,t,u,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=hA.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,Wt=Wr(s.nextSibling),qt=t,be=!0,wn=null,e!==null&&(rn[sn++]=tr,rn[sn++]=nr,rn[sn++]=Li,tr=e.id,nr=e.overflow,Li=t),t=$d(t,r.children),t.flags|=4096,t)}function zg(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),cf(e.return,t,n)}function ch(e,t,n,r,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function Qw(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;if(Et(e,t,r.children,n),r=Ne.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zg(e,n,t);else if(e.tag===19)zg(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Oe(Ne,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&gu(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),ch(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&gu(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}ch(t,!0,n,null,a);break;case"together":ch(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function pr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ni|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(z(153));if(t.child!==null){for(e=t.child,n=Qr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Qr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function ZP(e,t,n){switch(t.tag){case 3:$w(t),$s();break;case 5:Cw(t);break;case 1:Ft(t.type)&&cu(t);break;case 4:Bd(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Oe(du,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Oe(Ne,Ne.current&1),t.flags|=128,null):n&t.child.childLanes?Kw(e,t,n):(Oe(Ne,Ne.current&1),e=pr(e,t,n),e!==null?e.sibling:null);Oe(Ne,Ne.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Qw(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Oe(Ne,Ne.current),r)break;return null;case 22:case 23:return t.lanes=0,Ww(e,t,n)}return pr(e,t,n)}var Yw,vf,Xw,Jw;Yw=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};vf=function(){};Xw=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,wi(jn.current);var a=null;switch(n){case"input":s=Bh(e,s),r=Bh(e,r),a=[];break;case"select":s=Be({},s,{value:void 0}),r=Be({},r,{value:void 0}),a=[];break;case"textarea":s=zh(e,s),r=zh(e,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=lu)}Hh(n,r);var u;n=null;for(p in s)if(!r.hasOwnProperty(p)&&s.hasOwnProperty(p)&&s[p]!=null)if(p==="style"){var h=s[p];for(u in h)h.hasOwnProperty(u)&&(n||(n={}),n[u]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(ha.hasOwnProperty(p)?a||(a=[]):(a=a||[]).push(p,null));for(p in r){var f=r[p];if(h=s!=null?s[p]:void 0,r.hasOwnProperty(p)&&f!==h&&(f!=null||h!=null))if(p==="style")if(h){for(u in h)!h.hasOwnProperty(u)||f&&f.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in f)f.hasOwnProperty(u)&&h[u]!==f[u]&&(n||(n={}),n[u]=f[u])}else n||(a||(a=[]),a.push(p,n)),n=f;else p==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,h=h?h.__html:void 0,f!=null&&h!==f&&(a=a||[]).push(p,f)):p==="children"?typeof f!="string"&&typeof f!="number"||(a=a||[]).push(p,""+f):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(ha.hasOwnProperty(p)?(f!=null&&p==="onScroll"&&Me("scroll",e),a||h===f||(a=[])):(a=a||[]).push(p,f))}n&&(a=a||[]).push("style",n);var p=a;(t.updateQueue=p)&&(t.flags|=4)}};Jw=function(e,t,n,r){n!==r&&(t.flags|=4)};function Do(e,t){if(!be)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function eA(e,t,n){var r=t.pendingProps;switch(Id(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(t),null;case 1:return Ft(t.type)&&uu(),dt(t),null;case 3:return r=t.stateNode,Qs(),Ie(Ut),Ie(wt),jd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Rl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,wn!==null&&(Af(wn),wn=null))),vf(e,t),dt(t),null;case 5:Vd(t);var s=wi(Ra.current);if(n=t.type,e!==null&&t.stateNode!=null)Xw(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(z(166));return dt(t),null}if(e=wi(jn.current),Rl(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Bn]=t,r[Ca]=a,e=(t.mode&1)!==0,n){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(s=0;s<qo.length;s++)Me(qo[s],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":Xm(r,a),Me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Me("invalid",r);break;case"textarea":Zm(r,a),Me("invalid",r)}Hh(n,a),s=null;for(var u in a)if(a.hasOwnProperty(u)){var h=a[u];u==="children"?typeof h=="string"?r.textContent!==h&&(a.suppressHydrationWarning!==!0&&Tl(r.textContent,h,e),s=["children",h]):typeof h=="number"&&r.textContent!==""+h&&(a.suppressHydrationWarning!==!0&&Tl(r.textContent,h,e),s=["children",""+h]):ha.hasOwnProperty(u)&&h!=null&&u==="onScroll"&&Me("scroll",r)}switch(n){case"input":pl(r),Jm(r,a,!0);break;case"textarea":pl(r),eg(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=lu)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{u=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=A0(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),n==="select"&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[Bn]=t,e[Ca]=r,Yw(e,t,!1,!1),t.stateNode=e;e:{switch(u=Wh(n,r),n){case"dialog":Me("cancel",e),Me("close",e),s=r;break;case"iframe":case"object":case"embed":Me("load",e),s=r;break;case"video":case"audio":for(s=0;s<qo.length;s++)Me(qo[s],e);s=r;break;case"source":Me("error",e),s=r;break;case"img":case"image":case"link":Me("error",e),Me("load",e),s=r;break;case"details":Me("toggle",e),s=r;break;case"input":Xm(e,r),s=Bh(e,r),Me("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Be({},r,{value:void 0}),Me("invalid",e);break;case"textarea":Zm(e,r),s=zh(e,r),Me("invalid",e);break;default:s=r}Hh(n,s),h=s;for(a in h)if(h.hasOwnProperty(a)){var f=h[a];a==="style"?k0(e,f):a==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&_0(e,f)):a==="children"?typeof f=="string"?(n!=="textarea"||f!=="")&&fa(e,f):typeof f=="number"&&fa(e,""+f):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ha.hasOwnProperty(a)?f!=null&&a==="onScroll"&&Me("scroll",e):f!=null&&yd(e,a,f,u))}switch(n){case"input":pl(e),Jm(e,r,!1);break;case"textarea":pl(e),eg(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Yr(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?Es(e,!!r.multiple,a,!1):r.defaultValue!=null&&Es(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=lu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return dt(t),null;case 6:if(e&&t.stateNode!=null)Jw(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(z(166));if(n=wi(Ra.current),wi(jn.current),Rl(t)){if(r=t.stateNode,n=t.memoizedProps,r[Bn]=t,(a=r.nodeValue!==n)&&(e=qt,e!==null))switch(e.tag){case 3:Tl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Tl(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bn]=t,t.stateNode=r}return dt(t),null;case 13:if(Ie(Ne),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(be&&Wt!==null&&t.mode&1&&!(t.flags&128))gw(),$s(),t.flags|=98560,a=!1;else if(a=Rl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(z(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(z(317));a[Bn]=t}else $s(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;dt(t),a=!1}else wn!==null&&(Af(wn),wn=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ne.current&1?Ze===0&&(Ze=3):Zd())),t.updateQueue!==null&&(t.flags|=4),dt(t),null);case 4:return Qs(),vf(e,t),e===null&&wa(t.stateNode.containerInfo),dt(t),null;case 10:return Nd(t.type._context),dt(t),null;case 17:return Ft(t.type)&&uu(),dt(t),null;case 19:if(Ie(Ne),a=t.memoizedState,a===null)return dt(t),null;if(r=(t.flags&128)!==0,u=a.rendering,u===null)if(r)Do(a,!1);else{if(Ze!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(u=gu(e),u!==null){for(t.flags|=128,Do(a,!1),r=u.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,u=a.alternate,u===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,e=u.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Oe(Ne,Ne.current&1|2),t.child}e=e.sibling}a.tail!==null&&He()>Xs&&(t.flags|=128,r=!0,Do(a,!1),t.lanes=4194304)}else{if(!r)if(e=gu(u),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Do(a,!0),a.tail===null&&a.tailMode==="hidden"&&!u.alternate&&!be)return dt(t),null}else 2*He()-a.renderingStartTime>Xs&&n!==1073741824&&(t.flags|=128,r=!0,Do(a,!1),t.lanes=4194304);a.isBackwards?(u.sibling=t.child,t.child=u):(n=a.last,n!==null?n.sibling=u:t.child=u,a.last=u)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=He(),t.sibling=null,n=Ne.current,Oe(Ne,r?n&1|2:n&1),t):(dt(t),null);case 22:case 23:return Jd(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ht&1073741824&&(dt(t),t.subtreeFlags&6&&(t.flags|=8192)):dt(t),null;case 24:return null;case 25:return null}throw Error(z(156,t.tag))}function tA(e,t){switch(Id(t),t.tag){case 1:return Ft(t.type)&&uu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Qs(),Ie(Ut),Ie(wt),jd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Vd(t),null;case 13:if(Ie(Ne),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(z(340));$s()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ie(Ne),null;case 4:return Qs(),null;case 10:return Nd(t.type._context),null;case 22:case 23:return Jd(),null;case 24:return null;default:return null}}var Al=!1,gt=!1,nA=typeof WeakSet=="function"?WeakSet:Set,$=null;function ys(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){je(e,t,r)}else n.current=null}function wf(e,t,n){try{n()}catch(r){je(e,t,r)}}var Gg=!1;function rA(e,t){if(tf=su,e=rw(),xd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var u=0,h=-1,f=-1,p=0,v=0,y=e,w=null;t:for(;;){for(var P;y!==n||s!==0&&y.nodeType!==3||(h=u+s),y!==a||r!==0&&y.nodeType!==3||(f=u+r),y.nodeType===3&&(u+=y.nodeValue.length),(P=y.firstChild)!==null;)w=y,y=P;for(;;){if(y===e)break t;if(w===n&&++p===s&&(h=u),w===a&&++v===r&&(f=u),(P=y.nextSibling)!==null)break;y=w,w=y.parentNode}y=P}n=h===-1||f===-1?null:{start:h,end:f}}else n=null}n=n||{start:0,end:0}}else n=null;for(nf={focusedElem:e,selectionRange:n},su=!1,$=t;$!==null;)if(t=$,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$=e;else for(;$!==null;){t=$;try{var _=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var A=_.memoizedProps,k=_.memoizedState,C=t.stateNode,S=C.getSnapshotBeforeUpdate(t.elementType===t.type?A:gn(t.type,A),k);C.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var E=t.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(T){je(t,t.return,T)}if(e=t.sibling,e!==null){e.return=t.return,$=e;break}$=t.return}return _=Gg,Gg=!1,_}function ia(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&wf(t,n,a)}s=s.next}while(s!==r)}}function ju(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Sf(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Zw(e){var t=e.alternate;t!==null&&(e.alternate=null,Zw(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Bn],delete t[Ca],delete t[of],delete t[BP],delete t[VP])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function eS(e){return e.tag===5||e.tag===3||e.tag===4}function Hg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||eS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Cf(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=lu));else if(r!==4&&(e=e.child,e!==null))for(Cf(e,t,n),e=e.sibling;e!==null;)Cf(e,t,n),e=e.sibling}function Tf(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Tf(e,t,n),e=e.sibling;e!==null;)Tf(e,t,n),e=e.sibling}var st=null,vn=!1;function Pr(e,t,n){for(n=n.child;n!==null;)tS(e,t,n),n=n.sibling}function tS(e,t,n){if(Vn&&typeof Vn.onCommitFiberUnmount=="function")try{Vn.onCommitFiberUnmount(bu,n)}catch{}switch(n.tag){case 5:gt||ys(n,t);case 6:var r=st,s=vn;st=null,Pr(e,t,n),st=r,vn=s,st!==null&&(vn?(e=st,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(vn?(e=st,n=n.stateNode,e.nodeType===8?rh(e.parentNode,n):e.nodeType===1&&rh(e,n),ga(e)):rh(st,n.stateNode));break;case 4:r=st,s=vn,st=n.stateNode.containerInfo,vn=!0,Pr(e,t,n),st=r,vn=s;break;case 0:case 11:case 14:case 15:if(!gt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,u=a.destroy;a=a.tag,u!==void 0&&(a&2||a&4)&&wf(n,t,u),s=s.next}while(s!==r)}Pr(e,t,n);break;case 1:if(!gt&&(ys(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(h){je(n,t,h)}Pr(e,t,n);break;case 21:Pr(e,t,n);break;case 22:n.mode&1?(gt=(r=gt)||n.memoizedState!==null,Pr(e,t,n),gt=r):Pr(e,t,n);break;default:Pr(e,t,n)}}function Wg(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new nA),t.forEach(function(r){var s=fA.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function pn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,u=t,h=u;e:for(;h!==null;){switch(h.tag){case 5:st=h.stateNode,vn=!1;break e;case 3:st=h.stateNode.containerInfo,vn=!0;break e;case 4:st=h.stateNode.containerInfo,vn=!0;break e}h=h.return}if(st===null)throw Error(z(160));tS(a,u,s),st=null,vn=!1;var f=s.alternate;f!==null&&(f.return=null),s.return=null}catch(p){je(s,t,p)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)nS(t,e),t=t.sibling}function nS(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pn(t,e),Mn(e),r&4){try{ia(3,e,e.return),ju(3,e)}catch(A){je(e,e.return,A)}try{ia(5,e,e.return)}catch(A){je(e,e.return,A)}}break;case 1:pn(t,e),Mn(e),r&512&&n!==null&&ys(n,n.return);break;case 5:if(pn(t,e),Mn(e),r&512&&n!==null&&ys(n,n.return),e.flags&32){var s=e.stateNode;try{fa(s,"")}catch(A){je(e,e.return,A)}}if(r&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,u=n!==null?n.memoizedProps:a,h=e.type,f=e.updateQueue;if(e.updateQueue=null,f!==null)try{h==="input"&&a.type==="radio"&&a.name!=null&&E0(s,a),Wh(h,u);var p=Wh(h,a);for(u=0;u<f.length;u+=2){var v=f[u],y=f[u+1];v==="style"?k0(s,y):v==="dangerouslySetInnerHTML"?_0(s,y):v==="children"?fa(s,y):yd(s,v,y,p)}switch(h){case"input":Vh(s,a);break;case"textarea":P0(s,a);break;case"select":var w=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var P=a.value;P!=null?Es(s,!!a.multiple,P,!1):w!==!!a.multiple&&(a.defaultValue!=null?Es(s,!!a.multiple,a.defaultValue,!0):Es(s,!!a.multiple,a.multiple?[]:"",!1))}s[Ca]=a}catch(A){je(e,e.return,A)}}break;case 6:if(pn(t,e),Mn(e),r&4){if(e.stateNode===null)throw Error(z(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(A){je(e,e.return,A)}}break;case 3:if(pn(t,e),Mn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ga(t.containerInfo)}catch(A){je(e,e.return,A)}break;case 4:pn(t,e),Mn(e);break;case 13:pn(t,e),Mn(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Yd=He())),r&4&&Wg(e);break;case 22:if(v=n!==null&&n.memoizedState!==null,e.mode&1?(gt=(p=gt)||v,pn(t,e),gt=p):pn(t,e),Mn(e),r&8192){if(p=e.memoizedState!==null,(e.stateNode.isHidden=p)&&!v&&e.mode&1)for($=e,v=e.child;v!==null;){for(y=$=v;$!==null;){switch(w=$,P=w.child,w.tag){case 0:case 11:case 14:case 15:ia(4,w,w.return);break;case 1:ys(w,w.return);var _=w.stateNode;if(typeof _.componentWillUnmount=="function"){r=w,n=w.return;try{t=r,_.props=t.memoizedProps,_.state=t.memoizedState,_.componentWillUnmount()}catch(A){je(r,n,A)}}break;case 5:ys(w,w.return);break;case 22:if(w.memoizedState!==null){$g(y);continue}}P!==null?(P.return=w,$=P):$g(y)}v=v.sibling}e:for(v=null,y=e;;){if(y.tag===5){if(v===null){v=y;try{s=y.stateNode,p?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(h=y.stateNode,f=y.memoizedProps.style,u=f!=null&&f.hasOwnProperty("display")?f.display:null,h.style.display=O0("display",u))}catch(A){je(e,e.return,A)}}}else if(y.tag===6){if(v===null)try{y.stateNode.nodeValue=p?"":y.memoizedProps}catch(A){je(e,e.return,A)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===e)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break e;for(;y.sibling===null;){if(y.return===null||y.return===e)break e;v===y&&(v=null),y=y.return}v===y&&(v=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:pn(t,e),Mn(e),r&4&&Wg(e);break;case 21:break;default:pn(t,e),Mn(e)}}function Mn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(eS(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(fa(s,""),r.flags&=-33);var a=Hg(e);Tf(e,a,s);break;case 3:case 4:var u=r.stateNode.containerInfo,h=Hg(e);Cf(e,h,u);break;default:throw Error(z(161))}}catch(f){je(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function iA(e,t,n){$=e,rS(e)}function rS(e,t,n){for(var r=(e.mode&1)!==0;$!==null;){var s=$,a=s.child;if(s.tag===22&&r){var u=s.memoizedState!==null||Al;if(!u){var h=s.alternate,f=h!==null&&h.memoizedState!==null||gt;h=Al;var p=gt;if(Al=u,(gt=f)&&!p)for($=s;$!==null;)u=$,f=u.child,u.tag===22&&u.memoizedState!==null?Kg(s):f!==null?(f.return=u,$=f):Kg(s);for(;a!==null;)$=a,rS(a),a=a.sibling;$=s,Al=h,gt=p}qg(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,$=a):qg(e)}}function qg(e){for(;$!==null;){var t=$;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:gt||ju(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!gt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:gn(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&xg(t,a,r);break;case 3:var u=t.updateQueue;if(u!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}xg(t,u,n)}break;case 5:var h=t.stateNode;if(n===null&&t.flags&4){n=h;var f=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&n.focus();break;case"img":f.src&&(n.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var p=t.alternate;if(p!==null){var v=p.memoizedState;if(v!==null){var y=v.dehydrated;y!==null&&ga(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}gt||t.flags&512&&Sf(t)}catch(w){je(t,t.return,w)}}if(t===e){$=null;break}if(n=t.sibling,n!==null){n.return=t.return,$=n;break}$=t.return}}function $g(e){for(;$!==null;){var t=$;if(t===e){$=null;break}var n=t.sibling;if(n!==null){n.return=t.return,$=n;break}$=t.return}}function Kg(e){for(;$!==null;){var t=$;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ju(4,t)}catch(f){je(t,n,f)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(f){je(t,s,f)}}var a=t.return;try{Sf(t)}catch(f){je(t,a,f)}break;case 5:var u=t.return;try{Sf(t)}catch(f){je(t,u,f)}}}catch(f){je(t,t.return,f)}if(t===e){$=null;break}var h=t.sibling;if(h!==null){h.return=t.return,$=h;break}$=t.return}}var sA=Math.ceil,wu=gr.ReactCurrentDispatcher,Kd=gr.ReactCurrentOwner,ln=gr.ReactCurrentBatchConfig,ve=0,rt=null,$e=null,lt=0,Ht=0,vs=ti(0),Ze=0,_a=null,Ni=0,zu=0,Qd=0,sa=null,Dt=null,Yd=0,Xs=1/0,Zn=null,Su=!1,Rf=null,$r=null,_l=!1,Vr=null,Cu=0,oa=0,Ef=null,Wl=-1,ql=0;function Pt(){return ve&6?He():Wl!==-1?Wl:Wl=He()}function Kr(e){return e.mode&1?ve&2&&lt!==0?lt&-lt:zP.transition!==null?(ql===0&&(ql=j0()),ql):(e=Te,e!==0||(e=window.event,e=e===void 0?16:K0(e.type)),e):1}function Tn(e,t,n,r){if(50<oa)throw oa=0,Ef=null,Error(z(185));za(e,n,r),(!(ve&2)||e!==rt)&&(e===rt&&(!(ve&2)&&(zu|=n),Ze===4&&Ir(e,lt)),Bt(e,r),n===1&&ve===0&&!(t.mode&1)&&(Xs=He()+500,Fu&&ni()))}function Bt(e,t){var n=e.callbackNode;zE(e,t);var r=iu(e,e===rt?lt:0);if(r===0)n!==null&&rg(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&rg(n),t===1)e.tag===0?jP(Qg.bind(null,e)):dw(Qg.bind(null,e)),UP(function(){!(ve&6)&&ni()}),n=null;else{switch(z0(r)){case 1:n=Td;break;case 4:n=B0;break;case 16:n=ru;break;case 536870912:n=V0;break;default:n=ru}n=hS(n,iS.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function iS(e,t){if(Wl=-1,ql=0,ve&6)throw Error(z(327));var n=e.callbackNode;if(ks()&&e.callbackNode!==n)return null;var r=iu(e,e===rt?lt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Tu(e,r);else{t=r;var s=ve;ve|=2;var a=oS();(rt!==e||lt!==t)&&(Zn=null,Xs=He()+500,ki(e,t));do try{lA();break}catch(h){sS(e,h)}while(!0);Dd(),wu.current=a,ve=s,$e!==null?t=0:(rt=null,lt=0,t=Ze)}if(t!==0){if(t===2&&(s=Yh(e),s!==0&&(r=s,t=Pf(e,s))),t===1)throw n=_a,ki(e,0),Ir(e,r),Bt(e,He()),n;if(t===6)Ir(e,r);else{if(s=e.current.alternate,!(r&30)&&!oA(s)&&(t=Tu(e,r),t===2&&(a=Yh(e),a!==0&&(r=a,t=Pf(e,a))),t===1))throw n=_a,ki(e,0),Ir(e,r),Bt(e,He()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(z(345));case 2:di(e,Dt,Zn);break;case 3:if(Ir(e,r),(r&130023424)===r&&(t=Yd+500-He(),10<t)){if(iu(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Pt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=sf(di.bind(null,e,Dt,Zn),t);break}di(e,Dt,Zn);break;case 4:if(Ir(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var u=31-Cn(r);a=1<<u,u=t[u],u>s&&(s=u),r&=~a}if(r=s,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*sA(r/1960))-r,10<r){e.timeoutHandle=sf(di.bind(null,e,Dt,Zn),r);break}di(e,Dt,Zn);break;case 5:di(e,Dt,Zn);break;default:throw Error(z(329))}}}return Bt(e,He()),e.callbackNode===n?iS.bind(null,e):null}function Pf(e,t){var n=sa;return e.current.memoizedState.isDehydrated&&(ki(e,t).flags|=256),e=Tu(e,t),e!==2&&(t=Dt,Dt=n,t!==null&&Af(t)),e}function Af(e){Dt===null?Dt=e:Dt.push.apply(Dt,e)}function oA(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!Rn(a(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ir(e,t){for(t&=~Qd,t&=~zu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Cn(t),r=1<<n;e[n]=-1,t&=~r}}function Qg(e){if(ve&6)throw Error(z(327));ks();var t=iu(e,0);if(!(t&1))return Bt(e,He()),null;var n=Tu(e,t);if(e.tag!==0&&n===2){var r=Yh(e);r!==0&&(t=r,n=Pf(e,r))}if(n===1)throw n=_a,ki(e,0),Ir(e,t),Bt(e,He()),n;if(n===6)throw Error(z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,di(e,Dt,Zn),Bt(e,He()),null}function Xd(e,t){var n=ve;ve|=1;try{return e(t)}finally{ve=n,ve===0&&(Xs=He()+500,Fu&&ni())}}function Ui(e){Vr!==null&&Vr.tag===0&&!(ve&6)&&ks();var t=ve;ve|=1;var n=ln.transition,r=Te;try{if(ln.transition=null,Te=1,e)return e()}finally{Te=r,ln.transition=n,ve=t,!(ve&6)&&ni()}}function Jd(){Ht=vs.current,Ie(vs)}function ki(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,NP(n)),$e!==null)for(n=$e.return;n!==null;){var r=n;switch(Id(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&uu();break;case 3:Qs(),Ie(Ut),Ie(wt),jd();break;case 5:Vd(r);break;case 4:Qs();break;case 13:Ie(Ne);break;case 19:Ie(Ne);break;case 10:Nd(r.type._context);break;case 22:case 23:Jd()}n=n.return}if(rt=e,$e=e=Qr(e.current,null),lt=Ht=t,Ze=0,_a=null,Qd=zu=Ni=0,Dt=sa=null,vi!==null){for(t=0;t<vi.length;t++)if(n=vi[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var u=a.next;a.next=s,r.next=u}n.pending=r}vi=null}return e}function sS(e,t){do{var n=$e;try{if(Dd(),zl.current=vu,yu){for(var r=Fe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}yu=!1}if(Di=0,nt=Je=Fe=null,ra=!1,Ea=0,Kd.current=null,n===null||n.return===null){Ze=1,_a=t,$e=null;break}e:{var a=e,u=n.return,h=n,f=t;if(t=lt,h.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var p=f,v=h,y=v.tag;if(!(v.mode&1)&&(y===0||y===11||y===15)){var w=v.alternate;w?(v.updateQueue=w.updateQueue,v.memoizedState=w.memoizedState,v.lanes=w.lanes):(v.updateQueue=null,v.memoizedState=null)}var P=Ng(u);if(P!==null){P.flags&=-257,Ug(P,u,h,a,t),P.mode&1&&Dg(a,p,t),t=P,f=p;var _=t.updateQueue;if(_===null){var A=new Set;A.add(f),t.updateQueue=A}else _.add(f);break e}else{if(!(t&1)){Dg(a,p,t),Zd();break e}f=Error(z(426))}}else if(be&&h.mode&1){var k=Ng(u);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Ug(k,u,h,a,t),bd(Ys(f,h));break e}}a=f=Ys(f,h),Ze!==4&&(Ze=2),sa===null?sa=[a]:sa.push(a),a=u;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var C=zw(a,f,t);kg(a,C);break e;case 1:h=f;var S=a.type,E=a.stateNode;if(!(a.flags&128)&&(typeof S.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&($r===null||!$r.has(E)))){a.flags|=65536,t&=-t,a.lanes|=t;var T=Gw(a,h,t);kg(a,T);break e}}a=a.return}while(a!==null)}lS(n)}catch(L){t=L,$e===n&&n!==null&&($e=n=n.return);continue}break}while(!0)}function oS(){var e=wu.current;return wu.current=vu,e===null?vu:e}function Zd(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),rt===null||!(Ni&268435455)&&!(zu&268435455)||Ir(rt,lt)}function Tu(e,t){var n=ve;ve|=2;var r=oS();(rt!==e||lt!==t)&&(Zn=null,ki(e,t));do try{aA();break}catch(s){sS(e,s)}while(!0);if(Dd(),ve=n,wu.current=r,$e!==null)throw Error(z(261));return rt=null,lt=0,Ze}function aA(){for(;$e!==null;)aS($e)}function lA(){for(;$e!==null&&!bE();)aS($e)}function aS(e){var t=cS(e.alternate,e,Ht);e.memoizedProps=e.pendingProps,t===null?lS(e):$e=t,Kd.current=null}function lS(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=tA(n,t),n!==null){n.flags&=32767,$e=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ze=6,$e=null;return}}else if(n=eA(n,t,Ht),n!==null){$e=n;return}if(t=t.sibling,t!==null){$e=t;return}$e=t=e}while(t!==null);Ze===0&&(Ze=5)}function di(e,t,n){var r=Te,s=ln.transition;try{ln.transition=null,Te=1,uA(e,t,n,r)}finally{ln.transition=s,Te=r}return null}function uA(e,t,n,r){do ks();while(Vr!==null);if(ve&6)throw Error(z(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(z(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(GE(e,a),e===rt&&($e=rt=null,lt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_l||(_l=!0,hS(ru,function(){return ks(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=ln.transition,ln.transition=null;var u=Te;Te=1;var h=ve;ve|=4,Kd.current=null,rA(e,n),nS(n,e),kP(nf),su=!!tf,nf=tf=null,e.current=n,iA(n),LE(),ve=h,Te=u,ln.transition=a}else e.current=n;if(_l&&(_l=!1,Vr=e,Cu=s),a=e.pendingLanes,a===0&&($r=null),UE(n.stateNode),Bt(e,He()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Su)throw Su=!1,e=Rf,Rf=null,e;return Cu&1&&e.tag!==0&&ks(),a=e.pendingLanes,a&1?e===Ef?oa++:(oa=0,Ef=e):oa=0,ni(),null}function ks(){if(Vr!==null){var e=z0(Cu),t=ln.transition,n=Te;try{if(ln.transition=null,Te=16>e?16:e,Vr===null)var r=!1;else{if(e=Vr,Vr=null,Cu=0,ve&6)throw Error(z(331));var s=ve;for(ve|=4,$=e.current;$!==null;){var a=$,u=a.child;if($.flags&16){var h=a.deletions;if(h!==null){for(var f=0;f<h.length;f++){var p=h[f];for($=p;$!==null;){var v=$;switch(v.tag){case 0:case 11:case 15:ia(8,v,a)}var y=v.child;if(y!==null)y.return=v,$=y;else for(;$!==null;){v=$;var w=v.sibling,P=v.return;if(Zw(v),v===p){$=null;break}if(w!==null){w.return=P,$=w;break}$=P}}}var _=a.alternate;if(_!==null){var A=_.child;if(A!==null){_.child=null;do{var k=A.sibling;A.sibling=null,A=k}while(A!==null)}}$=a}}if(a.subtreeFlags&2064&&u!==null)u.return=a,$=u;else e:for(;$!==null;){if(a=$,a.flags&2048)switch(a.tag){case 0:case 11:case 15:ia(9,a,a.return)}var C=a.sibling;if(C!==null){C.return=a.return,$=C;break e}$=a.return}}var S=e.current;for($=S;$!==null;){u=$;var E=u.child;if(u.subtreeFlags&2064&&E!==null)E.return=u,$=E;else e:for(u=S;$!==null;){if(h=$,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:ju(9,h)}}catch(L){je(h,h.return,L)}if(h===u){$=null;break e}var T=h.sibling;if(T!==null){T.return=h.return,$=T;break e}$=h.return}}if(ve=s,ni(),Vn&&typeof Vn.onPostCommitFiberRoot=="function")try{Vn.onPostCommitFiberRoot(bu,e)}catch{}r=!0}return r}finally{Te=n,ln.transition=t}}return!1}function Yg(e,t,n){t=Ys(n,t),t=zw(e,t,1),e=qr(e,t,1),t=Pt(),e!==null&&(za(e,1,t),Bt(e,t))}function je(e,t,n){if(e.tag===3)Yg(e,e,n);else for(;t!==null;){if(t.tag===3){Yg(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($r===null||!$r.has(r))){e=Ys(n,e),e=Gw(t,e,1),t=qr(t,e,1),e=Pt(),t!==null&&(za(t,1,e),Bt(t,e));break}}t=t.return}}function cA(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Pt(),e.pingedLanes|=e.suspendedLanes&n,rt===e&&(lt&n)===n&&(Ze===4||Ze===3&&(lt&130023424)===lt&&500>He()-Yd?ki(e,0):Qd|=n),Bt(e,t)}function uS(e,t){t===0&&(e.mode&1?(t=yl,yl<<=1,!(yl&130023424)&&(yl=4194304)):t=1);var n=Pt();e=dr(e,t),e!==null&&(za(e,t,n),Bt(e,n))}function hA(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),uS(e,n)}function fA(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(t),uS(e,n)}var cS;cS=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ut.current)Nt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Nt=!1,ZP(e,t,n);Nt=!!(e.flags&131072)}else Nt=!1,be&&t.flags&1048576&&pw(t,fu,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hl(e,t),e=t.pendingProps;var s=qs(t,wt.current);Os(t,n),s=Gd(null,t,r,e,s,n);var a=Hd();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ft(r)?(a=!0,cu(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Fd(t),s.updater=Vu,t.stateNode=s,s._reactInternals=t,ff(t,r,e,n),t=mf(null,t,r,!0,a,n)):(t.tag=0,be&&a&&Md(t),Et(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hl(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=pA(r),e=gn(r,e),s){case 0:t=pf(null,t,r,e,n);break e;case 1:t=Vg(null,t,r,e,n);break e;case 11:t=Fg(null,t,r,e,n);break e;case 14:t=Bg(null,t,r,gn(r.type,e),n);break e}throw Error(z(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:gn(r,s),pf(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:gn(r,s),Vg(e,t,r,s,n);case 3:e:{if($w(t),e===null)throw Error(z(387));r=t.pendingProps,a=t.memoizedState,s=a.element,Sw(e,t),mu(t,r,null,n);var u=t.memoizedState;if(r=u.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=Ys(Error(z(423)),t),t=jg(e,t,r,n,s);break e}else if(r!==s){s=Ys(Error(z(424)),t),t=jg(e,t,r,n,s);break e}else for(Wt=Wr(t.stateNode.containerInfo.firstChild),qt=t,be=!0,wn=null,n=vw(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($s(),r===s){t=pr(e,t,n);break e}Et(e,t,r,n)}t=t.child}return t;case 5:return Cw(t),e===null&&uf(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,u=s.children,rf(r,s)?u=null:a!==null&&rf(r,a)&&(t.flags|=32),qw(e,t),Et(e,t,u,n),t.child;case 6:return e===null&&uf(t),null;case 13:return Kw(e,t,n);case 4:return Bd(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ks(t,null,r,n):Et(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:gn(r,s),Fg(e,t,r,s,n);case 7:return Et(e,t,t.pendingProps,n),t.child;case 8:return Et(e,t,t.pendingProps.children,n),t.child;case 12:return Et(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,u=s.value,Oe(du,r._currentValue),r._currentValue=u,a!==null)if(Rn(a.value,u)){if(a.children===s.children&&!Ut.current){t=pr(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var h=a.dependencies;if(h!==null){u=a.child;for(var f=h.firstContext;f!==null;){if(f.context===r){if(a.tag===1){f=sr(-1,n&-n),f.tag=2;var p=a.updateQueue;if(p!==null){p=p.shared;var v=p.pending;v===null?f.next=f:(f.next=v.next,v.next=f),p.pending=f}}a.lanes|=n,f=a.alternate,f!==null&&(f.lanes|=n),cf(a.return,n,t),h.lanes|=n;break}f=f.next}}else if(a.tag===10)u=a.type===t.type?null:a.child;else if(a.tag===18){if(u=a.return,u===null)throw Error(z(341));u.lanes|=n,h=u.alternate,h!==null&&(h.lanes|=n),cf(u,n,t),u=a.sibling}else u=a.child;if(u!==null)u.return=a;else for(u=a;u!==null;){if(u===t){u=null;break}if(a=u.sibling,a!==null){a.return=u.return,u=a;break}u=u.return}a=u}Et(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Os(t,n),s=un(s),r=r(s),t.flags|=1,Et(e,t,r,n),t.child;case 14:return r=t.type,s=gn(r,t.pendingProps),s=gn(r.type,s),Bg(e,t,r,s,n);case 15:return Hw(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:gn(r,s),Hl(e,t),t.tag=1,Ft(r)?(e=!0,cu(t)):e=!1,Os(t,n),jw(t,r,s),ff(t,r,s,n),mf(null,t,r,!0,e,n);case 19:return Qw(e,t,n);case 22:return Ww(e,t,n)}throw Error(z(156,t.tag))};function hS(e,t){return F0(e,t)}function dA(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(e,t,n,r){return new dA(e,t,n,r)}function ep(e){return e=e.prototype,!(!e||!e.isReactComponent)}function pA(e){if(typeof e=="function")return ep(e)?1:0;if(e!=null){if(e=e.$$typeof,e===wd)return 11;if(e===Sd)return 14}return 2}function Qr(e,t){var n=e.alternate;return n===null?(n=on(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function $l(e,t,n,r,s,a){var u=2;if(r=e,typeof e=="function")ep(e)&&(u=1);else if(typeof e=="string")u=5;else e:switch(e){case ls:return xi(n.children,s,a,t);case vd:u=8,s|=8;break;case Dh:return e=on(12,n,t,s|2),e.elementType=Dh,e.lanes=a,e;case Nh:return e=on(13,n,t,s),e.elementType=Nh,e.lanes=a,e;case Uh:return e=on(19,n,t,s),e.elementType=Uh,e.lanes=a,e;case C0:return Gu(n,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case w0:u=10;break e;case S0:u=9;break e;case wd:u=11;break e;case Sd:u=14;break e;case kr:u=16,r=null;break e}throw Error(z(130,e==null?e:typeof e,""))}return t=on(u,n,t,s),t.elementType=e,t.type=r,t.lanes=a,t}function xi(e,t,n,r){return e=on(7,e,r,t),e.lanes=n,e}function Gu(e,t,n,r){return e=on(22,e,r,t),e.elementType=C0,e.lanes=n,e.stateNode={isHidden:!1},e}function hh(e,t,n){return e=on(6,e,null,t),e.lanes=n,e}function fh(e,t,n){return t=on(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function mA(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qc(0),this.expirationTimes=qc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function tp(e,t,n,r,s,a,u,h,f){return e=new mA(e,t,n,h,f),t===1?(t=1,a===!0&&(t|=8)):t=0,a=on(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fd(a),e}function gA(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:as,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function fS(e){if(!e)return Xr;e=e._reactInternals;e:{if(Bi(e)!==e||e.tag!==1)throw Error(z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ft(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(z(171))}if(e.tag===1){var n=e.type;if(Ft(n))return fw(e,n,t)}return t}function dS(e,t,n,r,s,a,u,h,f){return e=tp(n,r,!0,e,s,a,u,h,f),e.context=fS(null),n=e.current,r=Pt(),s=Kr(n),a=sr(r,s),a.callback=t??null,qr(n,a,s),e.current.lanes=s,za(e,s,r),Bt(e,r),e}function Hu(e,t,n,r){var s=t.current,a=Pt(),u=Kr(s);return n=fS(n),t.context===null?t.context=n:t.pendingContext=n,t=sr(a,u),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=qr(s,t,u),e!==null&&(Tn(e,s,u,a),jl(e,s,u)),u}function Ru(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Xg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function np(e,t){Xg(e,t),(e=e.alternate)&&Xg(e,t)}function yA(){return null}var pS=typeof reportError=="function"?reportError:function(e){console.error(e)};function rp(e){this._internalRoot=e}Wu.prototype.render=rp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(z(409));Hu(e,t,null,null)};Wu.prototype.unmount=rp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ui(function(){Hu(null,e,null,null)}),t[fr]=null}};function Wu(e){this._internalRoot=e}Wu.prototype.unstable_scheduleHydration=function(e){if(e){var t=W0();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mr.length&&t!==0&&t<Mr[n].priority;n++);Mr.splice(n,0,e),n===0&&$0(e)}};function ip(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function qu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Jg(){}function vA(e,t,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var p=Ru(u);a.call(p)}}var u=dS(t,r,e,0,null,!1,!1,"",Jg);return e._reactRootContainer=u,e[fr]=u.current,wa(e.nodeType===8?e.parentNode:e),Ui(),u}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var h=r;r=function(){var p=Ru(f);h.call(p)}}var f=tp(e,0,!1,null,null,!1,!1,"",Jg);return e._reactRootContainer=f,e[fr]=f.current,wa(e.nodeType===8?e.parentNode:e),Ui(function(){Hu(t,f,n,r)}),f}function $u(e,t,n,r,s){var a=n._reactRootContainer;if(a){var u=a;if(typeof s=="function"){var h=s;s=function(){var f=Ru(u);h.call(f)}}Hu(t,u,e,s)}else u=vA(n,t,e,s,r);return Ru(u)}G0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Wo(t.pendingLanes);n!==0&&(Rd(t,n|1),Bt(t,He()),!(ve&6)&&(Xs=He()+500,ni()))}break;case 13:Ui(function(){var r=dr(e,1);if(r!==null){var s=Pt();Tn(r,e,1,s)}}),np(e,1)}};Ed=function(e){if(e.tag===13){var t=dr(e,134217728);if(t!==null){var n=Pt();Tn(t,e,134217728,n)}np(e,134217728)}};H0=function(e){if(e.tag===13){var t=Kr(e),n=dr(e,t);if(n!==null){var r=Pt();Tn(n,e,t,r)}np(e,t)}};W0=function(){return Te};q0=function(e,t){var n=Te;try{return Te=e,t()}finally{Te=n}};$h=function(e,t,n){switch(t){case"input":if(Vh(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Uu(r);if(!s)throw Error(z(90));R0(r),Vh(r,s)}}}break;case"textarea":P0(e,n);break;case"select":t=n.value,t!=null&&Es(e,!!n.multiple,t,!1)}};I0=Xd;b0=Ui;var wA={usingClientEntryPoint:!1,Events:[Ha,fs,Uu,x0,M0,Xd]},No={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},SA={bundleType:No.bundleType,version:No.version,rendererPackageName:No.rendererPackageName,rendererConfig:No.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=N0(e),e===null?null:e.stateNode},findFiberByHostInstance:No.findFiberByHostInstance||yA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ol=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ol.isDisabled&&Ol.supportsFiber)try{bu=Ol.inject(SA),Vn=Ol}catch{}}Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wA;Yt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ip(t))throw Error(z(200));return gA(e,t,null,n)};Yt.createRoot=function(e,t){if(!ip(e))throw Error(z(299));var n=!1,r="",s=pS;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=tp(e,1,!1,null,null,n,!1,r,s),e[fr]=t.current,wa(e.nodeType===8?e.parentNode:e),new rp(t)};Yt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(z(188)):(e=Object.keys(e).join(","),Error(z(268,e)));return e=N0(t),e=e===null?null:e.stateNode,e};Yt.flushSync=function(e){return Ui(e)};Yt.hydrate=function(e,t,n){if(!qu(t))throw Error(z(200));return $u(null,e,t,!0,n)};Yt.hydrateRoot=function(e,t,n){if(!ip(e))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",u=pS;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),t=dS(t,null,e,1,n??null,s,!1,a,u),e[fr]=t.current,wa(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Wu(t)};Yt.render=function(e,t,n){if(!qu(t))throw Error(z(200));return $u(null,e,t,!1,n)};Yt.unmountComponentAtNode=function(e){if(!qu(e))throw Error(z(40));return e._reactRootContainer?(Ui(function(){$u(null,null,e,!1,function(){e._reactRootContainer=null,e[fr]=null})}),!0):!1};Yt.unstable_batchedUpdates=Xd;Yt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!qu(n))throw Error(z(200));if(e==null||e._reactInternals===void 0)throw Error(z(38));return $u(e,t,n,!1,r)};Yt.version="18.3.1-next-f1338f8080-20240426";function mS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mS)}catch(e){console.error(e)}}mS(),m0.exports=Yt;var CA=m0.exports,TA,Zg=CA;TA=Zg.createRoot,Zg.hydrateRoot;/**
 * @remix-run/router v1.19.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oa(){return Oa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oa.apply(this,arguments)}var jr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(jr||(jr={}));const ey="popstate";function RA(e){e===void 0&&(e={});function t(r,s){let{pathname:a,search:u,hash:h}=r.location;return _f("",{pathname:a,search:u,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:yS(s)}return PA(t,n,null,e)}function et(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function gS(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function EA(){return Math.random().toString(36).substr(2,8)}function ty(e,t){return{usr:e.state,key:e.key,idx:t}}function _f(e,t,n,r){return n===void 0&&(n=null),Oa({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?oo(t):t,{state:n,key:t&&t.key||r||EA()})}function yS(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function oo(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function PA(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,u=s.history,h=jr.Pop,f=null,p=v();p==null&&(p=0,u.replaceState(Oa({},u.state,{idx:p}),""));function v(){return(u.state||{idx:null}).idx}function y(){h=jr.Pop;let k=v(),C=k==null?null:k-p;p=k,f&&f({action:h,location:A.location,delta:C})}function w(k,C){h=jr.Push;let S=_f(A.location,k,C);p=v()+1;let E=ty(S,p),T=A.createHref(S);try{u.pushState(E,"",T)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(T)}a&&f&&f({action:h,location:A.location,delta:1})}function P(k,C){h=jr.Replace;let S=_f(A.location,k,C);p=v();let E=ty(S,p),T=A.createHref(S);u.replaceState(E,"",T),a&&f&&f({action:h,location:A.location,delta:0})}function _(k){let C=s.location.origin!=="null"?s.location.origin:s.location.href,S=typeof k=="string"?k:yS(k);return S=S.replace(/ $/,"%20"),et(C,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,C)}let A={get action(){return h},get location(){return e(s,u)},listen(k){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(ey,y),f=k,()=>{s.removeEventListener(ey,y),f=null}},createHref(k){return t(s,k)},createURL:_,encodeLocation(k){let C=_(k);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:w,replace:P,go(k){return u.go(k)}};return A}var ny;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ny||(ny={}));function AA(e,t,n){return n===void 0&&(n="/"),_A(e,t,n,!1)}function _A(e,t,n,r){let s=typeof t=="string"?oo(t):t,a=SS(s.pathname||"/",n);if(a==null)return null;let u=vS(e);OA(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let p=BA(a);h=UA(u[f],p,r)}return h}function vS(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,u,h)=>{let f={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(et(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let p=Mi([r,f.relativePath]),v=n.concat(f);a.children&&a.children.length>0&&(et(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),vS(a.children,t,v,p)),!(a.path==null&&!a.index)&&t.push({path:p,score:DA(p,a.index),routesMeta:v})};return e.forEach((a,u)=>{var h;if(a.path===""||!((h=a.path)!=null&&h.includes("?")))s(a,u);else for(let f of wS(a.path))s(a,u,f)}),t}function wS(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let u=wS(r.join("/")),h=[];return h.push(...u.map(f=>f===""?a:[a,f].join("/"))),s&&h.push(...u),h.map(f=>e.startsWith("/")&&f===""?"/":f)}function OA(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:NA(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const kA=/^:[\w-]+$/,xA=3,MA=2,IA=1,bA=10,LA=-2,ry=e=>e==="*";function DA(e,t){let n=e.split("/"),r=n.length;return n.some(ry)&&(r+=LA),t&&(r+=MA),n.filter(s=>!ry(s)).reduce((s,a)=>s+(kA.test(a)?xA:a===""?IA:bA),r)}function NA(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function UA(e,t,n){let{routesMeta:r}=e,s={},a="/",u=[];for(let h=0;h<r.length;++h){let f=r[h],p=h===r.length-1,v=a==="/"?t:t.slice(a.length)||"/",y=iy({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},v),w=f.route;if(!y&&p&&n&&!r[r.length-1].route.index&&(y=iy({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},v)),!y)return null;Object.assign(s,y.params),u.push({params:s,pathname:Mi([a,y.pathname]),pathnameBase:WA(Mi([a,y.pathnameBase])),route:w}),y.pathnameBase!=="/"&&(a=Mi([a,y.pathnameBase]))}return u}function iy(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=FA(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],u=a.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:r.reduce((p,v,y)=>{let{paramName:w,isOptional:P}=v;if(w==="*"){let A=h[y]||"";u=a.slice(0,a.length-A.length).replace(/(.)\/+$/,"$1")}const _=h[y];return P&&!_?p[w]=void 0:p[w]=(_||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:u,pattern:e}}function FA(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),gS(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(r.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function BA(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return gS(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function SS(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function VA(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?oo(e):e;return{pathname:n?n.startsWith("/")?n:jA(n,t):t,search:qA(r),hash:$A(s)}}function jA(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function dh(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function zA(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function GA(e,t){let n=zA(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function HA(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=oo(e):(s=Oa({},e),et(!s.pathname||!s.pathname.includes("?"),dh("?","pathname","search",s)),et(!s.pathname||!s.pathname.includes("#"),dh("#","pathname","hash",s)),et(!s.search||!s.search.includes("#"),dh("#","search","hash",s)));let a=e===""||s.pathname==="",u=a?"/":s.pathname,h;if(u==null)h=n;else{let y=t.length-1;if(!r&&u.startsWith("..")){let w=u.split("/");for(;w[0]==="..";)w.shift(),y-=1;s.pathname=w.join("/")}h=y>=0?t[y]:"/"}let f=VA(s,h),p=u&&u!=="/"&&u.endsWith("/"),v=(a||u===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(p||v)&&(f.pathname+="/"),f}const Mi=e=>e.join("/").replace(/\/\/+/g,"/"),WA=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),qA=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,$A=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function KA(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const CS=["post","put","patch","delete"];new Set(CS);const QA=["get",...CS];new Set(QA);/**
 * React Router v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ka(){return ka=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ka.apply(this,arguments)}const sp=D.createContext(null),YA=D.createContext(null),Ku=D.createContext(null),Qu=D.createContext(null),ao=D.createContext({outlet:null,matches:[],isDataRoute:!1}),TS=D.createContext(null);function Yu(){return D.useContext(Qu)!=null}function op(){return Yu()||et(!1),D.useContext(Qu).location}function RS(e){D.useContext(Ku).static||D.useLayoutEffect(e)}function XA(){let{isDataRoute:e}=D.useContext(ao);return e?c_():JA()}function JA(){Yu()||et(!1);let e=D.useContext(sp),{basename:t,future:n,navigator:r}=D.useContext(Ku),{matches:s}=D.useContext(ao),{pathname:a}=op(),u=JSON.stringify(GA(s,n.v7_relativeSplatPath)),h=D.useRef(!1);return RS(()=>{h.current=!0}),D.useCallback(function(p,v){if(v===void 0&&(v={}),!h.current)return;if(typeof p=="number"){r.go(p);return}let y=HA(p,JSON.parse(u),a,v.relative==="path");e==null&&t!=="/"&&(y.pathname=y.pathname==="/"?t:Mi([t,y.pathname])),(v.replace?r.replace:r.push)(y,v.state,v)},[t,r,u,a,e])}function ZA(e,t){return e_(e,t)}function e_(e,t,n,r){Yu()||et(!1);let{navigator:s}=D.useContext(Ku),{matches:a}=D.useContext(ao),u=a[a.length-1],h=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let p=op(),v;if(t){var y;let k=typeof t=="string"?oo(t):t;f==="/"||(y=k.pathname)!=null&&y.startsWith(f)||et(!1),v=k}else v=p;let w=v.pathname||"/",P=w;if(f!=="/"){let k=f.replace(/^\//,"").split("/");P="/"+w.replace(/^\//,"").split("/").slice(k.length).join("/")}let _=AA(e,{pathname:P}),A=s_(_&&_.map(k=>Object.assign({},k,{params:Object.assign({},h,k.params),pathname:Mi([f,s.encodeLocation?s.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?f:Mi([f,s.encodeLocation?s.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),a,n,r);return t&&A?D.createElement(Qu.Provider,{value:{location:ka({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:jr.Pop}},A):A}function t_(){let e=u_(),t=KA(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},t),n?D.createElement("pre",{style:s},n):null,null)}const n_=D.createElement(t_,null);class r_ extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?D.createElement(ao.Provider,{value:this.props.routeContext},D.createElement(TS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function i_(e){let{routeContext:t,match:n,children:r}=e,s=D.useContext(sp);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(ao.Provider,{value:t},r)}function s_(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var a;if(!n)return null;if(n.errors)e=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let u=e,h=(s=n)==null?void 0:s.errors;if(h!=null){let v=u.findIndex(y=>y.route.id&&(h==null?void 0:h[y.route.id])!==void 0);v>=0||et(!1),u=u.slice(0,Math.min(u.length,v+1))}let f=!1,p=-1;if(n&&r&&r.v7_partialHydration)for(let v=0;v<u.length;v++){let y=u[v];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=v),y.route.id){let{loaderData:w,errors:P}=n,_=y.route.loader&&w[y.route.id]===void 0&&(!P||P[y.route.id]===void 0);if(y.route.lazy||_){f=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}return u.reduceRight((v,y,w)=>{let P,_=!1,A=null,k=null;n&&(P=h&&y.route.id?h[y.route.id]:void 0,A=y.route.errorElement||n_,f&&(p<0&&w===0?(_=!0,k=null):p===w&&(_=!0,k=y.route.hydrateFallbackElement||null)));let C=t.concat(u.slice(0,w+1)),S=()=>{let E;return P?E=A:_?E=k:y.route.Component?E=D.createElement(y.route.Component,null):y.route.element?E=y.route.element:E=v,D.createElement(i_,{match:y,routeContext:{outlet:v,matches:C,isDataRoute:n!=null},children:E})};return n&&(y.route.ErrorBoundary||y.route.errorElement||w===0)?D.createElement(r_,{location:n.location,revalidation:n.revalidation,component:A,error:P,children:S(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):S()},null)}var ES=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ES||{}),Eu=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Eu||{});function o_(e){let t=D.useContext(sp);return t||et(!1),t}function a_(e){let t=D.useContext(YA);return t||et(!1),t}function l_(e){let t=D.useContext(ao);return t||et(!1),t}function PS(e){let t=l_(),n=t.matches[t.matches.length-1];return n.route.id||et(!1),n.route.id}function u_(){var e;let t=D.useContext(TS),n=a_(Eu.UseRouteError),r=PS(Eu.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function c_(){let{router:e}=o_(ES.UseNavigateStable),t=PS(Eu.UseNavigateStable),n=D.useRef(!1);return RS(()=>{n.current=!0}),D.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,ka({fromRouteId:t},a)))},[e,t])}function h_(e){et(!1)}function f_(e){let{basename:t="/",children:n=null,location:r,navigationType:s=jr.Pop,navigator:a,static:u=!1,future:h}=e;Yu()&&et(!1);let f=t.replace(/^\/*/,"/"),p=D.useMemo(()=>({basename:f,navigator:a,static:u,future:ka({v7_relativeSplatPath:!1},h)}),[f,h,a,u]);typeof r=="string"&&(r=oo(r));let{pathname:v="/",search:y="",hash:w="",state:P=null,key:_="default"}=r,A=D.useMemo(()=>{let k=SS(v,f);return k==null?null:{location:{pathname:k,search:y,hash:w,state:P,key:_},navigationType:s}},[f,v,y,w,P,_,s]);return A==null?null:D.createElement(Ku.Provider,{value:p},D.createElement(Qu.Provider,{children:n,value:A}))}function xb(e){let{children:t,location:n}=e;return ZA(Of(t),n)}new Promise(()=>{});function Of(e,t){t===void 0&&(t=[]);let n=[];return D.Children.forEach(e,(r,s)=>{if(!D.isValidElement(r))return;let a=[...t,s];if(r.type===D.Fragment){n.push.apply(n,Of(r.props.children,a));return}r.type!==h_&&et(!1),!r.props.index||!r.props.children||et(!1);let u={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=Of(r.props.children,a)),n.push(u)}),n}/**
 * React Router DOM v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kf(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function d_(e,t){let n=kf(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(a=>{n.append(s,a)})}),n}const p_="6";try{window.__reactRouterVersion=p_}catch{}const m_="startTransition",sy=cE[m_];function Mb(e){let{basename:t,children:n,future:r,window:s}=e,a=D.useRef();a.current==null&&(a.current=RA({window:s,v5Compat:!0}));let u=a.current,[h,f]=D.useState({action:u.action,location:u.location}),{v7_startTransition:p}=r||{},v=D.useCallback(y=>{p&&sy?sy(()=>f(y)):f(y)},[f,p]);return D.useLayoutEffect(()=>u.listen(v),[u,v]),D.createElement(f_,{basename:t,children:n,location:h.location,navigationType:h.action,navigator:u,future:r})}var oy;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(oy||(oy={}));var ay;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(ay||(ay={}));function Ib(e){let t=D.useRef(kf(e)),n=D.useRef(!1),r=op(),s=D.useMemo(()=>d_(r.search,n.current?null:t.current),[r.search]),a=XA(),u=D.useCallback((h,f)=>{const p=kf(typeof h=="function"?h(s):h);n.current=!0,a("?"+p,f)},[a,s]);return[s,u]}/*! @license DOMPurify 3.1.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.6/LICENSE */const{entries:AS,setPrototypeOf:ly,isFrozen:g_,getPrototypeOf:y_,getOwnPropertyDescriptor:v_}=Object;let{freeze:At,seal:hn,create:_S}=Object,{apply:xf,construct:Mf}=typeof Reflect<"u"&&Reflect;At||(At=function(t){return t});hn||(hn=function(t){return t});xf||(xf=function(t,n,r){return t.apply(n,r)});Mf||(Mf=function(t,n){return new t(...n)});const kl=Kt(Array.prototype.forEach),uy=Kt(Array.prototype.pop),Uo=Kt(Array.prototype.push),Kl=Kt(String.prototype.toLowerCase),ph=Kt(String.prototype.toString),cy=Kt(String.prototype.match),Fo=Kt(String.prototype.replace),w_=Kt(String.prototype.indexOf),S_=Kt(String.prototype.trim),mn=Kt(Object.prototype.hasOwnProperty),Ct=Kt(RegExp.prototype.test),Bo=C_(TypeError);function Kt(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return xf(e,t,r)}}function C_(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Mf(e,n)}}function pe(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Kl;ly&&ly(e,null);let r=t.length;for(;r--;){let s=t[r];if(typeof s=="string"){const a=n(s);a!==s&&(g_(t)||(t[r]=a),s=a)}e[s]=!0}return e}function T_(e){for(let t=0;t<e.length;t++)mn(e,t)||(e[t]=null);return e}function pi(e){const t=_S(null);for(const[n,r]of AS(e))mn(e,n)&&(Array.isArray(r)?t[n]=T_(r):r&&typeof r=="object"&&r.constructor===Object?t[n]=pi(r):t[n]=r);return t}function Vo(e,t){for(;e!==null;){const r=v_(e,t);if(r){if(r.get)return Kt(r.get);if(typeof r.value=="function")return Kt(r.value)}e=y_(e)}function n(){return null}return n}const hy=At(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),mh=At(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),gh=At(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),R_=At(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),yh=At(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),E_=At(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),fy=At(["#text"]),dy=At(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),vh=At(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),py=At(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xl=At(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),P_=hn(/\{\{[\w\W]*|[\w\W]*\}\}/gm),A_=hn(/<%[\w\W]*|[\w\W]*%>/gm),__=hn(/\${[\w\W]*}/gm),O_=hn(/^data-[\-\w.\u00B7-\uFFFF]/),k_=hn(/^aria-[\-\w]+$/),OS=hn(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),x_=hn(/^(?:\w+script|data):/i),M_=hn(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),kS=hn(/^html$/i),I_=hn(/^[a-z][.\w]*(-[.\w]+)+$/i);var my=Object.freeze({__proto__:null,MUSTACHE_EXPR:P_,ERB_EXPR:A_,TMPLIT_EXPR:__,DATA_ATTR:O_,ARIA_ATTR:k_,IS_ALLOWED_URI:OS,IS_SCRIPT_OR_DATA:x_,ATTR_WHITESPACE:M_,DOCTYPE_NAME:kS,CUSTOM_ELEMENT:I_});const jo={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},b_=function(){return typeof window>"u"?null:window},L_=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const s="data-tt-policy-suffix";n&&n.hasAttribute(s)&&(r=n.getAttribute(s));const a="dompurify"+(r?"#"+r:"");try{return t.createPolicy(a,{createHTML(u){return u},createScriptURL(u){return u}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}};function xS(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b_();const t=te=>xS(te);if(t.version="3.1.6",t.removed=[],!e||!e.document||e.document.nodeType!==jo.document)return t.isSupported=!1,t;let{document:n}=e;const r=n,s=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:u,Node:h,Element:f,NodeFilter:p,NamedNodeMap:v=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:y,DOMParser:w,trustedTypes:P}=e,_=f.prototype,A=Vo(_,"cloneNode"),k=Vo(_,"remove"),C=Vo(_,"nextSibling"),S=Vo(_,"childNodes"),E=Vo(_,"parentNode");if(typeof u=="function"){const te=n.createElement("template");te.content&&te.content.ownerDocument&&(n=te.content.ownerDocument)}let T,L="";const{implementation:V,createNodeIterator:H,createDocumentFragment:F,getElementsByTagName:J}=n,{importNode:Y}=r;let m={};t.isSupported=typeof AS=="function"&&typeof E=="function"&&V&&V.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Ae,ERB_EXPR:Le,TMPLIT_EXPR:N,DATA_ATTR:ue,ARIA_ATTR:Re,IS_SCRIPT_OR_DATA:Z,ATTR_WHITESPACE:W,CUSTOM_ELEMENT:se}=my;let{IS_ALLOWED_URI:ie}=my,ne=null;const re=pe({},[...hy,...mh,...gh,...yh,...fy]);let ke=null;const Vt=pe({},[...dy,...vh,...py,...xl]);let Ee=Object.seal(_S(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),St=null,fn=null,uo=!0,ji=!0,Xa=!1,co=!0,vr=!1,Gn=!0,En=!1,zi=!1,Gi=!1,Hn=!1,wr=!1,Pn=!1,si=!0,Hi=!1;const xe="user-content-";let Wi=!0,Sr=!1,An={},Wn=null;const ho=pe({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let tt=null;const kt=pe({},["audio","video","img","source","image","track"]);let xt=null;const qi=pe({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),oi="http://www.w3.org/1998/Math/MathML",ai="http://www.w3.org/2000/svg",Jt="http://www.w3.org/1999/xhtml";let _n=Jt,li=!1,$i=null;const Ja=pe({},[oi,ai,Jt],ph);let On=null;const Za=["application/xhtml+xml","text/html"],Ki="text/html";let we=null,qn=null;const el=n.createElement("form"),tl=function(x){return x instanceof RegExp||x instanceof Function},qe=function(){let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(qn&&qn===x)){if((!x||typeof x!="object")&&(x={}),x=pi(x),On=Za.indexOf(x.PARSER_MEDIA_TYPE)===-1?Ki:x.PARSER_MEDIA_TYPE,we=On==="application/xhtml+xml"?ph:Kl,ne=mn(x,"ALLOWED_TAGS")?pe({},x.ALLOWED_TAGS,we):re,ke=mn(x,"ALLOWED_ATTR")?pe({},x.ALLOWED_ATTR,we):Vt,$i=mn(x,"ALLOWED_NAMESPACES")?pe({},x.ALLOWED_NAMESPACES,ph):Ja,xt=mn(x,"ADD_URI_SAFE_ATTR")?pe(pi(qi),x.ADD_URI_SAFE_ATTR,we):qi,tt=mn(x,"ADD_DATA_URI_TAGS")?pe(pi(kt),x.ADD_DATA_URI_TAGS,we):kt,Wn=mn(x,"FORBID_CONTENTS")?pe({},x.FORBID_CONTENTS,we):ho,St=mn(x,"FORBID_TAGS")?pe({},x.FORBID_TAGS,we):{},fn=mn(x,"FORBID_ATTR")?pe({},x.FORBID_ATTR,we):{},An=mn(x,"USE_PROFILES")?x.USE_PROFILES:!1,uo=x.ALLOW_ARIA_ATTR!==!1,ji=x.ALLOW_DATA_ATTR!==!1,Xa=x.ALLOW_UNKNOWN_PROTOCOLS||!1,co=x.ALLOW_SELF_CLOSE_IN_ATTR!==!1,vr=x.SAFE_FOR_TEMPLATES||!1,Gn=x.SAFE_FOR_XML!==!1,En=x.WHOLE_DOCUMENT||!1,Hn=x.RETURN_DOM||!1,wr=x.RETURN_DOM_FRAGMENT||!1,Pn=x.RETURN_TRUSTED_TYPE||!1,Gi=x.FORCE_BODY||!1,si=x.SANITIZE_DOM!==!1,Hi=x.SANITIZE_NAMED_PROPS||!1,Wi=x.KEEP_CONTENT!==!1,Sr=x.IN_PLACE||!1,ie=x.ALLOWED_URI_REGEXP||OS,_n=x.NAMESPACE||Jt,Ee=x.CUSTOM_ELEMENT_HANDLING||{},x.CUSTOM_ELEMENT_HANDLING&&tl(x.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ee.tagNameCheck=x.CUSTOM_ELEMENT_HANDLING.tagNameCheck),x.CUSTOM_ELEMENT_HANDLING&&tl(x.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ee.attributeNameCheck=x.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),x.CUSTOM_ELEMENT_HANDLING&&typeof x.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ee.allowCustomizedBuiltInElements=x.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),vr&&(ji=!1),wr&&(Hn=!0),An&&(ne=pe({},fy),ke=[],An.html===!0&&(pe(ne,hy),pe(ke,dy)),An.svg===!0&&(pe(ne,mh),pe(ke,vh),pe(ke,xl)),An.svgFilters===!0&&(pe(ne,gh),pe(ke,vh),pe(ke,xl)),An.mathMl===!0&&(pe(ne,yh),pe(ke,py),pe(ke,xl))),x.ADD_TAGS&&(ne===re&&(ne=pi(ne)),pe(ne,x.ADD_TAGS,we)),x.ADD_ATTR&&(ke===Vt&&(ke=pi(ke)),pe(ke,x.ADD_ATTR,we)),x.ADD_URI_SAFE_ATTR&&pe(xt,x.ADD_URI_SAFE_ATTR,we),x.FORBID_CONTENTS&&(Wn===ho&&(Wn=pi(Wn)),pe(Wn,x.FORBID_CONTENTS,we)),Wi&&(ne["#text"]=!0),En&&pe(ne,["html","head","body"]),ne.table&&(pe(ne,["tbody"]),delete St.tbody),x.TRUSTED_TYPES_POLICY){if(typeof x.TRUSTED_TYPES_POLICY.createHTML!="function")throw Bo('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof x.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Bo('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');T=x.TRUSTED_TYPES_POLICY,L=T.createHTML("")}else T===void 0&&(T=L_(P,s)),T!==null&&typeof L=="string"&&(L=T.createHTML(""));At&&At(x),qn=x}},fo=pe({},["mi","mo","mn","ms","mtext"]),nl=pe({},["foreignobject","annotation-xml"]),lc=pe({},["title","style","font","a","script"]),po=pe({},[...mh,...gh,...R_]),mo=pe({},[...yh,...E_]),uc=function(x){let G=E(x);(!G||!G.tagName)&&(G={namespaceURI:_n,tagName:"template"});const Q=Kl(x.tagName),le=Kl(G.tagName);return $i[x.namespaceURI]?x.namespaceURI===ai?G.namespaceURI===Jt?Q==="svg":G.namespaceURI===oi?Q==="svg"&&(le==="annotation-xml"||fo[le]):!!po[Q]:x.namespaceURI===oi?G.namespaceURI===Jt?Q==="math":G.namespaceURI===ai?Q==="math"&&nl[le]:!!mo[Q]:x.namespaceURI===Jt?G.namespaceURI===ai&&!nl[le]||G.namespaceURI===oi&&!fo[le]?!1:!mo[Q]&&(lc[Q]||!po[Q]):!!(On==="application/xhtml+xml"&&$i[x.namespaceURI]):!1},jt=function(x){Uo(t.removed,{element:x});try{E(x).removeChild(x)}catch{k(x)}},Qi=function(x,G){try{Uo(t.removed,{attribute:G.getAttributeNode(x),from:G})}catch{Uo(t.removed,{attribute:null,from:G})}if(G.removeAttribute(x),x==="is"&&!ke[x])if(Hn||wr)try{jt(G)}catch{}else try{G.setAttribute(x,"")}catch{}},rl=function(x){let G=null,Q=null;if(Gi)x="<remove></remove>"+x;else{const Qe=cy(x,/^[\r\n\t ]+/);Q=Qe&&Qe[0]}On==="application/xhtml+xml"&&_n===Jt&&(x='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+x+"</body></html>");const le=T?T.createHTML(x):x;if(_n===Jt)try{G=new w().parseFromString(le,On)}catch{}if(!G||!G.documentElement){G=V.createDocument(_n,"template",null);try{G.documentElement.innerHTML=li?L:le}catch{}}const Ke=G.body||G.documentElement;return x&&Q&&Ke.insertBefore(n.createTextNode(Q),Ke.childNodes[0]||null),_n===Jt?J.call(G,En?"html":"body")[0]:En?G.documentElement:Ke},Yi=function(x){return H.call(x.ownerDocument||x,x,p.SHOW_ELEMENT|p.SHOW_COMMENT|p.SHOW_TEXT|p.SHOW_PROCESSING_INSTRUCTION|p.SHOW_CDATA_SECTION,null)},il=function(x){return x instanceof y&&(typeof x.nodeName!="string"||typeof x.textContent!="string"||typeof x.removeChild!="function"||!(x.attributes instanceof v)||typeof x.removeAttribute!="function"||typeof x.setAttribute!="function"||typeof x.namespaceURI!="string"||typeof x.insertBefore!="function"||typeof x.hasChildNodes!="function")},sl=function(x){return typeof h=="function"&&x instanceof h},Mt=function(x,G,Q){m[x]&&kl(m[x],le=>{le.call(t,G,Q,qn)})},go=function(x){let G=null;if(Mt("beforeSanitizeElements",x,null),il(x))return jt(x),!0;const Q=we(x.nodeName);if(Mt("uponSanitizeElement",x,{tagName:Q,allowedTags:ne}),x.hasChildNodes()&&!sl(x.firstElementChild)&&Ct(/<[/\w]/g,x.innerHTML)&&Ct(/<[/\w]/g,x.textContent)||x.nodeType===jo.progressingInstruction||Gn&&x.nodeType===jo.comment&&Ct(/<[/\w]/g,x.data))return jt(x),!0;if(!ne[Q]||St[Q]){if(!St[Q]&&ol(Q)&&(Ee.tagNameCheck instanceof RegExp&&Ct(Ee.tagNameCheck,Q)||Ee.tagNameCheck instanceof Function&&Ee.tagNameCheck(Q)))return!1;if(Wi&&!Wn[Q]){const le=E(x)||x.parentNode,Ke=S(x)||x.childNodes;if(Ke&&le){const Qe=Ke.length;for(let Ye=Qe-1;Ye>=0;--Ye){const It=A(Ke[Ye],!0);It.__removalCount=(x.__removalCount||0)+1,le.insertBefore(It,C(x))}}}return jt(x),!0}return x instanceof f&&!uc(x)||(Q==="noscript"||Q==="noembed"||Q==="noframes")&&Ct(/<\/no(script|embed|frames)/i,x.innerHTML)?(jt(x),!0):(vr&&x.nodeType===jo.text&&(G=x.textContent,kl([Ae,Le,N],le=>{G=Fo(G,le," ")}),x.textContent!==G&&(Uo(t.removed,{element:x.cloneNode()}),x.textContent=G)),Mt("afterSanitizeElements",x,null),!1)},ui=function(x,G,Q){if(si&&(G==="id"||G==="name")&&(Q in n||Q in el))return!1;if(!(ji&&!fn[G]&&Ct(ue,G))){if(!(uo&&Ct(Re,G))){if(!ke[G]||fn[G]){if(!(ol(x)&&(Ee.tagNameCheck instanceof RegExp&&Ct(Ee.tagNameCheck,x)||Ee.tagNameCheck instanceof Function&&Ee.tagNameCheck(x))&&(Ee.attributeNameCheck instanceof RegExp&&Ct(Ee.attributeNameCheck,G)||Ee.attributeNameCheck instanceof Function&&Ee.attributeNameCheck(G))||G==="is"&&Ee.allowCustomizedBuiltInElements&&(Ee.tagNameCheck instanceof RegExp&&Ct(Ee.tagNameCheck,Q)||Ee.tagNameCheck instanceof Function&&Ee.tagNameCheck(Q))))return!1}else if(!xt[G]){if(!Ct(ie,Fo(Q,W,""))){if(!((G==="src"||G==="xlink:href"||G==="href")&&x!=="script"&&w_(Q,"data:")===0&&tt[x])){if(!(Xa&&!Ct(Z,Fo(Q,W,"")))){if(Q)return!1}}}}}}return!0},ol=function(x){return x!=="annotation-xml"&&cy(x,se)},al=function(x){Mt("beforeSanitizeAttributes",x,null);const{attributes:G}=x;if(!G)return;const Q={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ke};let le=G.length;for(;le--;){const Ke=G[le],{name:Qe,namespaceURI:Ye,value:It}=Ke,ci=we(Qe);let it=Qe==="value"?It:S_(It);if(Q.attrName=ci,Q.attrValue=it,Q.keepAttr=!0,Q.forceKeepAttr=void 0,Mt("uponSanitizeAttribute",x,Q),it=Q.attrValue,Gn&&Ct(/((--!?|])>)|<\/(style|title)/i,it)){Qi(Qe,x);continue}if(Q.forceKeepAttr||(Qi(Qe,x),!Q.keepAttr))continue;if(!co&&Ct(/\/>/i,it)){Qi(Qe,x);continue}vr&&kl([Ae,Le,N],ll=>{it=Fo(it,ll," ")});const yo=we(x.nodeName);if(ui(yo,ci,it)){if(Hi&&(ci==="id"||ci==="name")&&(Qi(Qe,x),it=xe+it),T&&typeof P=="object"&&typeof P.getAttributeType=="function"&&!Ye)switch(P.getAttributeType(yo,ci)){case"TrustedHTML":{it=T.createHTML(it);break}case"TrustedScriptURL":{it=T.createScriptURL(it);break}}try{Ye?x.setAttributeNS(Ye,Qe,it):x.setAttribute(Qe,it),il(x)?jt(x):uy(t.removed)}catch{}}}Mt("afterSanitizeAttributes",x,null)},ae=function te(x){let G=null;const Q=Yi(x);for(Mt("beforeSanitizeShadowDOM",x,null);G=Q.nextNode();)Mt("uponSanitizeShadowNode",G,null),!go(G)&&(G.content instanceof a&&te(G.content),al(G));Mt("afterSanitizeShadowDOM",x,null)};return t.sanitize=function(te){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},G=null,Q=null,le=null,Ke=null;if(li=!te,li&&(te="<!-->"),typeof te!="string"&&!sl(te))if(typeof te.toString=="function"){if(te=te.toString(),typeof te!="string")throw Bo("dirty is not a string, aborting")}else throw Bo("toString is not a function");if(!t.isSupported)return te;if(zi||qe(x),t.removed=[],typeof te=="string"&&(Sr=!1),Sr){if(te.nodeName){const It=we(te.nodeName);if(!ne[It]||St[It])throw Bo("root node is forbidden and cannot be sanitized in-place")}}else if(te instanceof h)G=rl("<!---->"),Q=G.ownerDocument.importNode(te,!0),Q.nodeType===jo.element&&Q.nodeName==="BODY"||Q.nodeName==="HTML"?G=Q:G.appendChild(Q);else{if(!Hn&&!vr&&!En&&te.indexOf("<")===-1)return T&&Pn?T.createHTML(te):te;if(G=rl(te),!G)return Hn?null:Pn?L:""}G&&Gi&&jt(G.firstChild);const Qe=Yi(Sr?te:G);for(;le=Qe.nextNode();)go(le)||(le.content instanceof a&&ae(le.content),al(le));if(Sr)return te;if(Hn){if(wr)for(Ke=F.call(G.ownerDocument);G.firstChild;)Ke.appendChild(G.firstChild);else Ke=G;return(ke.shadowroot||ke.shadowrootmode)&&(Ke=Y.call(r,Ke,!0)),Ke}let Ye=En?G.outerHTML:G.innerHTML;return En&&ne["!doctype"]&&G.ownerDocument&&G.ownerDocument.doctype&&G.ownerDocument.doctype.name&&Ct(kS,G.ownerDocument.doctype.name)&&(Ye="<!DOCTYPE "+G.ownerDocument.doctype.name+`>
`+Ye),vr&&kl([Ae,Le,N],It=>{Ye=Fo(Ye,It," ")}),T&&Pn?T.createHTML(Ye):Ye},t.setConfig=function(){let te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};qe(te),zi=!0},t.clearConfig=function(){qn=null,zi=!1},t.isValidAttribute=function(te,x,G){qn||qe({});const Q=we(te),le=we(x);return ui(Q,le,G)},t.addHook=function(te,x){typeof x=="function"&&(m[te]=m[te]||[],Uo(m[te],x))},t.removeHook=function(te){if(m[te])return uy(m[te])},t.removeHooks=function(te){m[te]&&(m[te]=[])},t.removeAllHooks=function(){m={}},t}var bb=xS(),qa=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Js=typeof window>"u"||"Deno"in globalThis;function nn(){}function D_(e,t){return typeof e=="function"?e(t):e}function If(e){return typeof e=="number"&&e>=0&&e!==1/0}function MS(e,t){return Math.max(e+(t||0)-Date.now(),0)}function xs(e,t){return typeof e=="function"?e(t):e}function Sn(e,t){return typeof e=="function"?e(t):e}function gy(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:u,stale:h}=e;if(u){if(r){if(t.queryHash!==ap(u,t.options))return!1}else if(!Ma(t.queryKey,u))return!1}if(n!=="all"){const f=t.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof h=="boolean"&&t.isStale()!==h||s&&s!==t.state.fetchStatus||a&&!a(t))}function yy(e,t){const{exact:n,status:r,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(xa(t.options.mutationKey)!==xa(a))return!1}else if(!Ma(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function ap(e,t){return((t==null?void 0:t.queryKeyHashFn)||xa)(e)}function xa(e){return JSON.stringify(e,(t,n)=>Lf(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Ma(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!Ma(e[n],t[n])):!1}function IS(e,t){if(e===t)return e;const n=vy(e)&&vy(t);if(n||Lf(e)&&Lf(t)){const r=n?e:Object.keys(e),s=r.length,a=n?t:Object.keys(t),u=a.length,h=n?[]:{};let f=0;for(let p=0;p<u;p++){const v=n?p:a[p];(!n&&r.includes(v)||n)&&e[v]===void 0&&t[v]===void 0?(h[v]=void 0,f++):(h[v]=IS(e[v],t[v]),h[v]===e[v]&&e[v]!==void 0&&f++)}return s===u&&f===s?e:h}return t}function bf(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function vy(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Lf(e){if(!wy(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!wy(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function wy(e){return Object.prototype.toString.call(e)==="[object Object]"}function N_(e){return new Promise(t=>{setTimeout(t,e)})}function Df(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?IS(e,t):t}function U_(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function F_(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var bS=Symbol();function LS(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===bS?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Ti,br,Is,Kv,B_=(Kv=class extends qa{constructor(){super();he(this,Ti);he(this,br);he(this,Is);X(this,Is,t=>{if(!Js&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){M(this,br)||this.setEventListener(M(this,Is))}onUnsubscribe(){var t;this.hasListeners()||((t=M(this,br))==null||t.call(this),X(this,br,void 0))}setEventListener(t){var n;X(this,Is,t),(n=M(this,br))==null||n.call(this),X(this,br,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){M(this,Ti)!==t&&(X(this,Ti,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof M(this,Ti)=="boolean"?M(this,Ti):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Ti=new WeakMap,br=new WeakMap,Is=new WeakMap,Kv),lp=new B_,bs,Lr,Ls,Qv,V_=(Qv=class extends qa{constructor(){super();he(this,bs,!0);he(this,Lr);he(this,Ls);X(this,Ls,t=>{if(!Js&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){M(this,Lr)||this.setEventListener(M(this,Ls))}onUnsubscribe(){var t;this.hasListeners()||((t=M(this,Lr))==null||t.call(this),X(this,Lr,void 0))}setEventListener(t){var n;X(this,Ls,t),(n=M(this,Lr))==null||n.call(this),X(this,Lr,t(this.setOnline.bind(this)))}setOnline(t){M(this,bs)!==t&&(X(this,bs,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return M(this,bs)}},bs=new WeakMap,Lr=new WeakMap,Ls=new WeakMap,Qv),Pu=new V_;function j_(e){return Math.min(1e3*2**e,3e4)}function DS(e){return(e??"online")==="online"?Pu.isOnline():!0}var NS=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function wh(e){return e instanceof NS}function US(e){let t=!1,n=0,r=!1,s,a,u;const h=new Promise((C,S)=>{a=C,u=S}),f=C=>{var S;r||(_(new NS(C)),(S=e.abort)==null||S.call(e))},p=()=>{t=!0},v=()=>{t=!1},y=()=>lp.isFocused()&&(e.networkMode==="always"||Pu.isOnline())&&e.canRun(),w=()=>DS(e.networkMode)&&e.canRun(),P=C=>{var S;r||(r=!0,(S=e.onSuccess)==null||S.call(e,C),s==null||s(),a(C))},_=C=>{var S;r||(r=!0,(S=e.onError)==null||S.call(e,C),s==null||s(),u(C))},A=()=>new Promise(C=>{var S;s=E=>{(r||y())&&C(E)},(S=e.onPause)==null||S.call(e)}).then(()=>{var C;s=void 0,r||(C=e.onContinue)==null||C.call(e)}),k=()=>{if(r)return;let C;const S=n===0?e.initialPromise:void 0;try{C=S??e.fn()}catch(E){C=Promise.reject(E)}Promise.resolve(C).then(P).catch(E=>{var F;if(r)return;const T=e.retry??(Js?0:3),L=e.retryDelay??j_,V=typeof L=="function"?L(n,E):L,H=T===!0||typeof T=="number"&&n<T||typeof T=="function"&&T(n,E);if(t||!H){_(E);return}n++,(F=e.onFail)==null||F.call(e,n,E),N_(V).then(()=>y()?void 0:A()).then(()=>{t?_(E):k()})})};return{promise:h,cancel:f,continue:()=>(s==null||s(),h),cancelRetry:p,continueRetry:v,canStart:w,start:()=>(w()?k():A().then(k),h)}}function z_(){let e=[],t=0,n=w=>{w()},r=w=>{w()},s=w=>setTimeout(w,0);const a=w=>{s=w},u=w=>{let P;t++;try{P=w()}finally{t--,t||p()}return P},h=w=>{t?e.push(w):s(()=>{n(w)})},f=w=>(...P)=>{h(()=>{w(...P)})},p=()=>{const w=e;e=[],w.length&&s(()=>{r(()=>{w.forEach(P=>{n(P)})})})};return{batch:u,batchCalls:f,schedule:h,setNotifyFunction:w=>{n=w},setBatchNotifyFunction:w=>{r=w},setScheduler:a}}var at=z_(),Ri,Yv,FS=(Yv=class{constructor(){he(this,Ri)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),If(this.gcTime)&&X(this,Ri,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Js?1/0:5*60*1e3))}clearGcTimeout(){M(this,Ri)&&(clearTimeout(M(this,Ri)),X(this,Ri,void 0))}},Ri=new WeakMap,Yv),Ds,Ns,tn,pt,Ua,Ei,yn,Jn,Xv,G_=(Xv=class extends FS{constructor(t){super();he(this,yn);he(this,Ds);he(this,Ns);he(this,tn);he(this,pt);he(this,Ua);he(this,Ei);X(this,Ei,!1),X(this,Ua,t.defaultOptions),this.setOptions(t.options),this.observers=[],X(this,tn,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,X(this,Ds,H_(this.options)),this.state=t.state??M(this,Ds),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=M(this,pt))==null?void 0:t.promise}setOptions(t){this.options={...M(this,Ua),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&M(this,tn).remove(this)}setData(t,n){const r=Df(this.state.data,t,this.options);return ge(this,yn,Jn).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){ge(this,yn,Jn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=M(this,pt))==null?void 0:r.promise;return(s=M(this,pt))==null||s.cancel(t),n?n.then(nn).catch(nn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(M(this,Ds))}isActive(){return this.observers.some(t=>Sn(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!MS(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=M(this,pt))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=M(this,pt))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),M(this,tn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(M(this,pt)&&(M(this,Ei)?M(this,pt).cancel({revert:!0}):M(this,pt).cancelRetry()),this.scheduleGc()),M(this,tn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ge(this,yn,Jn).call(this,{type:"invalidate"})}fetch(t,n){var f,p,v;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(M(this,pt))return M(this,pt).continueRetry(),M(this,pt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const y=this.observers.find(w=>w.options.queryFn);y&&this.setOptions(y.options)}const r=new AbortController,s=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(X(this,Ei,!0),r.signal)})},a=()=>{const y=LS(this.options,n),w={queryKey:this.queryKey,meta:this.meta};return s(w),X(this,Ei,!1),this.options.persister?this.options.persister(y,w,this):y(w)},u={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};s(u),(f=this.options.behavior)==null||f.onFetch(u,this),X(this,Ns,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((p=u.fetchOptions)==null?void 0:p.meta))&&ge(this,yn,Jn).call(this,{type:"fetch",meta:(v=u.fetchOptions)==null?void 0:v.meta});const h=y=>{var w,P,_,A;wh(y)&&y.silent||ge(this,yn,Jn).call(this,{type:"error",error:y}),wh(y)||((P=(w=M(this,tn).config).onError)==null||P.call(w,y,this),(A=(_=M(this,tn).config).onSettled)==null||A.call(_,this.state.data,y,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return X(this,pt,US({initialPromise:n==null?void 0:n.initialPromise,fn:u.fetchFn,abort:r.abort.bind(r),onSuccess:y=>{var w,P,_,A;if(y===void 0){h(new Error(`${this.queryHash} data is undefined`));return}this.setData(y),(P=(w=M(this,tn).config).onSuccess)==null||P.call(w,y,this),(A=(_=M(this,tn).config).onSettled)==null||A.call(_,y,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:h,onFail:(y,w)=>{ge(this,yn,Jn).call(this,{type:"failed",failureCount:y,error:w})},onPause:()=>{ge(this,yn,Jn).call(this,{type:"pause"})},onContinue:()=>{ge(this,yn,Jn).call(this,{type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0})),M(this,pt).start()}},Ds=new WeakMap,Ns=new WeakMap,tn=new WeakMap,pt=new WeakMap,Ua=new WeakMap,Ei=new WeakMap,yn=new WeakSet,Jn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...BS(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return wh(s)&&s.revert&&M(this,Ns)?{...M(this,Ns),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),at.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),M(this,tn).notify({query:this,type:"updated",action:t})})},Xv);function BS(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:DS(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function H_(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Dn,Jv,W_=(Jv=class extends qa{constructor(t={}){super();he(this,Dn);this.config=t,X(this,Dn,new Map)}build(t,n,r){const s=n.queryKey,a=n.queryHash??ap(s,n);let u=this.get(a);return u||(u=new G_({cache:this,queryKey:s,queryHash:a,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(u)),u}add(t){M(this,Dn).has(t.queryHash)||(M(this,Dn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=M(this,Dn).get(t.queryHash);n&&(t.destroy(),n===t&&M(this,Dn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){at.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return M(this,Dn).get(t)}getAll(){return[...M(this,Dn).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>gy(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>gy(t,r)):n}notify(t){at.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){at.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){at.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Dn=new WeakMap,Jv),Nn,Tt,Pi,Un,_r,Zv,q_=(Zv=class extends FS{constructor(t){super();he(this,Un);he(this,Nn);he(this,Tt);he(this,Pi);this.mutationId=t.mutationId,X(this,Tt,t.mutationCache),X(this,Nn,[]),this.state=t.state||$_(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){M(this,Nn).includes(t)||(M(this,Nn).push(t),this.clearGcTimeout(),M(this,Tt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){X(this,Nn,M(this,Nn).filter(n=>n!==t)),this.scheduleGc(),M(this,Tt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){M(this,Nn).length||(this.state.status==="pending"?this.scheduleGc():M(this,Tt).remove(this))}continue(){var t;return((t=M(this,Pi))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,a,u,h,f,p,v,y,w,P,_,A,k,C,S,E,T,L,V,H;X(this,Pi,US({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(F,J)=>{ge(this,Un,_r).call(this,{type:"failed",failureCount:F,error:J})},onPause:()=>{ge(this,Un,_r).call(this,{type:"pause"})},onContinue:()=>{ge(this,Un,_r).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>M(this,Tt).canRun(this)}));const n=this.state.status==="pending",r=!M(this,Pi).canStart();try{if(!n){ge(this,Un,_r).call(this,{type:"pending",variables:t,isPaused:r}),await((a=(s=M(this,Tt).config).onMutate)==null?void 0:a.call(s,t,this));const J=await((h=(u=this.options).onMutate)==null?void 0:h.call(u,t));J!==this.state.context&&ge(this,Un,_r).call(this,{type:"pending",context:J,variables:t,isPaused:r})}const F=await M(this,Pi).start();return await((p=(f=M(this,Tt).config).onSuccess)==null?void 0:p.call(f,F,t,this.state.context,this)),await((y=(v=this.options).onSuccess)==null?void 0:y.call(v,F,t,this.state.context)),await((P=(w=M(this,Tt).config).onSettled)==null?void 0:P.call(w,F,null,this.state.variables,this.state.context,this)),await((A=(_=this.options).onSettled)==null?void 0:A.call(_,F,null,t,this.state.context)),ge(this,Un,_r).call(this,{type:"success",data:F}),F}catch(F){try{throw await((C=(k=M(this,Tt).config).onError)==null?void 0:C.call(k,F,t,this.state.context,this)),await((E=(S=this.options).onError)==null?void 0:E.call(S,F,t,this.state.context)),await((L=(T=M(this,Tt).config).onSettled)==null?void 0:L.call(T,void 0,F,this.state.variables,this.state.context,this)),await((H=(V=this.options).onSettled)==null?void 0:H.call(V,void 0,F,t,this.state.context)),F}finally{ge(this,Un,_r).call(this,{type:"error",error:F})}}finally{M(this,Tt).runNext(this)}}},Nn=new WeakMap,Tt=new WeakMap,Pi=new WeakMap,Un=new WeakSet,_r=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),at.batch(()=>{M(this,Nn).forEach(r=>{r.onMutationUpdate(t)}),M(this,Tt).notify({mutation:this,type:"updated",action:t})})},Zv);function $_(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Gt,Fa,e0,K_=(e0=class extends qa{constructor(t={}){super();he(this,Gt);he(this,Fa);this.config=t,X(this,Gt,new Map),X(this,Fa,Date.now())}build(t,n,r){const s=new q_({mutationCache:this,mutationId:++hl(this,Fa)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){const n=Ml(t),r=M(this,Gt).get(n)??[];r.push(t),M(this,Gt).set(n,r),this.notify({type:"added",mutation:t})}remove(t){var r;const n=Ml(t);if(M(this,Gt).has(n)){const s=(r=M(this,Gt).get(n))==null?void 0:r.filter(a=>a!==t);s&&(s.length===0?M(this,Gt).delete(n):M(this,Gt).set(n,s))}this.notify({type:"removed",mutation:t})}canRun(t){var r;const n=(r=M(this,Gt).get(Ml(t)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===t}runNext(t){var r;const n=(r=M(this,Gt).get(Ml(t)))==null?void 0:r.find(s=>s!==t&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){at.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...M(this,Gt).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(r=>yy(n,r))}findAll(t={}){return this.getAll().filter(n=>yy(t,n))}notify(t){at.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return at.batch(()=>Promise.all(t.map(n=>n.continue().catch(nn))))}},Gt=new WeakMap,Fa=new WeakMap,e0);function Ml(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function Q_(e){return{onFetch:(t,n)=>{const r=async()=>{var _,A,k,C,S;const s=t.options,a=(k=(A=(_=t.fetchOptions)==null?void 0:_.meta)==null?void 0:A.fetchMore)==null?void 0:k.direction,u=((C=t.state.data)==null?void 0:C.pages)||[],h=((S=t.state.data)==null?void 0:S.pageParams)||[],f={pages:[],pageParams:[]};let p=!1;const v=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(t.signal.aborted?p=!0:t.signal.addEventListener("abort",()=>{p=!0}),t.signal)})},y=LS(t.options,t.fetchOptions),w=async(E,T,L)=>{if(p)return Promise.reject();if(T==null&&E.pages.length)return Promise.resolve(E);const V={queryKey:t.queryKey,pageParam:T,direction:L?"backward":"forward",meta:t.options.meta};v(V);const H=await y(V),{maxPages:F}=t.options,J=L?F_:U_;return{pages:J(E.pages,H,F),pageParams:J(E.pageParams,T,F)}};let P;if(a&&u.length){const E=a==="backward",T=E?Y_:Sy,L={pages:u,pageParams:h},V=T(s,L);P=await w(L,V,E)}else{P=await w(f,h[0]??s.initialPageParam);const E=e??u.length;for(let T=1;T<E;T++){const L=Sy(s,P);if(L==null)break;P=await w(P,L)}}return P};t.options.persister?t.fetchFn=()=>{var s,a;return(a=(s=t.options).persister)==null?void 0:a.call(s,r,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=r}}}function Sy(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function Y_(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Ve,Dr,Nr,Us,Fs,Ur,Bs,Vs,t0,Lb=(t0=class{constructor(e={}){he(this,Ve);he(this,Dr);he(this,Nr);he(this,Us);he(this,Fs);he(this,Ur);he(this,Bs);he(this,Vs);X(this,Ve,e.queryCache||new W_),X(this,Dr,e.mutationCache||new K_),X(this,Nr,e.defaultOptions||{}),X(this,Us,new Map),X(this,Fs,new Map),X(this,Ur,0)}mount(){hl(this,Ur)._++,M(this,Ur)===1&&(X(this,Bs,lp.subscribe(async e=>{e&&(await this.resumePausedMutations(),M(this,Ve).onFocus())})),X(this,Vs,Pu.subscribe(async e=>{e&&(await this.resumePausedMutations(),M(this,Ve).onOnline())})))}unmount(){var e,t;hl(this,Ur)._--,M(this,Ur)===0&&((e=M(this,Bs))==null||e.call(this),X(this,Bs,void 0),(t=M(this,Vs))==null||t.call(this),X(this,Vs,void 0))}isFetching(e){return M(this,Ve).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return M(this,Dr).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=M(this,Ve).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=M(this,Ve).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(xs(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return M(this,Ve).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=M(this,Ve).get(r.queryHash),a=s==null?void 0:s.state.data,u=D_(t,a);if(u!==void 0)return M(this,Ve).build(this,r).setData(u,{...n,manual:!0})}setQueriesData(e,t,n){return at.batch(()=>M(this,Ve).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=M(this,Ve).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=M(this,Ve);at.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=M(this,Ve),r={type:"active",...e};return at.batch(()=>(n.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=at.batch(()=>M(this,Ve).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(nn).catch(nn)}invalidateQueries(e={},t={}){return at.batch(()=>{if(M(this,Ve).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},r=at.batch(()=>M(this,Ve).findAll(e).filter(s=>!s.isDisabled()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(nn)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(nn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=M(this,Ve).build(this,t);return n.isStaleByTime(xs(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(nn).catch(nn)}fetchInfiniteQuery(e){return e.behavior=Q_(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(nn).catch(nn)}resumePausedMutations(){return Pu.isOnline()?M(this,Dr).resumePausedMutations():Promise.resolve()}getQueryCache(){return M(this,Ve)}getMutationCache(){return M(this,Dr)}getDefaultOptions(){return M(this,Nr)}setDefaultOptions(e){X(this,Nr,e)}setQueryDefaults(e,t){M(this,Us).set(xa(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...M(this,Us).values()];let n={};return t.forEach(r=>{Ma(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){M(this,Fs).set(xa(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...M(this,Fs).values()];let n={};return t.forEach(r=>{Ma(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...M(this,Nr).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=ap(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===bS&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...M(this,Nr).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){M(this,Ve).clear(),M(this,Dr).clear()}},Ve=new WeakMap,Dr=new WeakMap,Nr=new WeakMap,Us=new WeakMap,Fs=new WeakMap,Ur=new WeakMap,Bs=new WeakMap,Vs=new WeakMap,t0),Lt,ye,Ba,Rt,Ai,js,Fn,Va,zs,Gs,_i,Oi,Fr,Hs,Se,$o,Nf,Uf,Ff,Bf,Vf,jf,zf,VS,n0,X_=(n0=class extends qa{constructor(t,n){super();he(this,Se);he(this,Lt);he(this,ye);he(this,Ba);he(this,Rt);he(this,Ai);he(this,js);he(this,Fn);he(this,Va);he(this,zs);he(this,Gs);he(this,_i);he(this,Oi);he(this,Fr);he(this,Hs,new Set);this.options=n,X(this,Lt,t),X(this,Fn,null),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(M(this,ye).addObserver(this),Cy(M(this,ye),this.options)?ge(this,Se,$o).call(this):this.updateResult(),ge(this,Se,Bf).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Gf(M(this,ye),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Gf(M(this,ye),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ge(this,Se,Vf).call(this),ge(this,Se,jf).call(this),M(this,ye).removeObserver(this)}setOptions(t,n){const r=this.options,s=M(this,ye);if(this.options=M(this,Lt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Sn(this.options.enabled,M(this,ye))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ge(this,Se,zf).call(this),M(this,ye).setOptions(this.options),r._defaulted&&!bf(this.options,r)&&M(this,Lt).getQueryCache().notify({type:"observerOptionsUpdated",query:M(this,ye),observer:this});const a=this.hasListeners();a&&Ty(M(this,ye),s,this.options,r)&&ge(this,Se,$o).call(this),this.updateResult(n),a&&(M(this,ye)!==s||Sn(this.options.enabled,M(this,ye))!==Sn(r.enabled,M(this,ye))||xs(this.options.staleTime,M(this,ye))!==xs(r.staleTime,M(this,ye)))&&ge(this,Se,Nf).call(this);const u=ge(this,Se,Uf).call(this);a&&(M(this,ye)!==s||Sn(this.options.enabled,M(this,ye))!==Sn(r.enabled,M(this,ye))||u!==M(this,Fr))&&ge(this,Se,Ff).call(this,u)}getOptimisticResult(t){const n=M(this,Lt).getQueryCache().build(M(this,Lt),t),r=this.createResult(n,t);return Z_(this,r)&&(X(this,Rt,r),X(this,js,this.options),X(this,Ai,M(this,ye).state)),r}getCurrentResult(){return M(this,Rt)}trackResult(t,n){const r={};return Object.keys(t).forEach(s=>{Object.defineProperty(r,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),n==null||n(s),t[s])})}),r}trackProp(t){M(this,Hs).add(t)}getCurrentQuery(){return M(this,ye)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=M(this,Lt).defaultQueryOptions(t),r=M(this,Lt).getQueryCache().build(M(this,Lt),n);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,n))}fetch(t){return ge(this,Se,$o).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),M(this,Rt)))}createResult(t,n){var H;const r=M(this,ye),s=this.options,a=M(this,Rt),u=M(this,Ai),h=M(this,js),p=t!==r?t.state:M(this,Ba),{state:v}=t;let y={...v},w=!1,P;if(n._optimisticResults){const F=this.hasListeners(),J=!F&&Cy(t,n),Y=F&&Ty(t,r,n,s);(J||Y)&&(y={...y,...BS(v.data,t.options)}),n._optimisticResults==="isRestoring"&&(y.fetchStatus="idle")}let{error:_,errorUpdatedAt:A,status:k}=y;if(n.select&&y.data!==void 0)if(a&&y.data===(u==null?void 0:u.data)&&n.select===M(this,Va))P=M(this,zs);else try{X(this,Va,n.select),P=n.select(y.data),P=Df(a==null?void 0:a.data,P,n),X(this,zs,P),X(this,Fn,null)}catch(F){X(this,Fn,F)}else P=y.data;if(n.placeholderData!==void 0&&P===void 0&&k==="pending"){let F;if(a!=null&&a.isPlaceholderData&&n.placeholderData===(h==null?void 0:h.placeholderData))F=a.data;else if(F=typeof n.placeholderData=="function"?n.placeholderData((H=M(this,Gs))==null?void 0:H.state.data,M(this,Gs)):n.placeholderData,n.select&&F!==void 0)try{F=n.select(F),X(this,Fn,null)}catch(J){X(this,Fn,J)}F!==void 0&&(k="success",P=Df(a==null?void 0:a.data,F,n),w=!0)}M(this,Fn)&&(_=M(this,Fn),P=M(this,zs),A=Date.now(),k="error");const C=y.fetchStatus==="fetching",S=k==="pending",E=k==="error",T=S&&C,L=P!==void 0;return{status:k,fetchStatus:y.fetchStatus,isPending:S,isSuccess:k==="success",isError:E,isInitialLoading:T,isLoading:T,data:P,dataUpdatedAt:y.dataUpdatedAt,error:_,errorUpdatedAt:A,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>p.dataUpdateCount||y.errorUpdateCount>p.errorUpdateCount,isFetching:C,isRefetching:C&&!S,isLoadingError:E&&!L,isPaused:y.fetchStatus==="paused",isPlaceholderData:w,isRefetchError:E&&L,isStale:up(t,n),refetch:this.refetch}}updateResult(t){const n=M(this,Rt),r=this.createResult(M(this,ye),this.options);if(X(this,Ai,M(this,ye).state),X(this,js,this.options),M(this,Ai).data!==void 0&&X(this,Gs,M(this,ye)),bf(r,n))return;X(this,Rt,r);const s={},a=()=>{if(!n)return!0;const{notifyOnChangeProps:u}=this.options,h=typeof u=="function"?u():u;if(h==="all"||!h&&!M(this,Hs).size)return!0;const f=new Set(h??M(this,Hs));return this.options.throwOnError&&f.add("error"),Object.keys(M(this,Rt)).some(p=>{const v=p;return M(this,Rt)[v]!==n[v]&&f.has(v)})};(t==null?void 0:t.listeners)!==!1&&a()&&(s.listeners=!0),ge(this,Se,VS).call(this,{...s,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ge(this,Se,Bf).call(this)}},Lt=new WeakMap,ye=new WeakMap,Ba=new WeakMap,Rt=new WeakMap,Ai=new WeakMap,js=new WeakMap,Fn=new WeakMap,Va=new WeakMap,zs=new WeakMap,Gs=new WeakMap,_i=new WeakMap,Oi=new WeakMap,Fr=new WeakMap,Hs=new WeakMap,Se=new WeakSet,$o=function(t){ge(this,Se,zf).call(this);let n=M(this,ye).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(nn)),n},Nf=function(){ge(this,Se,Vf).call(this);const t=xs(this.options.staleTime,M(this,ye));if(Js||M(this,Rt).isStale||!If(t))return;const r=MS(M(this,Rt).dataUpdatedAt,t)+1;X(this,_i,setTimeout(()=>{M(this,Rt).isStale||this.updateResult()},r))},Uf=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(M(this,ye)):this.options.refetchInterval)??!1},Ff=function(t){ge(this,Se,jf).call(this),X(this,Fr,t),!(Js||Sn(this.options.enabled,M(this,ye))===!1||!If(M(this,Fr))||M(this,Fr)===0)&&X(this,Oi,setInterval(()=>{(this.options.refetchIntervalInBackground||lp.isFocused())&&ge(this,Se,$o).call(this)},M(this,Fr)))},Bf=function(){ge(this,Se,Nf).call(this),ge(this,Se,Ff).call(this,ge(this,Se,Uf).call(this))},Vf=function(){M(this,_i)&&(clearTimeout(M(this,_i)),X(this,_i,void 0))},jf=function(){M(this,Oi)&&(clearInterval(M(this,Oi)),X(this,Oi,void 0))},zf=function(){const t=M(this,Lt).getQueryCache().build(M(this,Lt),this.options);if(t===M(this,ye))return;const n=M(this,ye);X(this,ye,t),X(this,Ba,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},VS=function(t){at.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(M(this,Rt))}),M(this,Lt).getQueryCache().notify({query:M(this,ye),type:"observerResultsUpdated"})})},n0);function J_(e,t){return Sn(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Cy(e,t){return J_(e,t)||e.state.data!==void 0&&Gf(e,t,t.refetchOnMount)}function Gf(e,t,n){if(Sn(t.enabled,e)!==!1){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&up(e,t)}return!1}function Ty(e,t,n,r){return(e!==t||Sn(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&up(e,n)}function up(e,t){return Sn(t.enabled,e)!==!1&&e.isStaleByTime(xs(t.staleTime,e))}function Z_(e,t){return!bf(e.getCurrentResult(),t)}var jS=D.createContext(void 0),eO=e=>{const t=D.useContext(jS);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Db=({client:e,children:t})=>(D.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),an.jsx(jS.Provider,{value:e,children:t})),zS=D.createContext(!1),tO=()=>D.useContext(zS);zS.Provider;function nO(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var rO=D.createContext(nO()),iO=()=>D.useContext(rO);function sO(e,t){return typeof e=="function"?e(...t):!!e}var oO=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},aO=e=>{D.useEffect(()=>{e.clearReset()},[e])},lO=({result:e,errorResetBoundary:t,throwOnError:n,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&sO(n,[e.error,r]),uO=e=>{e.suspense&&(typeof e.staleTime!="number"&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},cO=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,hO=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function fO(e,t,n){var p,v,y,w;const r=eO(),s=tO(),a=iO(),u=r.defaultQueryOptions(e);(v=(p=r.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||v.call(p,u),u._optimisticResults=s?"isRestoring":"optimistic",uO(u),oO(u,a),aO(a);const[h]=D.useState(()=>new t(r,u)),f=h.getOptimisticResult(u);if(D.useSyncExternalStore(D.useCallback(P=>{const _=s?()=>{}:h.subscribe(at.batchCalls(P));return h.updateResult(),_},[h,s]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),D.useEffect(()=>{h.setOptions(u,{listeners:!1})},[u,h]),cO(u,f))throw hO(u,h,a);if(lO({result:f,errorResetBoundary:a,throwOnError:u.throwOnError,query:r.getQueryCache().get(u.queryHash)}))throw f.error;return(w=(y=r.getDefaultOptions().queries)==null?void 0:y._experimental_afterQuery)==null||w.call(y,u,f),u.notifyOnChangeProps?f:h.trackResult(f)}function Nb(e,t){return fO(e,X_)}var GS={exports:{}};(function(e){(function(){function t(A,k){document.addEventListener?A.addEventListener("scroll",k,!1):A.attachEvent("scroll",k)}function n(A){document.body?A():document.addEventListener?document.addEventListener("DOMContentLoaded",function k(){document.removeEventListener("DOMContentLoaded",k),A()}):document.attachEvent("onreadystatechange",function k(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",k),A())})}function r(A){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(A)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function s(A,k){A.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+k+";"}function a(A){var k=A.g.offsetWidth,C=k+100;return A.j.style.width=C+"px",A.i.scrollLeft=C,A.h.scrollLeft=A.h.scrollWidth+100,A.l!==k?(A.l=k,!0):!1}function u(A,k){function C(){var E=S;a(E)&&E.g.parentNode!==null&&k(E.l)}var S=A;t(A.h,C),t(A.i,C),a(A)}function h(A,k,C){k=k||{},C=C||window,this.family=A,this.style=k.style||"normal",this.weight=k.weight||"normal",this.stretch=k.stretch||"normal",this.context=C}var f=null,p=null,v=null,y=null;function w(A){return p===null&&(P(A)&&/Apple/.test(window.navigator.vendor)?(A=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),p=!!A&&603>parseInt(A[1],10)):p=!1),p}function P(A){return y===null&&(y=!!A.document.fonts),y}function _(A,k){var C=A.style,S=A.weight;if(v===null){var E=document.createElement("div");try{E.style.font="condensed 100px sans-serif"}catch{}v=E.style.font!==""}return[C,S,v?A.stretch:"","100px",k].join(" ")}h.prototype.load=function(A,k){var C=this,S=A||"BESbswy",E=0,T=k||3e3,L=new Date().getTime();return new Promise(function(V,H){if(P(C.context)&&!w(C.context)){var F=new Promise(function(Y,m){function Ae(){new Date().getTime()-L>=T?m(Error(""+T+"ms timeout exceeded")):C.context.document.fonts.load(_(C,'"'+C.family+'"'),S).then(function(Le){1<=Le.length?Y():setTimeout(Ae,25)},m)}Ae()}),J=new Promise(function(Y,m){E=setTimeout(function(){m(Error(""+T+"ms timeout exceeded"))},T)});Promise.race([J,F]).then(function(){clearTimeout(E),V(C)},H)}else n(function(){function Y(){var re;(re=ue!=-1&&Re!=-1||ue!=-1&&Z!=-1||Re!=-1&&Z!=-1)&&((re=ue!=Re&&ue!=Z&&Re!=Z)||(f===null&&(re=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),f=!!re&&(536>parseInt(re[1],10)||parseInt(re[1],10)===536&&11>=parseInt(re[2],10))),re=f&&(ue==W&&Re==W&&Z==W||ue==se&&Re==se&&Z==se||ue==ie&&Re==ie&&Z==ie)),re=!re),re&&(ne.parentNode!==null&&ne.parentNode.removeChild(ne),clearTimeout(E),V(C))}function m(){if(new Date().getTime()-L>=T)ne.parentNode!==null&&ne.parentNode.removeChild(ne),H(Error(""+T+"ms timeout exceeded"));else{var re=C.context.document.hidden;(re===!0||re===void 0)&&(ue=Ae.g.offsetWidth,Re=Le.g.offsetWidth,Z=N.g.offsetWidth,Y()),E=setTimeout(m,50)}}var Ae=new r(S),Le=new r(S),N=new r(S),ue=-1,Re=-1,Z=-1,W=-1,se=-1,ie=-1,ne=document.createElement("div");ne.dir="ltr",s(Ae,_(C,"sans-serif")),s(Le,_(C,"serif")),s(N,_(C,"monospace")),ne.appendChild(Ae.g),ne.appendChild(Le.g),ne.appendChild(N.g),C.context.document.body.appendChild(ne),W=Ae.g.offsetWidth,se=Le.g.offsetWidth,ie=N.g.offsetWidth,m(),u(Ae,function(re){ue=re,Y()}),s(Ae,_(C,'"'+C.family+'",sans-serif')),u(Le,function(re){Re=re,Y()}),s(Le,_(C,'"'+C.family+'",serif')),u(N,function(re){Z=re,Y()}),s(N,_(C,'"'+C.family+'",monospace'))})})},e.exports=h})()})(GS);var dO=GS.exports;const Ub=r0(dO),pO="2.3.1";function mO(e){return Object.assign(Object.assign({},e),{params:Object.assign(Object.assign({},e==null?void 0:e.params),{agent:`react-hooks/${pO}`})})}const Ry=Symbol.for("__ABLY_CONTEXT__"),Ey=typeof globalThis<"u"?globalThis:{};function gO(){let e=Ey[Ry];return e||(e=Ey[Ry]=ro.createContext({})),e}const Zs=gO();function HS(e="default"){const t=ro.useContext(Zs)[e].client;if(!t)throw new Error("Could not find ably client in context. Make sure your ably hooks are called inside an <AblyProvider>");return t}function WS(e,t,n){const r=D.useRef(t);D.useEffect(()=>{r.current=t},[t]),D.useEffect(()=>(n?e.on(n,r.current):e.on(t),()=>{n?e.off(n,t):e.off(t)}),[e,n,t])}function Py(e,t,n="default"){const s=HS(typeof t=="string"?t:n),a=typeof t=="function"?t:e,u=typeof e!="function"?e:void 0;WS(s.connection,a,u)}function qS(e="default",t){const n=ro.useContext(Zs)[e]._channelNameToChannelContext[t];if(!n)throw new Error(`Could not find a parent ChannelProvider in the component tree for channelName="${t}". Make sure your channel based hooks (usePresence, useChannel, useChannelStateListener) are called inside a <ChannelProvider> component`);return n}function Ay(e,t,n){const r=typeof e=="object"?e:{channelName:e},{ablyId:s,channelName:a}=r,{channel:u}=qS(s,a);WS(u,typeof n=="function"?n:t,typeof t!="function"?t:void 0)}function yO(e){const[t,n]=D.useState(null),[r,s]=D.useState(null);return Py(["suspended","failed","disconnected"],a=>{var u;a.reason&&((u=e.onConnectionError)===null||u===void 0||u.call(e,a.reason),n(a.reason))},e.ablyId),Py(["connected","closed"],()=>{n(null)},e.ablyId),Ay(e,["suspended","failed","detached"],a=>{var u;a.reason&&((u=e.onChannelError)===null||u===void 0||u.call(e,a.reason),s(a.reason))}),Ay(e,["attached"],()=>{s(null)}),{connectionError:t,channelError:r}}function Fb(e,t,n){const r=typeof e=="object"?e:{channelName:e},s=HS(r.ablyId),{channelName:a,skip:u}=r,{channel:h,derived:f}=qS(r.ablyId,a),p=D.useMemo(()=>{if(!f)return h.publish.bind(h);const A=s.channels.get(a);return A.publish.bind(A)},[s.channels,f,h,a]),v=typeof t=="string"?t:null,y=typeof t=="string"?n:t,w=D.useRef(y),{connectionError:P,channelError:_}=yO(r);return D.useEffect(()=>{w.current=y},[y]),D.useEffect(()=>{const A=w.current?C=>{w.current&&w.current(C)}:null,k=A?v===null?[A]:[v,A]:null;return!u&&k&&vO(h,...k),()=>{!u&&k&&wO(h,...k)}},[v,h,u]),{channel:h,publish:p,ably:s,connectionError:P,channelError:_}}async function vO(e,...t){await e.subscribe(...t)}async function wO(e,...t){await e.unsubscribe(...t)}const Bb=({client:e,children:t,ablyId:n="default"})=>{if(!e)throw new Error("AblyProvider: the `client` prop is required");const r=ro.useContext(Zs),s=D.useMemo(()=>Object.assign(Object.assign({},r),{[n]:{client:e,_channelNameToChannelContext:{}}}),[r,e,n]);return an.jsx(Zs.Provider,Object.assign({value:s},{children:t}))},Vb=({ablyId:e="default",channelName:t,options:n,deriveOptions:r,children:s})=>{const a=ro.useContext(Zs),{client:u,_channelNameToChannelContext:h}=a[e];if(h[t])throw new Error("You can not use more than one `ChannelProvider` with the same channel name");const f=!!r,p=f?u.channels.getDerived(t,r):u.channels.get(t),v=D.useMemo(()=>Object.assign(Object.assign({},a),{[e]:{client:u,_channelNameToChannelContext:Object.assign(Object.assign({},h),{[t]:{channel:p,derived:f}})}}),[f,u,p,t,h,e,a]);return D.useLayoutEffect(()=>{p.setOptions(mO(n))},[p,n]),an.jsx(Zs.Provider,Object.assign({value:v},{children:s}))};var Xu={},cp={},$S={exports:{}},SO="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",CO=SO,TO=CO;function KS(){}function QS(){}QS.resetWarningCache=KS;var RO=function(){function e(r,s,a,u,h,f){if(f!==TO){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:QS,resetWarningCache:KS};return n.PropTypes=n,n};$S.exports=RO();var EO=$S.exports,hp={};Object.defineProperty(hp,"__esModule",{value:!0});hp.default=PO;function PO(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var s=Object.prototype.hasOwnProperty,a=0;a<n.length;a++)if(!s.call(t,n[a])||e[n[a]]!==t[n[a]])return!1;return!0}var fp={},YS={exports:{}},We=YS.exports={},bn,Ln;function Hf(){throw new Error("setTimeout has not been defined")}function Wf(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?bn=setTimeout:bn=Hf}catch{bn=Hf}try{typeof clearTimeout=="function"?Ln=clearTimeout:Ln=Wf}catch{Ln=Wf}})();function XS(e){if(bn===setTimeout)return setTimeout(e,0);if((bn===Hf||!bn)&&setTimeout)return bn=setTimeout,setTimeout(e,0);try{return bn(e,0)}catch{try{return bn.call(null,e,0)}catch{return bn.call(this,e,0)}}}function AO(e){if(Ln===clearTimeout)return clearTimeout(e);if((Ln===Wf||!Ln)&&clearTimeout)return Ln=clearTimeout,clearTimeout(e);try{return Ln(e)}catch{try{return Ln.call(null,e)}catch{return Ln.call(this,e)}}}var rr=[],Ms=!1,Si,Ql=-1;function _O(){!Ms||!Si||(Ms=!1,Si.length?rr=Si.concat(rr):Ql=-1,rr.length&&JS())}function JS(){if(!Ms){var e=XS(_O);Ms=!0;for(var t=rr.length;t;){for(Si=rr,rr=[];++Ql<t;)Si&&Si[Ql].run();Ql=-1,t=rr.length}Si=null,Ms=!1,AO(e)}}We.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];rr.push(new ZS(e,t)),rr.length===1&&!Ms&&XS(JS)};function ZS(e,t){this.fun=e,this.array=t}ZS.prototype.run=function(){this.fun.apply(null,this.array)};We.title="browser";We.browser=!0;We.env={};We.argv=[];We.version="";We.versions={};function yr(){}We.on=yr;We.addListener=yr;We.once=yr;We.off=yr;We.removeListener=yr;We.removeAllListeners=yr;We.emit=yr;We.prependListener=yr;We.prependOnceListener=yr;We.listeners=function(e){return[]};We.binding=function(e){throw new Error("process.binding is not supported")};We.cwd=function(){return"/"};We.chdir=function(e){throw new Error("process.chdir is not supported")};We.umask=function(){return 0};var OO=YS.exports;Object.defineProperty(fp,"__esModule",{value:!0});fp.default=IO;var kO=OO,xO=MO(kO);function MO(e){return e&&e.__esModule?e:{default:e}}function IO(e,t){var n=[],r=0,s=!0;function a(h){function f(){t&&t(h,n)}s?xO.default.nextTick(f):f()}function u(h,f){n.push(f),++r>=e.length||h?a(h):e[r](u)}e.length>0?e[0](u):a(null),s=!1}var dp={};Object.defineProperty(dp,"__esModule",{value:!0});dp.default=LO;var bO=function(){};function LO(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:bO;e()?t(function r(s){for(var a=arguments.length,u=Array(a>1?a-1:0),h=1;h<a;h++)u[h-1]=arguments[h];s?n(s):e.apply(this,u)?t(r):n(null)}):n(null)}var pp={};Object.defineProperty(pp,"__esModule",{value:!0});pp.default=DO;function DO(e,t){var n=void 0,r=void 0,s=void 0,a=void 0,u=0;function h(){a=0,u=+new Date,s=e.apply(n,r),n=null,r=null}return function(){n=this,r=arguments;var p=new Date-u;return a||(p>=t?h():a=setTimeout(h,t-p)),s}}var mp={};Object.defineProperty(mp,"__esModule",{value:!0});mp.default=UO;var NO=0;function UO(){return NO++}var Ju={};Object.defineProperty(Ju,"__esModule",{value:!0});Ju.innerHeight=FO;Ju.innerWidth=BO;function FO(e){var t=window.getComputedStyle(e,null);return t?e.clientHeight-parseInt(t.getPropertyValue("padding-top"),10)-parseInt(t.getPropertyValue("padding-bottom"),10):e.clientHeight}function BO(e){var t=window.getComputedStyle(e,null);return t?e.clientWidth-parseInt(t.getPropertyValue("padding-left"),10)-parseInt(t.getPropertyValue("padding-right"),10):e.clientWidth}Object.defineProperty(cp,"__esModule",{value:!0});var _y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VO=function(){function e(t,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),jO=D,Sh=Vi(jO),zO=EO,Ar=Vi(zO),GO=hp,HO=Vi(GO),WO=fp,qO=Vi(WO),$O=dp,Oy=Vi($O),KO=pp,QO=Vi(KO),YO=mp,ky=Vi(YO),xy=Ju;function Vi(e){return e&&e.__esModule?e:{default:e}}function XO(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function JO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZO(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function ek(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function My(e,t){return e.scrollWidth-1<=t}function Iy(e,t){return e.scrollHeight-1<=t}function tk(){}var gp=function(e){ek(t,e);function t(n){JO(this,t);var r=ZO(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return r.state={fontSize:null,ready:!1},r.handleWindowResize=function(){r.process()},"perfectFit"in n&&console.warn("TextFit property perfectFit has been removed."),r.handleWindowResize=(0,QO.default)(r.handleWindowResize,n.throttle),r}return VO(t,[{key:"componentDidMount",value:function(){var r=this.props.autoResize;r&&window.addEventListener("resize",this.handleWindowResize),this.process()}},{key:"componentDidUpdate",value:function(r){var s=this.state.ready;s&&((0,HO.default)(this.props,r)||this.process())}},{key:"componentWillUnmount",value:function(){var r=this.props.autoResize;r&&window.removeEventListener("resize",this.handleWindowResize),this.pid=(0,ky.default)()}},{key:"process",value:function(){var r=this,s=this.props,a=s.min,u=s.max,h=s.mode,f=s.forceSingleModeWidth,p=s.onReady,v=this._parent,y=this._child,w=(0,xy.innerWidth)(v),P=(0,xy.innerHeight)(v);if(P<=0||isNaN(P)){console.warn("Can not process element without height. Make sure the element is displayed and has a static height.");return}if(w<=0||isNaN(w)){console.warn("Can not process element without width. Make sure the element is displayed and has a static width.");return}var _=(0,ky.default)();this.pid=_;var A=function(){return _!==r.pid},k=h==="multi"?function(){return Iy(y,P)}:function(){return My(y,w)},C=h==="multi"?function(){return My(y,w)}:function(){return Iy(y,P)},S=void 0,E=a,T=u;this.setState({ready:!1}),(0,qO.default)([function(L){return(0,Oy.default)(function(){return E<=T},function(V){if(A())return V(!0);S=parseInt((E+T)/2,10),r.setState({fontSize:S},function(){return A()?V(!0):(k()?E=S+1:T=S-1,V())})},L)},function(L){return h==="single"&&f||C()?L():(E=a,T=S,(0,Oy.default)(function(){return E<T},function(V){if(A())return V(!0);S=parseInt((E+T)/2,10),r.setState({fontSize:S},function(){return _!==r.pid?V(!0):(C()?E=S+1:T=S-1,V())})},L))},function(L){if(S=Math.min(E,T),S=Math.max(S,a),S=Math.min(S,u),S=Math.max(S,0),A())return L(!0);r.setState({fontSize:S},L)}],function(L){L||A()||r.setState({ready:!0},function(){return p(S)})})}},{key:"render",value:function(){var r=this,s=this.props,a=s.children,u=s.text,h=s.style;s.min,s.max;var f=s.mode;s.forceWidth,s.forceSingleModeWidth,s.throttle,s.autoResize,s.onReady;var p=XO(s,["children","text","style","min","max","mode","forceWidth","forceSingleModeWidth","throttle","autoResize","onReady"]),v=this.state,y=v.fontSize,w=v.ready,P=_y({},h,{fontSize:y}),_={display:w?"block":"inline-block"};return f==="single"&&(_.whiteSpace="nowrap"),Sh.default.createElement("div",_y({ref:function(k){return r._parent=k},style:P},p),Sh.default.createElement("div",{ref:function(k){return r._child=k},style:_},u&&typeof a=="function"?w?a(u):u:a))}}]),t}(Sh.default.Component);gp.propTypes={children:Ar.default.node,text:Ar.default.string,min:Ar.default.number,max:Ar.default.number,mode:Ar.default.oneOf(["single","multi"]),forceSingleModeWidth:Ar.default.bool,throttle:Ar.default.number,onReady:Ar.default.func};gp.defaultProps={min:1,max:100,mode:"multi",forceSingleModeWidth:!0,throttle:50,autoResize:!0,onReady:tk};cp.default=gp;Object.defineProperty(Xu,"__esModule",{value:!0});var nk=Xu.Textfit=void 0,rk=cp,eC=ik(rk);function ik(e){return e&&e.__esModule?e:{default:e}}nk=Xu.Textfit=eC.default;Xu.default=eC.default;const yp=D.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Zu=D.createContext({}),ec=D.createContext(null),vp=typeof window<"u",tC=vp?D.useLayoutEffect:D.useEffect,nC=D.createContext({strict:!1}),tc=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),sk="framerAppearId",rC="data-"+tc(sk),ok={skipAnimations:!1,useManualTiming:!1};function ak(e){let t=new Set,n=new Set,r=!1,s=!1;const a=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function h(p){a.has(p)&&(f.schedule(p),e()),p(u)}const f={schedule:(p,v=!1,y=!1)=>{const P=y&&r?t:n;return v&&a.add(p),P.has(p)||P.add(p),p},cancel:p=>{n.delete(p),a.delete(p)},process:p=>{if(u=p,r){s=!0;return}r=!0,[t,n]=[n,t],n.clear(),t.forEach(h),r=!1,s&&(s=!1,f.process(p))}};return f}const Il=["read","resolveKeyframes","update","preRender","render","postRender"],lk=40;function iC(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,u=Il.reduce((C,S)=>(C[S]=ak(a),C),{}),{read:h,resolveKeyframes:f,update:p,preRender:v,render:y,postRender:w}=u,P=()=>{const C=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(C-s.timestamp,lk),1),s.timestamp=C,s.isProcessing=!0,h.process(s),f.process(s),p.process(s),v.process(s),y.process(s),w.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(P))},_=()=>{n=!0,r=!0,s.isProcessing||e(P)};return{schedule:Il.reduce((C,S)=>{const E=u[S];return C[S]=(T,L=!1,V=!1)=>(n||_(),E.schedule(T,L,V)),C},{}),cancel:C=>{for(let S=0;S<Il.length;S++)u[Il[S]].cancel(C)},state:s,steps:u}}const{schedule:wp,cancel:jb}=iC(queueMicrotask,!1);function ws(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}const sC=D.createContext({});let by=!1;function uk(e,t,n,r,s){var a;const{visualElement:u}=D.useContext(Zu),h=D.useContext(nC),f=D.useContext(ec),p=D.useContext(yp).reducedMotion,v=D.useRef();r=r||h.renderer,!v.current&&r&&(v.current=r(e,{visualState:t,parent:u,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:p}));const y=v.current,w=D.useContext(sC);y&&!y.projection&&s&&(y.type==="html"||y.type==="svg")&&hk(v.current,n,s,w),D.useInsertionEffect(()=>{y&&y.update(n,f)});const P=n[rC],_=D.useRef(!!P&&!window.MotionHandoffIsComplete&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,P)));return tC(()=>{y&&(y.updateFeatures(),wp.render(y.render),_.current&&y.animationState&&y.animationState.animateChanges())}),D.useEffect(()=>{y&&(!_.current&&y.animationState&&y.animationState.animateChanges(),_.current=!1,by||(by=!0,queueMicrotask(ck)))}),y}function ck(){window.MotionHandoffIsComplete=!0}function hk(e,t,n,r){const{layoutId:s,layout:a,drag:u,dragConstraints:h,layoutScroll:f,layoutRoot:p}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:oC(e.parent)),e.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!u||h&&ws(h),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:f,layoutRoot:p})}function oC(e){if(e)return e.options.allowProjection!==!1?e.projection:oC(e.parent)}function fk(e,t,n){return D.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):ws(n)&&(n.current=r))},[t])}function Ia(e){return typeof e=="string"||Array.isArray(e)}function ba(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Sp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Cp=["initial",...Sp];function nc(e){return ba(e.animate)||Cp.some(t=>Ia(e[t]))}function aC(e){return!!(nc(e)||e.variants)}function dk(e,t){if(nc(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Ia(n)?n:void 0,animate:Ia(r)?r:void 0}}return e.inherit!==!1?t:{}}function pk(e){const{initial:t,animate:n}=dk(e,D.useContext(Zu));return D.useMemo(()=>({initial:t,animate:n}),[Ly(t),Ly(n)])}function Ly(e){return Array.isArray(e)?e.join(" "):e}const Dy={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},eo={};for(const e in Dy)eo[e]={isEnabled:t=>Dy[e].some(n=>!!t[n])};function mk(e){for(const t in e)eo[t]={...eo[t],...e[t]}}const Tp=D.createContext({}),gk=Symbol.for("motionComponentSymbol"),vt=e=>e;let qf=vt;function yk({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:s}){e&&mk(e);function a(h,f){let p;const v={...D.useContext(yp),...h,layoutId:vk(h)},{isStatic:y}=v,w=pk(h),P=r(h,y);if(!y&&vp){wk();const _=Sk(v);p=_.MeasureLayout,w.visualElement=uk(s,P,v,t,_.ProjectionNode)}return an.jsxs(Zu.Provider,{value:w,children:[p&&w.visualElement?an.jsx(p,{visualElement:w.visualElement,...v}):null,n(s,h,fk(P,w.visualElement,f),P,y,w.visualElement)]})}const u=D.forwardRef(a);return u[gk]=s,u}function vk({layoutId:e}){const t=D.useContext(Tp).id;return t&&e!==void 0?t+"-"+e:e}function wk(e,t){D.useContext(nC).strict}function Sk(e){const{drag:t,layout:n}=eo;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Ck(e){function t(r,s={}){return yk(e(r,s))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,s)=>(n.has(s)||n.set(s,t(s)),n.get(s))})}const Tk=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Rp(e){return typeof e!="string"||e.includes("-")?!1:!!(Tk.indexOf(e)>-1||/[A-Z]/u.test(e))}const Au={};function Rk(e){Object.assign(Au,e)}const $a=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ri=new Set($a);function lC(e,{layout:t,layoutId:n}){return ri.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Au[e]||e==="opacity")}const yt=e=>!!(e&&e.getVelocity),uC=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Jr=(e,t,n)=>n>t?t:n<e?e:n,lo={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},aa={...lo,transform:e=>Jr(0,1,e)},bl={...lo,default:1},la=e=>Math.round(e*1e5)/1e5,Ep=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,Ek=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,Pk=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu;function Ka(e){return typeof e=="string"}function Ak(e){return e==null}const Qa=e=>({test:t=>Ka(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Or=Qa("deg"),zn=Qa("%"),oe=Qa("px"),_k=Qa("vh"),Ok=Qa("vw"),Ny={...zn,parse:e=>zn.parse(e)/100,transform:e=>zn.transform(e*100)},Uy={...lo,transform:Math.round},Pp={borderWidth:oe,borderTopWidth:oe,borderRightWidth:oe,borderBottomWidth:oe,borderLeftWidth:oe,borderRadius:oe,radius:oe,borderTopLeftRadius:oe,borderTopRightRadius:oe,borderBottomRightRadius:oe,borderBottomLeftRadius:oe,width:oe,maxWidth:oe,height:oe,maxHeight:oe,size:oe,top:oe,right:oe,bottom:oe,left:oe,padding:oe,paddingTop:oe,paddingRight:oe,paddingBottom:oe,paddingLeft:oe,margin:oe,marginTop:oe,marginRight:oe,marginBottom:oe,marginLeft:oe,rotate:Or,rotateX:Or,rotateY:Or,rotateZ:Or,scale:bl,scaleX:bl,scaleY:bl,scaleZ:bl,skew:Or,skewX:Or,skewY:Or,distance:oe,translateX:oe,translateY:oe,translateZ:oe,x:oe,y:oe,z:oe,perspective:oe,transformPerspective:oe,opacity:aa,originX:Ny,originY:Ny,originZ:oe,zIndex:Uy,backgroundPositionX:oe,backgroundPositionY:oe,fillOpacity:aa,strokeOpacity:aa,numOctaves:Uy},kk={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},xk=$a.length;function Mk(e,t,n){let r="",s=!0;for(let a=0;a<xk;a++){const u=$a[a],h=e[u];if(h===void 0)continue;let f=!0;if(typeof h=="number"?f=h===(u.startsWith("scale")?1:0):f=parseFloat(h)===0,!f||n){const p=uC(h,Pp[u]);if(!f){s=!1;const v=kk[u]||u;r+=`${v}(${p}) `}n&&(t[u]=p)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}const cC=e=>t=>typeof t=="string"&&t.startsWith(e),hC=cC("--"),Ik=cC("var(--"),Ap=e=>Ik(e)?bk.test(e.split("/*")[0].trim()):!1,bk=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function _p(e,t,n){const{style:r,vars:s,transformOrigin:a}=e;let u=!1,h=!1;for(const f in t){const p=t[f];if(ri.has(f)){u=!0;continue}else if(hC(f)){s[f]=p;continue}else{const v=uC(p,Pp[f]);f.startsWith("origin")?(h=!0,a[f]=v):r[f]=v}}if(t.transform||(u||n?r.transform=Mk(t,e.transform,n):r.transform&&(r.transform="none")),h){const{originX:f="50%",originY:p="50%",originZ:v=0}=a;r.transformOrigin=`${f} ${p} ${v}`}}const Op=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function fC(e,t,n){for(const r in t)!yt(t[r])&&!lC(r,n)&&(e[r]=t[r])}function Lk({transformTemplate:e},t){return D.useMemo(()=>{const n=Op();return _p(n,t,e),Object.assign({},n.vars,n.style)},[t])}function Dk(e,t){const n=e.style||{},r={};return fC(r,n,e),Object.assign(r,Lk(e,t)),r}function Nk(e,t){const n={},r=Dk(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const Uk=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function _u(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Uk.has(e)}let dC=e=>!_u(e);function Fk(e){e&&(dC=t=>t.startsWith("on")?!_u(t):e(t))}try{Fk(require("@emotion/is-prop-valid").default)}catch{}function Bk(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(dC(s)||n===!0&&_u(s)||!t&&!_u(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}function Fy(e,t,n){return typeof e=="string"?e:oe.transform(t+n*e)}function Vk(e,t,n){const r=Fy(t,e.x,e.width),s=Fy(n,e.y,e.height);return`${r} ${s}`}const jk={offset:"stroke-dashoffset",array:"stroke-dasharray"},zk={offset:"strokeDashoffset",array:"strokeDasharray"};function Gk(e,t,n=1,r=0,s=!0){e.pathLength=1;const a=s?jk:zk;e[a.offset]=oe.transform(-r);const u=oe.transform(t),h=oe.transform(n);e[a.array]=`${u} ${h}`}function kp(e,{attrX:t,attrY:n,attrScale:r,originX:s,originY:a,pathLength:u,pathSpacing:h=1,pathOffset:f=0,...p},v,y){if(_p(e,p,y),v){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:w,style:P,dimensions:_}=e;w.transform&&(_&&(P.transform=w.transform),delete w.transform),_&&(s!==void 0||a!==void 0||P.transform)&&(P.transformOrigin=Vk(_,s!==void 0?s:.5,a!==void 0?a:.5)),t!==void 0&&(w.x=t),n!==void 0&&(w.y=n),r!==void 0&&(w.scale=r),u!==void 0&&Gk(w,u,h,f,!1)}const pC=()=>({...Op(),attrs:{}}),xp=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Hk(e,t,n,r){const s=D.useMemo(()=>{const a=pC();return kp(a,t,xp(r),e.transformTemplate),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};fC(a,e.style,e),s.style={...a,...s.style}}return s}function Wk(e=!1){return(n,r,s,{latestValues:a},u)=>{const f=(Rp(n)?Hk:Nk)(r,a,u,n),p=Bk(r,typeof n=="string",e),v=n!==D.Fragment?{...p,...f,ref:s}:{},{children:y}=r,w=D.useMemo(()=>yt(y)?y.get():y,[y]);return D.createElement(n,{...v,children:w})}}function mC(e,{style:t,vars:n},r,s){Object.assign(e.style,t,s&&s.getProjectionStyles(r));for(const a in n)e.style.setProperty(a,n[a])}const gC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function yC(e,t,n,r){mC(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(gC.has(s)?s:tc(s),t.attrs[s])}function Mp(e,t,n){var r;const{style:s}=e,a={};for(const u in s)(yt(s[u])||t.style&&yt(t.style[u])||lC(u,e)||((r=n==null?void 0:n.getValue(u))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[u]=s[u]);return n&&s&&typeof s.willChange=="string"&&(n.applyWillChange=!1),a}function vC(e,t,n){const r=Mp(e,t,n);for(const s in e)if(yt(e[s])||yt(t[s])){const a=$a.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=e[s]}return r}function By(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function Ip(e,t,n,r){if(typeof t=="function"){const[s,a]=By(r);t=t(n!==void 0?n:e.custom,s,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,a]=By(r);t=t(n!==void 0?n:e.custom,s,a)}return t}function bp(e){const t=D.useRef(null);return t.current===null&&(t.current=e()),t.current}const $f=e=>Array.isArray(e),qk=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),$k=e=>$f(e)?e[e.length-1]||0:e;function Yl(e){const t=yt(e)?e.get():e;return qk(t)?t.toValue():t}const wC=new Set(["opacity","clipPath","filter","transform"]);function SC(e){if(ri.has(e))return"transform";if(wC.has(e))return tc(e)}function rc(e,t){e.indexOf(t)===-1&&e.push(t)}function ic(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function Kk({applyWillChange:e=!1,scrapeMotionValuesFromProps:t,createRenderState:n,onMount:r},s,a,u,h){const f={latestValues:Yk(s,a,u,h?!1:e,t),renderState:n()};return r&&(f.mount=p=>r(s,p,f)),f}const CC=e=>(t,n)=>{const r=D.useContext(Zu),s=D.useContext(ec),a=()=>Kk(e,t,r,s,n);return n?a():bp(a)};function Qk(e,t){const n=SC(t);n&&rc(e,n)}function Vy(e,t,n){const r=Array.isArray(t)?t:[t];for(let s=0;s<r.length;s++){const a=Ip(e,r[s]);if(a){const{transitionEnd:u,transition:h,...f}=a;n(f,u)}}}function Yk(e,t,n,r,s){var a;const u={},h=[],f=r&&((a=e.style)===null||a===void 0?void 0:a.willChange)===void 0,p=s(e,{});for(const k in p)u[k]=Yl(p[k]);let{initial:v,animate:y}=e;const w=nc(e),P=aC(e);t&&P&&!w&&e.inherit!==!1&&(v===void 0&&(v=t.initial),y===void 0&&(y=t.animate));let _=n?n.initial===!1:!1;_=_||v===!1;const A=_?y:v;return A&&typeof A!="boolean"&&!ba(A)&&Vy(e,A,(k,C)=>{for(const S in k){let E=k[S];if(Array.isArray(E)){const T=_?E.length-1:0;E=E[T]}E!==null&&(u[S]=E)}for(const S in C)u[S]=C[S]}),f&&(y&&v!==!1&&!ba(y)&&Vy(e,y,k=>{for(const C in k)Qk(h,C)}),h.length&&(u.willChange=h.join(","))),u}const{schedule:Ce,cancel:mr,state:ot,steps:Ch}=iC(typeof requestAnimationFrame<"u"?requestAnimationFrame:vt,!0),Xk={useVisualState:CC({scrapeMotionValuesFromProps:vC,createRenderState:pC,onMount:(e,t,{renderState:n,latestValues:r})=>{Ce.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Ce.render(()=>{kp(n,r,xp(t.tagName),e.transformTemplate),yC(t,n)})}})},Jk={useVisualState:CC({applyWillChange:!0,scrapeMotionValuesFromProps:Mp,createRenderState:Op})};function Zk(e,{forwardMotionProps:t=!1},n,r){return{...Rp(e)?Xk:Jk,preloadedFeatures:n,useRender:Wk(t),createVisualElement:r,Component:e}}function ir(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const TC=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function sc(e,t="page"){return{point:{x:e[`${t}X`],y:e[`${t}Y`]}}}const ex=e=>t=>TC(t)&&e(t,sc(t));function or(e,t,n,r){return ir(e,t,ex(n),r)}const tx=(e,t)=>n=>t(e(n)),ar=(...e)=>e.reduce(tx);function RC(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const jy=RC("dragHorizontal"),zy=RC("dragVertical");function EC(e){let t=!1;if(e==="y")t=zy();else if(e==="x")t=jy();else{const n=jy(),r=zy();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function PC(){const e=EC(!0);return e?(e(),!1):!0}class ii{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Gy(e,t){const n=t?"pointerenter":"pointerleave",r=t?"onHoverStart":"onHoverEnd",s=(a,u)=>{if(a.pointerType==="touch"||PC())return;const h=e.getProps();e.animationState&&h.whileHover&&e.animationState.setActive("whileHover",t);const f=h[r];f&&Ce.postRender(()=>f(a,u))};return or(e.current,n,s,{passive:!e.getProps()[r]})}class nx extends ii{mount(){this.unmount=ar(Gy(this.node,!0),Gy(this.node,!1))}unmount(){}}class rx extends ii{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ar(ir(this.node.current,"focus",()=>this.onFocus()),ir(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const AC=(e,t)=>t?e===t?!0:AC(e,t.parentElement):!1;function Th(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,sc(n))}class ix extends ii{constructor(){super(...arguments),this.removeStartListeners=vt,this.removeEndListeners=vt,this.removeAccessibleListeners=vt,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),a=or(window,"pointerup",(h,f)=>{if(!this.checkPressEnd())return;const{onTap:p,onTapCancel:v,globalTapTarget:y}=this.node.getProps(),w=!y&&!AC(this.node.current,h.target)?v:p;w&&Ce.update(()=>w(h,f))},{passive:!(r.onTap||r.onPointerUp)}),u=or(window,"pointercancel",(h,f)=>this.cancelPress(h,f),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=ar(a,u),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=a=>{if(a.key!=="Enter"||this.isPressing)return;const u=h=>{h.key!=="Enter"||!this.checkPressEnd()||Th("up",(f,p)=>{const{onTap:v}=this.node.getProps();v&&Ce.postRender(()=>v(f,p))})};this.removeEndListeners(),this.removeEndListeners=ir(this.node.current,"keyup",u),Th("down",(h,f)=>{this.startPress(h,f)})},n=ir(this.node.current,"keydown",t),r=()=>{this.isPressing&&Th("cancel",(a,u)=>this.cancelPress(a,u))},s=ir(this.node.current,"blur",r);this.removeAccessibleListeners=ar(n,s)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Ce.postRender(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!PC()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Ce.postRender(()=>r(t,n))}mount(){const t=this.node.getProps(),n=or(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=ir(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ar(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Kf=new WeakMap,Rh=new WeakMap,sx=e=>{const t=Kf.get(e.target);t&&t(e)},ox=e=>{e.forEach(sx)};function ax({root:e,...t}){const n=e||document;Rh.has(n)||Rh.set(n,{});const r=Rh.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(ox,{root:e,...t})),r[s]}function lx(e,t,n){const r=ax(t);return Kf.set(e,n),r.observe(e),()=>{Kf.delete(e),r.unobserve(e)}}const ux={some:0,all:1};class cx extends ii{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:a}=t,u={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:ux[s]},h=f=>{const{isIntersecting:p}=f;if(this.isInView===p||(this.isInView=p,a&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:v,onViewportLeave:y}=this.node.getProps(),w=p?v:y;w&&w(f)};return lx(this.node.current,u,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(hx(t,n))&&this.startObserver()}unmount(){}}function hx({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const fx={inView:{Feature:cx},tap:{Feature:ix},focus:{Feature:rx},hover:{Feature:nx}};function _C(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function oc(e,t,n){const r=e.getProps();return Ip(r,t,n!==void 0?n:r.custom,e)}const lr=e=>e*1e3,ur=e=>e/1e3,dx={type:"spring",stiffness:500,damping:25,restSpeed:10},px=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),mx={type:"keyframes",duration:.8},gx={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},yx=(e,{keyframes:t})=>t.length>2?mx:ri.has(e)?e.startsWith("scale")?px(t[1]):dx:gx;function vx({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:u,repeatDelay:h,from:f,elapsed:p,...v}){return!!Object.keys(v).length}function Lp(e,t){return e[t]||e.default||e}const wx=e=>e!==null;function ac(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(wx),a=t&&n!=="loop"&&t%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const OC=e=>/^0[^.\s]+$/u.test(e);function Sx(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||OC(e):!0}const kC=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),Cx=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Tx(e){const t=Cx.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function xC(e,t,n=1){const[r,s]=Tx(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const u=a.trim();return kC(u)?parseFloat(u):u}return Ap(s)?xC(s,t,n+1):s}const Rx=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Hy=e=>e===lo||e===oe,Wy=(e,t)=>parseFloat(e.split(", ")[t]),qy=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return Wy(s[1],t);{const a=r.match(/^matrix\((.+)\)$/u);return a?Wy(a[1],e):0}},Ex=new Set(["x","y","z"]),Px=$a.filter(e=>!Ex.has(e));function Ax(e){const t=[];return Px.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const to={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:qy(4,13),y:qy(5,14)};to.translateX=to.x;to.translateY=to.y;const MC=e=>t=>t.test(e),_x={test:e=>e==="auto",parse:e=>e},IC=[lo,oe,zn,Or,Ok,_k,_x],$y=e=>IC.find(MC(e)),Ii=new Set;let Qf=!1,Yf=!1;function bC(){if(Yf){const e=Array.from(Ii).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=Ax(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([a,u])=>{var h;(h=r.getValue(a))===null||h===void 0||h.set(u)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Yf=!1,Qf=!1,Ii.forEach(e=>e.complete()),Ii.clear()}function LC(){Ii.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Yf=!0)})}function Ox(){LC(),bC()}class Dp{constructor(t,n,r,s,a,u=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=a,this.isAsync=u}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ii.add(this),Qf||(Qf=!0,Ce.read(LC),Ce.resolveKeyframes(bC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;for(let a=0;a<t.length;a++)if(t[a]===null)if(a===0){const u=s==null?void 0:s.get(),h=t[t.length-1];if(u!==void 0)t[0]=u;else if(r&&n){const f=r.readValue(n,h);f!=null&&(t[0]=f)}t[0]===void 0&&(t[0]=h),s&&u===void 0&&s.set(t[0])}else t[a]=t[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ii.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ii.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Np=(e,t)=>n=>!!(Ka(n)&&Pk.test(n)&&n.startsWith(e)||t&&!Ak(n)&&Object.prototype.hasOwnProperty.call(n,t)),DC=(e,t,n)=>r=>{if(!Ka(r))return r;const[s,a,u,h]=r.match(Ep);return{[e]:parseFloat(s),[t]:parseFloat(a),[n]:parseFloat(u),alpha:h!==void 0?parseFloat(h):1}},kx=e=>Jr(0,255,e),Eh={...lo,transform:e=>Math.round(kx(e))},Ci={test:Np("rgb","red"),parse:DC("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Eh.transform(e)+", "+Eh.transform(t)+", "+Eh.transform(n)+", "+la(aa.transform(r))+")"};function xx(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Xf={test:Np("#"),parse:xx,transform:Ci.transform},Ss={test:Np("hsl","hue"),parse:DC("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+zn.transform(la(t))+", "+zn.transform(la(n))+", "+la(aa.transform(r))+")"},mt={test:e=>Ci.test(e)||Xf.test(e)||Ss.test(e),parse:e=>Ci.test(e)?Ci.parse(e):Ss.test(e)?Ss.parse(e):Xf.parse(e),transform:e=>Ka(e)?e:e.hasOwnProperty("red")?Ci.transform(e):Ss.transform(e)};function Mx(e){var t,n;return isNaN(e)&&Ka(e)&&(((t=e.match(Ep))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(Ek))===null||n===void 0?void 0:n.length)||0)>0}const NC="number",UC="color",Ix="var",bx="var(",Ky="${}",Lx=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function La(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const h=t.replace(Lx,f=>(mt.test(f)?(r.color.push(a),s.push(UC),n.push(mt.parse(f))):f.startsWith(bx)?(r.var.push(a),s.push(Ix),n.push(f)):(r.number.push(a),s.push(NC),n.push(parseFloat(f))),++a,Ky)).split(Ky);return{values:n,split:h,indexes:r,types:s}}function FC(e){return La(e).values}function BC(e){const{split:t,types:n}=La(e),r=t.length;return s=>{let a="";for(let u=0;u<r;u++)if(a+=t[u],s[u]!==void 0){const h=n[u];h===NC?a+=la(s[u]):h===UC?a+=mt.transform(s[u]):a+=s[u]}return a}}const Dx=e=>typeof e=="number"?0:e;function Nx(e){const t=FC(e);return BC(e)(t.map(Dx))}const Zr={test:Mx,parse:FC,createTransformer:BC,getAnimatableNone:Nx},Ux=new Set(["brightness","contrast","saturate","opacity"]);function Fx(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Ep)||[];if(!r)return e;const s=n.replace(r,"");let a=Ux.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+s+")"}const Bx=/\b([a-z-]*)\(.*?\)/gu,Jf={...Zr,getAnimatableNone:e=>{const t=e.match(Bx);return t?t.map(Fx).join(" "):e}},Vx={...Pp,color:mt,backgroundColor:mt,outlineColor:mt,fill:mt,stroke:mt,borderColor:mt,borderTopColor:mt,borderRightColor:mt,borderBottomColor:mt,borderLeftColor:mt,filter:Jf,WebkitFilter:Jf},Up=e=>Vx[e];function VC(e,t){let n=Up(e);return n!==Jf&&(n=Zr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const jx=new Set(["auto","none","0"]);function zx(e,t,n){let r=0,s;for(;r<e.length&&!s;){const a=e[r];typeof a=="string"&&!jx.has(a)&&La(a).values.length&&(s=e[r]),r++}if(s&&n)for(const a of t)e[a]=VC(n,s)}class jC extends Dp{constructor(t,n,r,s,a){super(t,n,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<t.length;f++){let p=t[f];if(typeof p=="string"&&(p=p.trim(),Ap(p))){const v=xC(p,n.current);v!==void 0&&(t[f]=v),f===t.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!Rx.has(r)||t.length!==2)return;const[s,a]=t,u=$y(s),h=$y(a);if(u!==h)if(Hy(u)&&Hy(h))for(let f=0;f<t.length;f++){const p=t[f];typeof p=="string"&&(t[f]=parseFloat(p))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)Sx(t[s])&&r.push(s);r.length&&zx(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=to[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var t;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const a=n.getValue(r);a&&a.jump(this.measuredOrigin,!1);const u=s.length-1,h=s[u];s[u]=to[r](n.measureViewportBox(),window.getComputedStyle(n.current)),h!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=h),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([f,p])=>{n.getValue(f).set(p)}),this.resolveNoneKeyframes()}}function zC(e){let t;return()=>(t===void 0&&(t=e()),t)}let Xl;function Gx(){Xl=void 0}const cr={now:()=>(Xl===void 0&&cr.set(ot.isProcessing||ok.useManualTiming?ot.timestamp:performance.now()),Xl),set:e=>{Xl=e,queueMicrotask(Gx)}},Qy=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Zr.test(e)||e==="0")&&!e.startsWith("url("));function Hx(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function Wx(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],u=Qy(s,t),h=Qy(a,t);return!u||!h?!1:Hx(e)||n==="spring"&&r}const qx=40;class GC{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:u="loop",...h}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=cr.now(),this.options={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:a,repeatType:u,...h},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>qx?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Ox(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=cr.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:a,delay:u,onComplete:h,onUpdate:f,isGenerator:p}=this.options;if(!p&&!Wx(t,r,s,a))if(u)this.options.duration=0;else{f==null||f(ac(t,this.options,n)),h==null||h(),this.resolveFinishedPromise();return}const v=this.initPlayback(t,n);v!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...v},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}function HC(e,t){return t?e*(1e3/t):0}const $x=5;function WC(e,t,n){const r=Math.max(t-$x,0);return HC(n-e(r),t-r)}const Ph=.001,Kx=.01,Qx=10,Yx=.05,Xx=1;function Jx({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let s,a,u=1-t;u=Jr(Yx,Xx,u),e=Jr(Kx,Qx,ur(e)),u<1?(s=p=>{const v=p*u,y=v*e,w=v-n,P=Zf(p,u),_=Math.exp(-y);return Ph-w/P*_},a=p=>{const y=p*u*e,w=y*n+n,P=Math.pow(u,2)*Math.pow(p,2)*e,_=Math.exp(-y),A=Zf(Math.pow(p,2),u);return(-s(p)+Ph>0?-1:1)*((w-P)*_)/A}):(s=p=>{const v=Math.exp(-p*e),y=(p-n)*e+1;return-Ph+v*y},a=p=>{const v=Math.exp(-p*e),y=(n-p)*(e*e);return v*y});const h=5/e,f=eM(s,a,h);if(e=lr(e),isNaN(f))return{stiffness:100,damping:10,duration:e};{const p=Math.pow(f,2)*r;return{stiffness:p,damping:u*2*Math.sqrt(r*p),duration:e}}}const Zx=12;function eM(e,t,n){let r=n;for(let s=1;s<Zx;s++)r=r-e(r)/t(r);return r}function Zf(e,t){return e*Math.sqrt(1-t*t)}const tM=["duration","bounce"],nM=["stiffness","damping","mass"];function Yy(e,t){return t.some(n=>e[n]!==void 0)}function rM(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Yy(e,nM)&&Yy(e,tM)){const n=Jx(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function qC({keyframes:e,restDelta:t,restSpeed:n,...r}){const s=e[0],a=e[e.length-1],u={done:!1,value:s},{stiffness:h,damping:f,mass:p,duration:v,velocity:y,isResolvedFromDuration:w}=rM({...r,velocity:-ur(r.velocity||0)}),P=y||0,_=f/(2*Math.sqrt(h*p)),A=a-s,k=ur(Math.sqrt(h/p)),C=Math.abs(A)<5;n||(n=C?.01:2),t||(t=C?.005:.5);let S;if(_<1){const E=Zf(k,_);S=T=>{const L=Math.exp(-_*k*T);return a-L*((P+_*k*A)/E*Math.sin(E*T)+A*Math.cos(E*T))}}else if(_===1)S=E=>a-Math.exp(-k*E)*(A+(P+k*A)*E);else{const E=k*Math.sqrt(_*_-1);S=T=>{const L=Math.exp(-_*k*T),V=Math.min(E*T,300);return a-L*((P+_*k*A)*Math.sinh(V)+E*A*Math.cosh(V))/E}}return{calculatedDuration:w&&v||null,next:E=>{const T=S(E);if(w)u.done=E>=v;else{let L=0;_<1&&(L=E===0?lr(P):WC(S,E,T));const V=Math.abs(L)<=n,H=Math.abs(a-T)<=t;u.done=V&&H}return u.value=u.done?a:T,u}}}function Xy({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:u,min:h,max:f,restDelta:p=.5,restSpeed:v}){const y=e[0],w={done:!1,value:y},P=F=>h!==void 0&&F<h||f!==void 0&&F>f,_=F=>h===void 0?f:f===void 0||Math.abs(h-F)<Math.abs(f-F)?h:f;let A=n*t;const k=y+A,C=u===void 0?k:u(k);C!==k&&(A=C-y);const S=F=>-A*Math.exp(-F/r),E=F=>C+S(F),T=F=>{const J=S(F),Y=E(F);w.done=Math.abs(J)<=p,w.value=w.done?C:Y};let L,V;const H=F=>{P(w.value)&&(L=F,V=qC({keyframes:[w.value,_(w.value)],velocity:WC(E,F,w.value),damping:s,stiffness:a,restDelta:p,restSpeed:v}))};return H(0),{calculatedDuration:null,next:F=>{let J=!1;return!V&&L===void 0&&(J=!0,T(F),H(F)),L!==void 0&&F>=L?V.next(F-L):(!J&&T(F),w)}}}const $C=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,iM=1e-7,sM=12;function oM(e,t,n,r,s){let a,u,h=0;do u=t+(n-t)/2,a=$C(u,r,s)-e,a>0?n=u:t=u;while(Math.abs(a)>iM&&++h<sM);return u}function Ya(e,t,n,r){if(e===t&&n===r)return vt;const s=a=>oM(a,0,1,e,n);return a=>a===0||a===1?a:$C(s(a),t,r)}const aM=Ya(.42,0,1,1),lM=Ya(0,0,.58,1),KC=Ya(.42,0,.58,1),uM=e=>Array.isArray(e)&&typeof e[0]!="number",QC=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,YC=e=>t=>1-e(1-t),Fp=e=>1-Math.sin(Math.acos(e)),XC=YC(Fp),cM=QC(Fp),JC=Ya(.33,1.53,.69,.99),Bp=YC(JC),hM=QC(Bp),fM=e=>(e*=2)<1?.5*Bp(e):.5*(2-Math.pow(2,-10*(e-1))),Jy={linear:vt,easeIn:aM,easeInOut:KC,easeOut:lM,circIn:Fp,circInOut:cM,circOut:XC,backIn:Bp,backInOut:hM,backOut:JC,anticipate:fM},Zy=e=>{if(Array.isArray(e)){qf(e.length===4);const[t,n,r,s]=e;return Ya(t,n,r,s)}else if(typeof e=="string")return qf(Jy[e]!==void 0),Jy[e];return e},Da=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},Ue=(e,t,n)=>e+(t-e)*n;function Ah(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function dM({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,a=0,u=0;if(!t)s=a=u=n;else{const h=n<.5?n*(1+t):n+t-n*t,f=2*n-h;s=Ah(f,h,e+1/3),a=Ah(f,h,e),u=Ah(f,h,e-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(u*255),alpha:r}}function Ou(e,t){return n=>n>0?t:e}const _h=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},pM=[Xf,Ci,Ss],mM=e=>pM.find(t=>t.test(e));function ev(e){const t=mM(e);if(!t)return!1;let n=t.parse(e);return t===Ss&&(n=dM(n)),n}const tv=(e,t)=>{const n=ev(e),r=ev(t);if(!n||!r)return Ou(e,t);const s={...n};return a=>(s.red=_h(n.red,r.red,a),s.green=_h(n.green,r.green,a),s.blue=_h(n.blue,r.blue,a),s.alpha=Ue(n.alpha,r.alpha,a),Ci.transform(s))},ed=new Set(["none","hidden"]);function gM(e,t){return ed.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function yM(e,t){return n=>Ue(e,t,n)}function Vp(e){return typeof e=="number"?yM:typeof e=="string"?Ap(e)?Ou:mt.test(e)?tv:SM:Array.isArray(e)?ZC:typeof e=="object"?mt.test(e)?tv:vM:Ou}function ZC(e,t){const n=[...e],r=n.length,s=e.map((a,u)=>Vp(a)(a,t[u]));return a=>{for(let u=0;u<r;u++)n[u]=s[u](a);return n}}function vM(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=Vp(e[s])(e[s],t[s]));return s=>{for(const a in r)n[a]=r[a](s);return n}}function wM(e,t){var n;const r=[],s={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const u=t.types[a],h=e.indexes[u][s[u]],f=(n=e.values[h])!==null&&n!==void 0?n:0;r[a]=f,s[u]++}return r}const SM=(e,t)=>{const n=Zr.createTransformer(t),r=La(e),s=La(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?ed.has(e)&&!s.values.length||ed.has(t)&&!r.values.length?gM(e,t):ar(ZC(wM(r,s),s.values),n):Ou(e,t)};function e1(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Ue(e,t,n):Vp(e)(e,t)}function CM(e,t,n){const r=[],s=n||e1,a=e.length-1;for(let u=0;u<a;u++){let h=s(e[u],e[u+1]);if(t){const f=Array.isArray(t)?t[u]||vt:t;h=ar(f,h)}r.push(h)}return r}function TM(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const a=e.length;if(qf(a===t.length),a===1)return()=>t[0];if(a===2&&e[0]===e[1])return()=>t[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const u=CM(t,r,s),h=u.length,f=p=>{let v=0;if(h>1)for(;v<e.length-2&&!(p<e[v+1]);v++);const y=Da(e[v],e[v+1],p);return u[v](y)};return n?p=>f(Jr(e[0],e[a-1],p)):f}function RM(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=Da(0,t,r);e.push(Ue(n,1,s))}}function EM(e){const t=[0];return RM(t,e.length-1),t}function PM(e,t){return e.map(n=>n*t)}function AM(e,t){return e.map(()=>t||KC).splice(0,e.length-1)}function ku({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=uM(r)?r.map(Zy):Zy(r),a={done:!1,value:t[0]},u=PM(n&&n.length===t.length?n:EM(t),e),h=TM(u,t,{ease:Array.isArray(s)?s:AM(t,s)});return{calculatedDuration:e,next:f=>(a.value=h(f),a.done=f>=e,a)}}const nv=2e4;function _M(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<nv;)t+=n,r=e.next(t);return t>=nv?1/0:t}const OM=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Ce.update(t,!0),stop:()=>mr(t),now:()=>ot.isProcessing?ot.timestamp:cr.now()}},kM={decay:Xy,inertia:Xy,tween:ku,keyframes:ku,spring:qC},xM=e=>e/100;class jp extends GC{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:f}=this.options;f&&f()};const{name:n,motionValue:r,element:s,keyframes:a}=this.options,u=(s==null?void 0:s.KeyframeResolver)||Dp,h=(f,p)=>this.onKeyframesResolved(f,p);this.resolver=new u(a,h,n,r,s),this.resolver.scheduleResolve()}initPlayback(t){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:u=0}=this.options,h=kM[n]||ku;let f,p;h!==ku&&typeof t[0]!="number"&&(f=ar(xM,e1(t[0],t[1])),t=[0,100]);const v=h({...this.options,keyframes:t});a==="mirror"&&(p=h({...this.options,keyframes:[...t].reverse(),velocity:-u})),v.calculatedDuration===null&&(v.calculatedDuration=_M(v));const{calculatedDuration:y}=v,w=y+s,P=w*(r+1)-s;return{generator:v,mirroredGenerator:p,mapPercentToKeyframes:f,calculatedDuration:y,resolvedDuration:w,totalDuration:P}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:r}=this;if(!r){const{keyframes:F}=this.options;return{done:!0,value:F[F.length-1]}}const{finalKeyframe:s,generator:a,mirroredGenerator:u,mapPercentToKeyframes:h,keyframes:f,calculatedDuration:p,totalDuration:v,resolvedDuration:y}=r;if(this.startTime===null)return a.next(0);const{delay:w,repeat:P,repeatType:_,repeatDelay:A,onUpdate:k}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-v/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const C=this.currentTime-w*(this.speed>=0?1:-1),S=this.speed>=0?C<0:C>v;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=v);let E=this.currentTime,T=a;if(P){const F=Math.min(this.currentTime,v)/y;let J=Math.floor(F),Y=F%1;!Y&&F>=1&&(Y=1),Y===1&&J--,J=Math.min(J,P+1),!!(J%2)&&(_==="reverse"?(Y=1-Y,A&&(Y-=A/y)):_==="mirror"&&(T=u)),E=Jr(0,1,Y)*y}const L=S?{done:!1,value:f[0]}:T.next(E);h&&(L.value=h(L.value));let{done:V}=L;!S&&p!==null&&(V=this.speed>=0?this.currentTime>=v:this.currentTime<=0);const H=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&V);return H&&s!==void 0&&(L.value=ac(f,this.options,s)),k&&k(L.value),H&&this.finish(),L}get duration(){const{resolved:t}=this;return t?ur(t.calculatedDuration):0}get time(){return ur(this.currentTime)}set time(t){t=lr(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=ur(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=OM,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const t1=e=>Array.isArray(e)&&typeof e[0]=="number";function n1(e){return!!(!e||typeof e=="string"&&e in zp||t1(e)||Array.isArray(e)&&e.every(n1))}const Ko=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,zp={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ko([0,.65,.55,1]),circOut:Ko([.55,0,1,.45]),backIn:Ko([.31,.01,.66,-.59]),backOut:Ko([.33,1.53,.69,.99])};function MM(e){return r1(e)||zp.easeOut}function r1(e){if(e)return t1(e)?Ko(e):Array.isArray(e)?e.map(MM):zp[e]}function IM(e,t,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:u="loop",ease:h,times:f}={}){const p={[t]:n};f&&(p.offset=f);const v=r1(h);return Array.isArray(v)&&(p.easing=v),e.animate(p,{delay:r,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:a+1,direction:u==="reverse"?"alternate":"normal"})}const bM=zC(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),xu=10,LM=2e4;function DM(e){return e.type==="spring"||!n1(e.ease)}function NM(e,t){const n=new jp({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const s=[];let a=0;for(;!r.done&&a<LM;)r=n.sample(a),s.push(r.value),a+=xu;return{times:void 0,keyframes:s,duration:a-xu,ease:"linear"}}class rv extends GC{constructor(t){super(t);const{name:n,motionValue:r,element:s,keyframes:a}=this.options;this.resolver=new jC(a,(u,h)=>this.onKeyframesResolved(u,h),n,r,s),this.resolver.scheduleResolve()}initPlayback(t,n){var r;let{duration:s=300,times:a,ease:u,type:h,motionValue:f,name:p,startTime:v}=this.options;if(!(!((r=f.owner)===null||r===void 0)&&r.current))return!1;if(DM(this.options)){const{onComplete:w,onUpdate:P,motionValue:_,element:A,...k}=this.options,C=NM(t,k);t=C.keyframes,t.length===1&&(t[1]=t[0]),s=C.duration,a=C.times,u=C.ease,h="keyframes"}const y=IM(f.owner.current,p,t,{...this.options,duration:s,times:a,ease:u});return y.startTime=v??this.calcStartTime(),this.pendingTimeline?(y.timeline=this.pendingTimeline,this.pendingTimeline=void 0):y.onfinish=()=>{const{onComplete:w}=this.options;f.set(ac(t,this.options,n)),w&&w(),this.cancel(),this.resolveFinishedPromise()},{animation:y,duration:s,times:a,type:h,ease:u,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return ur(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return ur(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=lr(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return vt;const{animation:r}=n;r.timeline=t,r.onfinish=null}return vt}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:r,duration:s,type:a,ease:u,times:h}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:p,onUpdate:v,onComplete:y,element:w,...P}=this.options,_=new jp({...P,keyframes:r,duration:s,type:a,ease:u,times:h,isGenerator:!0}),A=lr(this.time);p.setWithVelocity(_.sample(A-xu).value,_.sample(A).value,xu)}const{onStop:f}=this.options;f&&f(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:r,repeatDelay:s,repeatType:a,damping:u,type:h}=t;return bM()&&r&&wC.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!s&&a!=="mirror"&&u!==0&&h!=="inertia"}}function UM(e,t){let n;const r=()=>{const{currentTime:s}=t,u=(s===null?0:s.value)/100;n!==u&&e(u),n=u};return Ce.update(r,!0),()=>mr(r)}const FM=zC(()=>window.ScrollTimeline!==void 0);class BM{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,n){return Promise.all(this.animations).then(t).catch(n)}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t){const n=this.animations.map(r=>{if(FM()&&r.attachTimeline)r.attachTimeline(t);else return r.pause(),UM(s=>{r.time=r.duration*s},t)});return()=>{n.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}const Gp=(e,t,n,r={},s,a,u)=>h=>{const f=Lp(r,e)||{},p=f.delay||r.delay||0;let{elapsed:v=0}=r;v=v-lr(p);let y={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...f,delay:-v,onUpdate:P=>{t.set(P),f.onUpdate&&f.onUpdate(P)},onComplete:()=>{h(),f.onComplete&&f.onComplete(),u&&u()},onStop:u,name:e,motionValue:t,element:a?void 0:s};vx(f)||(y={...y,...yx(e,y)}),y.duration&&(y.duration=lr(y.duration)),y.repeatDelay&&(y.repeatDelay=lr(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let w=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(y.duration=0,y.delay===0&&(w=!0)),w&&!a&&t.get()!==void 0){const P=ac(y.keyframes,f);if(P!==void 0)return Ce.update(()=>{y.onUpdate(P),y.onComplete()}),new BM([])}return!a&&rv.supports(y)?new rv(y):new jp(y)};class Hp{constructor(){this.subscriptions=[]}add(t){return rc(this.subscriptions,t),()=>ic(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let a=0;a<s;a++){const u=this.subscriptions[a];u&&u(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const iv=30,VM=e=>!isNaN(parseFloat(e));class i1{constructor(t,n={}){this.version="11.3.31",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const a=cr.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=cr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=VM(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Hp);const r=this.events[t].add(n);return t==="change"?()=>{r(),Ce.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=cr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>iv)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,iv);return HC(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Na(e,t){return new i1(e,t)}function jM(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Na(n))}function zM(e,t){const n=oc(e,t);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const u in a){const h=$k(a[u]);jM(e,u,h)}}function s1(e){return e.props[rC]}class GM extends i1{constructor(){super(...arguments),this.output=[],this.counts=new Map}add(t){const n=SC(t);if(!n)return;const r=this.counts.get(n)||0;this.counts.set(n,r+1),r===0&&(this.output.push(n),this.update());let s=!1;return()=>{if(s)return;s=!0;const a=this.counts.get(n)-1;this.counts.set(n,a),a===0&&(ic(this.output,n),this.update())}}update(){this.set(this.output.length?this.output.join(", "):"auto")}}function HM(e){return!!(yt(e)&&e.add)}function td(e,t){var n;if(!e.applyWillChange)return;let r=e.getValue("willChange");if(!r&&!(!((n=e.props.style)===null||n===void 0)&&n.willChange)&&(r=new GM("auto"),e.addValue("willChange",r)),HM(r))return r.add(t)}function WM({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function o1(e,t,{delay:n=0,transitionOverride:r,type:s}={}){var a;let{transition:u=e.getDefaultTransition(),transitionEnd:h,...f}=t;r&&(u=r);const p=[],v=s&&e.animationState&&e.animationState.getState()[s];for(const y in f){const w=e.getValue(y,(a=e.latestValues[y])!==null&&a!==void 0?a:null),P=f[y];if(P===void 0||v&&WM(v,y))continue;const _={delay:n,...Lp(u||{},y)};let A=!1;if(window.MotionHandoffAnimation){const C=s1(e);if(C){const S=window.MotionHandoffAnimation(C,y,Ce);S!==null&&(_.startTime=S,A=!0)}}w.start(Gp(y,w,P,e.shouldReduceMotion&&ri.has(y)?{type:!1}:_,e,A,td(e,y)));const k=w.animation;k&&p.push(k)}return h&&Promise.all(p).then(()=>{Ce.update(()=>{h&&zM(e,h)})}),p}function nd(e,t,n={}){var r;const s=oc(e,t,n.type==="exit"?(r=e.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(a=n.transitionOverride);const u=s?()=>Promise.all(o1(e,s,n)):()=>Promise.resolve(),h=e.variantChildren&&e.variantChildren.size?(p=0)=>{const{delayChildren:v=0,staggerChildren:y,staggerDirection:w}=a;return qM(e,t,v+p,y,w,n)}:()=>Promise.resolve(),{when:f}=a;if(f){const[p,v]=f==="beforeChildren"?[u,h]:[h,u];return p().then(()=>v())}else return Promise.all([u(),h(n.delay)])}function qM(e,t,n=0,r=0,s=1,a){const u=[],h=(e.variantChildren.size-1)*r,f=s===1?(p=0)=>p*r:(p=0)=>h-p*r;return Array.from(e.variantChildren).sort($M).forEach((p,v)=>{p.notify("AnimationStart",t),u.push(nd(p,t,{...a,delay:n+f(v)}).then(()=>p.notify("AnimationComplete",t)))}),Promise.all(u)}function $M(e,t){return e.sortNodePosition(t)}function KM(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(a=>nd(e,a,n));r=Promise.all(s)}else if(typeof t=="string")r=nd(e,t,n);else{const s=typeof t=="function"?oc(e,t,n.custom):t;r=Promise.all(o1(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const QM=[...Sp].reverse(),YM=Sp.length;function XM(e){return t=>Promise.all(t.map(({animation:n,options:r})=>KM(e,n,r)))}function JM(e){let t=XM(e),n=sv(),r=!0;const s=f=>(p,v)=>{var y;const w=oc(e,v,f==="exit"?(y=e.presenceContext)===null||y===void 0?void 0:y.custom:void 0);if(w){const{transition:P,transitionEnd:_,...A}=w;p={...p,...A,..._}}return p};function a(f){t=f(e)}function u(f){const p=e.getProps(),v=e.getVariantContext(!0)||{},y=[],w=new Set;let P={},_=1/0;for(let k=0;k<YM;k++){const C=QM[k],S=n[C],E=p[C]!==void 0?p[C]:v[C],T=Ia(E),L=C===f?S.isActive:null;L===!1&&(_=k);let V=E===v[C]&&E!==p[C]&&T;if(V&&r&&e.manuallyAnimateOnMount&&(V=!1),S.protectedKeys={...P},!S.isActive&&L===null||!E&&!S.prevProp||ba(E)||typeof E=="boolean")continue;let F=ZM(S.prevProp,E)||C===f&&S.isActive&&!V&&T||k>_&&T,J=!1;const Y=Array.isArray(E)?E:[E];let m=Y.reduce(s(C),{});L===!1&&(m={});const{prevResolvedValues:Ae={}}=S,Le={...Ae,...m},N=ue=>{F=!0,w.has(ue)&&(J=!0,w.delete(ue)),S.needsAnimating[ue]=!0;const Re=e.getValue(ue);Re&&(Re.liveStyle=!1)};for(const ue in Le){const Re=m[ue],Z=Ae[ue];if(P.hasOwnProperty(ue))continue;let W=!1;$f(Re)&&$f(Z)?W=!_C(Re,Z):W=Re!==Z,W?Re!=null?N(ue):w.add(ue):Re!==void 0&&w.has(ue)?N(ue):S.protectedKeys[ue]=!0}S.prevProp=E,S.prevResolvedValues=m,S.isActive&&(P={...P,...m}),r&&e.blockInitialAnimation&&(F=!1),F&&(!V||J)&&y.push(...Y.map(ue=>({animation:ue,options:{type:C}})))}if(w.size){const k={};w.forEach(C=>{const S=e.getBaseTarget(C),E=e.getValue(C);E&&(E.liveStyle=!0),k[C]=S??null}),y.push({animation:k})}let A=!!y.length;return r&&(p.initial===!1||p.initial===p.animate)&&!e.manuallyAnimateOnMount&&(A=!1),r=!1,A?t(y):Promise.resolve()}function h(f,p){var v;if(n[f].isActive===p)return Promise.resolve();(v=e.variantChildren)===null||v===void 0||v.forEach(w=>{var P;return(P=w.animationState)===null||P===void 0?void 0:P.setActive(f,p)}),n[f].isActive=p;const y=u(f);for(const w in n)n[w].protectedKeys={};return y}return{animateChanges:u,setActive:h,setAnimateFunction:a,getState:()=>n,reset:()=>{n=sv(),r=!0}}}function ZM(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!_C(t,e):!1}function hi(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function sv(){return{animate:hi(!0),whileInView:hi(),whileHover:hi(),whileTap:hi(),whileDrag:hi(),whileFocus:hi(),exit:hi()}}class eI extends ii{constructor(t){super(t),t.animationState||(t.animationState=JM(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();ba(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let tI=0;class nI extends ii{constructor(){super(...arguments),this.id=tI++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const rI={animation:{Feature:eI},exit:{Feature:nI}},ov=(e,t)=>Math.abs(e-t);function iI(e,t){const n=ov(e.x,t.x),r=ov(e.y,t.y);return Math.sqrt(n**2+r**2)}class a1{constructor(t,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=kh(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,P=iI(y.offset,{x:0,y:0})>=3;if(!w&&!P)return;const{point:_}=y,{timestamp:A}=ot;this.history.push({..._,timestamp:A});const{onStart:k,onMove:C}=this.handlers;w||(k&&k(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,y)},this.handlePointerMove=(y,w)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=Oh(w,this.transformPagePoint),Ce.update(this.updatePoint,!0)},this.handlePointerUp=(y,w)=>{this.end();const{onEnd:P,onSessionEnd:_,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=kh(y.type==="pointercancel"?this.lastMoveEventInfo:Oh(w,this.transformPagePoint),this.history);this.startEvent&&P&&P(y,k),_&&_(y,k)},!TC(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const u=sc(t),h=Oh(u,this.transformPagePoint),{point:f}=h,{timestamp:p}=ot;this.history=[{...f,timestamp:p}];const{onSessionStart:v}=n;v&&v(t,kh(h,this.history)),this.removeListeners=ar(or(this.contextWindow,"pointermove",this.handlePointerMove),or(this.contextWindow,"pointerup",this.handlePointerUp),or(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),mr(this.updatePoint)}}function Oh(e,t){return t?{point:t(e.point)}:e}function av(e,t){return{x:e.x-t.x,y:e.y-t.y}}function kh({point:e},t){return{point:e,delta:av(e,l1(t)),offset:av(e,sI(t)),velocity:oI(t,.1)}}function sI(e){return e[0]}function l1(e){return e[e.length-1]}function oI(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=l1(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>lr(t)));)n--;if(!r)return{x:0,y:0};const a=ur(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const u={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}const u1=1e-4,aI=1-u1,lI=1+u1,c1=.01,uI=0-c1,cI=0+c1;function Qt(e){return e.max-e.min}function hI(e,t,n){return Math.abs(e-t)<=n}function lv(e,t,n,r=.5){e.origin=r,e.originPoint=Ue(t.min,t.max,e.origin),e.scale=Qt(n)/Qt(t),e.translate=Ue(n.min,n.max,e.origin)-e.originPoint,(e.scale>=aI&&e.scale<=lI||isNaN(e.scale))&&(e.scale=1),(e.translate>=uI&&e.translate<=cI||isNaN(e.translate))&&(e.translate=0)}function ua(e,t,n,r){lv(e.x,t.x,n.x,r?r.originX:void 0),lv(e.y,t.y,n.y,r?r.originY:void 0)}function uv(e,t,n){e.min=n.min+t.min,e.max=e.min+Qt(t)}function fI(e,t,n){uv(e.x,t.x,n.x),uv(e.y,t.y,n.y)}function cv(e,t,n){e.min=t.min-n.min,e.max=e.min+Qt(t)}function ca(e,t,n){cv(e.x,t.x,n.x),cv(e.y,t.y,n.y)}function dI(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Ue(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Ue(n,e,r.max):Math.min(e,n)),e}function hv(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function pI(e,{top:t,left:n,bottom:r,right:s}){return{x:hv(e.x,n,s),y:hv(e.y,t,r)}}function fv(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function mI(e,t){return{x:fv(e.x,t.x),y:fv(e.y,t.y)}}function gI(e,t){let n=.5;const r=Qt(e),s=Qt(t);return s>r?n=Da(t.min,t.max-r,e.min):r>s&&(n=Da(e.min,e.max-s,t.min)),Jr(0,1,n)}function yI(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const rd=.35;function vI(e=rd){return e===!1?e=0:e===!0&&(e=rd),{x:dv(e,"left","right"),y:dv(e,"top","bottom")}}function dv(e,t,n){return{min:pv(e,t),max:pv(e,n)}}function pv(e,t){return typeof e=="number"?e:e[t]||0}const mv=()=>({translate:0,scale:1,origin:0,originPoint:0}),Cs=()=>({x:mv(),y:mv()}),gv=()=>({min:0,max:0}),Ge=()=>({x:gv(),y:gv()});function en(e){return[e("x"),e("y")]}function h1({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function wI({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function SI(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function xh(e){return e===void 0||e===1}function id({scale:e,scaleX:t,scaleY:n}){return!xh(e)||!xh(t)||!xh(n)}function mi(e){return id(e)||f1(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function f1(e){return yv(e.x)||yv(e.y)}function yv(e){return e&&e!=="0%"}function Mu(e,t,n){const r=e-n,s=t*r;return n+s}function vv(e,t,n,r,s){return s!==void 0&&(e=Mu(e,s,r)),Mu(e,n,r)+t}function sd(e,t=0,n=1,r,s){e.min=vv(e.min,t,n,r,s),e.max=vv(e.max,t,n,r,s)}function d1(e,{x:t,y:n}){sd(e.x,t.translate,t.scale,t.originPoint),sd(e.y,n.translate,n.scale,n.originPoint)}const wv=.999999999999,Sv=1.0000000000001;function CI(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let a,u;for(let h=0;h<s;h++){a=n[h],u=a.projectionDelta;const{visualElement:f}=a.options;f&&f.props.style&&f.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Rs(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),u&&(t.x*=u.x.scale,t.y*=u.y.scale,d1(e,u)),r&&mi(a.latestValues)&&Rs(e,a.latestValues))}t.x<Sv&&t.x>wv&&(t.x=1),t.y<Sv&&t.y>wv&&(t.y=1)}function Ts(e,t){e.min=e.min+t,e.max=e.max+t}function Cv(e,t,n,r,s=.5){const a=Ue(e.min,e.max,s);sd(e,t,n,a,r)}function Rs(e,t){Cv(e.x,t.x,t.scaleX,t.scale,t.originX),Cv(e.y,t.y,t.scaleY,t.scale,t.originY)}function p1(e,t){return h1(SI(e.getBoundingClientRect(),t))}function TI(e,t,n){const r=p1(e,n),{scroll:s}=t;return s&&(Ts(r.x,s.offset.x),Ts(r.y,s.offset.y)),r}const m1=({current:e})=>e?e.ownerDocument.defaultView:null,RI=new WeakMap;class EI{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ge(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=v=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(sc(v,"page").point)},a=(v,y)=>{var w;const{drag:P,dragPropagation:_,onDragStart:A}=this.getProps();if(P&&!_&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=EC(P),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),en(C=>{let S=this.getAxisMotionValue(C).get()||0;if(zn.test(S)){const{projection:E}=this.visualElement;if(E&&E.layout){const T=E.layout.layoutBox[C];T&&(S=Qt(T)*(parseFloat(S)/100))}}this.originPoint[C]=S}),A&&Ce.postRender(()=>A(v,y)),(w=this.removeWillChange)===null||w===void 0||w.call(this),this.removeWillChange=td(this.visualElement,"transform");const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},u=(v,y)=>{const{dragPropagation:w,dragDirectionLock:P,onDirectionLock:_,onDrag:A}=this.getProps();if(!w&&!this.openGlobalLock)return;const{offset:k}=y;if(P&&this.currentDirection===null){this.currentDirection=PI(k),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",y.point,k),this.updateAxis("y",y.point,k),this.visualElement.render(),A&&A(v,y)},h=(v,y)=>this.stop(v,y),f=()=>en(v=>{var y;return this.getAnimationState(v)==="paused"&&((y=this.getAxisMotionValue(v).animation)===null||y===void 0?void 0:y.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new a1(t,{onSessionStart:s,onStart:a,onMove:u,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,contextWindow:m1(this.visualElement)})}stop(t,n){var r;(r=this.removeWillChange)===null||r===void 0||r.call(this);const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:u}=this.getProps();u&&Ce.postRender(()=>u(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!Ll(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let u=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(u=dI(u,this.constraints[t],this.elastic[t])),a.set(u)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,a=this.constraints;n&&ws(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=pI(s.layoutBox,n):this.constraints=!1,this.elastic=vI(r),a!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&en(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=yI(s.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!ws(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=TI(r,s.root,this.visualElement.getTransformPagePoint());let u=mI(s.layout.layoutBox,a);if(n){const h=n(wI(u));this.hasMutatedConstraints=!!h,h&&(u=h1(h))}return u}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:u,onDragTransitionEnd:h}=this.getProps(),f=this.constraints||{},p=en(v=>{if(!Ll(v,n,this.currentDirection))return;let y=f&&f[v]||{};u&&(y={min:0,max:0});const w=s?200:1e6,P=s?40:1e7,_={type:"inertia",velocity:r?t[v]:0,bounceStiffness:w,bounceDamping:P,timeConstant:750,restDelta:1,restSpeed:10,...a,...y};return this.startAxisValueAnimation(v,_)});return Promise.all(p).then(h)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return r.start(Gp(t,r,0,n,this.visualElement,!1,td(this.visualElement,t)))}stopAnimation(){en(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){en(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){en(n=>{const{drag:r}=this.getProps();if(!Ll(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(n);if(s&&s.layout){const{min:u,max:h}=s.layout.layoutBox[n];a.set(t[n]-Ue(u,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ws(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};en(u=>{const h=this.getAxisMotionValue(u);if(h&&this.constraints!==!1){const f=h.get();s[u]=gI({min:f,max:f},this.constraints[u])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),en(u=>{if(!Ll(u,t,null))return;const h=this.getAxisMotionValue(u),{min:f,max:p}=this.constraints[u];h.set(Ue(f,p,s[u]))})}addListeners(){if(!this.visualElement.current)return;RI.set(this.visualElement,this);const t=this.visualElement.current,n=or(t,"pointerdown",f=>{const{drag:p,dragListener:v=!0}=this.getProps();p&&v&&this.start(f)}),r=()=>{const{dragConstraints:f}=this.getProps();ws(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Ce.read(r);const u=ir(window,"resize",()=>this.scalePositionWithinConstraints()),h=s.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p})=>{this.isDragging&&p&&(en(v=>{const y=this.getAxisMotionValue(v);y&&(this.originPoint[v]+=f[v].translate,y.set(y.get()+f[v].translate))}),this.visualElement.render())});return()=>{u(),n(),a(),h&&h()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:u=rd,dragMomentum:h=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:u,dragMomentum:h}}}function Ll(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function PI(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class AI extends ii{constructor(t){super(t),this.removeGroupControls=vt,this.removeListeners=vt,this.controls=new EI(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||vt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Tv=e=>(t,n)=>{e&&Ce.postRender(()=>e(t,n))};class _I extends ii{constructor(){super(...arguments),this.removePointerDownListener=vt}onPointerDown(t){this.session=new a1(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:m1(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Tv(t),onStart:Tv(n),onMove:r,onEnd:(a,u)=>{delete this.session,s&&Ce.postRender(()=>s(a,u))}}}mount(){this.removePointerDownListener=or(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function OI(){const e=D.useContext(ec);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,s=D.useId();D.useEffect(()=>r(s),[]);const a=D.useCallback(()=>n&&n(s),[s,n]);return!t&&n?[!1,a]:[!0]}const Jl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Rv(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const zo={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(oe.test(e))e=parseFloat(e);else return e;const n=Rv(e,t.target.x),r=Rv(e,t.target.y);return`${n}% ${r}%`}},kI={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=Zr.parse(e);if(s.length>5)return r;const a=Zr.createTransformer(e),u=typeof s[0]!="number"?1:0,h=n.x.scale*t.x,f=n.y.scale*t.y;s[0+u]/=h,s[1+u]/=f;const p=Ue(h,f,.5);return typeof s[2+u]=="number"&&(s[2+u]/=p),typeof s[3+u]=="number"&&(s[3+u]/=p),a(s)}};class xI extends D.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=t;Rk(MI),a&&(n.group&&n.group.add(a),r&&r.register&&s&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Jl.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:a}=this.props,u=r.projection;return u&&(u.isPresent=a,s||t.layoutDependency!==n||n===void 0?u.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?u.promote():u.relegate()||Ce.postRender(()=>{const h=u.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),wp.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function g1(e){const[t,n]=OI(),r=D.useContext(Tp);return an.jsx(xI,{...e,layoutGroup:r,switchLayoutGroup:D.useContext(sC),isPresent:t,safeToRemove:n})}const MI={borderRadius:{...zo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:zo,borderTopRightRadius:zo,borderBottomLeftRadius:zo,borderBottomRightRadius:zo,boxShadow:kI},y1=["TopLeft","TopRight","BottomLeft","BottomRight"],II=y1.length,Ev=e=>typeof e=="string"?parseFloat(e):e,Pv=e=>typeof e=="number"||oe.test(e);function bI(e,t,n,r,s,a){s?(e.opacity=Ue(0,n.opacity!==void 0?n.opacity:1,LI(r)),e.opacityExit=Ue(t.opacity!==void 0?t.opacity:1,0,DI(r))):a&&(e.opacity=Ue(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let u=0;u<II;u++){const h=`border${y1[u]}Radius`;let f=Av(t,h),p=Av(n,h);if(f===void 0&&p===void 0)continue;f||(f=0),p||(p=0),f===0||p===0||Pv(f)===Pv(p)?(e[h]=Math.max(Ue(Ev(f),Ev(p),r),0),(zn.test(p)||zn.test(f))&&(e[h]+="%")):e[h]=p}(t.rotate||n.rotate)&&(e.rotate=Ue(t.rotate||0,n.rotate||0,r))}function Av(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const LI=v1(0,.5,XC),DI=v1(.5,.95,vt);function v1(e,t,n){return r=>r<e?0:r>t?1:n(Da(e,t,r))}function _v(e,t){e.min=t.min,e.max=t.max}function Zt(e,t){_v(e.x,t.x),_v(e.y,t.y)}function Ov(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function kv(e,t,n,r,s){return e-=t,e=Mu(e,1/n,r),s!==void 0&&(e=Mu(e,1/s,r)),e}function NI(e,t=0,n=1,r=.5,s,a=e,u=e){if(zn.test(t)&&(t=parseFloat(t),t=Ue(u.min,u.max,t/100)-u.min),typeof t!="number")return;let h=Ue(a.min,a.max,r);e===a&&(h-=t),e.min=kv(e.min,t,n,h,s),e.max=kv(e.max,t,n,h,s)}function xv(e,t,[n,r,s],a,u){NI(e,t[n],t[r],t[s],t.scale,a,u)}const UI=["x","scaleX","originX"],FI=["y","scaleY","originY"];function Mv(e,t,n,r){xv(e.x,t,UI,n?n.x:void 0,r?r.x:void 0),xv(e.y,t,FI,n?n.y:void 0,r?r.y:void 0)}function Iv(e){return e.translate===0&&e.scale===1}function w1(e){return Iv(e.x)&&Iv(e.y)}function bv(e,t){return e.min===t.min&&e.max===t.max}function BI(e,t){return bv(e.x,t.x)&&bv(e.y,t.y)}function Lv(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function S1(e,t){return Lv(e.x,t.x)&&Lv(e.y,t.y)}function Dv(e){return Qt(e.x)/Qt(e.y)}function Nv(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class VI{constructor(){this.members=[]}add(t){rc(this.members,t),t.scheduleRender()}remove(t){if(ic(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function jI(e,t,n){let r="";const s=e.x.translate/t.x,a=e.y.translate/t.y,u=(n==null?void 0:n.z)||0;if((s||a||u)&&(r=`translate3d(${s}px, ${a}px, ${u}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:p,rotate:v,rotateX:y,rotateY:w,skewX:P,skewY:_}=n;p&&(r=`perspective(${p}px) ${r}`),v&&(r+=`rotate(${v}deg) `),y&&(r+=`rotateX(${y}deg) `),w&&(r+=`rotateY(${w}deg) `),P&&(r+=`skewX(${P}deg) `),_&&(r+=`skewY(${_}deg) `)}const h=e.x.scale*t.x,f=e.y.scale*t.y;return(h!==1||f!==1)&&(r+=`scale(${h}, ${f})`),r||"none"}const zI=(e,t)=>e.depth-t.depth;class GI{constructor(){this.children=[],this.isDirty=!1}add(t){rc(this.children,t),this.isDirty=!0}remove(t){ic(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(zI),this.isDirty=!1,this.children.forEach(t)}}function HI(e,t){const n=cr.now(),r=({timestamp:s})=>{const a=s-n;a>=t&&(mr(r),e(a-t))};return Ce.read(r,!0),()=>mr(r)}function WI(e){return e instanceof SVGElement&&e.tagName!=="svg"}function qI(e,t,n){const r=yt(e)?e:Na(e);return r.start(Gp("",r,t,n)),r.animation}const gi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Qo=typeof window<"u"&&window.MotionDebug!==void 0,Mh=["","X","Y","Z"],$I={visibility:"hidden"},Uv=1e3;let KI=0;function Ih(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function C1(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=s1(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Ce,!(s||a))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&C1(r)}function T1({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(u={},h=t==null?void 0:t()){this.id=KI++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Qo&&(gi.totalNodes=gi.resolvedTargetDeltas=gi.recalculatedProjection=0),this.nodes.forEach(XI),this.nodes.forEach(nb),this.nodes.forEach(rb),this.nodes.forEach(JI),Qo&&window.MotionDebug.record(gi)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new GI)}addEventListener(u,h){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new Hp),this.eventHandlers.get(u).add(h)}notifyListeners(u,...h){const f=this.eventHandlers.get(u);f&&f.notify(...h)}hasListeners(u){return this.eventHandlers.has(u)}mount(u,h=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=WI(u),this.instance=u;const{layoutId:f,layout:p,visualElement:v}=this.options;if(v&&!v.current&&v.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),h&&(p||f)&&(this.isLayoutDirty=!0),e){let y;const w=()=>this.root.updateBlockedByResize=!1;e(u,()=>{this.root.updateBlockedByResize=!0,y&&y(),y=HI(w,250),Jl.hasAnimatedSinceResize&&(Jl.hasAnimatedSinceResize=!1,this.nodes.forEach(Bv))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&v&&(f||p)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:w,hasRelativeTargetChanged:P,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||v.getDefaultTransition()||lb,{onLayoutAnimationStart:k,onLayoutAnimationComplete:C}=v.getProps(),S=!this.targetLayout||!S1(this.targetLayout,_)||P,E=!w&&P;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||E||w&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(y,E);const T={...Lp(A,"layout"),onPlay:k,onComplete:C};(v.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T)}else w||Bv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,mr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ib),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&C1(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let v=0;v<this.path.length;v++){const y=this.path[v];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:h,layout:f}=this.options;if(h===void 0&&!f)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Fv);return}this.isUpdating||this.nodes.forEach(eb),this.isUpdating=!1,this.nodes.forEach(tb),this.nodes.forEach(QI),this.nodes.forEach(YI),this.clearAllSnapshots();const h=cr.now();ot.delta=Jr(0,1e3/60,h-ot.timestamp),ot.timestamp=h,ot.isProcessing=!0,Ch.update.process(ot),Ch.preRender.process(ot),Ch.render.process(ot),ot.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,wp.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(ZI),this.sharedNodes.forEach(sb)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ce.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ce.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ge(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(h=!1),h){const f=r(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!s)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!w1(this.projectionDelta),f=this.getTransformTemplate(),p=f?f(this.latestValues,""):void 0,v=p!==this.prevTransformTemplateValue;u&&(h||mi(this.latestValues)||v)&&(s(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const h=this.measurePageBox();let f=this.removeElementScroll(h);return u&&(f=this.removeTransform(f)),ub(f),{animationId:this.root.animationId,measuredBox:h,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:h}=this.options;if(!h)return Ge();const f=h.measureViewportBox();if(!(((u=this.scroll)===null||u===void 0?void 0:u.wasRoot)||this.path.some(cb))){const{scroll:v}=this.root;v&&(Ts(f.x,v.offset.x),Ts(f.y,v.offset.y))}return f}removeElementScroll(u){var h;const f=Ge();if(Zt(f,u),!((h=this.scroll)===null||h===void 0)&&h.wasRoot)return f;for(let p=0;p<this.path.length;p++){const v=this.path[p],{scroll:y,options:w}=v;v!==this.root&&y&&w.layoutScroll&&(y.wasRoot&&Zt(f,u),Ts(f.x,y.offset.x),Ts(f.y,y.offset.y))}return f}applyTransform(u,h=!1){const f=Ge();Zt(f,u);for(let p=0;p<this.path.length;p++){const v=this.path[p];!h&&v.options.layoutScroll&&v.scroll&&v!==v.root&&Rs(f,{x:-v.scroll.offset.x,y:-v.scroll.offset.y}),mi(v.latestValues)&&Rs(f,v.latestValues)}return mi(this.latestValues)&&Rs(f,this.latestValues),f}removeTransform(u){const h=Ge();Zt(h,u);for(let f=0;f<this.path.length;f++){const p=this.path[f];if(!p.instance||!mi(p.latestValues))continue;id(p.latestValues)&&p.updateSnapshot();const v=Ge(),y=p.measurePageBox();Zt(v,y),Mv(h,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,v)}return mi(this.latestValues)&&Mv(h,this.latestValues),h}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ot.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var h;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==f;if(!(u||p&&this.isSharedProjectionDirty||this.isProjectionDirty||!((h=this.parent)===null||h===void 0)&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:w}=this.options;if(!(!this.layout||!(y||w))){if(this.resolvedRelativeTargetAt=ot.timestamp,!this.targetDelta&&!this.relativeTarget){const P=this.getClosestProjectingParent();P&&P.layout&&this.animationProgress!==1?(this.relativeParent=P,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ge(),this.relativeTargetOrigin=Ge(),ca(this.relativeTargetOrigin,this.layout.layoutBox,P.layout.layoutBox),Zt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ge(),this.targetWithTransforms=Ge()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),fI(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Zt(this.target,this.layout.layoutBox),d1(this.target,this.targetDelta)):Zt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const P=this.getClosestProjectingParent();P&&!!P.resumingFrom==!!this.resumingFrom&&!P.options.layoutScroll&&P.target&&this.animationProgress!==1?(this.relativeParent=P,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ge(),this.relativeTargetOrigin=Ge(),ca(this.relativeTargetOrigin,this.target,P.target),Zt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Qo&&gi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||id(this.parent.latestValues)||f1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var u;const h=this.getLead(),f=!!this.resumingFrom||this!==h;let p=!0;if((this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty)&&(p=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===ot.timestamp&&(p=!1),p)return;const{layout:v,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(v||y))return;Zt(this.layoutCorrected,this.layout.layoutBox);const w=this.treeScale.x,P=this.treeScale.y;CI(this.layoutCorrected,this.treeScale,this.path,f),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox,h.targetWithTransforms=Ge());const{target:_}=h;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Ov(this.prevProjectionDelta.x,this.projectionDelta.x),Ov(this.prevProjectionDelta.y,this.projectionDelta.y)),ua(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==w||this.treeScale.y!==P||!Nv(this.projectionDelta.x,this.prevProjectionDelta.x)||!Nv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_)),Qo&&gi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var h;if((h=this.options.visualElement)===null||h===void 0||h.scheduleRender(),u){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Cs(),this.projectionDelta=Cs(),this.projectionDeltaWithTransform=Cs()}setAnimationOrigin(u,h=!1){const f=this.snapshot,p=f?f.latestValues:{},v={...this.latestValues},y=Cs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const w=Ge(),P=f?f.source:void 0,_=this.layout?this.layout.source:void 0,A=P!==_,k=this.getStack(),C=!k||k.members.length<=1,S=!!(A&&!C&&this.options.crossfade===!0&&!this.path.some(ab));this.animationProgress=0;let E;this.mixTargetDelta=T=>{const L=T/1e3;Vv(y.x,u.x,L),Vv(y.y,u.y,L),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ca(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),ob(this.relativeTarget,this.relativeTargetOrigin,w,L),E&&BI(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=Ge()),Zt(E,this.relativeTarget)),A&&(this.animationValues=v,bI(v,p,this.latestValues,L,S,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(mr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ce.update(()=>{Jl.hasAnimatedSinceResize=!0,this.currentAnimation=qI(0,Uv,{...u,onUpdate:h=>{this.mixTargetDelta(h),u.onUpdate&&u.onUpdate(h)},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Uv),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:h,target:f,layout:p,latestValues:v}=u;if(!(!h||!f||!p)){if(this!==u&&this.layout&&p&&R1(this.options.animationType,this.layout.layoutBox,p.layoutBox)){f=this.target||Ge();const y=Qt(this.layout.layoutBox.x);f.x.min=u.target.x.min,f.x.max=f.x.min+y;const w=Qt(this.layout.layoutBox.y);f.y.min=u.target.y.min,f.y.max=f.y.min+w}Zt(h,f),Rs(h,v),ua(this.projectionDeltaWithTransform,this.layoutCorrected,h,v)}}registerSharedNode(u,h){this.sharedNodes.has(u)||this.sharedNodes.set(u,new VI),this.sharedNodes.get(u).add(h);const p=h.options.initialPromotionConfig;h.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(h):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var u;const{layoutId:h}=this.options;return h?((u=this.getStack())===null||u===void 0?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:h}=this.options;return h?(u=this.getStack())===null||u===void 0?void 0:u.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:h,preserveFollowOpacity:f}={}){const p=this.getStack();p&&p.promote(this,f),u&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let h=!1;const{latestValues:f}=u;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(h=!0),!h)return;const p={};f.z&&Ih("z",u,p,this.animationValues);for(let v=0;v<Mh.length;v++)Ih(`rotate${Mh[v]}`,u,p,this.animationValues),Ih(`skew${Mh[v]}`,u,p,this.animationValues);u.render();for(const v in p)u.setStaticValue(v,p[v]),this.animationValues&&(this.animationValues[v]=p[v]);u.scheduleRender()}getProjectionStyles(u){var h,f;if(!this.instance||this.isSVG)return;if(!this.isVisible)return $I;const p={visibility:""},v=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,p.opacity="",p.pointerEvents=Yl(u==null?void 0:u.pointerEvents)||"",p.transform=v?v(this.latestValues,""):"none",p;const y=this.getLead();if(!this.projectionDelta||!this.layout||!y.target){const A={};return this.options.layoutId&&(A.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,A.pointerEvents=Yl(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!mi(this.latestValues)&&(A.transform=v?v({},""):"none",this.hasProjected=!1),A}const w=y.animationValues||y.latestValues;this.applyTransformsToTarget(),p.transform=jI(this.projectionDeltaWithTransform,this.treeScale,w),v&&(p.transform=v(w,p.transform));const{x:P,y:_}=this.projectionDelta;p.transformOrigin=`${P.origin*100}% ${_.origin*100}% 0`,y.animationValues?p.opacity=y===this?(f=(h=w.opacity)!==null&&h!==void 0?h:this.latestValues.opacity)!==null&&f!==void 0?f:1:this.preserveOpacity?this.latestValues.opacity:w.opacityExit:p.opacity=y===this?w.opacity!==void 0?w.opacity:"":w.opacityExit!==void 0?w.opacityExit:0;for(const A in Au){if(w[A]===void 0)continue;const{correct:k,applyTo:C}=Au[A],S=p.transform==="none"?w[A]:k(w[A],y);if(C){const E=C.length;for(let T=0;T<E;T++)p[C[T]]=S}else p[A]=S}return this.options.layoutId&&(p.pointerEvents=y===this?Yl(u==null?void 0:u.pointerEvents)||"":"none"),p}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var h;return(h=u.currentAnimation)===null||h===void 0?void 0:h.stop()}),this.root.nodes.forEach(Fv),this.root.sharedNodes.clear()}}}function QI(e){e.updateLayout()}function YI(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:a}=e.options,u=n.source!==e.layout.source;a==="size"?en(y=>{const w=u?n.measuredBox[y]:n.layoutBox[y],P=Qt(w);w.min=r[y].min,w.max=w.min+P}):R1(a,n.layoutBox,r)&&en(y=>{const w=u?n.measuredBox[y]:n.layoutBox[y],P=Qt(r[y]);w.max=w.min+P,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[y].max=e.relativeTarget[y].min+P)});const h=Cs();ua(h,r,n.layoutBox);const f=Cs();u?ua(f,e.applyTransform(s,!0),n.measuredBox):ua(f,r,n.layoutBox);const p=!w1(h);let v=!1;if(!e.resumeFrom){const y=e.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:w,layout:P}=y;if(w&&P){const _=Ge();ca(_,n.layoutBox,w.layoutBox);const A=Ge();ca(A,r,P.layoutBox),S1(_,A)||(v=!0),y.options.layoutRoot&&(e.relativeTarget=A,e.relativeTargetOrigin=_,e.relativeParent=y)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:f,layoutDelta:h,hasLayoutChanged:p,hasRelativeTargetChanged:v})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function XI(e){Qo&&gi.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function JI(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function ZI(e){e.clearSnapshot()}function Fv(e){e.clearMeasurements()}function eb(e){e.isLayoutDirty=!1}function tb(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Bv(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function nb(e){e.resolveTargetDelta()}function rb(e){e.calcProjection()}function ib(e){e.resetSkewAndRotation()}function sb(e){e.removeLeadSnapshot()}function Vv(e,t,n){e.translate=Ue(t.translate,0,n),e.scale=Ue(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function jv(e,t,n,r){e.min=Ue(t.min,n.min,r),e.max=Ue(t.max,n.max,r)}function ob(e,t,n,r){jv(e.x,t.x,n.x,r),jv(e.y,t.y,n.y,r)}function ab(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const lb={duration:.45,ease:[.4,0,.1,1]},zv=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Gv=zv("applewebkit/")&&!zv("chrome/")?Math.round:vt;function Hv(e){e.min=Gv(e.min),e.max=Gv(e.max)}function ub(e){Hv(e.x),Hv(e.y)}function R1(e,t,n){return e==="position"||e==="preserve-aspect"&&!hI(Dv(t),Dv(n),.2)}function cb(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const hb=T1({attachResizeListener:(e,t)=>ir(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),bh={current:void 0},E1=T1({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!bh.current){const e=new hb({});e.mount(window),e.setOptions({layoutScroll:!0}),bh.current=e}return bh.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),fb={pan:{Feature:_I},drag:{Feature:AI,ProjectionNode:E1,MeasureLayout:g1}},od={current:null},P1={current:!1};function db(){if(P1.current=!0,!!vp)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>od.current=e.matches;e.addListener(t),t()}else od.current=!1}function pb(e,t,n){for(const r in t){const s=t[r],a=n[r];if(yt(s))e.addValue(r,s);else if(yt(a))e.addValue(r,Na(s,{owner:e}));else if(a!==s)if(e.hasValue(r)){const u=e.getValue(r);u.liveStyle===!0?u.jump(s):u.hasAnimated||u.set(s)}else{const u=e.getStaticValue(r);e.addValue(r,Na(u!==void 0?u:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Wv=new WeakMap,mb=[...IC,mt,Zr],gb=e=>mb.find(MC(e)),qv=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],yb=Cp.length;class vb{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:u},h={}){this.applyWillChange=!1,this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Dp,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.isRenderScheduled=!1,this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.isRenderScheduled=!1,this.scheduleRender=()=>{this.isRenderScheduled||(this.isRenderScheduled=!0,Ce.render(this.render,!1,!0))};const{latestValues:f,renderState:p}=u;this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=p,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=h,this.blockInitialAnimation=!!a,this.isControllingVariants=nc(n),this.isVariantNode=aC(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:v,...y}=this.scrapeMotionValuesFromProps(n,{},this);for(const w in y){const P=y[w];f[w]!==void 0&&yt(P)&&P.set(f[w],!1)}}mount(t){this.current=t,Wv.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),P1.current||db(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:od.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Wv.delete(this.current),this.projection&&this.projection.unmount(),mr(this.notifyUpdate),mr(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=ri.has(t),s=n.on("change",h=>{this.latestValues[t]=h,this.props.onUpdate&&Ce.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),a(),u&&u(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in eo){const n=eo[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ge()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<qv.length;r++){const s=qv[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,u=t[a];u&&(this.propEventSubscriptions[s]=this.on(s,u))}this.prevMotionValues=pb(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<yb;r++){const s=Cp[r],a=this.props[s];(Ia(a)||a===!1)&&(n[s]=a)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Na(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){var r;let s=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options);return s!=null&&(typeof s=="string"&&(kC(s)||OC(s))?s=parseFloat(s):!gb(s)&&Zr.test(n)&&(s=VC(t,n)),this.setBaseTarget(t,yt(s)?s.get():s)),yt(s)?s.get():s}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const u=Ip(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);u&&(s=u[t])}if(r&&s!==void 0)return s;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!yt(a)?a:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Hp),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class A1 extends vb{constructor(){super(...arguments),this.KeyframeResolver=jC}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}}function wb(e){return window.getComputedStyle(e)}class Sb extends A1{constructor(){super(...arguments),this.type="html",this.applyWillChange=!0,this.renderInstance=mC}readValueFromInstance(t,n){if(ri.has(n)){const r=Up(n);return r&&r.default||0}else{const r=wb(t),s=(hC(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return p1(t,n)}build(t,n,r){_p(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return Mp(t,n,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;yt(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class Cb extends A1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ge}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(ri.has(n)){const r=Up(n);return r&&r.default||0}return n=gC.has(n)?n:tc(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return vC(t,n,r)}build(t,n,r){kp(t,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,r,s){yC(t,n,r,s)}mount(t){this.isSVGTag=xp(t.tagName),super.mount(t)}}const Tb=(e,t)=>Rp(e)?new Cb(t):new Sb(t,{allowProjection:e!==D.Fragment}),Rb={layout:{ProjectionNode:E1,MeasureLayout:g1}},Eb={...rI,...fx,...fb,...Rb},Gb=Ck((e,t)=>Zk(e,t,Eb,Tb));class Pb extends D.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Ab({children:e,isPresent:t}){const n=D.useId(),r=D.useRef(null),s=D.useRef({width:0,height:0,top:0,left:0}),{nonce:a}=D.useContext(yp);return D.useInsertionEffect(()=>{const{width:u,height:h,top:f,left:p}=s.current;if(t||!r.current||!u||!h)return;r.current.dataset.motionPopId=n;const v=document.createElement("style");return a&&(v.nonce=a),document.head.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${h}px !important;
            top: ${f}px !important;
            left: ${p}px !important;
          }
        `),()=>{document.head.removeChild(v)}},[t]),an.jsx(Pb,{isPresent:t,childRef:r,sizeRef:s,children:D.cloneElement(e,{ref:r})})}const _b=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:a,mode:u})=>{const h=bp(Ob),f=D.useId(),p=D.useMemo(()=>({id:f,initial:t,isPresent:n,custom:s,onExitComplete:v=>{h.set(v,!0);for(const y of h.values())if(!y)return;r&&r()},register:v=>(h.set(v,!1),()=>h.delete(v))}),a?[Math.random()]:[n]);return D.useMemo(()=>{h.forEach((v,y)=>h.set(y,!1))},[n]),D.useEffect(()=>{!n&&!h.size&&r&&r()},[n]),u==="popLayout"&&(e=an.jsx(Ab,{isPresent:n,children:e})),an.jsx(ec.Provider,{value:p,children:e})};function Ob(){return new Map}const Dl=e=>e.key||"";function $v(e){const t=[];return D.Children.forEach(e,n=>{D.isValidElement(n)&&t.push(n)}),t}const Hb=({children:e,exitBeforeEnter:t,custom:n,initial:r=!0,onExitComplete:s,presenceAffectsLayout:a=!0,mode:u="sync"})=>{const h=D.useMemo(()=>$v(e),[e]),f=h.map(Dl),p=D.useRef(!0),v=D.useRef(h),y=bp(()=>new Map),[w,P]=D.useState(h),[_,A]=D.useState(h);tC(()=>{p.current=!1,v.current=h;for(let S=0;S<_.length;S++){const E=Dl(_[S]);f.includes(E)?y.delete(E):y.get(E)!==!0&&y.set(E,!1)}},[_,f.length,f.join("-")]);const k=[];if(h!==w){let S=[...h];for(let E=0;E<_.length;E++){const T=_[E],L=Dl(T);f.includes(L)||(S.splice(E,0,T),k.push(T))}u==="wait"&&k.length&&(S=k),A($v(S)),P(h);return}const{forceRender:C}=D.useContext(Tp);return an.jsx(an.Fragment,{children:_.map(S=>{const E=Dl(S),T=h===_||f.includes(E),L=()=>{if(y.has(E))y.set(E,!0);else return;let V=!0;y.forEach(H=>{H||(V=!1)}),V&&(C==null||C(),A(v.current),s&&s())};return an.jsx(_b,{isPresent:T,initial:!p.current||r?void 0:!1,custom:T?void 0:n,presenceAffectsLayout:a,mode:u,onExitComplete:T?void 0:L,children:S},E)})})};var _1={exports:{}};/*@license Copyright 2015-2022 Ably Real-time Ltd (ably.com)

Ably JavaScript Library v2.3.1
https://github.com/ably/ably-js

Released under the Apache Licence v2.0*/(function(e,t){(function(n,r){e.exports=r()})(Xn,()=>{var n={},r={exports:n},s=Object.defineProperty,a=Object.defineProperties,u=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,w=(i,o,l)=>o in i?s(i,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):i[o]=l,P=(i,o)=>{for(var l in o||(o={}))v.call(o,l)&&w(i,l,o[l]);if(p)for(var l of p(o))y.call(o,l)&&w(i,l,o[l]);return i},_=(i,o)=>a(i,h(o)),A=(i,o)=>{var l={};for(var c in i)v.call(i,c)&&o.indexOf(c)<0&&(l[c]=i[c]);if(i!=null&&p)for(var c of p(i))o.indexOf(c)<0&&y.call(i,c)&&(l[c]=i[c]);return l},k=(i,o)=>{for(var l in o)s(i,l,{get:o[l],enumerable:!0})},C=(i,o,l,c)=>{if(o&&typeof o=="object"||typeof o=="function")for(let d of f(o))!v.call(i,d)&&d!==l&&s(i,d,{get:()=>o[d],enumerable:!(c=u(o,d))||c.enumerable});return i},S=i=>C(s({},"__esModule",{value:!0}),i),E={};k(E,{ErrorInfo:()=>N,Realtime:()=>kc,Rest:()=>vc,default:()=>qR,msgpack:()=>Fc,protocolMessageFromDeserialized:()=>OT}),r.exports=S(E);var T=class{},L=typeof Xn<"u"?Xn:typeof window<"u"?window:self;function V(i,o){return`${i}`.padStart(o?3:2,"0")}function H(i){return T.Config.logTimestamps?function(o){const l=new Date;i(V(l.getHours())+":"+V(l.getMinutes())+":"+V(l.getSeconds())+"."+V(l.getMilliseconds(),1)+" "+o)}:function(o){i(o)}}var F=()=>{var i;let o,l;return typeof((i=L==null?void 0:L.console)==null?void 0:i.log)=="function"?(o=function(...c){console.log.apply(console,c)},l=console.warn?function(...c){console.warn.apply(console,c)}:o):o=l=function(){},[o,l].map(H)},J=class Yo{constructor(){this.deprecated=(o,l)=>{this.deprecationWarning(`${o} is deprecated and will be removed in a future version. ${l}`)},this.shouldLog=o=>o<=this.logLevel,this.setLog=(o,l)=>{o!==void 0&&(this.logLevel=o),l!==void 0&&(this.logHandler=this.logErrorHandler=l)},this.logLevel=Yo.defaultLogLevel,this.logHandler=Yo.defaultLogHandler,this.logErrorHandler=Yo.defaultLogErrorHandler}static initLogHandlers(){const[o,l]=F();this.defaultLogHandler=o,this.defaultLogErrorHandler=l,this.defaultLogger=new Yo}static logActionNoStrip(o,l,c,d){o.logAction(l,c,d)}logAction(o,l,c){this.shouldLog(o)&&(o===1?this.logErrorHandler:this.logHandler)("Ably: "+l+": "+c,o)}renamedClientOption(o,l){this.deprecationWarning(`The \`${o}\` client option has been renamed to \`${l}\`. Please update your code to use \`${l}\` instead. \`${o}\` will be removed in a future version.`)}renamedMethod(o,l,c){this.deprecationWarning(`\`${o}\`’s \`${l}\` method has been renamed to \`${c}\`. Please update your code to use \`${c}\` instead. \`${l}\` will be removed in a future version.`)}deprecationWarning(o){this.shouldLog(1)&&this.logErrorHandler(`Ably: Deprecation warning - ${o}`,1)}};J.defaultLogLevel=1,J.LOG_NONE=0,J.LOG_ERROR=1,J.LOG_MAJOR=2,J.LOG_MINOR=3,J.LOG_MICRO=4,J.logAction=(i,o,l,c)=>{J.logActionNoStrip(i,o,l,c)};var Y=J,m=Y,Ae={};k(Ae,{Format:()=>Hn,allSame:()=>Gi,allToLowerCase:()=>qi,allToUpperCase:()=>oi,arrChooseN:()=>ho,arrDeleteValue:()=>co,arrEquals:()=>Za,arrIntersect:()=>uo,arrIntersectOb:()=>ji,arrPopRandomElement:()=>wr,arrSubtract:()=>Xa,arrWithoutValue:()=>vr,cheapRandStr:()=>An,containsValue:()=>St,copy:()=>W,createMissingPluginError:()=>Ki,dataSizeBytes:()=>Sr,decodeBody:()=>kt,encodeBody:()=>xt,ensureArray:()=>se,forInOwnNonNullProperties:()=>zi,getBackoffCoefficient:()=>ai,getGlobalObject:()=>li,getJitterCoefficient:()=>Jt,getRetryTime:()=>_n,inherits:()=>Ee,inspectBody:()=>Wi,inspectError:()=>xe,intersect:()=>fn,isEmpty:()=>ne,isErrorInfoOrPartialErrorInfo:()=>Hi,isNil:()=>re,isObject:()=>ie,keysArray:()=>Gn,matchDerivedChannel:()=>Ja,mixin:()=>Z,parseQueryString:()=>si,prototypicalClone:()=>Vt,randomString:()=>Wn,shallowClone:()=>ke,shallowEquals:()=>$i,throwMissingPluginError:()=>we,toBase64:()=>On,toQueryString:()=>Pn,valuesArray:()=>En,whenPromiseSettles:()=>tt,withTimeoutAsync:()=>qn});function Le(i){let o="["+i.constructor.name;return i.message&&(o+=": "+i.message),i.statusCode&&(o+="; statusCode="+i.statusCode),i.code&&(o+="; code="+i.code),i.cause&&(o+="; cause="+xe(i.cause)),i.href&&!(i.message&&i.message.indexOf("help.ably.io")>-1)&&(o+="; see "+i.href+" "),o+="]",o}var N=class ad extends Error{constructor(o,l,c,d){super(o),typeof Object.setPrototypeOf<"u"&&Object.setPrototypeOf(this,ad.prototype),this.code=l,this.statusCode=c,this.cause=d}toString(){return Le(this)}static fromValues(o){const{message:l,code:c,statusCode:d}=o;if(typeof l!="string"||typeof c!="number"||typeof d!="number")throw new Error("ErrorInfo.fromValues(): invalid values: "+T.Config.inspect(o));const g=Object.assign(new ad(l,c,d),o);return g.code&&!g.href&&(g.href="https://help.ably.io/error/"+g.code),g}},ue=class ld extends Error{constructor(o,l,c,d){super(o),typeof Object.setPrototypeOf<"u"&&Object.setPrototypeOf(this,ld.prototype),this.code=l,this.statusCode=c,this.cause=d}toString(){return Le(this)}static fromValues(o){const{message:l,code:c,statusCode:d}=o;if(typeof l!="string"||!re(c)&&typeof c!="number"||!re(d)&&typeof d!="number")throw new Error("PartialErrorInfo.fromValues(): invalid values: "+T.Config.inspect(o));const g=Object.assign(new ld(l,c,d),o);return g.code&&!g.href&&(g.href="https://help.ably.io/error/"+g.code),g}};function Re(i){return Math.floor(Math.random()*i.length)}function Z(i,...o){for(let l=0;l<o.length;l++){const c=o[l];if(!c)break;for(const d in c)Object.prototype.hasOwnProperty.call(c,d)&&(i[d]=c[d])}return i}function W(i){return Z({},i)}function se(i){return re(i)?[]:Array.isArray(i)?i:[i]}function ie(i){return Object.prototype.toString.call(i)=="[object Object]"}function ne(i){for(const o in i)return!1;return!0}function re(i){return i==null}function ke(i){const o=new Object;for(const l in i)o[l]=i[l];return o}function Vt(i,o){class l{}l.prototype=i;const c=new l;return o&&Z(c,o),c}var Ee=function(i,o){if(T.Config.inherits){T.Config.inherits(i,o);return}i.super_=o,i.prototype=Vt(o.prototype,{constructor:i})};function St(i,o){for(const l in i)if(i[l]==o)return!0;return!1}function fn(i,o){return Array.isArray(o)?uo(i,o):ji(i,o)}function uo(i,o){const l=[];for(let c=0;c<i.length;c++){const d=i[c];o.indexOf(d)!=-1&&l.push(d)}return l}function ji(i,o){const l=[];for(let c=0;c<i.length;c++){const d=i[c];d in o&&l.push(d)}return l}function Xa(i,o){const l=[];for(let c=0;c<i.length;c++){const d=i[c];o.indexOf(d)==-1&&l.push(d)}return l}function co(i,o){const l=i.indexOf(o),c=l!=-1;return c&&i.splice(l,1),c}function vr(i,o){const l=i.slice();return co(l,o),l}function Gn(i,o){const l=[];for(const c in i)o&&!Object.prototype.hasOwnProperty.call(i,c)||l.push(c);return l}function En(i,o){const l=[];for(const c in i)o&&!Object.prototype.hasOwnProperty.call(i,c)||l.push(i[c]);return l}function zi(i,o){for(const l in i)Object.prototype.hasOwnProperty.call(i,l)&&i[l]&&o(l)}function Gi(i,o){if(i.length===0)return!0;const l=i[0][o];return i.every(function(c){return c[o]===l})}var Hn=(i=>(i.msgpack="msgpack",i.json="json",i))(Hn||{});function wr(i){return i.splice(Re(i),1)[0]}function Pn(i){const o=[];if(i)for(const l in i)o.push(encodeURIComponent(l)+"="+encodeURIComponent(i[l]));return o.length?"?"+o.join("&"):""}function si(i){let o;const l=/([^?&=]+)=?([^&]*)/g,c={};for(;o=l.exec(i);)c[decodeURIComponent(o[1])]=decodeURIComponent(o[2]);return c}function Hi(i){return typeof i=="object"&&i!==null&&(i instanceof N||i instanceof ue)}function xe(i){var o,l;return i instanceof Error||((o=i==null?void 0:i.constructor)==null?void 0:o.name)==="ErrorInfo"||((l=i==null?void 0:i.constructor)==null?void 0:l.name)==="PartialErrorInfo"?i.toString():T.Config.inspect(i)}function Wi(i){return T.BufferUtils.isBuffer(i)?i.toString():typeof i=="string"?i:T.Config.inspect(i)}function Sr(i){if(T.BufferUtils.isBuffer(i))return T.BufferUtils.byteLength(i);if(typeof i=="string")return T.Config.stringByteSize(i);throw new Error("Expected input of Utils.dataSizeBytes to be a buffer or string, but was: "+typeof i)}function An(){return String(Math.random()).substr(2)}var Wn=async i=>{const o=await T.Config.getRandomArrayBuffer(i);return T.BufferUtils.base64Encode(o)};function ho(i,o){const l=Math.min(o,i.length),c=i.slice(),d=[];for(let g=0;g<l;g++)d.push(wr(c));return d}function tt(i,o){i.then(l=>{o==null||o(null,l)}).catch(l=>{o==null||o(l)})}function kt(i,o,l){return l=="msgpack"?(o||we("MsgPack"),o.decode(i)):JSON.parse(String(i))}function xt(i,o,l){return l=="msgpack"?(o||we("MsgPack"),o.encode(i,!0)):JSON.stringify(i)}function qi(i){return i.map(function(o){return o&&o.toLowerCase()})}function oi(i){return i.map(function(o){return o&&o.toUpperCase()})}function ai(i){return Math.min((i+2)/3,2)}function Jt(){return 1-Math.random()*.2}function _n(i,o){return i*ai(o)*Jt()}function li(){return typeof Xn<"u"?Xn:typeof window<"u"?window:self}function $i(i,o){return Object.keys(i).every(l=>i[l]===o[l])&&Object.keys(o).every(l=>o[l]===i[l])}function Ja(i){const o=/^(\[([^?]*)(?:(.*))\])?(.+)$/,l=i.match(o);if(!l||!l.length||l.length<5)throw new N("regex match failed",400,40010);if(l[2])throw new N(`cannot use a derived option with a ${l[2]} channel`,400,40010);return{qualifierParam:l[3]||"",channelName:l[4]}}function On(i){const o=T.BufferUtils,l=o.utf8Encode(i);return o.base64Encode(l)}function Za(i,o){return i.length===o.length&&i.every(function(l,c){return l===o[c]})}function Ki(i){return new N(`${i} plugin not provided`,40019,400)}function we(i){throw Ki(i)}async function qn(i,o=5e3,l="Timeout expired"){const c=new N(l,5e4,500);return Promise.race([i,new Promise((d,g)=>setTimeout(()=>g(c),o))])}var el="2.3.1",tl="ably-js/"+el,qe={ENVIRONMENT:"",REST_HOST:"rest.ably.io",REALTIME_HOST:"realtime.ably.io",FALLBACK_HOSTS:["A.ably-realtime.com","B.ably-realtime.com","C.ably-realtime.com","D.ably-realtime.com","E.ably-realtime.com"],PORT:80,TLS_PORT:443,TIMEOUTS:{disconnectedRetryTimeout:15e3,suspendedRetryTimeout:3e4,httpRequestTimeout:1e4,httpMaxRetryDuration:15e3,channelRetryTimeout:15e3,fallbackRetryTimeout:6e5,connectionStateTtl:12e4,realtimeRequestTimeout:1e4,recvTimeout:9e4,webSocketConnectTimeout:1e4,webSocketSlowTimeout:4e3},httpMaxRetryCount:3,maxMessageSize:65536,version:el,protocolVersion:3,agent:tl,getHost:fo,getPort:nl,getHttpScheme:lc,environmentFallbackHosts:po,getFallbackHosts:mo,getHosts:uc,checkHost:jt,objectifyOptions:il,normaliseOptions:sl,defaultGetHeaders:ol,defaultPostHeaders:al};function fo(i,o,l){return l?o=o==i.restHost&&i.realtimeHost||o||i.realtimeHost:o=o||i.restHost,o}function nl(i,o){return o||i.tls?i.tlsPort:i.port}function lc(i){return i.tls?"https://":"http://"}function po(i){return[i+"-a-fallback.ably-realtime.com",i+"-b-fallback.ably-realtime.com",i+"-c-fallback.ably-realtime.com",i+"-d-fallback.ably-realtime.com",i+"-e-fallback.ably-realtime.com"]}function mo(i){const o=i.fallbackHosts,l=typeof i.httpMaxRetryCount<"u"?i.httpMaxRetryCount:qe.httpMaxRetryCount;return o?ho(o,l):[]}function uc(i,o){const l=[i.restHost].concat(mo(i));return o?l.map(c=>fo(i,c,!0)):l}function jt(i){if(typeof i!="string")throw new N("host must be a string; was a "+typeof i,4e4,400);if(!i.length)throw new N("host must not be zero-length",4e4,400)}function Qi(i,o,l,c){return i.realtimeHost?i.realtimeHost:i.restHost?(m.logAction(c,m.LOG_MINOR,"Defaults.normaliseOptions",'restHost is set to "'+i.restHost+'" but realtimeHost is not set, so setting realtimeHost to "'+i.restHost+'" too. If this is not what you want, please set realtimeHost explicitly.'),i.restHost):o?qe.REALTIME_HOST:l+"-"+qe.REALTIME_HOST}function rl(i){const o={};for(const l in qe.TIMEOUTS)o[l]=i[l]||qe.TIMEOUTS[l];return o}function Yi(i){let o=qe.agent;if(i.agents)for(var l in i.agents)o+=" "+l+"/"+i.agents[l];return o}function il(i,o,l,c,d){if(i===void 0){const R=o?`${l} must be initialized with either a client options object, an Ably API key, or an Ably Token`:`${l} must be initialized with a client options object`;throw m.logAction(c,m.LOG_ERROR,`${l}()`,R),new Error(R)}let g;if(typeof i=="string")if(i.indexOf(":")==-1){if(!o){const R=`${l} cannot be initialized with just an Ably Token; you must provide a client options object with a \`plugins\` property. (Set this Ably Token as the object’s \`token\` property.)`;throw m.logAction(c,m.LOG_ERROR,`${l}()`,R),new Error(R)}g={token:i}}else{if(!o){const R=`${l} cannot be initialized with just an Ably API key; you must provide a client options object with a \`plugins\` property. (Set this Ably API key as the object’s \`key\` property.)`;throw m.logAction(c,m.LOG_ERROR,`${l}()`,R),new Error(R)}g={key:i}}else g=i;return d&&(g=_(P({},g),{plugins:P(P({},d),g.plugins)})),g}function sl(i,o,l){const c=l??m.defaultLogger;typeof i.recover=="function"&&i.closeOnUnload===!0&&(m.logAction(c,m.LOG_ERROR,"Defaults.normaliseOptions","closeOnUnload was true and a session recovery function was set - these are mutually exclusive, so unsetting the latter"),i.recover=void 0),"closeOnUnload"in i||(i.closeOnUnload=!i.recover),"queueMessages"in i||(i.queueMessages=!0);const d=i.environment&&String(i.environment).toLowerCase()||qe.ENVIRONMENT,g=!d||d==="production";!i.fallbackHosts&&!i.restHost&&!i.realtimeHost&&!i.port&&!i.tlsPort&&(i.fallbackHosts=g?qe.FALLBACK_HOSTS:po(d));const R=i.restHost||(g?qe.REST_HOST:d+"-"+qe.REST_HOST),O=Qi(i,g,d,c);(i.fallbackHosts||[]).concat(R,O).forEach(jt),i.port=i.port||qe.PORT,i.tlsPort=i.tlsPort||qe.TLS_PORT,"tls"in i||(i.tls=!0);const b=rl(i);o?"useBinaryProtocol"in i?i.useBinaryProtocol=T.Config.supportsBinary&&i.useBinaryProtocol:i.useBinaryProtocol=T.Config.preferBinary:i.useBinaryProtocol=!1;const I={};i.clientId&&(I["X-Ably-ClientId"]=T.BufferUtils.base64Encode(T.BufferUtils.utf8Encode(i.clientId))),"idempotentRestPublishing"in i||(i.idempotentRestPublishing=!0);let U=null,B=i.connectivityCheckUrl;if(i.connectivityCheckUrl){let[q,j]=i.connectivityCheckUrl.split("?");U=j?si(j):{},q.indexOf("://")===-1&&(q="https://"+q),B=q}return _(P({},i),{realtimeHost:O,restHost:R,maxMessageSize:i.maxMessageSize||qe.maxMessageSize,timeouts:b,connectivityCheckParams:U,connectivityCheckUrl:B,headers:I})}function Mt(i,o,l){const c=l||{};if(c.cipher){i||we("Crypto");const d=i.getCipher(c.cipher,o);c.cipher=d.cipherParams,c.channelCipher=d.cipher}else"cipher"in c&&(c.cipher=void 0,c.channelCipher=null);return c}var go={json:"application/json",xml:"application/xml",html:"text/html",msgpack:"application/x-msgpack",text:"text/plain"},ui={format:"json",protocolVersion:qe.protocolVersion};function ol(i,{format:o=ui.format,protocolVersion:l=ui.protocolVersion}={}){return{accept:go[o],"X-Ably-Version":l.toString(),"Ably-Agent":Yi(i)}}function al(i,{format:o=ui.format,protocolVersion:l=ui.protocolVersion}={}){let c;return{accept:c=go[o],"content-type":c,"X-Ably-Version":l.toString(),"Ably-Agent":Yi(i)}}var ae=qe;function te(i){return Object.assign(qe,i)}var x=class O1{constructor(o,l){this.logger=o,this.members=l||[]}call(o,l){for(const c of this.members)if(c)try{c(o,l)}catch(d){m.logAction(this.logger,m.LOG_ERROR,"Multicaster multiple callback handler","Unexpected exception: "+d+"; stack = "+d.stack)}}push(...o){this.members.push(...o)}createPromise(){return new Promise((o,l)=>{this.push((c,d)=>{c?l(c):o(d)})})}resolveAll(o){this.call(null,o)}rejectAll(o){this.call(o)}static create(o,l){const c=new O1(o,l);return Object.assign((d,g)=>c.call(d,g),{push:d=>c.push(d),createPromise:()=>c.createPromise(),resolveAll:d=>c.resolveAll(d),rejectAll:d=>c.rejectAll(d)})}},G=x,Q=(i=>(i.Get="get",i.Delete="delete",i.Post="post",i.Put="put",i.Patch="patch",i))(Q||{}),le=Q,Ke=(i=>(i[i.Success=200]="Success",i[i.NoContent=204]="NoContent",i[i.BadRequest=400]="BadRequest",i[i.Unauthorized=401]="Unauthorized",i[i.Forbidden=403]="Forbidden",i[i.RequestTimeout=408]="RequestTimeout",i[i.InternalServerError=500]="InternalServerError",i))(Ke||{});function Qe(i){return i>=200&&i<400}var Ye=Ke,It=Math.pow(2,17);function ci(){return("000000"+Math.floor(Math.random()*1e16)).slice(-16)}function it(i){return!!i.connection}function yo(i){return Hi(i)?(i.code||(i.statusCode===403?i.code=40300:(i.code=40170,i.statusCode=401)),i):new N(xe(i),i.code||40170,i.statusCode||401)}var ll=(i,o)=>{const l=T.BufferUtils,c=l.utf8Encode(i),d=l.utf8Encode(o),g=l.hmacSha256(c,d);return l.base64Encode(g)};function Wp(i){if(!i)return"";typeof i=="string"&&(i=JSON.parse(i));const o=Object.create(null),l=Gn(i,!0);if(!l)return"";l.sort();for(let c=0;c<l.length;c++)o[l[c]]=i[l[c]].sort();return JSON.stringify(o)}function qp(i,o){if(i.authCallback)m.logAction(o,m.LOG_MINOR,"Auth()","using token auth with authCallback");else if(i.authUrl)m.logAction(o,m.LOG_MINOR,"Auth()","using token auth with authUrl");else if(i.key)m.logAction(o,m.LOG_MINOR,"Auth()","using token auth with client-side signing");else if(i.tokenDetails)m.logAction(o,m.LOG_MINOR,"Auth()","using token auth with supplied token only");else{const l="authOptions must include valid authentication parameters";throw m.logAction(o,m.LOG_ERROR,"Auth()",l),new Error(l)}}function L1(i){return"useTokenAuth"in i&&!i.useTokenAuth}function $p(i){return i.useTokenAuth||!L1(i)&&(i.authCallback||i.authUrl||i.token||i.tokenDetails)}function D1(i){return!i.key&&!i.authCallback&&!i.authUrl}var N1=0;function U1(){return N1++}var F1=class{constructor(i,o){if(this.authOptions={},this.client=i,this.tokenParams=o.defaultTokenParams||{},this.currentTokenRequestId=null,this.waitingForTokenRequest=null,$p(o))D1(o)&&m.logAction(this.logger,m.LOG_ERROR,"Auth()","Warning: library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),this._saveTokenOptions(o.defaultTokenParams,o),qp(this.authOptions,this.logger);else{if(!o.key){const l="No authentication options provided; need one of: key, authUrl, or authCallback (or for testing only, token or tokenDetails)";throw m.logAction(this.logger,m.LOG_ERROR,"Auth()",l),new N(l,40160,401)}m.logAction(this.logger,m.LOG_MINOR,"Auth()","anonymous, using basic auth"),this._saveBasicOptions(o)}}get logger(){return this.client.logger}async authorize(i,o){if(o&&o.key&&this.authOptions.key!==o.key)throw new N("Unable to update auth options with incompatible key",40102,401);try{let l=await this._forceNewToken(i??null,o??null);return it(this.client)?new Promise((c,d)=>{this.client.connection.connectionManager.onAuthUpdated(l,(g,R)=>g?d(g):c(R))}):l}catch(l){throw this.client.connection&&l.statusCode===Ye.Forbidden&&this.client.connection.connectionManager.actOnErrorFromAuthorize(l),l}}async _forceNewToken(i,o){this.tokenDetails=null,this._saveTokenOptions(i,o),qp(this.authOptions,this.logger);try{return this._ensureValidAuthCredentials(!0)}finally{delete this.tokenParams.timestamp,delete this.authOptions.queryTime}}async requestToken(i,o){const l=o||this.authOptions,c=i||W(this.tokenParams);let d,g=this.client;if(l.authCallback)m.logAction(this.logger,m.LOG_MINOR,"Auth.requestToken()","using token auth with authCallback"),d=l.authCallback;else if(l.authUrl)m.logAction(this.logger,m.LOG_MINOR,"Auth.requestToken()","using token auth with authUrl"),d=(O,b)=>{const I=Z({accept:"application/json, text/plain"},l.authHeaders),U=l.authMethod&&l.authMethod.toLowerCase()==="post";let B;const q=l.authUrl.indexOf("?");q>-1&&(B=si(l.authUrl.slice(q)),l.authUrl=l.authUrl.slice(0,q),U||(l.authParams=Z(B,l.authParams)));const j=Z({},l.authParams||{},O),K=ee=>{var ce,Pe;let _e=(ce=ee.body)!=null?ce:null,De=null;if(ee.error)m.logAction(this.logger,m.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received Error: "+xe(ee.error));else{const ht=(Pe=ee.headers["content-type"])!=null?Pe:null;Array.isArray(ht)?De=ht.join(", "):De=ht,m.logAction(this.logger,m.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received; content-type: "+De+"; body: "+Wi(_e))}if(ee.error){b(ee.error,null);return}if(ee.unpacked){b(null,_e);return}if(T.BufferUtils.isBuffer(_e)&&(_e=_e.toString()),!De){b(new N("authUrl response is missing a content-type header",40170,401),null);return}const fe=De.indexOf("application/json")>-1,zt=De.indexOf("text/plain")>-1||De.indexOf("application/jwt")>-1;if(!fe&&!zt){b(new N("authUrl responded with unacceptable content-type "+De+", should be either text/plain, application/jwt or application/json",40170,401),null);return}if(fe){if(_e.length>It){b(new N("authUrl response exceeded max permitted length",40170,401),null);return}try{_e=JSON.parse(_e)}catch(ht){b(new N("Unexpected error processing authURL response; err = "+ht.message,40170,401),null);return}}b(null,_e,De)};if(m.logAction(this.logger,m.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Requesting token from "+l.authUrl+"; Params: "+JSON.stringify(j)+"; method: "+(U?"POST":"GET")),U){const ee=I||{};ee["content-type"]="application/x-www-form-urlencoded";const ce=Pn(j).slice(1);tt(this.client.http.doUri(le.Post,l.authUrl,ee,ce,B),(Pe,_e)=>K(Pe||_e))}else tt(this.client.http.doUri(le.Get,l.authUrl,I||{},null,j),(ee,ce)=>K(ee||ce))};else if(l.key)m.logAction(this.logger,m.LOG_MINOR,"Auth.requestToken()","using token auth with client-side signing"),d=(O,b)=>{tt(this.createTokenRequest(O,l),(I,U)=>b(I,U??null))};else{const O="Need a new token, but authOptions does not include any way to request one (no authUrl, authCallback, or key)";throw m.logAction(this.logger,m.LOG_ERROR,"Auth()","library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),new N(O,40171,403)}"capability"in c&&(c.capability=Wp(c.capability));const R=(O,b)=>{const I=O.keyName,U="/keys/"+I+"/requestToken",B=function(j){return g.baseUri(j)+U},q=ae.defaultPostHeaders(this.client.options);l.requestHeaders&&Z(q,l.requestHeaders),m.logAction(this.logger,m.LOG_MICRO,"Auth.requestToken().requestToken","Sending POST to "+U+"; Token params: "+JSON.stringify(O)),tt(this.client.http.do(le.Post,B,q,JSON.stringify(O),null),(j,K)=>j?b(j):b(K.error,K.body,K.unpacked))};return new Promise((O,b)=>{let I=!1,U=this.client.options.timeouts.realtimeRequestTimeout,B=setTimeout(()=>{I=!0;const q="Token request callback timed out after "+U/1e3+" seconds";m.logAction(this.logger,m.LOG_ERROR,"Auth.requestToken()",q),b(new N(q,40170,401))},U);d(c,(q,j,K)=>{if(I)return;if(clearTimeout(B),q){m.logAction(this.logger,m.LOG_ERROR,"Auth.requestToken()","token request signing call returned error; err = "+xe(q)),b(yo(q));return}if(typeof j=="string"){j.length===0?b(new N("Token string is empty",40170,401)):j.length>It?b(new N("Token string exceeded max permitted length (was "+j.length+" bytes)",40170,401)):j==="undefined"||j==="null"?b(new N("Token string was literal null/undefined",40170,401)):j[0]==="{"&&!(K&&K.indexOf("application/jwt")>-1)?b(new N("Token was double-encoded; make sure you're not JSON-encoding an already encoded token request or details",40170,401)):O({token:j});return}if(typeof j!="object"||j===null){const ce="Expected token request callback to call back with a token string or token request/details object, but got a "+typeof j;m.logAction(this.logger,m.LOG_ERROR,"Auth.requestToken()",ce),b(new N(ce,40170,401));return}const ee=JSON.stringify(j).length;if(ee>It&&!l.suppressMaxLengthCheck){b(new N("Token request/details object exceeded max permitted stringified size (was "+ee+" bytes)",40170,401));return}if("issued"in j){O(j);return}if(!("keyName"in j)){const ce="Expected token request callback to call back with a token string, token request object, or token details object";m.logAction(this.logger,m.LOG_ERROR,"Auth.requestToken()",ce),b(new N(ce,40170,401));return}R(j,(ce,Pe,_e)=>{if(ce){m.logAction(this.logger,m.LOG_ERROR,"Auth.requestToken()","token request API call returned error; err = "+xe(ce)),b(yo(ce));return}_e||(Pe=JSON.parse(Pe)),m.logAction(this.logger,m.LOG_MINOR,"Auth.getToken()","token received"),O(Pe)})})})}async createTokenRequest(i,o){o=o||this.authOptions,i=i||W(this.tokenParams);const l=o.key;if(!l)throw new N("No key specified",40101,403);const c=l.split(":"),d=c[0],g=c[1];if(!g)throw new N("Invalid key specified",40101,403);if(i.clientId==="")throw new N("clientId can’t be an empty string",40012,400);"capability"in i&&(i.capability=Wp(i.capability));const R=Z({keyName:d},i),O=i.clientId||"",b=i.ttl||"",I=i.capability||"";R.timestamp||(R.timestamp=await this.getTimestamp(o&&o.queryTime));const U=R.nonce||(R.nonce=ci()),B=R.timestamp,q=R.keyName+`
`+b+`
`+I+`
`+O+`
`+B+`
`+U+`
`;return R.mac=R.mac||ll(q,g),m.logAction(this.logger,m.LOG_MINOR,"Auth.getTokenRequest()","generated signed request"),R}async getAuthParams(){if(this.method=="basic")return{key:this.key};{let i=await this._ensureValidAuthCredentials(!1);if(!i)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");return{access_token:i.token}}}async getAuthHeaders(){if(this.method=="basic")return{authorization:"Basic "+this.basicKey};{const i=await this._ensureValidAuthCredentials(!1);if(!i)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");return{authorization:"Bearer "+On(i.token)}}}async getTimestamp(i){return!this.isTimeOffsetSet()&&(i||this.authOptions.queryTime)?this.client.time():this.getTimestampUsingOffset()}getTimestampUsingOffset(){return Date.now()+(this.client.serverTimeOffset||0)}isTimeOffsetSet(){return this.client.serverTimeOffset!==null}_saveBasicOptions(i){this.method="basic",this.key=i.key,this.basicKey=On(i.key),this.authOptions=i||{},"clientId"in i&&this._userSetClientId(i.clientId)}_saveTokenOptions(i,o){this.method="token",i&&(this.tokenParams=i),o&&(o.token&&(o.tokenDetails=typeof o.token=="string"?{token:o.token}:o.token),o.tokenDetails&&(this.tokenDetails=o.tokenDetails),"clientId"in o&&this._userSetClientId(o.clientId),this.authOptions=o)}async _ensureValidAuthCredentials(i){const o=this.tokenDetails;if(o){if(this._tokenClientIdMismatch(o.clientId))throw new N("Mismatch between clientId in token ("+o.clientId+") and current clientId ("+this.clientId+")",40102,403);if(!this.isTimeOffsetSet()||!o.expires||o.expires>=this.getTimestampUsingOffset())return m.logAction(this.logger,m.LOG_MINOR,"Auth.getToken()","using cached token; expires = "+o.expires),o;m.logAction(this.logger,m.LOG_MINOR,"Auth.getToken()","deleting expired token"),this.tokenDetails=null}const l=(this.waitingForTokenRequest||(this.waitingForTokenRequest=G.create(this.logger))).createPromise();if(this.currentTokenRequestId!==null&&!i)return l;const c=this.currentTokenRequestId=U1();let d,g=null;try{d=await this.requestToken(this.tokenParams,this.authOptions)}catch(O){g=O}if(this.currentTokenRequestId>c)return m.logAction(this.logger,m.LOG_MINOR,"Auth._ensureValidAuthCredentials()","Discarding token request response; overtaken by newer one"),l;this.currentTokenRequestId=null;const R=this.waitingForTokenRequest;return this.waitingForTokenRequest=null,g?(R==null||R.rejectAll(g),l):(R==null||R.resolveAll(this.tokenDetails=d),l)}_userSetClientId(i){if(typeof i=="string"||i===null){if(i==="*")throw new N('Can’t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, instantiate the library with {defaultTokenParams: {clientId: "*"}}), or if calling authorize(), pass it in as a tokenParam: authorize({clientId: "*"}, authOptions)',40012,400);{const o=this._uncheckedSetClientId(i);if(o)throw o}}else throw new N("clientId must be either a string or null",40012,400)}_uncheckedSetClientId(i){if(this._tokenClientIdMismatch(i)){const o="Unexpected clientId mismatch: client has "+this.clientId+", requested "+i,l=new N(o,40102,401);return m.logAction(this.logger,m.LOG_ERROR,"Auth._uncheckedSetClientId()",o),l}else return this.clientId=this.tokenParams.clientId=i,null}_tokenClientIdMismatch(i){return!!(this.clientId&&this.clientId!=="*"&&i&&i!=="*"&&this.clientId!==i)}static isTokenErr(i){return i.code&&i.code>=40140&&i.code<40150}revokeTokens(i,o){return this.client.rest.revokeTokens(i,o)}},$n=F1;function cc(i){const o=[];if(i)for(const l in i)o.push(l+"="+i[l]);return o.join("&")}function Xi(i,o){return i+(o?"?":"")+cc(o)}function B1(i,o,l,c,d){i.error?m.logActionNoStrip(d,m.LOG_MICRO,"Http."+o+"()","Received Error; "+Xi(l,c)+"; Error: "+xe(i.error)):m.logActionNoStrip(d,m.LOG_MICRO,"Http."+o+"()","Received; "+Xi(l,c)+"; Headers: "+cc(i.headers)+"; StatusCode: "+i.statusCode+"; Body"+(T.BufferUtils.isBuffer(i.body)?" (Base64): "+T.BufferUtils.base64Encode(i.body):": "+i.body))}function V1(i,o,l,c,d){d.shouldLog(m.LOG_MICRO)&&m.logActionNoStrip(d,m.LOG_MICRO,"Http."+i+"()","Sending; "+Xi(o,c)+"; Body"+(T.BufferUtils.isBuffer(l)?" (Base64): "+T.BufferUtils.base64Encode(l):": "+l))}var hc=class{constructor(i){this.client=i,this.platformHttp=new T.Http(i),this.checkConnectivity=this.platformHttp.checkConnectivity?()=>this.platformHttp.checkConnectivity():void 0}get logger(){var i,o;return(o=(i=this.client)==null?void 0:i.logger)!=null?o:m.defaultLogger}get supportsAuthHeaders(){return this.platformHttp.supportsAuthHeaders}get supportsLinkHeaders(){return this.platformHttp.supportsLinkHeaders}_getHosts(i){const o=i.connection,l=o&&o.connectionManager.host;return l?[l].concat(ae.getFallbackHosts(i.options)):ae.getHosts(i.options)}async do(i,o,l,c,d){try{const g=this.client;if(!g)return{error:new N("http.do called without client",5e4,500)};const R=typeof o=="function"?o:function(B){return g.baseUri(B)+o},O=g._currentFallback;if(O)if(O.validUntil>Date.now()){const B=await this.doUri(i,R(O.host),l,c,d);return B.error&&this.platformHttp.shouldFallback(B.error)?(g._currentFallback=null,this.do(i,o,l,c,d)):B}else g._currentFallback=null;const b=this._getHosts(g);if(b.length===1)return this.doUri(i,R(b[0]),l,c,d);let I=null;const U=async(B,q)=>{const j=B.shift();I=I??new Date;const K=await this.doUri(i,R(j),l,c,d);return K.error&&this.platformHttp.shouldFallback(K.error)&&B.length?Date.now()-I.getTime()>g.options.timeouts.httpMaxRetryDuration?{error:new N(`Timeout for trying fallback hosts retries. Total elapsed time exceeded the ${g.options.timeouts.httpMaxRetryDuration}ms limit`,50003,500)}:U(B,!0):(q&&(g._currentFallback={host:j,validUntil:Date.now()+g.options.timeouts.fallbackRetryTimeout}),K)};return U(b)}catch(g){return{error:new N(`Unexpected error in Http.do: ${xe(g)}`,500,5e4)}}}async doUri(i,o,l,c,d){try{V1(i,o,c,d,this.logger);const g=await this.platformHttp.doUri(i,o,l,c,d);return this.logger.shouldLog(m.LOG_MICRO)&&B1(g,i,o,d,this.logger),g}catch(g){return{error:new N(`Unexpected error in Http.doUri: ${xe(g)}`,500,5e4)}}}},Kp=class{constructor(i){this.Platform=T,this.ErrorInfo=N,this.Logger=m,this.Defaults=ae,this.Utils=Ae;var o,l,c,d,g,R,O,b;this._additionalHTTPRequestImplementations=(o=i.plugins)!=null?o:null,this.logger=new m,this.logger.setLog(i.logLevel,i.logHandler),m.logAction(this.logger,m.LOG_MICRO,"BaseClient()","initialized with clientOptions "+T.Config.inspect(i)),this._MsgPack=(c=(l=i.plugins)==null?void 0:l.MsgPack)!=null?c:null;const I=this.options=ae.normaliseOptions(i,this._MsgPack,this.logger);if(I.key){const U=I.key.match(/^([^:\s]+):([^:.\s]+)$/);if(!U){const B="invalid key parameter";throw m.logAction(this.logger,m.LOG_ERROR,"BaseClient()",B),new N(B,40400,404)}I.keyName=U[1],I.keySecret=U[2]}if("clientId"in I)if(typeof I.clientId=="string"||I.clientId===null){if(I.clientId==="*")throw new N('Can’t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, use {defaultTokenParams: {clientId: "*"}})',40012,400)}else throw new N("clientId must be either a string or null",40012,400);m.logAction(this.logger,m.LOG_MINOR,"BaseClient()","started; version = "+ae.version),this._currentFallback=null,this.serverTimeOffset=null,this.http=new hc(this),this.auth=new $n(this,I),this._rest=(d=i.plugins)!=null&&d.Rest?new i.plugins.Rest(this):null,this._Crypto=(R=(g=i.plugins)==null?void 0:g.Crypto)!=null?R:null,this.__FilteredSubscriptions=(b=(O=i.plugins)==null?void 0:O.MessageInteractions)!=null?b:null}get rest(){return this._rest||we("Rest"),this._rest}get _FilteredSubscriptions(){return this.__FilteredSubscriptions||we("MessageInteractions"),this.__FilteredSubscriptions}get channels(){return this.rest.channels}get push(){return this.rest.push}get device(){var i;return(!((i=this.options.plugins)!=null&&i.Push)||!this.push.LocalDevice)&&we("Push"),this._device||(this._device=this.push.LocalDevice.load(this)),this._device}baseUri(i){return ae.getHttpScheme(this.options)+i+":"+ae.getPort(this.options,!1)}async stats(i){return this.rest.stats(i)}async time(i){return this.rest.time(i)}async request(i,o,l,c,d,g){return this.rest.request(i,o,l,c,d,g)}batchPublish(i){return this.rest.batchPublish(i)}batchPresence(i){return this.rest.batchPresence(i)}setLog(i){this.logger.setLog(i.level,i.handler)}};Kp.Platform=T;var Qp=Kp,j1=class ss{toJSON(){var o,l,c;return{id:this.id,deviceSecret:this.deviceSecret,platform:this.platform,formFactor:this.formFactor,clientId:this.clientId,metadata:this.metadata,deviceIdentityToken:this.deviceIdentityToken,push:{recipient:(o=this.push)==null?void 0:o.recipient,state:(l=this.push)==null?void 0:l.state,error:(c=this.push)==null?void 0:c.error}}}toString(){var o,l,c,d;let g="[DeviceDetails";return this.id&&(g+="; id="+this.id),this.platform&&(g+="; platform="+this.platform),this.formFactor&&(g+="; formFactor="+this.formFactor),this.clientId&&(g+="; clientId="+this.clientId),this.metadata&&(g+="; metadata="+this.metadata),this.deviceIdentityToken&&(g+="; deviceIdentityToken="+JSON.stringify(this.deviceIdentityToken)),(o=this.push)!=null&&o.recipient&&(g+="; push.recipient="+JSON.stringify(this.push.recipient)),(l=this.push)!=null&&l.state&&(g+="; push.state="+this.push.state),(c=this.push)!=null&&c.error&&(g+="; push.error="+JSON.stringify(this.push.error)),(d=this.push)!=null&&d.metadata&&(g+="; push.metadata="+this.push.metadata),g+="]",g}static toRequestBody(o,l,c){return xt(o,l,c)}static fromResponseBody(o,l,c){return c&&(o=kt(o,l,c)),Array.isArray(o)?ss.fromValuesArray(o):ss.fromValues(o)}static fromValues(o){return o.error=o.error&&N.fromValues(o.error),Object.assign(new ss,o)}static fromLocalDevice(o){return Object.assign(new ss,o)}static fromValuesArray(o){const l=o.length,c=new Array(l);for(let d=0;d<l;d++)c[d]=ss.fromValues(o[d]);return c}},Ji=j1;async function Yp(i,o,l,c){if(i.http.supportsAuthHeaders){const d=await i.auth.getAuthHeaders();return c(Z(d,o),l)}else{const d=await i.auth.getAuthParams();return c(o,Z(d,l))}}function z1(i,o,l){if(i.err&&!i.body)return{err:i.err};if(i.statusCode===Ye.NoContent)return _(P({},i),{body:[],unpacked:!0});let c=i.body;if(!i.unpacked)try{c=kt(c,o,l)}catch(O){return Hi(O)?{err:O}:{err:new ue(xe(O),null)}}if(!c)return{err:new ue("unenvelope(): Response body is missing",null)};const{statusCode:d,response:g,headers:R}=c;if(d===void 0)return _(P({},i),{body:c,unpacked:!0});if(d<200||d>=300){let O=g&&g.error||i.err;return O||(O=new Error("Error in unenveloping "+c),O.statusCode=d),{err:O,body:g,headers:R,unpacked:!0,statusCode:d}}return{err:i.err,body:g,headers:R,unpacked:!0,statusCode:d}}function G1(i,o,l,c,d){i.err?m.logAction(d,m.LOG_MICRO,"Resource."+o+"()","Received Error; "+Xi(l,c)+"; Error: "+xe(i.err)):m.logAction(d,m.LOG_MICRO,"Resource."+o+"()","Received; "+Xi(l,c)+"; Headers: "+cc(i.headers)+"; StatusCode: "+i.statusCode+"; Body: "+(T.BufferUtils.isBuffer(i.body)?" (Base64): "+T.BufferUtils.base64Encode(i.body):": "+T.Config.inspect(i.body)))}var H1=class os{static async get(o,l,c,d,g,R){return os.do(le.Get,o,l,null,c,d,g,R??!1)}static async delete(o,l,c,d,g,R){return os.do(le.Delete,o,l,null,c,d,g,R)}static async post(o,l,c,d,g,R,O){return os.do(le.Post,o,l,c,d,g,R,O)}static async patch(o,l,c,d,g,R,O){return os.do(le.Patch,o,l,c,d,g,R,O)}static async put(o,l,c,d,g,R,O){return os.do(le.Put,o,l,c,d,g,R,O)}static async do(o,l,c,d,g,R,O,b){O&&((R=R||{}).envelope=O);const I=l.logger;async function U(q,j){var K;if(I.shouldLog(m.LOG_MICRO)){let ce=d;if(((K=q["content-type"])==null?void 0:K.indexOf("msgpack"))>0)try{l._MsgPack||we("MsgPack"),ce=l._MsgPack.decode(d)}catch(Pe){m.logAction(I,m.LOG_MICRO,"Resource."+o+"()","Sending MsgPack Decoding Error: "+xe(Pe))}m.logAction(I,m.LOG_MICRO,"Resource."+o+"()","Sending; "+Xi(c,j)+"; Body: "+ce)}const ee=await l.http.do(o,c,q,d,j);return ee.error&&$n.isTokenErr(ee.error)?(await l.auth.authorize(null,null),Yp(l,q,j,U)):{err:ee.error,body:ee.body,headers:ee.headers,unpacked:ee.unpacked,statusCode:ee.statusCode}}let B=await Yp(l,g,R,U);if(O&&(B=z1(B,l._MsgPack,O)),I.shouldLog(m.LOG_MICRO)&&G1(B,o,c,R,I),b){if(B.err)throw B.err;{const q=P({},B);return delete q.err,q}}return B}},Xe=H1;function W1(i){const o=i.match(/^\.\/(\w+)\?(.*)$/);return o&&o[2]&&si(o[2])}function q1(i){typeof i=="string"&&(i=i.split(","));const o={};for(let l=0;l<i.length;l++){const c=i[l].match(/^\s*<(.+)>;\s*rel="(\w+)"$/);if(c){const d=W1(c[1]);d&&(o[c[2]]=d)}}return o}function $1(i,o,l){return!(l&&(o||typeof i.code=="number"))}var K1=class{constructor(i,o,l,c,d,g){this.client=i,this.path=o,this.headers=l,this.envelope=c??null,this.bodyHandler=d,this.useHttpPaginatedResponse=g||!1}get logger(){return this.client.logger}async get(i){const o=await Xe.get(this.client,this.path,this.headers,i,this.envelope,!1);return this.handlePage(o)}async delete(i){const o=await Xe.delete(this.client,this.path,this.headers,i,this.envelope,!1);return this.handlePage(o)}async post(i,o){const l=await Xe.post(this.client,this.path,o,this.headers,i,this.envelope,!1);return this.handlePage(l)}async put(i,o){const l=await Xe.put(this.client,this.path,o,this.headers,i,this.envelope,!1);return this.handlePage(l)}async patch(i,o){const l=await Xe.patch(this.client,this.path,o,this.headers,i,this.envelope,!1);return this.handlePage(l)}async handlePage(i){if(i.err&&$1(i.err,i.body,this.useHttpPaginatedResponse))throw m.logAction(this.logger,m.LOG_ERROR,"PaginatedResource.handlePage()","Unexpected error getting resource: err = "+xe(i.err)),i.err;let o,l,c;try{o=i.statusCode==Ye.NoContent?[]:await this.bodyHandler(i.body,i.headers||{},i.unpacked)}catch(d){throw i.err||d}return i.headers&&(l=i.headers.Link||i.headers.link)&&(c=q1(l)),this.useHttpPaginatedResponse?new Q1(this,o,i.headers||{},i.statusCode,c,i.err):new Xp(this,o,c)}},Xp=class{constructor(i,o,l){this.resource=i,this.items=o;const c=this;l&&("first"in l&&(this.first=async function(){return c.get(l.first)}),"current"in l&&(this.current=async function(){return c.get(l.current)}),this.next=async function(){return"next"in l?c.get(l.next):null},this.hasNext=function(){return"next"in l},this.isLast=()=>{var d;return!((d=this.hasNext)!=null&&d.call(this))})}async get(i){const o=this.resource,l=await Xe.get(o.client,o.path,o.headers,i,o.envelope,!1);return o.handlePage(l)}},Q1=class extends Xp{constructor(i,o,l,c,d,g){super(i,o,d),this.statusCode=c,this.success=c<300&&c>=200,this.headers=l,this.errorCode=g&&g.code,this.errorMessage=g&&g.message}toJSON(){return{items:this.items,statusCode:this.statusCode,success:this.success,headers:this.headers,errorCode:this.errorCode,errorMessage:this.errorMessage}}},Cr=K1,Jp=class Xo{toJSON(){return{channel:this.channel,deviceId:this.deviceId,clientId:this.clientId}}toString(){let o="[PushChannelSubscription";return this.channel&&(o+="; channel="+this.channel),this.deviceId&&(o+="; deviceId="+this.deviceId),this.clientId&&(o+="; clientId="+this.clientId),o+="]",o}static fromResponseBody(o,l,c){return c&&(o=kt(o,l,c)),Array.isArray(o)?Xo.fromValuesArray(o):Xo.fromValues(o)}static fromValues(o){return Object.assign(new Xo,o)}static fromValuesArray(o){const l=o.length,c=new Array(l);for(let d=0;d<l;d++)c[d]=Xo.fromValues(o[d]);return c}};Jp.toRequestBody=xt;var Y1=Jp,fc=Y1,X1=class{constructor(i){var o;this.client=i,this.admin=new J1(i),T.Config.push&&((o=i.options.plugins)!=null&&o.Push)&&(this.stateMachine=new i.options.plugins.Push.ActivationStateMachine(i),this.LocalDevice=i.options.plugins.Push.localDeviceFactory(Ji))}async activate(i,o){await new Promise((l,c)=>{var d;if(!((d=this.client.options.plugins)!=null&&d.Push)){c(Ki("Push"));return}if(!this.stateMachine){c(new N("This platform is not supported as a target of push notifications",4e4,400));return}if(this.stateMachine.activatedCallback){c(new N("Activation already in progress",4e4,400));return}this.stateMachine.activatedCallback=g=>{if(g){c(g);return}l()},this.stateMachine.updateFailedCallback=o,this.stateMachine.handleEvent(new this.client.options.plugins.Push.CalledActivate(this.stateMachine,i))})}async deactivate(i){await new Promise((o,l)=>{var c;if(!((c=this.client.options.plugins)!=null&&c.Push)){l(Ki("Push"));return}if(!this.stateMachine){l(new N("This platform is not supported as a target of push notifications",4e4,400));return}if(this.stateMachine.deactivatedCallback){l(new N("Deactivation already in progress",4e4,400));return}this.stateMachine.deactivatedCallback=d=>{if(d){l(d);return}o()},this.stateMachine.handleEvent(new this.client.options.plugins.Push.CalledDeactivate(this.stateMachine,i))})}},J1=class{constructor(i){this.client=i,this.deviceRegistrations=new Z1(i),this.channelSubscriptions=new eT(i)}async publish(i,o){const l=this.client,c=l.options.useBinaryProtocol?"msgpack":"json",d=ae.defaultPostHeaders(l.options,{format:c}),g={},R=Z({recipient:i},o);Z(d,l.options.headers),l.options.pushFullWait&&Z(g,{fullWait:"true"});const O=xt(R,l._MsgPack,c);await Xe.post(l,"/push/publish",O,d,g,null,!0)}},Z1=class{constructor(i){this.client=i}async save(i){const o=this.client,l=Ji.fromValues(i),c=o.options.useBinaryProtocol?"msgpack":"json",d=ae.defaultPostHeaders(o.options,{format:c}),g={};Z(d,o.options.headers),o.options.pushFullWait&&Z(g,{fullWait:"true"});const R=xt(l,o._MsgPack,c),O=await Xe.put(o,"/push/deviceRegistrations/"+encodeURIComponent(i.id),R,d,g,null,!0);return Ji.fromResponseBody(O.body,o._MsgPack,O.unpacked?void 0:c)}async get(i){const o=this.client,l=o.options.useBinaryProtocol?"msgpack":"json",c=ae.defaultGetHeaders(o.options,{format:l}),d=i.id||i;if(typeof d!="string"||!d.length)throw new N("First argument to DeviceRegistrations#get must be a deviceId string or DeviceDetails",4e4,400);Z(c,o.options.headers);const g=await Xe.get(o,"/push/deviceRegistrations/"+encodeURIComponent(d),c,{},null,!0);return Ji.fromResponseBody(g.body,o._MsgPack,g.unpacked?void 0:l)}async list(i){const o=this.client,l=o.options.useBinaryProtocol?"msgpack":"json",c=this.client.http.supportsLinkHeaders?void 0:l,d=ae.defaultGetHeaders(o.options,{format:l});return Z(d,o.options.headers),new Cr(o,"/push/deviceRegistrations",d,c,async function(g,R,O){return Ji.fromResponseBody(g,o._MsgPack,O?void 0:l)}).get(i)}async remove(i){const o=this.client,l=o.options.useBinaryProtocol?"msgpack":"json",c=ae.defaultGetHeaders(o.options,{format:l}),d={},g=i.id||i;if(typeof g!="string"||!g.length)throw new N("First argument to DeviceRegistrations#remove must be a deviceId string or DeviceDetails",4e4,400);Z(c,o.options.headers),o.options.pushFullWait&&Z(d,{fullWait:"true"}),await Xe.delete(o,"/push/deviceRegistrations/"+encodeURIComponent(g),c,d,null,!0)}async removeWhere(i){const o=this.client,l=o.options.useBinaryProtocol?"msgpack":"json",c=ae.defaultGetHeaders(o.options,{format:l});Z(c,o.options.headers),o.options.pushFullWait&&Z(i,{fullWait:"true"}),await Xe.delete(o,"/push/deviceRegistrations",c,i,null,!0)}},eT=class k1{constructor(o){this.remove=k1.prototype.removeWhere,this.client=o}async save(o){const l=this.client,c=fc.fromValues(o),d=l.options.useBinaryProtocol?"msgpack":"json",g=ae.defaultPostHeaders(l.options,{format:d}),R={};Z(g,l.options.headers),l.options.pushFullWait&&Z(R,{fullWait:"true"});const O=xt(c,l._MsgPack,d),b=await Xe.post(l,"/push/channelSubscriptions",O,g,R,null,!0);return fc.fromResponseBody(b.body,l._MsgPack,b.unpacked?void 0:d)}async list(o){const l=this.client,c=l.options.useBinaryProtocol?"msgpack":"json",d=this.client.http.supportsLinkHeaders?void 0:c,g=ae.defaultGetHeaders(l.options,{format:c});return Z(g,l.options.headers),new Cr(l,"/push/channelSubscriptions",g,d,async function(R,O,b){return fc.fromResponseBody(R,l._MsgPack,b?void 0:c)}).get(o)}async removeWhere(o){const l=this.client,c=l.options.useBinaryProtocol?"msgpack":"json",d=ae.defaultGetHeaders(l.options,{format:c});Z(d,l.options.headers),l.options.pushFullWait&&Z(o,{fullWait:"true"}),await Xe.delete(l,"/push/channelSubscriptions",d,o,null,!0)}async listChannels(o){const l=this.client,c=l.options.useBinaryProtocol?"msgpack":"json",d=this.client.http.supportsLinkHeaders?void 0:c,g=ae.defaultGetHeaders(l.options,{format:c});return Z(g,l.options.headers),l.options.pushFullWait&&Z(o,{fullWait:"true"}),new Cr(l,"/push/channels",g,d,async function(R,O,b){const I=!b&&c?kt(R,l._MsgPack,c):R;for(let U=0;U<I.length;U++)I[U]=String(I[U]);return I}).get(o)}},tT=X1;function nT(i){return!i||!i.channelOptions?{channelOptions:i,plugins:{},baseEncodedPreviousPayload:void 0}:i}function rT(i,o,l){if(l&&l.cipher){i||we("Crypto");const c=i.getCipher(l.cipher,o);return{cipher:c.cipherParams,channelCipher:c.cipher}}return l??{}}function iT(i){let o=0;return i.name&&(o+=i.name.length),i.clientId&&(o+=i.clientId.length),i.extras&&(o+=JSON.stringify(i.extras).length),i.data&&(o+=Sr(i.data)),o}async function Zp(i,o,l,c){const d=Tr(l),g=rT(o,i,c??null);try{await vo(d,g)}catch(R){m.logAction(i,m.LOG_ERROR,"Message.fromEncoded()",R.toString())}return d}async function sT(i,o,l,c){return Promise.all(l.map(function(d){return Zp(i,o,d,c)}))}async function oT(i,o){let l=i.data,c=i.encoding,d=o.channelCipher;c=c?c+"/":"",T.BufferUtils.isBuffer(l)||(l=T.BufferUtils.utf8Encode(String(l)),c=c+"utf-8/");const g=await d.encrypt(l);return i.data=g,i.encoding=c+"cipher+"+d.algorithm,i}async function dc(i,o){const l=i.data;if(!(typeof l=="string"||T.BufferUtils.isBuffer(l)||l===null||l===void 0))if(ie(l)||Array.isArray(l))i.data=JSON.stringify(l),i.encoding=i.encoding?i.encoding+"/json":"json";else throw new N("Data type is unsupported",40013,400);return o!=null&&o.cipher?oT(i,o):i}async function em(i,o){return Promise.all(i.map(l=>dc(l,o)))}var aT=xt;async function vo(i,o){const l=nT(o);let c=i.data;const d=i.encoding;if(d){const g=d.split("/");let R,O=g.length,b=i.data,I="";try{for(;(R=O)>0;){const U=g[--O].match(/([-\w]+)(\+([\w-]+))?/);if(!U)break;switch(I=U[1],I){case"base64":b=T.BufferUtils.base64Decode(String(b)),R==g.length&&(c=b);continue;case"utf-8":b=T.BufferUtils.utf8Decode(b);continue;case"json":b=JSON.parse(b);continue;case"cipher":if(l.channelOptions!=null&&l.channelOptions.cipher&&l.channelOptions.channelCipher){const B=U[3],q=l.channelOptions.channelCipher;if(B!=q.algorithm)throw new Error("Unable to decrypt message with given cipher; incompatible cipher params");b=await q.decrypt(b);continue}else throw new Error("Unable to decrypt message; not an encrypted channel");case"vcdiff":if(!l.plugins||!l.plugins.vcdiff)throw new N("Missing Vcdiff decoder (https://github.com/ably-forks/vcdiff-decoder)",40019,400);if(typeof Uint8Array>"u")throw new N("Delta decoding not supported on this browser (need ArrayBuffer & Uint8Array)",40020,400);try{let B=l.baseEncodedPreviousPayload;typeof B=="string"&&(B=T.BufferUtils.utf8Encode(B));const q=T.BufferUtils.toBuffer(B);b=T.BufferUtils.toBuffer(b),b=T.BufferUtils.arrayBufferViewToBuffer(l.plugins.vcdiff.decode(b,q)),c=b}catch(B){throw new N("Vcdiff delta decode failed with "+B,40018,400)}continue;default:throw new Error("Unknown encoding")}}}catch(U){const B=U;throw new N("Error processing the "+I+" encoding, decoder returned ‘"+B.message+"’",B.code||40013,400)}finally{i.encoding=R<=0?null:g.slice(0,R).join("/"),i.data=b}}l.baseEncodedPreviousPayload=c}async function lT(i,o,l,c,d){d&&(i=kt(i,c,d));for(let g=0;g<i.length;g++){const R=i[g]=Tr(i[g]);try{await vo(R,o)}catch(O){m.logAction(l,m.LOG_ERROR,"Message.fromResponseBody()",O.toString())}}return i}function Tr(i){return Object.assign(new tm,i)}function pc(i){const o=i.length,l=new Array(o);for(let c=0;c<o;c++)l[c]=Tr(i[c]);return l}function mc(i){let o,l=0;for(let c=0;c<i.length;c++)o=i[c],l+=o.size||(o.size=iT(o));return l}var tm=class{toJSON(){let i=this.encoding,o=this.data;return o&&T.BufferUtils.isBuffer(o)&&(arguments.length>0?(i=i?i+"/base64":"base64",o=T.BufferUtils.base64Encode(o)):o=T.BufferUtils.toBuffer(o)),{name:this.name,id:this.id,clientId:this.clientId,connectionId:this.connectionId,connectionKey:this.connectionKey,extras:this.extras,encoding:i,data:o}}toString(){let i="[Message";return this.name&&(i+="; name="+this.name),this.id&&(i+="; id="+this.id),this.timestamp&&(i+="; timestamp="+this.timestamp),this.clientId&&(i+="; clientId="+this.clientId),this.connectionId&&(i+="; connectionId="+this.connectionId),this.encoding&&(i+="; encoding="+this.encoding),this.extras&&(i+="; extras ="+JSON.stringify(this.extras)),this.data&&(typeof this.data=="string"?i+="; data="+this.data:T.BufferUtils.isBuffer(this.data)?i+="; data (buffer)="+T.BufferUtils.base64Encode(this.data):i+="; data (json)="+JSON.stringify(this.data)),this.extras&&(i+="; extras="+JSON.stringify(this.extras)),i+="]",i}},nm=tm,rm=["absent","present","enter","leave","update"];function uT(i){return rm.indexOf(i)}async function im(i,o,l){const c=dn(o,!0);try{await gc(c,l??{})}catch(d){m.logAction(i,m.LOG_ERROR,"PresenceMessage.fromEncoded()",d.toString())}return c}async function cT(i,o,l){return Promise.all(o.map(function(c){return im(i,c,l)}))}function dn(i,o){return o&&(i.action=rm[i.action]),Object.assign(new yc,i)}var gc=vo;async function sm(i,o,l,c,d){const g=[];d&&(i=kt(i,c,d));for(let R=0;R<i.length;R++){const O=g[R]=dn(i[R],!0);try{await gc(O,o)}catch(b){m.logAction(l,m.LOG_ERROR,"PresenceMessage.fromResponseBody()",b.toString())}}return g}function om(i){const o=i.length,l=new Array(o);for(let c=0;c<o;c++)l[c]=dn(i[c]);return l}function am(i){return i instanceof yc?i:dn({data:i})}var yc=class{isSynthesized(){return!this.id||!this.connectionId?!0:this.id.substring(this.connectionId.length,0)!==this.connectionId}parseId(){if(!this.id)throw new Error("parseId(): Presence message does not contain an id");const i=this.id.split(":");return{connectionId:i[0],msgSerial:parseInt(i[1],10),index:parseInt(i[2],10)}}toJSON(){let i=this.data,o=this.encoding;return i&&T.BufferUtils.isBuffer(i)&&(arguments.length>0?(o=o?o+"/base64":"base64",i=T.BufferUtils.base64Encode(i)):i=T.BufferUtils.toBuffer(i)),{id:this.id,clientId:this.clientId,action:uT(this.action),data:i,encoding:o,extras:this.extras}}toString(){let i="[PresenceMessage";return i+="; action="+this.action,this.id&&(i+="; id="+this.id),this.timestamp&&(i+="; timestamp="+this.timestamp),this.clientId&&(i+="; clientId="+this.clientId),this.connectionId&&(i+="; connectionId="+this.connectionId),this.encoding&&(i+="; encoding="+this.encoding),this.data&&(typeof this.data=="string"?i+="; data="+this.data:T.BufferUtils.isBuffer(this.data)?i+="; data (buffer)="+T.BufferUtils.base64Encode(this.data):i+="; data (json)="+JSON.stringify(this.data)),this.extras&&(i+="; extras="+JSON.stringify(this.extras)),i+="]",i}},hT=yc,fT=class{constructor(i){this.channel=i}get logger(){return this.channel.logger}async get(i){m.logAction(this.logger,m.LOG_MICRO,"RestPresence.get()","channel = "+this.channel.name);const o=this.channel.client,l=o.options.useBinaryProtocol?"msgpack":"json",c=this.channel.client.http.supportsLinkHeaders?void 0:l,d=ae.defaultGetHeaders(o.options,{format:l});Z(d,o.options.headers);const g=this.channel.channelOptions;return new Cr(o,this.channel.client.rest.presenceMixin.basePath(this),d,c,async(R,O,b)=>await sm(R,g,this.logger,o._MsgPack,b?void 0:l)).get(i)}async history(i){return m.logAction(this.logger,m.LOG_MICRO,"RestPresence.history()","channel = "+this.channel.name),this.channel.client.rest.presenceMixin.history(this,i)}},dT=fT,pT=9;function mT(i){return i.every(function(o){return!o.id})}var gT=class{constructor(i,o,l){var c,d;m.logAction(i.logger,m.LOG_MINOR,"RestChannel()","started; name = "+o),this.name=o,this.client=i,this.presence=new dT(this),this.channelOptions=Mt((c=i._Crypto)!=null?c:null,this.logger,l),(d=i.options.plugins)!=null&&d.Push&&(this._push=new i.options.plugins.Push.PushChannel(this))}get push(){return this._push||we("Push"),this._push}get logger(){return this.client.logger}setOptions(i){var o;this.channelOptions=Mt((o=this.client._Crypto)!=null?o:null,this.logger,i)}async history(i){return m.logAction(this.logger,m.LOG_MICRO,"RestChannel.history()","channel = "+this.name),this.client.rest.channelMixin.history(this,i)}async publish(...i){const o=i[0],l=i[1];let c,d;if(typeof o=="string"||o===null)c=[Tr({name:o,data:l})],d=i[2];else if(ie(o))c=[Tr(o)],d=i[1];else if(Array.isArray(o))c=pc(o),d=i[1];else throw new N("The single-argument form of publish() expects a message object or an array of message objects",40013,400);d||(d={});const g=this.client,R=g.options,O=R.useBinaryProtocol?"msgpack":"json",b=g.options.idempotentRestPublishing,I=ae.defaultPostHeaders(g.options,{format:O});if(Z(I,R.headers),b&&mT(c)){const q=await Wn(pT);c.forEach(function(j,K){j.id=q+":"+K.toString()})}await em(c,this.channelOptions);const U=mc(c),B=R.maxMessageSize;if(U>B)throw new N("Maximum size of messages that can be published at once exceeded ( was "+U+" bytes; limit is "+B+" bytes)",40009,400);await this._publish(aT(c,g._MsgPack,O),I,d)}async _publish(i,o,l){await Xe.post(this.client,this.client.rest.channelMixin.basePath(this)+"/messages",i,o,l,null,!0)}async status(){return this.client.rest.channelMixin.status(this)}},yT=gT,vT=class x1{constructor(o){this.entries=o&&o.entries||void 0,this.schema=o&&o.schema||void 0,this.appId=o&&o.appId||void 0,this.inProgress=o&&o.inProgress||void 0,this.unit=o&&o.unit||void 0,this.intervalId=o&&o.intervalId||void 0}static fromValues(o){return new x1(o)}},wT=vT,lm=class{static basePath(i){return"/channels/"+encodeURIComponent(i.name)}static history(i,o){const l=i.client,c=l.options.useBinaryProtocol?"msgpack":"json",d=i.client.http.supportsLinkHeaders?void 0:c,g=ae.defaultGetHeaders(l.options,{format:c});Z(g,l.options.headers);const R=i.channelOptions;return new Cr(l,this.basePath(i)+"/messages",g,d,async function(O,b,I){return await lT(O,R,i.logger,l._MsgPack,I?void 0:c)}).get(o)}static async status(i){const o=i.client.options.useBinaryProtocol?"msgpack":"json",l=ae.defaultPostHeaders(i.client.options,{format:o});return(await Xe.get(i.client,this.basePath(i),l,{},o,!0)).body}},ST=class{static basePath(i){return lm.basePath(i.channel)+"/presence"}static async history(i,o){const l=i.channel.client,c=l.options.useBinaryProtocol?"msgpack":"json",d=i.channel.client.http.supportsLinkHeaders?void 0:c,g=ae.defaultGetHeaders(l.options,{format:c});Z(g,l.options.headers);const R=i.channel.channelOptions;return new Cr(l,this.basePath(i)+"/history",g,d,async function(O,b,I){return await sm(O,R,i.logger,l._MsgPack,I?void 0:c)}).get(o)}},um=class{constructor(i){this.channelMixin=lm,this.presenceMixin=ST,this.Resource=Xe,this.DeviceDetails=Ji,this.client=i,this.channels=new CT(this.client),this.push=new tT(this.client)}async stats(i){const o=ae.defaultGetHeaders(this.client.options),l=this.client.options.useBinaryProtocol?"msgpack":"json",c=this.client.http.supportsLinkHeaders?void 0:l;return Z(o,this.client.options.headers),new Cr(this.client,"/stats",o,c,function(d,g,R){const O=R?d:JSON.parse(d);for(let b=0;b<O.length;b++)O[b]=wT.fromValues(O[b]);return O}).get(i)}async time(i){const o=ae.defaultGetHeaders(this.client.options);this.client.options.headers&&Z(o,this.client.options.headers);const l=O=>this.client.baseUri(O)+"/time";let{error:c,body:d,unpacked:g}=await this.client.http.do(le.Get,l,o,null,i);if(c)throw c;g||(d=JSON.parse(d));const R=d[0];if(!R)throw new N("Internal error (unexpected result type from GET /time)",5e4,500);return this.client.serverTimeOffset=R-Date.now(),R}async request(i,o,l,c,d,g){var R;const[O,b,I]=this.client.options.useBinaryProtocol?(this.client._MsgPack||we("MsgPack"),[this.client._MsgPack.encode,this.client._MsgPack.decode,"msgpack"]):[JSON.stringify,JSON.parse,"json"],U=this.client.http.supportsLinkHeaders?void 0:I;c=c||{};const B=i.toLowerCase(),q=B=="get"?ae.defaultGetHeaders(this.client.options,{format:I,protocolVersion:l}):ae.defaultPostHeaders(this.client.options,{format:I,protocolVersion:l});typeof d!="string"&&(d=(R=O(d))!=null?R:null),Z(q,this.client.options.headers),g&&Z(q,g);const j=new Cr(this.client,o,q,U,async function(K,ee,ce){return se(ce?K:b(K))},!0);if(!T.Http.methods.includes(B))throw new N("Unsupported method "+B,40500,405);return T.Http.methodsWithBody.includes(B)?j[B](c,d):j[B](c)}async batchPublish(i){let o,l;Array.isArray(i)?(o=i,l=!1):(o=[i],l=!0);const c=this.client.options.useBinaryProtocol?"msgpack":"json",d=ae.defaultPostHeaders(this.client.options,{format:c});this.client.options.headers&&Z(d,this.client.options.headers);const g=xt(o,this.client._MsgPack,c),R=await Xe.post(this.client,"/messages",g,d,{},null,!0),O=R.unpacked?R.body:kt(R.body,this.client._MsgPack,c);return l?O[0]:O}async batchPresence(i){const o=this.client.options.useBinaryProtocol?"msgpack":"json",l=ae.defaultPostHeaders(this.client.options,{format:o});this.client.options.headers&&Z(l,this.client.options.headers);const c=i.join(","),d=await Xe.get(this.client,"/presence",l,{channels:c},null,!0);return d.unpacked?d.body:kt(d.body,this.client._MsgPack,o)}async revokeTokens(i,o){if($p(this.client.options))throw new N("Cannot revoke tokens when using token auth",40162,401);const l=this.client.options.keyName;let c=o??{};const d=P({targets:i.map(I=>`${I.type}:${I.value}`)},c),g=this.client.options.useBinaryProtocol?"msgpack":"json",R=ae.defaultPostHeaders(this.client.options,{format:g});this.client.options.headers&&Z(R,this.client.options.headers);const O=xt(d,this.client._MsgPack,g),b=await Xe.post(this.client,`/keys/${l}/revokeTokens`,O,R,{},null,!0);return b.unpacked?b.body:kt(b.body,this.client._MsgPack,g)}},CT=class{constructor(i){this.client=i,this.all=Object.create(null)}get(i,o){i=String(i);let l=this.all[i];return l?o&&l.setOptions(o):this.all[i]=l=new yT(this.client,i,o),l}release(i){delete this.all[String(i)]}},TT=class extends Qp{constructor(i){super(ae.objectifyOptions(i,!1,"BaseRest",m.defaultLogger,{Rest:um}))}},cm={Rest:um},hm=class extends nm{static async fromEncoded(i,o){return Zp(m.defaultLogger,T.Crypto,i,o)}static async fromEncodedArray(i,o){return sT(m.defaultLogger,T.Crypto,i,o)}static fromValues(i){return Object.assign(new nm,i)}static async encode(i,o){return dc(i,o)}static async decode(i,o){return vo(i,o)}},fm=class extends hT{static async fromEncoded(i,o){return im(m.defaultLogger,i,o)}static async fromEncodedArray(i,o){return cT(m.defaultLogger,i,o)}static fromValues(i,o){return dn(i,o)}},Zi=class Zl extends TT{constructor(o){var l,c;if(!Zl._MsgPack)throw new Error("Expected DefaultRest._MsgPack to have been set");super(ae.objectifyOptions(o,!0,"Rest",m.defaultLogger,_(P({},cm),{Crypto:(l=Zl.Crypto)!=null?l:void 0,MsgPack:(c=Zl._MsgPack)!=null?c:void 0})))}static get Crypto(){if(this._Crypto===null)throw new Error("Encryption not enabled; use ably.encryption.js instead");return this._Crypto}static set Crypto(o){this._Crypto=o}};Zi._Crypto=null,Zi.Message=hm,Zi.PresenceMessage=fm,Zi._MsgPack=null,Zi._Http=hc;var vc=Zi;function RT(i,o,l,c){try{l.apply(o,c)}catch(d){m.logAction(i,m.LOG_ERROR,"EventEmitter.emit()","Unexpected listener exception: "+d+"; stack = "+(d&&d.stack))}}function wc(i,o,l){let c,d,g;for(let R=0;R<i.length;R++)if(c=i[R],l&&(c=c[l]),Array.isArray(c)){for(;(d=c.indexOf(o))!==-1;)c.splice(d,1);l&&c.length===0&&delete i[R][l]}else if(ie(c))for(g in c)Object.prototype.hasOwnProperty.call(c,g)&&Array.isArray(c[g])&&wc([c],o,g)}var ET=class{constructor(i){this.logger=i,this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null)}on(...i){if(i.length===1){const o=i[0];if(typeof o=="function")this.any.push(o);else throw new Error("EventListener.on(): Invalid arguments: "+T.Config.inspect(i))}if(i.length===2){const[o,l]=i;if(typeof l!="function")throw new Error("EventListener.on(): Invalid arguments: "+T.Config.inspect(i));if(re(o))this.any.push(l);else if(Array.isArray(o))o.forEach(c=>{this.on(c,l)});else{if(typeof o!="string")throw new Error("EventListener.on(): Invalid arguments: "+T.Config.inspect(i));(this.events[o]||(this.events[o]=[])).push(l)}}}off(...i){if(i.length==0||re(i[0])&&re(i[1])){this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null);return}const[o,l]=i;let c=null,d=null;if(i.length===1||!l)typeof o=="function"?c=o:d=o;else{if(typeof l!="function")throw new Error("EventEmitter.off(): invalid arguments:"+T.Config.inspect(i));[d,c]=[o,l]}if(c&&re(d)){wc([this.any,this.events,this.anyOnce,this.eventsOnce],c);return}if(Array.isArray(d)){d.forEach(g=>{this.off(g,c)});return}if(typeof d!="string")throw new Error("EventEmitter.off(): invalid arguments:"+T.Config.inspect(i));c?wc([this.events,this.eventsOnce],c,d):(delete this.events[d],delete this.eventsOnce[d])}listeners(i){if(i){const o=this.events[i]||[];return this.eventsOnce[i]&&Array.prototype.push.apply(o,this.eventsOnce[i]),o.length?o:null}return this.any.length?this.any:null}emit(i,...o){const l={event:i},c=[];this.anyOnce.length&&(Array.prototype.push.apply(c,this.anyOnce),this.anyOnce=[]),this.any.length&&Array.prototype.push.apply(c,this.any);const d=this.eventsOnce[i];d&&(Array.prototype.push.apply(c,d),delete this.eventsOnce[i]);const g=this.events[i];g&&Array.prototype.push.apply(c,g),c.forEach(R=>{RT(this.logger,l,R,o)})}once(...i){const o=i.length;if(o===0||o===1&&typeof i[0]!="function"){const d=i[0];return new Promise(g=>{this.once(d,g)})}const[l,c]=i;if(i.length===1&&typeof l=="function")this.anyOnce.push(l);else if(re(l)){if(typeof c!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+T.Config.inspect(i));this.anyOnce.push(c)}else if(Array.isArray(l)){const d=this,g=function(){const R=Array.prototype.slice.call(arguments);if(l.forEach(function(O){d.off(O,g)}),typeof c!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+T.Config.inspect(i));c.apply(this,R)};l.forEach(function(R){d.on(R,g)})}else{if(typeof l!="string")throw new Error("EventEmitter.once(): Invalid arguments:"+T.Config.inspect(i));const d=this.eventsOnce[l]||(this.eventsOnce[l]=[]);if(c){if(typeof c!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+T.Config.inspect(i));d.push(c)}}}async whenState(i,o){if(typeof i!="string"||typeof o!="string")throw new Error("whenState requires a valid state String argument");return i===o?null:this.once(i)}},ct=ET,de={HEARTBEAT:0,ACK:1,NACK:2,CONNECT:3,CONNECTED:4,DISCONNECT:5,DISCONNECTED:6,CLOSE:7,CLOSED:8,ERROR:9,ATTACH:10,ATTACHED:11,DETACH:12,DETACHED:13,PRESENCE:14,MESSAGE:15,SYNC:16,AUTH:17,ACTIVATE:18},dm=[];Object.keys(de).forEach(function(i){dm[de[i]]=i});var Kn={HAS_PRESENCE:1,HAS_BACKLOG:2,RESUMED:4,TRANSIENT:16,ATTACH_RESUME:32,PRESENCE:65536,PUBLISH:1<<17,SUBSCRIBE:1<<18,PRESENCE_SUBSCRIBE:1<<19},PT=Object.keys(Kn);Kn.MODE_ALL=Kn.PRESENCE|Kn.PUBLISH|Kn.SUBSCRIBE|Kn.PRESENCE_SUBSCRIBE;function pm(i){const o=[];if(i)for(let l=0;l<i.length;l++)o.push(i[l].toString());return"[ "+o.join(", ")+" ]"}var mm=["PRESENCE","PUBLISH","SUBSCRIBE","PRESENCE_SUBSCRIBE"],AT=xt;function _T(i,o,l,c){const d=kt(i,o,c);return Sc(d,l)}function Sc(i,o){const l=i.error;l&&(i.error=N.fromValues(l));const c=i.messages;if(c)for(let g=0;g<c.length;g++)c[g]=Tr(c[g]);const d=o?i.presence:void 0;if(o&&d&&o)for(let g=0;g<d.length;g++)d[g]=o.presenceMessageFromValues(d[g],!0);return Object.assign(new Tc,_(P({},i),{presence:d}))}function OT(i){return Sc(i,{presenceMessageFromValues:dn,presenceMessagesFromValuesArray:om})}function kn(i){return Object.assign(new Tc,i)}function Cc(i,o){let l="[ProtocolMessage";i.action!==void 0&&(l+="; action="+dm[i.action]||i.action);const c=["id","channel","channelSerial","connectionId","count","msgSerial","timestamp"];let d;for(let g=0;g<c.length;g++)d=c[g],i[d]!==void 0&&(l+="; "+d+"="+i[d]);if(i.messages&&(l+="; messages="+pm(pc(i.messages))),i.presence&&o&&(l+="; presence="+pm(o.presenceMessagesFromValuesArray(i.presence))),i.error&&(l+="; error="+N.fromValues(i.error).toString()),i.auth&&i.auth.accessToken&&(l+="; token="+i.auth.accessToken),i.flags&&(l+="; flags="+PT.filter(i.hasFlag).join(",")),i.params){let g="";zi(i.params,function(R){g.length>0&&(g+="; "),g+=R+"="+i.params[R]}),g.length>0&&(l+="; params=["+g+"]")}return l+="]",l}var Tc=class{constructor(){this.hasFlag=i=>(this.flags&Kn[i])>0}setFlag(i){return this.flags=this.flags|Kn[i]}getMode(){return this.flags&&this.flags&Kn.MODE_ALL}encodeModesToFlags(i){i.forEach(o=>this.setFlag(o))}decodeModesFromFlags(){const i=[];return mm.forEach(o=>{this.hasFlag(o)&&i.push(o)}),i.length>0?i:void 0}},gm=Tc,kT=class extends ct{constructor(i){super(i),this.messages=[]}count(){return this.messages.length}push(i){this.messages.push(i)}shift(){return this.messages.shift()}last(){return this.messages[this.messages.length-1]}copyAll(){return this.messages.slice()}append(i){this.messages.push.apply(this.messages,i)}prepend(i){this.messages.unshift.apply(this.messages,i)}completeMessages(i,o,l){m.logAction(this.logger,m.LOG_MICRO,"MessageQueue.completeMessages()","serial = "+i+"; count = "+o),l=l||null;const c=this.messages;if(c.length===0)throw new Error("MessageQueue.completeMessages(): completeMessages called on any empty MessageQueue");const d=c[0];if(d){const g=d.message.msgSerial,R=i+o;if(R>g){const O=c.splice(0,R-g);for(const b of O)b.callback(l)}c.length==0&&this.emit("idle")}}completeAllMessages(i){this.completeMessages(0,Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,i)}resetSendAttempted(){for(let i of this.messages)i.sendAttempted=!1}clear(){m.logAction(this.logger,m.LOG_MICRO,"MessageQueue.clear()","clearing "+this.messages.length+" messages"),this.messages=[],this.emit("idle")}},ym=kT,vm=class{constructor(i,o){this.message=i,this.callback=o,this.merged=!1;const l=i.action;this.sendAttempted=!1,this.ackRequired=l==de.MESSAGE||l==de.PRESENCE}},xT=class extends ct{constructor(i){super(i.logger),this.transport=i,this.messageQueue=new ym(this.logger),i.on("ack",(o,l)=>{this.onAck(o,l)}),i.on("nack",(o,l,c)=>{this.onNack(o,l,c)})}onAck(i,o){m.logAction(this.logger,m.LOG_MICRO,"Protocol.onAck()","serial = "+i+"; count = "+o),this.messageQueue.completeMessages(i,o)}onNack(i,o,l){m.logAction(this.logger,m.LOG_ERROR,"Protocol.onNack()","serial = "+i+"; count = "+o+"; err = "+xe(l)),l||(l=new N("Unable to send message; channel not responding",50001,500)),this.messageQueue.completeMessages(i,o,l)}onceIdle(i){const o=this.messageQueue;if(o.count()===0){i();return}o.once("idle",i)}send(i){i.ackRequired&&this.messageQueue.push(i),this.logger.shouldLog(m.LOG_MICRO)&&m.logActionNoStrip(this.logger,m.LOG_MICRO,"Protocol.send()","sending msg; "+Cc(i.message,this.transport.connectionManager.realtime._RealtimePresence)),i.sendAttempted=!0,this.transport.send(i.message)}getTransport(){return this.transport}getPendingMessages(){return this.messageQueue.copyAll()}clearPendingMessages(){return this.messageQueue.clear()}finish(){const i=this.transport;this.onceIdle(function(){i.disconnect()})}},MT=xT,IT=class{constructor(i,o,l,c){this.previous=i,this.current=o,l&&(this.retryIn=l),c&&(this.reason=c)}},ul=IT,Rr={DISCONNECTED:80003,SUSPENDED:80002,FAILED:8e4,CLOSING:80017,CLOSED:80017,UNKNOWN_CONNECTION_ERR:50002,UNKNOWN_CHANNEL_ERR:50001},bT={disconnected:()=>N.fromValues({statusCode:400,code:Rr.DISCONNECTED,message:"Connection to server temporarily unavailable"}),suspended:()=>N.fromValues({statusCode:400,code:Rr.SUSPENDED,message:"Connection to server unavailable"}),failed:()=>N.fromValues({statusCode:400,code:Rr.FAILED,message:"Connection failed or disconnected by server"}),closing:()=>N.fromValues({statusCode:400,code:Rr.CLOSING,message:"Connection closing"}),closed:()=>N.fromValues({statusCode:400,code:Rr.CLOSED,message:"Connection closed"}),unknownConnectionErr:()=>N.fromValues({statusCode:500,code:Rr.UNKNOWN_CONNECTION_ERR,message:"Internal connection error"}),unknownChannelErr:()=>N.fromValues({statusCode:500,code:Rr.UNKNOWN_CONNECTION_ERR,message:"Internal channel error"})};function LT(i){return!i.statusCode||!i.code||i.statusCode>=500?!0:Object.values(Rr).includes(i.code)}var Er=bT,DT=kn({action:de.CLOSE}),NT=kn({action:de.DISCONNECT}),UT=class extends ct{constructor(i,o,l,c){super(i.logger),c&&(l.format=void 0,l.heartbeats=!0),this.connectionManager=i,this.auth=o,this.params=l,this.timeouts=l.options.timeouts,this.format=l.format,this.isConnected=!1,this.isFinished=!1,this.isDisposed=!1,this.maxIdleInterval=null,this.idleTimer=null,this.lastActivity=null}connect(){}close(){this.isConnected&&this.requestClose(),this.finish("closed",Er.closed())}disconnect(i){this.isConnected&&this.requestDisconnect(),this.finish("disconnected",i||Er.disconnected())}fail(i){this.isConnected&&this.requestDisconnect(),this.finish("failed",i||Er.failed())}finish(i,o){var l;this.isFinished||(this.isFinished=!0,this.isConnected=!1,this.maxIdleInterval=null,clearTimeout((l=this.idleTimer)!=null?l:void 0),this.idleTimer=null,this.emit(i,o),this.dispose())}onProtocolMessage(i){switch(this.logger.shouldLog(m.LOG_MICRO)&&m.logActionNoStrip(this.logger,m.LOG_MICRO,"Transport.onProtocolMessage()","received on "+this.shortName+": "+Cc(i,this.connectionManager.realtime._RealtimePresence)+"; connectionId = "+this.connectionManager.connectionId),this.onActivity(),i.action){case de.HEARTBEAT:m.logActionNoStrip(this.logger,m.LOG_MICRO,"Transport.onProtocolMessage()",this.shortName+" heartbeat; connectionId = "+this.connectionManager.connectionId),this.emit("heartbeat",i.id);break;case de.CONNECTED:this.onConnect(i),this.emit("connected",i.error,i.connectionId,i.connectionDetails,i);break;case de.CLOSED:this.onClose(i);break;case de.DISCONNECTED:this.onDisconnect(i);break;case de.ACK:this.emit("ack",i.msgSerial,i.count);break;case de.NACK:this.emit("nack",i.msgSerial,i.count,i.error);break;case de.SYNC:this.connectionManager.onChannelMessage(i,this);break;case de.ACTIVATE:break;case de.AUTH:tt(this.auth.authorize(),o=>{o&&m.logAction(this.logger,m.LOG_ERROR,"Transport.onProtocolMessage()","Ably requested re-authentication, but unable to obtain a new token: "+xe(o))});break;case de.ERROR:if(m.logAction(this.logger,m.LOG_MINOR,"Transport.onProtocolMessage()","received error action; connectionId = "+this.connectionManager.connectionId+"; err = "+T.Config.inspect(i.error)+(i.channel?", channel: "+i.channel:"")),i.channel===void 0){this.onFatalError(i);break}this.connectionManager.onChannelMessage(i,this);break;default:this.connectionManager.onChannelMessage(i,this)}}onConnect(i){if(this.isConnected=!0,!i.connectionDetails)throw new Error("Transport.onConnect(): Connect message recieved without connectionDetails");const o=i.connectionDetails.maxIdleInterval;o&&(this.maxIdleInterval=o+this.timeouts.realtimeRequestTimeout,this.onActivity())}onDisconnect(i){const o=i&&i.error;m.logAction(this.logger,m.LOG_MINOR,"Transport.onDisconnect()","err = "+xe(o)),this.finish("disconnected",o)}onFatalError(i){const o=i&&i.error;m.logAction(this.logger,m.LOG_MINOR,"Transport.onFatalError()","err = "+xe(o)),this.finish("failed",o)}onClose(i){const o=i&&i.error;m.logAction(this.logger,m.LOG_MINOR,"Transport.onClose()","err = "+xe(o)),this.finish("closed",o)}requestClose(){m.logAction(this.logger,m.LOG_MINOR,"Transport.requestClose()",""),this.send(DT)}requestDisconnect(){m.logAction(this.logger,m.LOG_MINOR,"Transport.requestDisconnect()",""),this.send(NT)}ping(i){const o={action:de.HEARTBEAT};i&&(o.id=i),this.send(kn(o))}dispose(){m.logAction(this.logger,m.LOG_MINOR,"Transport.dispose()",""),this.isDisposed=!0,this.off()}onActivity(){this.maxIdleInterval&&(this.lastActivity=this.connectionManager.lastActivity=Date.now(),this.setIdleTimer(this.maxIdleInterval+100))}setIdleTimer(i){this.idleTimer||(this.idleTimer=setTimeout(()=>{this.onIdleTimerExpire()},i))}onIdleTimerExpire(){if(!this.lastActivity||!this.maxIdleInterval)throw new Error("Transport.onIdleTimerExpire(): lastActivity/maxIdleInterval not set");this.idleTimer=null;const i=Date.now()-this.lastActivity,o=this.maxIdleInterval-i;if(o<=0){const l="No activity seen from realtime in "+i+"ms; assuming connection has dropped";m.logAction(this.logger,m.LOG_ERROR,"Transport.onIdleTimerExpire()",l),this.disconnect(new N(l,80003,408))}else this.setIdleTimer(o+100)}static tryConnect(i,o,l,c,d){const g=new i(o,l,c);let R;const O=function(I){clearTimeout(R),d({event:this.event,error:I})},b=o.options.timeouts.realtimeRequestTimeout;return R=setTimeout(()=>{g.off(["preconnect","disconnected","failed"]),g.dispose(),O.call({event:"disconnected"},new N("Timeout waiting for transport to indicate itself viable",5e4,500))},b),g.on(["failed","disconnected"],O),g.on("preconnect",function(){m.logAction(o.logger,m.LOG_MINOR,"Transport.tryConnect()","viable transport "+g),clearTimeout(R),g.off(["failed","disconnected"],O),d(null,g)}),g.connect(),g}static isAvailable(){throw new N("isAvailable not implemented for transport",5e4,500)}},es=UT,bt;(i=>{i.WebSocket="web_socket",i.Comet="comet",i.XhrPolling="xhr_polling"})(bt||(bt={}));var FT=typeof Xn<"u"?Xn:typeof window<"u"?window:self,Rc=()=>{var i;return typeof T.WebStorage<"u"&&((i=T.WebStorage)==null?void 0:i.localSupported)},wo=()=>{var i;return typeof T.WebStorage<"u"&&((i=T.WebStorage)==null?void 0:i.sessionSupported)},wm=function(){},Ec="ably-transport-preference";function BT(i,o,l){let c;if(i.channel!==o.channel||(c=i.action)!==de.PRESENCE&&c!==de.MESSAGE||c!==o.action)return!1;const d=c===de.PRESENCE?"presence":"messages",g=i[d].concat(o[d]);return mc(g)>l||!Gi(g,"clientId")||!g.every(function(O){return!O.id})?!1:(i[d]=g,!0)}function Pc(i){try{return JSON.parse(i)}catch{return null}}var VT=class{constructor(i,o,l,c){this.options=i,this.host=o,this.mode=l,this.connectionKey=c,this.format=i.useBinaryProtocol?"msgpack":"json"}getConnectParams(i){const o=i?W(i):{},l=this.options;switch(this.mode){case"resume":o.resume=this.connectionKey;break;case"recover":{const c=Pc(l.recover);c&&(o.recover=c.connectionKey);break}}return l.clientId!==void 0&&(o.clientId=l.clientId),l.echoMessages===!1&&(o.echo="false"),this.format!==void 0&&(o.format=this.format),this.stream!==void 0&&(o.stream=this.stream),this.heartbeats!==void 0&&(o.heartbeats=this.heartbeats),o.v=ae.protocolVersion,o.agent=Yi(this.options),l.transportParams!==void 0&&Z(o,l.transportParams),o}toString(){let i="[mode="+this.mode;return this.host&&(i+=",host="+this.host),this.connectionKey&&(i+=",connectionKey="+this.connectionKey),this.format&&(i+=",format="+this.format),i+="]",i}},jT=class M1 extends ct{constructor(o,l){super(o.logger),this.supportedTransports={},this.disconnectedRetryCount=0,this.pendingChannelMessagesState={isProcessing:!1,queue:[]},this.realtime=o,this.initTransports(),this.options=l;const c=l.timeouts,d=c.webSocketConnectTimeout+c.realtimeRequestTimeout;if(this.states={initialized:{state:"initialized",terminal:!1,queueEvents:!0,sendEvents:!1,failState:"disconnected"},connecting:{state:"connecting",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:d,failState:"disconnected"},connected:{state:"connected",terminal:!1,queueEvents:!1,sendEvents:!0,failState:"disconnected"},disconnected:{state:"disconnected",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:c.disconnectedRetryTimeout,failState:"disconnected"},suspended:{state:"suspended",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:c.suspendedRetryTimeout,failState:"suspended"},closing:{state:"closing",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:c.realtimeRequestTimeout,failState:"closed"},closed:{state:"closed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"closed"},failed:{state:"failed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"failed"}},this.state=this.states.initialized,this.errorReason=null,this.queuedMessages=new ym(this.logger),this.msgSerial=0,this.connectionDetails=void 0,this.connectionId=void 0,this.connectionKey=void 0,this.connectionStateTtl=c.connectionStateTtl,this.maxIdleInterval=null,this.transports=fn(l.transports||ae.defaultTransports,this.supportedTransports),this.transportPreference=null,this.transports.includes(bt.WebSocket)&&(this.webSocketTransportAvailable=!0),this.transports.includes(bt.XhrPolling)?this.baseTransport=bt.XhrPolling:this.transports.includes(bt.Comet)&&(this.baseTransport=bt.Comet),this.httpHosts=ae.getHosts(l),this.wsHosts=ae.getHosts(l,!0),this.activeProtocol=null,this.host=null,this.lastAutoReconnectAttempt=null,this.lastActivity=null,this.forceFallbackHost=!1,this.connectCounter=0,this.wsCheckResult=null,this.webSocketSlowTimer=null,this.webSocketGiveUpTimer=null,this.abandonedWebSocket=!1,m.logAction(this.logger,m.LOG_MINOR,"Realtime.ConnectionManager()","started"),m.logAction(this.logger,m.LOG_MICRO,"Realtime.ConnectionManager()","requested transports = ["+(l.transports||ae.defaultTransports)+"]"),m.logAction(this.logger,m.LOG_MICRO,"Realtime.ConnectionManager()","available transports = ["+this.transports+"]"),m.logAction(this.logger,m.LOG_MICRO,"Realtime.ConnectionManager()","http hosts = ["+this.httpHosts+"]"),!this.transports.length){const R="no requested transports available";throw m.logAction(this.logger,m.LOG_ERROR,"realtime.ConnectionManager()",R),new Error(R)}const g=T.Config.addEventListener;g&&(wo()&&typeof l.recover=="function"&&g("beforeunload",this.persistConnection.bind(this)),l.closeOnUnload===!0&&g("beforeunload",()=>{m.logAction(this.logger,m.LOG_MAJOR,"Realtime.ConnectionManager()","beforeunload event has triggered the connection to close as closeOnUnload is true"),this.requestState({state:"closing"})}),g("online",()=>{var R;this.state==this.states.disconnected||this.state==this.states.suspended?(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager caught browser ‘online’ event","reattempting connection"),this.requestState({state:"connecting"})):this.state==this.states.connecting&&((R=this.pendingTransport)==null||R.off(),this.disconnectAllTransports(),this.startConnect())}),g("offline",()=>{this.state==this.states.connected&&(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager caught browser ‘offline’ event","disconnecting active transport"),this.disconnectAllTransports())}))}static supportedTransports(o){const l={supportedTransports:{}};return this.initTransports(o,l),l.supportedTransports}static initTransports(o,l){const c=P(P({},T.Transports.bundledImplementations),o);[bt.WebSocket,...T.Transports.order].forEach(d=>{const g=c[d];g&&g.isAvailable()&&(l.supportedTransports[d]=g)})}initTransports(){M1.initTransports(this.realtime._additionalTransportImplementations,this)}createTransportParams(o,l){return new VT(this.options,o,l,this.connectionKey)}getTransportParams(o){(c=>{if(this.connectionKey){c("resume");return}if(typeof this.options.recover=="string"){c("recover");return}const d=this.options.recover,g=this.getSessionRecoverData(),R=this.sessionRecoveryName();if(g&&typeof d=="function"){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.getTransportParams()","Calling clientOptions-provided recover function with last session data (recovery scope: "+R+")"),d(g,O=>{O?(this.options.recover=g.recoveryKey,c("recover")):c("clean")});return}c("clean")})(c=>{const d=this.createTransportParams(null,c);if(c==="recover"){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport recovery mode = recover; recoveryKey = "+this.options.recover);const g=Pc(this.options.recover);g&&(this.msgSerial=g.msgSerial)}else m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport params = "+d.toString());o(d)})}tryATransport(o,l,c){m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.tryATransport()","trying "+l),this.proposedTransport=es.tryConnect(this.supportedTransports[l],this,this.realtime.auth,o,(d,g)=>{const R=this.state;if(R==this.states.closing||R==this.states.closed||R==this.states.failed){g&&(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.tryATransport()","connection "+R.state+" while we were attempting the transport; closing "+g),g.close()),c(!0);return}if(d){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.tryATransport()","transport "+l+" "+d.event+", err: "+d.error.toString()),$n.isTokenErr(d.error)&&!(this.errorReason&&$n.isTokenErr(this.errorReason))?(this.errorReason=d.error,tt(this.realtime.auth._forceNewToken(null,null),O=>{if(O){this.actOnErrorFromAuthorize(O);return}this.tryATransport(o,l,c)})):d.event==="failed"?(this.notifyState({state:"failed",error:d.error}),c(!0)):d.event==="disconnected"&&(LT(d.error)?c(!1):(this.notifyState({state:this.states.connecting.failState,error:d.error}),c(!0)));return}m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.tryATransport()","viable transport "+l+"; setting pending"),this.setTransportPending(g,o),c(null,g)})}setTransportPending(o,l){const c=l.mode;m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.setTransportPending()","transport = "+o+"; mode = "+c),this.pendingTransport=o,this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),o.once("connected",(g,R,O)=>{this.activateTransport(g,o,R,O),c==="recover"&&this.options.recover&&(delete this.options.recover,this.unpersistConnection())});const d=this;o.on(["disconnected","closed","failed"],function(g){d.deactivateTransport(o,this.event,g)}),this.emit("transport.pending",o)}activateTransport(o,l,c,d){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.activateTransport()","transport = "+l),o&&m.logAction(this.logger,m.LOG_ERROR,"ConnectionManager.activateTransport()","error = "+o),c&&m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.activateTransport()","connectionId =  "+c),d&&m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.activateTransport()","connectionDetails =  "+JSON.stringify(d)),this.persistTransportPreference(l);const g=this.state,R=this.states.connected.state;if(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.activateTransport()","current state = "+g.state),g.state==this.states.closing.state||g.state==this.states.closed.state||g.state==this.states.failed.state)return m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.activateTransport()","Disconnecting transport and abandoning"),l.disconnect(),!1;if(delete this.pendingTransport,!l.isConnected)return m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.activateTransport()","Declining to activate transport "+l+" since it appears to no longer be connected"),!1;const O=this.activeProtocol;this.activeProtocol=new MT(l),this.host=l.params.host;const b=d.connectionKey;if(b&&this.connectionKey!=b&&this.setConnection(c,d,!!o),this.onConnectionDetailsUpdate(d,l),T.Config.nextTick(()=>{l.on("connected",(I,U,B)=>{this.onConnectionDetailsUpdate(B,l),this.emit("update",new ul(R,R,null,I))})}),g.state===this.states.connected.state?o&&(this.errorReason=this.realtime.connection.errorReason=o,this.emit("update",new ul(R,R,null,o))):(this.notifyState({state:"connected",error:o}),this.errorReason=this.realtime.connection.errorReason=o||null),this.emit("transport.active",l),O)if(O.messageQueue.count()>0&&m.logAction(this.logger,m.LOG_ERROR,"ConnectionManager.activateTransport()","Previous active protocol (for transport "+O.transport.shortName+", new one is "+l.shortName+") finishing with "+O.messageQueue.count()+" messages still pending"),O.transport===l){const I="Assumption violated: activating a transport that was also the transport for the previous active protocol; transport = "+l.shortName+"; stack = "+new Error().stack;m.logAction(this.logger,m.LOG_ERROR,"ConnectionManager.activateTransport()",I)}else O.finish();return!0}deactivateTransport(o,l,c){const d=this.activeProtocol,g=d&&d.getTransport()===o,R=o===this.pendingTransport,O=this.noTransportsScheduledForActivation();if(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.deactivateTransport()","transport = "+o),m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.deactivateTransport()","state = "+l+(g?"; was active":R?"; was pending":"")+(O?"":"; another transport is scheduled for activation")),c&&c.message&&m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.deactivateTransport()","reason =  "+c.message),g&&(m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.deactivateTransport()","Getting, clearing, and requeuing "+this.activeProtocol.messageQueue.count()+" pending messages"),this.queuePendingMessages(d.getPendingMessages()),d.clearPendingMessages(),this.activeProtocol=this.host=null),this.emit("transport.inactive",o),g&&O||g&&l==="failed"||l==="closed"||d===null&&R){if(l==="disconnected"&&c&&c.statusCode>500&&this.httpHosts.length>1){this.unpersistTransportPreference(),this.forceFallbackHost=!0,this.notifyState({state:l,error:c,retryImmediately:!0});return}const b=l==="failed"&&$n.isTokenErr(c)?"disconnected":l;this.notifyState({state:b,error:c});return}}noTransportsScheduledForActivation(){return!this.pendingTransport||!this.pendingTransport.isConnected}setConnection(o,l,c){const d=this.connectionId;(d&&d!==o||!d&&c)&&(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.setConnection()","Resetting msgSerial"),this.msgSerial=0,this.queuedMessages.resetSendAttempted()),this.connectionId!==o&&m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.setConnection()","New connectionId; reattaching any attached channels"),this.realtime.connection.id=this.connectionId=o,this.realtime.connection.key=this.connectionKey=l.connectionKey}clearConnection(){this.realtime.connection.id=this.connectionId=void 0,this.realtime.connection.key=this.connectionKey=void 0,this.msgSerial=0,this.unpersistConnection()}createRecoveryKey(){return this.connectionKey?JSON.stringify({connectionKey:this.connectionKey,msgSerial:this.msgSerial,channelSerials:this.realtime.channels.channelSerials()}):null}checkConnectionStateFreshness(){if(!this.lastActivity||!this.connectionId)return;const o=Date.now()-this.lastActivity;o>this.connectionStateTtl+this.maxIdleInterval&&(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.checkConnectionStateFreshness()","Last known activity from realtime was "+o+"ms ago; discarding connection state"),this.clearConnection(),this.states.connecting.failState="suspended")}persistConnection(){if(wo()){const o=this.createRecoveryKey();o&&this.setSessionRecoverData({recoveryKey:o,disconnectedAt:Date.now(),location:FT.location,clientId:this.realtime.auth.clientId})}}unpersistConnection(){this.clearSessionRecoverData()}getError(){if(this.errorReason){const o=ue.fromValues(this.errorReason);return o.cause=this.errorReason,o}return this.getStateError()}getStateError(){var o,l;return(l=(o=Er)[this.state.state])==null?void 0:l.call(o)}activeState(){return this.state.queueEvents||this.state.sendEvents}enactStateChange(o){const l="Connection state",c=o.current+(o.reason?"; reason: "+o.reason:"");o.current==="failed"?m.logAction(this.logger,m.LOG_ERROR,l,c):m.logAction(this.logger,m.LOG_MAJOR,l,c),m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.enactStateChange","setting new state: "+o.current+"; reason = "+(o.reason&&o.reason.message));const d=this.state=this.states[o.current];o.reason&&(this.errorReason=o.reason,this.realtime.connection.errorReason=o.reason),(d.terminal||d.state==="suspended")&&this.clearConnection(),this.emit("connectionstate",o)}startTransitionTimer(o){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.startTransitionTimer()","transitionState: "+o.state),this.transitionTimer&&(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.startTransitionTimer()","clearing already-running timer"),clearTimeout(this.transitionTimer)),this.transitionTimer=setTimeout(()=>{this.transitionTimer&&(this.transitionTimer=null,m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager "+o.state+" timer expired","requesting new state: "+o.failState),this.notifyState({state:o.failState}))},o.retryDelay)}cancelTransitionTimer(){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.cancelTransitionTimer()",""),this.transitionTimer&&(clearTimeout(this.transitionTimer),this.transitionTimer=null)}startSuspendTimer(){this.suspendTimer||(this.suspendTimer=setTimeout(()=>{this.suspendTimer&&(this.suspendTimer=null,m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager suspend timer expired","requesting new state: suspended"),this.states.connecting.failState="suspended",this.notifyState({state:"suspended"}))},this.connectionStateTtl))}checkSuspendTimer(o){o!=="disconnected"&&o!=="suspended"&&o!=="connecting"&&this.cancelSuspendTimer()}cancelSuspendTimer(){this.states.connecting.failState="disconnected",this.suspendTimer&&(clearTimeout(this.suspendTimer),this.suspendTimer=null)}startRetryTimer(o){this.retryTimer=setTimeout(()=>{m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager retry timer expired","retrying"),this.retryTimer=null,this.requestState({state:"connecting"})},o)}cancelRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)}startWebSocketSlowTimer(){this.webSocketSlowTimer=setTimeout(()=>{m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager WebSocket slow timer","checking connectivity"),this.wsCheckResult===null&&this.checkWsConnectivity().then(()=>{m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager WebSocket slow timer","ws connectivity check succeeded"),this.wsCheckResult=!0}).catch(()=>{m.logAction(this.logger,m.LOG_MAJOR,"ConnectionManager WebSocket slow timer","ws connectivity check failed"),this.wsCheckResult=!1}),this.realtime.http.checkConnectivity&&tt(this.realtime.http.checkConnectivity(),(o,l)=>{o||!l?(m.logAction(this.logger,m.LOG_MAJOR,"ConnectionManager WebSocket slow timer","http connectivity check failed"),this.cancelWebSocketGiveUpTimer(),this.notifyState({state:"disconnected",error:new N("Unable to connect (network unreachable)",80003,404)})):m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager WebSocket slow timer","http connectivity check succeeded")})},this.options.timeouts.webSocketSlowTimeout)}cancelWebSocketSlowTimer(){this.webSocketSlowTimer&&(clearTimeout(this.webSocketSlowTimer),this.webSocketSlowTimer=null)}startWebSocketGiveUpTimer(o){this.webSocketGiveUpTimer=setTimeout(()=>{var l,c;this.wsCheckResult||(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager WebSocket give up timer","websocket connection took more than 10s; "+(this.baseTransport?"trying base transport":"")),this.baseTransport?(this.abandonedWebSocket=!0,(l=this.proposedTransport)==null||l.dispose(),(c=this.pendingTransport)==null||c.dispose(),this.connectBase(o,++this.connectCounter)):m.logAction(this.logger,m.LOG_MAJOR,"ConnectionManager WebSocket give up timer","websocket connectivity appears to be unavailable but no other transports to try"))},this.options.timeouts.webSocketConnectTimeout)}cancelWebSocketGiveUpTimer(){this.webSocketGiveUpTimer&&(clearTimeout(this.webSocketGiveUpTimer),this.webSocketGiveUpTimer=null)}notifyState(o){var l,c;const d=o.state,g=d==="disconnected"&&(this.state===this.states.connected||o.retryImmediately||this.state===this.states.connecting&&o.error&&$n.isTokenErr(o.error)&&!(this.errorReason&&$n.isTokenErr(this.errorReason)));if(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.notifyState()","new state: "+d+(g?"; will retry connection immediately":"")),d==this.state.state||(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),this.checkSuspendTimer(o.state),(d==="suspended"||d==="connected")&&(this.disconnectedRetryCount=0),this.state.terminal))return;const R=this.states[o.state];let O=R.retryDelay;R.state==="disconnected"&&(this.disconnectedRetryCount++,O=_n(R.retryDelay,this.disconnectedRetryCount));const b=new ul(this.state.state,R.state,O,o.error||((c=(l=Er)[R.state])==null?void 0:c.call(l)));if(g){const I=()=>{this.state===this.states.disconnected&&(this.lastAutoReconnectAttempt=Date.now(),this.requestState({state:"connecting"}))},U=this.lastAutoReconnectAttempt&&Date.now()-this.lastAutoReconnectAttempt+1;U&&U<1e3?(m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.notifyState()","Last reconnect attempt was only "+U+"ms ago, waiting another "+(1e3-U)+"ms before trying again"),setTimeout(I,1e3-U)):T.Config.nextTick(I)}else(d==="disconnected"||d==="suspended")&&this.startRetryTimer(O);(d==="disconnected"&&!g||d==="suspended"||R.terminal)&&T.Config.nextTick(()=>{this.disconnectAllTransports()}),d=="connected"&&!this.activeProtocol&&m.logAction(this.logger,m.LOG_ERROR,"ConnectionManager.notifyState()","Broken invariant: attempted to go into connected state, but there is no active protocol"),this.enactStateChange(b),this.state.sendEvents?this.sendQueuedMessages():this.state.queueEvents||(this.realtime.channels.propogateConnectionInterruption(d,b.reason),this.failQueuedMessages(b.reason))}requestState(o){var l,c;const d=o.state;if(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.requestState()","requested state: "+d+"; current state: "+this.state.state),d==this.state.state||(this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(d),d=="connecting"&&this.state.state=="connected")||d=="closing"&&this.state.state=="closed")return;const g=this.states[d],R=new ul(this.state.state,g.state,null,o.error||((c=(l=Er)[g.state])==null?void 0:c.call(l)));this.enactStateChange(R),d=="connecting"&&T.Config.nextTick(()=>{this.startConnect()}),d=="closing"&&this.closeImpl()}startConnect(){if(this.state!==this.states.connecting){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.startConnect()","Must be in connecting state to connect, but was "+this.state.state);return}const o=this.realtime.auth,l=++this.connectCounter,c=()=>{this.checkConnectionStateFreshness(),this.getTransportParams(d=>{if(d.mode==="recover"&&d.options.recover){const g=Pc(d.options.recover);g&&this.realtime.channels.recoverChannels(g.channelSerials)}l===this.connectCounter&&this.connectImpl(d,l)})};if(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.startConnect()","starting connection"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),o.method==="basic")c();else{const d=g=>{l===this.connectCounter&&(g?this.actOnErrorFromAuthorize(g):c())};this.errorReason&&$n.isTokenErr(this.errorReason)?tt(o._forceNewToken(null,null),d):tt(o._ensureValidAuthCredentials(!1),d)}}connectImpl(o,l){const c=this.state.state;if(c!==this.states.connecting.state){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.connectImpl()","Must be in connecting state to connect, but was "+c);return}const d=this.getTransportPreference();d&&d===this.baseTransport&&this.webSocketTransportAvailable&&this.checkWsConnectivity().then(()=>{this.wsCheckResult=!0,this.abandonedWebSocket=!1,this.unpersistTransportPreference(),this.state===this.states.connecting&&(m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.connectImpl():","web socket connectivity available, cancelling connection attempt with "+this.baseTransport),this.disconnectAllTransports(),this.connectWs(o,++this.connectCounter))}).catch(wm),d&&d===this.baseTransport||this.baseTransport&&!this.webSocketTransportAvailable?this.connectBase(o,l):this.connectWs(o,l)}connectWs(o,l){m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.connectWs()"),this.startWebSocketSlowTimer(),this.startWebSocketGiveUpTimer(o),this.tryTransportWithFallbacks("web_socket",o,!0,l,()=>this.wsCheckResult!==!1&&!this.abandonedWebSocket)}connectBase(o,l){m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.connectBase()"),this.baseTransport?this.tryTransportWithFallbacks(this.baseTransport,o,!1,l,()=>!0):this.notifyState({state:"disconnected",error:new N("No transports left to try",8e4,404)})}tryTransportWithFallbacks(o,l,c,d,g){m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.tryTransportWithFallbacks()",o);const R=B=>{this.notifyState({state:this.states.connecting.failState,error:B})},O=c?this.wsHosts.slice():this.httpHosts.slice(),b=(B,q)=>{if(d===this.connectCounter){if(!g()){q&&q.dispose();return}!q&&!B&&U()}},I=O.shift();if(!I){R(new N("Unable to connect (no available host)",80003,404));return}l.host=I;const U=()=>{if(!O.length){R(new N("Unable to connect (and no more fallback hosts to try)",80003,404));return}if(!this.realtime.http.checkConnectivity){R(new ue("Internal error: Http.checkConnectivity not set",null,500));return}tt(this.realtime.http.checkConnectivity(),(B,q)=>{if(d===this.connectCounter&&g()){if(B){R(B);return}if(!q){R(new N("Unable to connect (network unreachable)",80003,404));return}l.host=wr(O),this.tryATransport(l,o,b)}})};if(this.forceFallbackHost&&O.length){this.forceFallbackHost=!1,U();return}this.tryATransport(l,o,b)}closeImpl(){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.closeImpl()","closing connection"),this.cancelSuspendTimer(),this.startTransitionTimer(this.states.closing),this.pendingTransport&&(m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.closeImpl()","Closing pending transport: "+this.pendingTransport),this.pendingTransport.close()),this.activeProtocol&&(m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.closeImpl()","Closing active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().close()),this.notifyState({state:"closed"})}onAuthUpdated(o,l){var c;switch(this.state.state){case"connected":{m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Sending AUTH message on active transport");const d=(c=this.activeProtocol)==null?void 0:c.getTransport();d&&d.onAuthUpdated&&d.onAuthUpdated(o);const g=kn({action:de.AUTH,auth:{accessToken:o.token}});this.send(g);const R=()=>{this.off(O),l(null,o)},O=b=>{b.current==="failed"&&(this.off(R),this.off(O),l(b.reason||this.getStateError()))};this.once("connectiondetails",R),this.on("connectionstate",O);break}case"connecting":m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Aborting current connection attempts in order to start again with the new auth details"),this.disconnectAllTransports();default:{m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Connection state is "+this.state.state+"; waiting until either connected or failed");const d=g=>{switch(g.current){case"connected":this.off(d),l(null,o);break;case"failed":case"closed":case"suspended":this.off(d),l(g.reason||this.getStateError());break}};this.on("connectionstate",d),this.state.state==="connecting"?this.startConnect():this.requestState({state:"connecting"})}}}disconnectAllTransports(){m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.disconnectAllTransports()","Disconnecting all transports"),this.connectCounter++,this.pendingTransport&&(m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting pending transport: "+this.pendingTransport),this.pendingTransport.disconnect()),delete this.pendingTransport,this.proposedTransport&&(m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting proposed transport: "+this.pendingTransport),this.proposedTransport.disconnect()),delete this.pendingTransport,this.activeProtocol&&(m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().disconnect())}send(o,l,c){c=c||wm;const d=this.state;if(d.sendEvents){m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.send()","sending event"),this.sendImpl(new vm(o,c));return}if(!(l&&d.queueEvents)){const R="rejecting event, queueEvent was "+l+", state was "+d.state;m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.send()",R),c(this.errorReason||new N(R,9e4,400));return}this.logger.shouldLog(m.LOG_MICRO)&&m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.send()","queueing msg; "+Cc(o,this.realtime._RealtimePresence)),this.queue(o,c)}sendImpl(o){const l=o.message;o.ackRequired&&!o.sendAttempted&&(l.msgSerial=this.msgSerial++);try{this.activeProtocol.send(o)}catch(c){m.logAction(this.logger,m.LOG_ERROR,"ConnectionManager.sendImpl()","Unexpected exception in transport.send(): "+c.stack)}}queue(o,l){m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.queue()","queueing event");const c=this.queuedMessages.last(),d=this.options.maxMessageSize;c&&!c.sendAttempted&&BT(c.message,o,d)?(c.merged||(c.callback=G.create(this.logger,[c.callback]),c.merged=!0),c.callback.push(l)):this.queuedMessages.push(new vm(o,l))}sendQueuedMessages(){m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.sendQueuedMessages()","sending "+this.queuedMessages.count()+" queued messages");let o;for(;o=this.queuedMessages.shift();)this.sendImpl(o)}queuePendingMessages(o){o&&o.length&&(m.logAction(this.logger,m.LOG_MICRO,"ConnectionManager.queuePendingMessages()","queueing "+o.length+" pending messages"),this.queuedMessages.prepend(o))}failQueuedMessages(o){const l=this.queuedMessages.count();l>0&&(m.logAction(this.logger,m.LOG_ERROR,"ConnectionManager.failQueuedMessages()","failing "+l+" queued messages, err = "+xe(o)),this.queuedMessages.completeAllMessages(o))}onChannelMessage(o,l){this.pendingChannelMessagesState.queue.push({message:o,transport:l}),this.pendingChannelMessagesState.isProcessing||this.processNextPendingChannelMessage()}processNextPendingChannelMessage(){if(this.pendingChannelMessagesState.queue.length>0){this.pendingChannelMessagesState.isProcessing=!0;const o=this.pendingChannelMessagesState.queue.shift();this.processChannelMessage(o.message).catch(l=>{m.logAction(this.logger,m.LOG_ERROR,"ConnectionManager.processNextPendingChannelMessage() received error ",l)}).finally(()=>{this.pendingChannelMessagesState.isProcessing=!1,this.processNextPendingChannelMessage()})}}async processChannelMessage(o){await this.realtime.channels.processChannelMessage(o)}async ping(){var o;if(this.state.state!=="connected")throw new N("Unable to ping service; not connected",4e4,400);const l=(o=this.activeProtocol)==null?void 0:o.getTransport();if(!l)throw this.getStateError();m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.ping()","transport = "+l);const c=Date.now(),d=An();return qn(new Promise(g=>{const R=O=>{O===d&&(l.off("heartbeat",R),g(Date.now()-c))};l.on("heartbeat",R),l.ping(d)}),this.options.timeouts.realtimeRequestTimeout,"Timeout waiting for heartbeat response")}abort(o){this.activeProtocol.getTransport().fail(o)}getTransportPreference(){var o,l;return this.transportPreference||Rc()&&((l=(o=T.WebStorage)==null?void 0:o.get)==null?void 0:l.call(o,Ec))}persistTransportPreference(o){var l,c;this.transportPreference=o.shortName,Rc()&&((c=(l=T.WebStorage)==null?void 0:l.set)==null||c.call(l,Ec,o.shortName))}unpersistTransportPreference(){var o,l;this.transportPreference=null,Rc()&&((l=(o=T.WebStorage)==null?void 0:o.remove)==null||l.call(o,Ec))}actOnErrorFromAuthorize(o){if(o.code===40171)this.notifyState({state:"failed",error:o});else if(o.code===40102)this.notifyState({state:"failed",error:o});else if(o.statusCode===Ye.Forbidden){const l="Client configured authentication provider returned 403; failing the connection";m.logAction(this.logger,m.LOG_ERROR,"ConnectionManager.actOnErrorFromAuthorize()",l),this.notifyState({state:"failed",error:new N(l,80019,403,o)})}else{const l="Client configured authentication provider request failed";m.logAction(this.logger,m.LOG_MINOR,"ConnectionManager.actOnErrorFromAuthorize",l),this.notifyState({state:this.state.failState,error:new N(l,80019,401,o)})}}onConnectionDetailsUpdate(o,l){if(!o)return;this.connectionDetails=o,o.maxMessageSize&&(this.options.maxMessageSize=o.maxMessageSize);const c=o.clientId;if(c){const g=this.realtime.auth._uncheckedSetClientId(c);if(g){m.logAction(this.logger,m.LOG_ERROR,"ConnectionManager.onConnectionDetailsUpdate()",g.message),l.fail(g);return}}const d=o.connectionStateTtl;d&&(this.connectionStateTtl=d),this.maxIdleInterval=o.maxIdleInterval,this.emit("connectiondetails",o)}checkWsConnectivity(){const o=new T.Config.WebSocket(ae.wsConnectivityUrl);return new Promise((l,c)=>{let d=!1;o.onopen=()=>{d||(d=!0,l(),o.close())},o.onclose=o.onerror=()=>{d||(d=!0,c())}})}sessionRecoveryName(){return this.options.recoveryKeyStorageName||"ably-connection-recovery"}getSessionRecoverData(){var o,l;return wo()&&((l=(o=T.WebStorage)==null?void 0:o.getSession)==null?void 0:l.call(o,this.sessionRecoveryName()))}setSessionRecoverData(o){var l,c;return wo()&&((c=(l=T.WebStorage)==null?void 0:l.setSession)==null?void 0:c.call(l,this.sessionRecoveryName(),o))}clearSessionRecoverData(){var o,l;return wo()&&((l=(o=T.WebStorage)==null?void 0:o.removeSession)==null?void 0:l.call(o,this.sessionRecoveryName()))}},Sm=jT,zT=class extends ct{constructor(i,o){super(i.logger),this.whenState=l=>ct.prototype.whenState.call(this,l,this.state),this.ably=i,this.connectionManager=new Sm(i,o),this.state=this.connectionManager.state.state,this.key=void 0,this.id=void 0,this.errorReason=null,this.connectionManager.on("connectionstate",l=>{const c=this.state=l.current;T.Config.nextTick(()=>{this.emit(c,l)})}),this.connectionManager.on("update",l=>{T.Config.nextTick(()=>{this.emit("update",l)})})}connect(){m.logAction(this.logger,m.LOG_MINOR,"Connection.connect()",""),this.connectionManager.requestState({state:"connecting"})}async ping(){return m.logAction(this.logger,m.LOG_MINOR,"Connection.ping()",""),this.connectionManager.ping()}close(){m.logAction(this.logger,m.LOG_MINOR,"Connection.close()","connectionKey = "+this.key),this.connectionManager.requestState({state:"closing"})}get recoveryKey(){return this.logger.deprecationWarning("The `Connection.recoveryKey` attribute has been replaced by the `Connection.createRecoveryKey()` method. Replace your usage of `recoveryKey` with the return value of `createRecoveryKey()`. `recoveryKey` will be removed in a future version."),this.createRecoveryKey()}createRecoveryKey(){return this.connectionManager.createRecoveryKey()}},GT=zT,HT=class{constructor(i,o,l,c,d){this.previous=i,this.current=o,o==="attached"&&(this.resumed=l,this.hasBacklog=c),d&&(this.reason=d)}},Ac=HT,Cm=function(){};function WT(i){if(i&&"params"in i&&!ie(i.params))return new N("options.params must be an object",4e4,400);if(i&&"modes"in i){if(!Array.isArray(i.modes))return new N("options.modes must be an array",4e4,400);for(let o=0;o<i.modes.length;o++){const l=i.modes[o];if(!l||typeof l!="string"||!mm.includes(String.prototype.toUpperCase.call(l)))return new N("Invalid channel mode: "+l,4e4,400)}}}var qT=class ud extends ct{constructor(o,l,c){var d,g;super(o.logger),this.retryCount=0,this.history=async function(R){m.logAction(this.logger,m.LOG_MICRO,"RealtimeChannel.history()","channel = "+this.name);const O=this.client.rest.channelMixin;if(R&&R.untilAttach){if(this.state!=="attached")throw new N("option untilAttach requires the channel to be attached",4e4,400);if(!this.properties.attachSerial)throw new N("untilAttach was specified and channel is attached, but attachSerial is not defined",4e4,400);delete R.untilAttach,R.from_serial=this.properties.attachSerial}return O.history(this,R)},this.whenState=R=>ct.prototype.whenState.call(this,R,this.state),m.logAction(this.logger,m.LOG_MINOR,"RealtimeChannel()","started; name = "+l),this.name=l,this.channelOptions=Mt((d=o._Crypto)!=null?d:null,this.logger,c),this.client=o,this._presence=o._RealtimePresence?new o._RealtimePresence.RealtimePresence(this):null,this.connectionManager=o.connection.connectionManager,this.state="initialized",this.subscriptions=new ct(this.logger),this.syncChannelSerial=void 0,this.properties={attachSerial:void 0,channelSerial:void 0},this.setOptions(c),this.errorReason=null,this._requestedFlags=null,this._mode=null,this._attachResume=!1,this._decodingContext={channelOptions:this.channelOptions,plugins:o.options.plugins||{},baseEncodedPreviousPayload:void 0},this._lastPayload={messageId:null,protocolMessageChannelSerial:null,decodeFailureRecoveryInProgress:null},this._allChannelChanges=new ct(this.logger),(g=o.options.plugins)!=null&&g.Push&&(this._push=new o.options.plugins.Push.PushChannel(this))}get presence(){return this._presence||we("RealtimePresence"),this._presence}get push(){return this._push||we("Push"),this._push}invalidStateError(){return new N("Channel operation failed as channel state is "+this.state,90001,400,this.errorReason||void 0)}static processListenerArgs(o){return o=Array.prototype.slice.call(o),typeof o[0]=="function"&&o.unshift(null),o}async setOptions(o){var l;const c=this.channelOptions,d=WT(o);if(d)throw d;if(this.channelOptions=Mt((l=this.client._Crypto)!=null?l:null,this.logger,o),this._decodingContext&&(this._decodingContext.channelOptions=this.channelOptions),this._shouldReattachToSetOptions(o,c))return this.attachImpl(),new Promise((g,R)=>{this._allChannelChanges.once(["attached","update","detached","failed"],function(O){switch(this.event){case"update":case"attached":g();break;default:R(O.reason)}})})}_shouldReattachToSetOptions(o,l){if(!(this.state==="attached"||this.state==="attaching"))return!1;if(o!=null&&o.params){const c=Tm(o.params),d=Tm(l.params);if(Object.keys(c).length!==Object.keys(d).length||!$i(d,c))return!0}return!!(o!=null&&o.modes&&(!l.modes||!Za(o.modes,l.modes)))}async publish(...o){let l=o[0],c=o.length;if(!this.connectionManager.activeState())throw this.connectionManager.getError();if(c==1)if(ie(l))l=[Tr(l)];else if(Array.isArray(l))l=pc(l);else throw new N("The single-argument form of publish() expects a message object or an array of message objects",40013,400);else l=[Tr({name:o[0],data:o[1]})];const d=this.client.options.maxMessageSize;await em(l,this.channelOptions);const g=mc(l);if(g>d)throw new N("Maximum size of messages that can be published at once exceeded ( was "+g+" bytes; limit is "+d+" bytes)",40009,400);return new Promise((R,O)=>{this._publish(l,b=>b?O(b):R())})}_publish(o,l){m.logAction(this.logger,m.LOG_MICRO,"RealtimeChannel.publish()","message count = "+o.length);const c=this.state;switch(c){case"failed":case"suspended":l(N.fromValues(this.invalidStateError()));break;default:{m.logAction(this.logger,m.LOG_MICRO,"RealtimeChannel.publish()","sending message; channel state is "+c);const d=new gm;d.action=de.MESSAGE,d.channel=this.name,d.messages=o,this.sendMessage(d,l);break}}}onEvent(o){m.logAction(this.logger,m.LOG_MICRO,"RealtimeChannel.onEvent()","received message");const l=this.subscriptions;for(let c=0;c<o.length;c++){const d=o[c];l.emit(d.name,d)}}async attach(){return this.state==="attached"?null:new Promise((o,l)=>{this._attach(!1,null,(c,d)=>c?l(c):o(d))})}_attach(o,l,c){c||(c=g=>{g&&m.logAction(this.logger,m.LOG_ERROR,"RealtimeChannel._attach()","Channel attach failed: "+g.toString())});const d=this.connectionManager;if(!d.activeState()){c(d.getError());return}(this.state!=="attaching"||o)&&this.requestState("attaching",l),this.once(function(g){switch(this.event){case"attached":c==null||c(null,g);break;case"detached":case"suspended":case"failed":c==null||c(g.reason||d.getError()||new N("Unable to attach; reason unknown; state = "+this.event,9e4,500));break;case"detaching":c==null||c(new N("Attach request superseded by a subsequent detach request",9e4,409));break}})}attachImpl(){m.logAction(this.logger,m.LOG_MICRO,"RealtimeChannel.attachImpl()","sending ATTACH message");const o=kn({action:de.ATTACH,channel:this.name,params:this.channelOptions.params,channelSerial:this.properties.channelSerial});this._requestedFlags?o.encodeModesToFlags(this._requestedFlags):this.channelOptions.modes&&o.encodeModesToFlags(oi(this.channelOptions.modes)),this._attachResume&&o.setFlag("ATTACH_RESUME"),this._lastPayload.decodeFailureRecoveryInProgress&&(o.channelSerial=this._lastPayload.protocolMessageChannelSerial),this.sendMessage(o,Cm)}async detach(){const o=this.connectionManager;if(!o.activeState())throw o.getError();switch(this.state){case"suspended":this.notifyState("detached");return;case"detached":return;case"failed":throw new N("Unable to detach; channel state = failed",90001,400);default:this.requestState("detaching");case"detaching":return new Promise((l,c)=>{this.once(function(d){switch(this.event){case"detached":l();break;case"attached":case"suspended":case"failed":c(d.reason||o.getError()||new N("Unable to detach; reason unknown; state = "+this.event,9e4,500));break;case"attaching":c(new N("Detach request superseded by a subsequent attach request",9e4,409));break}})})}}detachImpl(o){m.logAction(this.logger,m.LOG_MICRO,"RealtimeChannel.detach()","sending DETACH message");const l=kn({action:de.DETACH,channel:this.name});this.sendMessage(l,o||Cm)}async subscribe(...o){const[l,c]=ud.processListenerArgs(o);if(this.state==="failed")throw N.fromValues(this.invalidStateError());return l&&typeof l=="object"&&!Array.isArray(l)?this.client._FilteredSubscriptions.subscribeFilter(this,l,c):this.subscriptions.on(l,c),this.attach()}unsubscribe(...o){var l;const[c,d]=ud.processListenerArgs(o);if(typeof c=="object"&&!d||(l=this.filteredSubscriptions)!=null&&l.has(d)){this.client._FilteredSubscriptions.getAndDeleteFilteredSubscriptions(this,c,d).forEach(g=>this.subscriptions.off(g));return}this.subscriptions.off(c,d)}sync(){switch(this.state){case"initialized":case"detaching":case"detached":throw new ue("Unable to sync to channel; not attached",4e4)}const o=this.connectionManager;if(!o.activeState())throw o.getError();const l=kn({action:de.SYNC,channel:this.name});this.syncChannelSerial&&(l.channelSerial=this.syncChannelSerial),o.send(l)}sendMessage(o,l){this.connectionManager.send(o,this.client.options.queueMessages,l)}sendPresence(o,l){const c=kn({action:de.PRESENCE,channel:this.name,presence:Array.isArray(o)?this.client._RealtimePresence.presenceMessagesFromValuesArray(o):[this.client._RealtimePresence.presenceMessageFromValues(o)]});this.sendMessage(c,l)}async processMessage(o){(o.action===de.ATTACHED||o.action===de.MESSAGE||o.action===de.PRESENCE)&&this.setChannelSerial(o.channelSerial);let l,c=!1;switch(o.action){case de.ATTACHED:{this.properties.attachSerial=o.channelSerial,this._mode=o.getMode(),this.params=o.params||{};const d=o.decodeModesFromFlags();this.modes=d&&qi(d)||void 0;const g=o.hasFlag("RESUMED"),R=o.hasFlag("HAS_PRESENCE"),O=o.hasFlag("HAS_BACKLOG");if(this.state==="attached"){g||this._presence&&this._presence.onAttached(R);const b=new Ac(this.state,this.state,g,O,o.error);this._allChannelChanges.emit("update",b),(!g||this.channelOptions.updateOnAttached)&&this.emit("update",b)}else this.state==="detaching"?this.checkPendingState():this.notifyState("attached",o.error,g,R,O);break}case de.DETACHED:{const d=o.error?N.fromValues(o.error):new N("Channel detached",90001,404);this.state==="detaching"?this.notifyState("detached",d):this.state==="attaching"?this.notifyState("suspended",d):(this.state==="attached"||this.state==="suspended")&&this.requestState("attaching",d);break}case de.SYNC:if(c=!0,l=this.syncChannelSerial=o.channelSerial,!o.presence)break;case de.PRESENCE:{const d=o.presence;if(!d)break;const{id:g,connectionId:R,timestamp:O}=o,b=this.channelOptions;let I;for(let U=0;U<d.length;U++)try{I=d[U],await gc(I,b),I.connectionId||(I.connectionId=R),I.timestamp||(I.timestamp=O),I.id||(I.id=g+":"+U)}catch(B){m.logAction(this.logger,m.LOG_ERROR,"RealtimeChannel.processMessage()",B.toString())}this._presence&&this._presence.setPresence(d,c,l);break}case de.MESSAGE:{if(this.state!=="attached"){m.logAction(this.logger,m.LOG_MAJOR,"RealtimeChannel.processMessage()",'Message "'+o.id+'" skipped as this channel "'+this.name+'" state is not "attached" (state is "'+this.state+'").');return}const d=o.messages,g=d[0],R=d[d.length-1],O=o.id,b=o.connectionId,I=o.timestamp;if(g.extras&&g.extras.delta&&g.extras.delta.from!==this._lastPayload.messageId){const U='Delta message decode failure - previous message not available for message "'+o.id+'" on this channel "'+this.name+'".';m.logAction(this.logger,m.LOG_ERROR,"RealtimeChannel.processMessage()",U),this._startDecodeFailureRecovery(new N(U,40018,400));break}for(let U=0;U<d.length;U++){const B=d[U];try{await vo(B,this._decodingContext)}catch(q){switch(m.logAction(this.logger,m.LOG_ERROR,"RealtimeChannel.processMessage()",q.toString()),q.code){case 40018:this._startDecodeFailureRecovery(q);return;case 40019:case 40021:this.notifyState("failed",q);return}}B.connectionId||(B.connectionId=b),B.timestamp||(B.timestamp=I),B.id||(B.id=O+":"+U)}this._lastPayload.messageId=R.id,this._lastPayload.protocolMessageChannelSerial=o.channelSerial,this.onEvent(d);break}case de.ERROR:{const d=o.error;d&&d.code==80016?this.checkPendingState():this.notifyState("failed",N.fromValues(d));break}default:m.logAction(this.logger,m.LOG_ERROR,"RealtimeChannel.processMessage()","Fatal protocol error: unrecognised action ("+o.action+")"),this.connectionManager.abort(Er.unknownChannelErr())}}_startDecodeFailureRecovery(o){this._lastPayload.decodeFailureRecoveryInProgress||(m.logAction(this.logger,m.LOG_MAJOR,"RealtimeChannel.processMessage()","Starting decode failure recovery process."),this._lastPayload.decodeFailureRecoveryInProgress=!0,this._attach(!0,o,()=>{this._lastPayload.decodeFailureRecoveryInProgress=!1}))}onAttached(){m.logAction(this.logger,m.LOG_MINOR,"RealtimeChannel.onAttached","activating channel; name = "+this.name)}notifyState(o,l,c,d,g){if(m.logAction(this.logger,m.LOG_MICRO,"RealtimeChannel.notifyState","name = "+this.name+", current state = "+this.state+", notifying state "+o),this.clearStateTimer(),["detached","suspended","failed"].includes(o)&&(this.properties.channelSerial=null),o===this.state)return;this._presence&&this._presence.actOnChannelState(o,d,l),o==="suspended"&&this.connectionManager.state.sendEvents?this.startRetryTimer():this.cancelRetryTimer(),l&&(this.errorReason=l);const R=new Ac(this.state,o,c,g,l),O='Channel state for channel "'+this.name+'"',b=o+(l?"; reason: "+l:"");o==="failed"?m.logAction(this.logger,m.LOG_ERROR,O,b):m.logAction(this.logger,m.LOG_MAJOR,O,b),o!=="attaching"&&o!=="suspended"&&(this.retryCount=0),o==="attached"&&this.onAttached(),o==="attached"?this._attachResume=!0:(o==="detaching"||o==="failed")&&(this._attachResume=!1),this.state=o,this._allChannelChanges.emit(o,R),this.emit(o,R)}requestState(o,l){m.logAction(this.logger,m.LOG_MINOR,"RealtimeChannel.requestState","name = "+this.name+", state = "+o),this.notifyState(o,l),this.checkPendingState()}checkPendingState(){if(!this.connectionManager.state.sendEvents){m.logAction(this.logger,m.LOG_MINOR,"RealtimeChannel.checkPendingState","sendEvents is false; state is "+this.connectionManager.state.state);return}switch(m.logAction(this.logger,m.LOG_MINOR,"RealtimeChannel.checkPendingState","name = "+this.name+", state = "+this.state),this.state){case"attaching":this.startStateTimerIfNotRunning(),this.attachImpl();break;case"detaching":this.startStateTimerIfNotRunning(),this.detachImpl();break;case"attached":this.sync();break}}timeoutPendingState(){switch(this.state){case"attaching":{const o=new N("Channel attach timed out",90007,408);this.notifyState("suspended",o);break}case"detaching":{const o=new N("Channel detach timed out",90007,408);this.notifyState("attached",o);break}default:this.checkPendingState();break}}startStateTimerIfNotRunning(){this.stateTimer||(this.stateTimer=setTimeout(()=>{m.logAction(this.logger,m.LOG_MINOR,"RealtimeChannel.startStateTimerIfNotRunning","timer expired"),this.stateTimer=null,this.timeoutPendingState()},this.client.options.timeouts.realtimeRequestTimeout))}clearStateTimer(){const o=this.stateTimer;o&&(clearTimeout(o),this.stateTimer=null)}startRetryTimer(){if(this.retryTimer)return;this.retryCount++;const o=_n(this.client.options.timeouts.channelRetryTimeout,this.retryCount);this.retryTimer=setTimeout(()=>{this.state==="suspended"&&this.connectionManager.state.sendEvents&&(this.retryTimer=null,m.logAction(this.logger,m.LOG_MINOR,"RealtimeChannel retry timer expired","attempting a new attach"),this.requestState("attaching"))},o)}cancelRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)}getReleaseErr(){const o=this.state;return o==="initialized"||o==="detached"||o==="failed"?null:new N("Can only release a channel in a state where there is no possibility of further updates from the server being received (initialized, detached, or failed); was "+o,90001,400)}setChannelSerial(o){m.logAction(this.logger,m.LOG_MICRO,"RealtimeChannel.setChannelSerial()","Updating channel serial; serial = "+o+"; previous = "+this.properties.channelSerial),o&&(this.properties.channelSerial=o)}async status(){return this.client.rest.channelMixin.status(this)}};function Tm(i){return A(i||{},["agent"])}var _c=qT,Rm=class I1 extends Qp{constructor(o){var l,c;if(super(ae.objectifyOptions(o,!1,"BaseRealtime",m.defaultLogger)),m.logAction(this.logger,m.LOG_MINOR,"Realtime()",""),typeof EdgeRuntime=="string")throw new N(`Ably.Realtime instance cannot be used in Vercel Edge runtime. If you are running Vercel Edge functions, please replace your "new Ably.Realtime()" with "new Ably.Rest()" and use Ably Rest API instead of the Realtime API. If you are server-rendering your application in the Vercel Edge runtime, please use the condition "if (typeof EdgeRuntime === 'string')" to prevent instantiating Ably.Realtime instance during SSR in the Vercel Edge runtime.`,4e4,400);this._additionalTransportImplementations=I1.transportImplementationsFromPlugins(this.options.plugins),this._RealtimePresence=(c=(l=this.options.plugins)==null?void 0:l.RealtimePresence)!=null?c:null,this.connection=new GT(this,this.options),this._channels=new KT(this),this.options.autoConnect!==!1&&this.connect()}static transportImplementationsFromPlugins(o){const l={};return o!=null&&o.WebSocketTransport&&(l[bt.WebSocket]=o.WebSocketTransport),o!=null&&o.XHRPolling&&(l[bt.XhrPolling]=o.XHRPolling),l}get channels(){return this._channels}connect(){m.logAction(this.logger,m.LOG_MINOR,"Realtime.connect()",""),this.connection.connect()}close(){m.logAction(this.logger,m.LOG_MINOR,"Realtime.close()",""),this.connection.close()}};Rm.EventEmitter=ct;var $T=Rm,KT=class extends ct{constructor(i){super(i.logger),this.realtime=i,this.all=Object.create(null),i.connection.connectionManager.on("transport.active",()=>{this.onTransportActive()})}channelSerials(){let i={};for(const o of Gn(this.all,!0)){const l=this.all[o];l.properties.channelSerial&&(i[o]=l.properties.channelSerial)}return i}recoverChannels(i){for(const o of Gn(i,!0)){const l=this.get(o);l.properties.channelSerial=i[o]}}async processChannelMessage(i){const o=i.channel;if(o===void 0){m.logAction(this.logger,m.LOG_ERROR,"Channels.processChannelMessage()","received event unspecified channel, action = "+i.action);return}const l=this.all[o];if(!l){m.logAction(this.logger,m.LOG_ERROR,"Channels.processChannelMessage()","received event for non-existent channel: "+o);return}await l.processMessage(i)}onTransportActive(){for(const i in this.all){const o=this.all[i];o.state==="attaching"||o.state==="detaching"?o.checkPendingState():o.state==="suspended"?o._attach(!1,null):o.state==="attached"&&o.requestState("attaching")}}propogateConnectionInterruption(i,o){const l={closing:"detached",closed:"detached",failed:"failed",suspended:"suspended"},c=["attaching","attached","detaching","suspended"],d=l[i];for(const g in this.all){const R=this.all[g];c.includes(R.state)&&R.notifyState(d,o)}}get(i,o){i=String(i);let l=this.all[i];if(!l)l=this.all[i]=new _c(this.realtime,i,o);else if(o){if(l._shouldReattachToSetOptions(o,l.channelOptions))throw new N("Channels.get() cannot be used to set channel options that would cause the channel to reattach. Please, use RealtimeChannel.setOptions() instead.",4e4,400);l.setOptions(o)}return l}getDerived(i,o,l){if(o.filter){const c=On(o.filter),d=Ja(i);i=`[filter=${c}${d.qualifierParam}]${d.channelName}`}return this.get(i,l)}release(i){i=String(i);const o=this.all[i];if(!o)return;const l=o.getReleaseErr();if(l)throw l;delete this.all[i]}},QT=$T;function YT(i){return i.channel.client.auth.clientId}function Oc(i){const o=i.channel.client,l=o.auth.clientId;return(!l||l==="*")&&o.connection.state==="connected"}function XT(i,o,l){switch(i.state){case"attached":case"suspended":l();break;case"initialized":case"detached":case"detaching":case"attaching":tt(i.attach(),function(c){c?o(c):l()});break;default:o(N.fromValues(i.invalidStateError()))}}function Em(i,o){if(i.isSynthesized()||o.isSynthesized())return i.timestamp>=o.timestamp;const l=i.parseId(),c=o.parseId();return l.msgSerial===c.msgSerial?l.index>c.index:l.msgSerial>c.msgSerial}var JT=class extends ct{constructor(i){super(i.logger),this.channel=i,this.syncComplete=!1,this.members=new Pm(this,o=>o.clientId+":"+o.connectionId),this._myMembers=new Pm(this,o=>o.clientId),this.subscriptions=new ct(this.logger),this.pendingPresence=[]}async enter(i){if(Oc(this))throw new N("clientId must be specified to enter a presence channel",40012,400);return this._enterOrUpdateClient(void 0,void 0,i,"enter")}async update(i){if(Oc(this))throw new N("clientId must be specified to update presence data",40012,400);return this._enterOrUpdateClient(void 0,void 0,i,"update")}async enterClient(i,o){return this._enterOrUpdateClient(void 0,i,o,"enter")}async updateClient(i,o){return this._enterOrUpdateClient(void 0,i,o,"update")}async _enterOrUpdateClient(i,o,l,c){const d=this.channel;if(!d.connectionManager.activeState())throw d.connectionManager.getError();m.logAction(this.logger,m.LOG_MICRO,"RealtimePresence."+c+"Client()","channel = "+d.name+", id = "+i+", client = "+(o||"(implicit) "+YT(this)));const g=am(l);switch(g.action=c,i&&(g.id=i),o&&(g.clientId=o),await dc(g,d.channelOptions),d.state){case"attached":return new Promise((R,O)=>{d.sendPresence(g,b=>b?O(b):R())});case"initialized":case"detached":d.attach();case"attaching":return new Promise((R,O)=>{this.pendingPresence.push({presence:g,callback:b=>b?O(b):R()})});default:{const R=new ue("Unable to "+c+" presence channel while in "+d.state+" state",90001);throw R.code=90001,R}}}async leave(i){if(Oc(this))throw new N("clientId must have been specified to enter or leave a presence channel",40012,400);return this.leaveClient(void 0,i)}async leaveClient(i,o){const l=this.channel;if(!l.connectionManager.activeState())throw l.connectionManager.getError();m.logAction(this.logger,m.LOG_MICRO,"RealtimePresence.leaveClient()","leaving; channel = "+this.channel.name+", client = "+i);const c=am(o);return c.action="leave",i&&(c.clientId=i),new Promise((d,g)=>{switch(l.state){case"attached":l.sendPresence(c,R=>R?g(R):d());break;case"attaching":this.pendingPresence.push({presence:c,callback:R=>R?g(R):d()});break;case"initialized":case"failed":{const R=new ue("Unable to leave presence channel (incompatible state)",90001);g(R);break}default:g(l.invalidStateError())}})}async get(i){const o=!i||("waitForSync"in i?i.waitForSync:!0);return new Promise((l,c)=>{function d(g){l(i?g.list(i):g.values())}if(this.channel.state==="suspended"){o?c(N.fromValues({statusCode:400,code:91005,message:"Presence state is out of sync due to channel being in the SUSPENDED state"})):d(this.members);return}XT(this.channel,g=>c(g),()=>{const g=this.members;o?g.waitSync(function(){d(g)}):d(g)})})}async history(i){m.logAction(this.logger,m.LOG_MICRO,"RealtimePresence.history()","channel = "+this.name);const o=this.channel.client.rest.presenceMixin;if(i&&i.untilAttach)if(this.channel.state==="attached")delete i.untilAttach,i.from_serial=this.channel.properties.attachSerial;else throw new N("option untilAttach requires the channel to be attached, was: "+this.channel.state,4e4,400);return o.history(this,i)}setPresence(i,o,l){m.logAction(this.logger,m.LOG_MICRO,"RealtimePresence.setPresence()","received presence for "+i.length+" participants; syncChannelSerial = "+l);let c,d;const g=this.members,R=this._myMembers,O=[],b=this.channel.connectionManager.connectionId;o&&(this.members.startSync(),l&&(d=l.match(/^[\w-]+:(.*)$/))&&(c=d[1]));for(let I=0;I<i.length;I++){const U=dn(i[I]);switch(U.action){case"leave":g.remove(U)&&O.push(U),U.connectionId===b&&!U.isSynthesized()&&R.remove(U);break;case"enter":case"present":case"update":g.put(U)&&O.push(U),U.connectionId===b&&R.put(U);break}}o&&!c&&(g.endSync(),this.channel.syncChannelSerial=null);for(let I=0;I<O.length;I++){const U=O[I];this.subscriptions.emit(U.action,U)}}onAttached(i){m.logAction(this.logger,m.LOG_MINOR,"RealtimePresence.onAttached()","channel = "+this.channel.name+", hasPresence = "+i),i?this.members.startSync():(this._synthesizeLeaves(this.members.values()),this.members.clear()),this._ensureMyMembersPresent();const o=this.pendingPresence,l=o.length;if(l){this.pendingPresence=[];const c=[],d=G.create(this.logger);m.logAction(this.logger,m.LOG_MICRO,"RealtimePresence.onAttached","sending "+l+" queued presence messages");for(let g=0;g<l;g++){const R=o[g];c.push(R.presence),d.push(R.callback)}this.channel.sendPresence(c,d)}}actOnChannelState(i,o,l){switch(i){case"attached":this.onAttached(o);break;case"detached":case"failed":this._clearMyMembers(),this.members.clear();case"suspended":this.failPendingPresence(l);break}}failPendingPresence(i){if(this.pendingPresence.length){m.logAction(this.logger,m.LOG_MINOR,"RealtimeChannel.failPendingPresence","channel; name = "+this.channel.name+", err = "+xe(i));for(let o=0;o<this.pendingPresence.length;o++)try{this.pendingPresence[o].callback(i)}catch{}this.pendingPresence=[]}}_clearMyMembers(){this._myMembers.clear()}_ensureMyMembersPresent(){const i=this._myMembers,o=l=>{if(l){const c="Presence auto-re-enter failed: "+l.toString(),d=new N(c,91004,400);m.logAction(this.logger,m.LOG_ERROR,"RealtimePresence._ensureMyMembersPresent()",c);const g=new Ac(this.channel.state,this.channel.state,!0,!1,d);this.channel.emit("update",g)}};for(const l in i.map){const c=i.map[l];m.logAction(this.logger,m.LOG_MICRO,"RealtimePresence._ensureMyMembersPresent()",'Auto-reentering clientId "'+c.clientId+'" into the presence set'),tt(this._enterOrUpdateClient(c.id,c.clientId,c.data,"enter"),o)}}_synthesizeLeaves(i){const o=this.subscriptions;i.forEach(function(l){const c=dn({action:"leave",connectionId:l.connectionId,clientId:l.clientId,data:l.data,encoding:l.encoding,timestamp:Date.now()});o.emit("leave",c)})}async subscribe(...i){const o=_c.processListenerArgs(i),l=o[0],c=o[1],d=this.channel;if(d.state==="failed")throw N.fromValues(d.invalidStateError());this.subscriptions.on(l,c),await d.attach()}unsubscribe(...i){const o=_c.processListenerArgs(i),l=o[0],c=o[1];this.subscriptions.off(l,c)}},Pm=class extends ct{constructor(i,o){super(i.logger),this.presence=i,this.map=Object.create(null),this.syncInProgress=!1,this.residualMembers=null,this.memberKey=o}get(i){return this.map[i]}getClient(i){const o=this.map,l=[];for(const c in o){const d=o[c];d.clientId==i&&d.action!="absent"&&l.push(d)}return l}list(i){const o=this.map,l=i&&i.clientId,c=i&&i.connectionId,d=[];for(const g in o){const R=o[g];R.action!=="absent"&&(l&&l!=R.clientId||c&&c!=R.connectionId||d.push(R))}return d}put(i){(i.action==="enter"||i.action==="update")&&(i=dn(i),i.action="present");const o=this.map,l=this.memberKey(i);this.residualMembers&&delete this.residualMembers[l];const c=o[l];return c&&!Em(i,c)?!1:(o[l]=i,!0)}values(){const i=this.map,o=[];for(const l in i){const c=i[l];c.action!="absent"&&o.push(c)}return o}remove(i){const o=this.map,l=this.memberKey(i),c=o[l];return c&&!Em(i,c)?!1:(this.syncInProgress?(i=dn(i),i.action="absent",o[l]=i):delete o[l],!0)}startSync(){const i=this.map,o=this.syncInProgress;m.logAction(this.logger,m.LOG_MINOR,"PresenceMap.startSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+o),this.syncInProgress||(this.residualMembers=W(i),this.setInProgress(!0))}endSync(){const i=this.map,o=this.syncInProgress;if(m.logAction(this.logger,m.LOG_MINOR,"PresenceMap.endSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+o),o){for(const l in i)i[l].action==="absent"&&delete i[l];this.presence._synthesizeLeaves(En(this.residualMembers));for(const l in this.residualMembers)delete i[l];this.residualMembers=null,this.setInProgress(!1)}this.emit("sync")}waitSync(i){const o=this.syncInProgress;if(m.logAction(this.logger,m.LOG_MINOR,"PresenceMap.waitSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+o),!o){i();return}this.once("sync",i)}clear(){this.map={},this.setInProgress(!1),this.residualMembers=null}setInProgress(i){m.logAction(this.logger,m.LOG_MICRO,"PresenceMap.setInProgress()","inProgress = "+i),this.syncInProgress=i,this.presence.syncComplete=!i}},ZT=JT,eR=bt.WebSocket;function tR(i){return!!i.on}var nR=class extends es{constructor(i,o,l){super(i,o,l),this.shortName=eR,l.heartbeats=T.Config.useProtocolHeartbeats,this.wsHost=l.host}static isAvailable(){return!!T.Config.WebSocket}createWebSocket(i,o){return this.uri=i+Pn(o),new T.Config.WebSocket(this.uri)}toString(){return"WebSocketTransport; uri="+this.uri}connect(){m.logAction(this.logger,m.LOG_MINOR,"WebSocketTransport.connect()","starting"),es.prototype.connect.call(this);const i=this,o=this.params,l=o.options,d=(l.tls?"wss://":"ws://")+this.wsHost+":"+ae.getPort(l)+"/";m.logAction(this.logger,m.LOG_MINOR,"WebSocketTransport.connect()","uri: "+d),tt(this.auth.getAuthParams(),function(g,R){if(i.isDisposed)return;let O="";for(const I in R)O+=" "+I+": "+R[I]+";";if(m.logAction(i.logger,m.LOG_MINOR,"WebSocketTransport.connect()","authParams:"+O+" err: "+g),g){i.disconnect(g);return}const b=o.getConnectParams(R);try{const I=i.wsConnection=i.createWebSocket(d,b);I.binaryType=T.Config.binaryType,I.onopen=function(){i.onWsOpen()},I.onclose=function(U){i.onWsClose(U)},I.onmessage=function(U){i.onWsData(U.data)},I.onerror=function(U){i.onWsError(U)},tR(I)&&I.on("ping",function(){i.onActivity()})}catch(I){m.logAction(i.logger,m.LOG_ERROR,"WebSocketTransport.connect()","Unexpected exception creating websocket: err = "+(I.stack||I.message)),i.disconnect(I)}})}send(i){const o=this.wsConnection;if(!o){m.logAction(this.logger,m.LOG_ERROR,"WebSocketTransport.send()","No socket connection");return}try{o.send(AT(i,this.connectionManager.realtime._MsgPack,this.params.format))}catch(l){const c="Exception from ws connection when trying to send: "+xe(l);m.logAction(this.logger,m.LOG_ERROR,"WebSocketTransport.send()",c),this.finish("disconnected",new N(c,5e4,500))}}onWsData(i){m.logAction(this.logger,m.LOG_MICRO,"WebSocketTransport.onWsData()","data received; length = "+i.length+"; type = "+typeof i);try{this.onProtocolMessage(_T(i,this.connectionManager.realtime._MsgPack,this.connectionManager.realtime._RealtimePresence,this.format))}catch(o){m.logAction(this.logger,m.LOG_ERROR,"WebSocketTransport.onWsData()","Unexpected exception handing channel message: "+o.stack)}}onWsOpen(){m.logAction(this.logger,m.LOG_MINOR,"WebSocketTransport.onWsOpen()","opened WebSocket"),this.emit("preconnect")}onWsClose(i){let o,l;if(typeof i=="object"?(l=i.code,o=i.wasClean||l===1e3):(l=i,o=l==1e3),delete this.wsConnection,o){m.logAction(this.logger,m.LOG_MINOR,"WebSocketTransport.onWsClose()","Cleanly closed WebSocket");const c=new N("Websocket closed",80003,400);this.finish("disconnected",c)}else{const c="Unclean disconnection of WebSocket ; code = "+l,d=new N(c,80003,400);m.logAction(this.logger,m.LOG_MINOR,"WebSocketTransport.onWsClose()",c),this.finish("disconnected",d)}this.emit("disposed")}onWsError(i){m.logAction(this.logger,m.LOG_MINOR,"WebSocketTransport.onError()","Error from WebSocket: "+i.message),T.Config.nextTick(()=>{this.disconnect(Error(i.message))})}dispose(){m.logAction(this.logger,m.LOG_MINOR,"WebSocketTransport.dispose()",""),this.isDisposed=!0;const i=this.wsConnection;i&&(i.onmessage=function(){},delete this.wsConnection,T.Config.nextTick(()=>{if(m.logAction(this.logger,m.LOG_MICRO,"WebSocketTransport.dispose()","closing websocket"),!i)throw new Error("WebSocketTransport.dispose(): wsConnection is not defined");i.close()}))}},Am=nR,rR=class{static subscribeFilter(i,o,l){const c=d=>{var g,R,O,b,I,U;const B={name:d.name,refTimeserial:(R=(g=d.extras)==null?void 0:g.ref)==null?void 0:R.timeserial,refType:(b=(O=d.extras)==null?void 0:O.ref)==null?void 0:b.type,isRef:!!((U=(I=d.extras)==null?void 0:I.ref)!=null&&U.timeserial),clientId:d.clientId};Object.entries(o).find(([q,j])=>j!==void 0?B[q]!==j:!1)||l(d)};this.addFilteredSubscription(i,o,l,c),i.subscriptions.on(c)}static addFilteredSubscription(i,o,l,c){var d;if(i.filteredSubscriptions||(i.filteredSubscriptions=new Map),i.filteredSubscriptions.has(l)){const g=i.filteredSubscriptions.get(l);g.set(o,((d=g==null?void 0:g.get(o))==null?void 0:d.concat(c))||[c])}else i.filteredSubscriptions.set(l,new Map([[o,[c]]]))}static getAndDeleteFilteredSubscriptions(i,o,l){if(!i.filteredSubscriptions)return[];if(!l&&o)return Array.from(i.filteredSubscriptions.entries()).map(([g,R])=>{var O;let b=R.get(o);return R.delete(o),R.size===0&&((O=i.filteredSubscriptions)==null||O.delete(g)),b}).reduce((g,R)=>R?g.concat(...R):g,[]);if(!l||!i.filteredSubscriptions.has(l))return[];const c=i.filteredSubscriptions.get(l);if(!o){const g=Array.from(c.values()).reduce((R,O)=>R.concat(...O),[]);return i.filteredSubscriptions.delete(l),g}let d=c.get(o);return c.delete(o),d||[]}},Qn=class cd extends QT{constructor(o){var l;const c=cd._MsgPack;if(!c)throw new Error("Expected DefaultRealtime._MsgPack to have been set");super(ae.objectifyOptions(o,!0,"Realtime",m.defaultLogger,_(P({},cm),{Crypto:(l=cd.Crypto)!=null?l:void 0,MsgPack:c,RealtimePresence:{RealtimePresence:ZT,presenceMessageFromValues:dn,presenceMessagesFromValuesArray:om},WebSocketTransport:Am,MessageInteractions:rR})))}static get Crypto(){if(this._Crypto===null)throw new Error("Encryption not enabled; use ably.encryption.js instead");return this._Crypto}static set Crypto(o){this._Crypto=o}};Qn.Utils=Ae,Qn.ConnectionManager=Sm,Qn.ProtocolMessage=gm,Qn._Crypto=null,Qn.Message=hm,Qn.PresenceMessage=fm,Qn._MsgPack=null,Qn._Http=hc;var kc=Qn,xc=Uint8Array,So=Uint32Array,Mc=Math.pow,_m=new So(8),Om=[],Co=new So(64);function km(i){return(i-(i|0))*Mc(2,32)|0}for(var To=2,Ro=0;Ro<64;){for(Ic=!0,cl=2;cl<=To/2;cl++)To%cl===0&&(Ic=!1);Ic&&(Ro<8&&(_m[Ro]=km(Mc(To,1/2))),Om[Ro]=km(Mc(To,1/3)),Ro++),To++}var Ic,cl,iR=!!new xc(new So([1]).buffer)[0];function bc(i){return iR?i>>>24|(i>>>16&255)<<8|(i&65280)<<8|i<<24:i}function xn(i,o){return i>>>o|i<<32-o}function Lc(i){var o=_m.slice(),l=i.length,c=l*8,d=512-(c+64)%512-1+c+65,g=new xc(d/8),R=new So(g.buffer);g.set(i,0),g[l]=128,R[R.length-1]=bc(c);for(var O,b=0;b<d/32;b+=16){var I=o.slice();for(O=0;O<64;O++){var U;if(O<16)U=bc(R[b+O]);else{var B=Co[O-15],q=Co[O-2];U=Co[O-7]+Co[O-16]+(xn(B,7)^xn(B,18)^B>>>3)+(xn(q,17)^xn(q,19)^q>>>10)}Co[O]=U|=0;for(var j=(xn(I[4],6)^xn(I[4],11)^xn(I[4],25))+(I[4]&I[5]^~I[4]&I[6])+I[7]+U+Om[O],K=(xn(I[0],2)^xn(I[0],13)^xn(I[0],22))+(I[0]&I[1]^I[2]&(I[0]^I[1])),ee=7;ee>0;ee--)I[ee]=I[ee-1];I[0]=j+K|0,I[4]=I[4]+j|0}for(O=0;O<8;O++)o[O]=o[O]+I[O]|0}return new xc(new So(o.map(function(ce){return bc(ce)})).buffer)}function sR(i,o){if(i.length>64&&(i=Lc(i)),i.length<64){const O=new Uint8Array(64);O.set(i,0),i=O}for(var l=new Uint8Array(64),c=new Uint8Array(64),d=0;d<64;d++)l[d]=54^i[d],c[d]=92^i[d];var g=new Uint8Array(o.length+64);g.set(l,0),g.set(o,64);var R=new Uint8Array(96);return R.set(c,0),R.set(Lc(g),64),Lc(R)}var oR=class{constructor(){this.base64CharSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.hexCharSet="0123456789abcdef"}uint8ViewToBase64(i){let o="";const l=this.base64CharSet,c=i.byteLength,d=c%3,g=c-d;let R,O,b,I,U;for(let B=0;B<g;B=B+3)U=i[B]<<16|i[B+1]<<8|i[B+2],R=(U&16515072)>>18,O=(U&258048)>>12,b=(U&4032)>>6,I=U&63,o+=l[R]+l[O]+l[b]+l[I];return d==1?(U=i[g],R=(U&252)>>2,O=(U&3)<<4,o+=l[R]+l[O]+"=="):d==2&&(U=i[g]<<8|i[g+1],R=(U&64512)>>10,O=(U&1008)>>4,b=(U&15)<<2,o+=l[R]+l[O]+l[b]+"="),o}base64ToArrayBuffer(i){const o=atob==null?void 0:atob(i),l=o.length,c=new Uint8Array(l);for(let d=0;d<l;d++){const g=o.charCodeAt(d);c[d]=g}return this.toArrayBuffer(c)}isBuffer(i){return i instanceof ArrayBuffer||ArrayBuffer.isView(i)}toBuffer(i){if(!ArrayBuffer)throw new Error("Can't convert to Buffer: browser does not support the necessary types");if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(this.toArrayBuffer(i));throw new Error("BufferUtils.toBuffer expected an ArrayBuffer or a view onto one")}toArrayBuffer(i){if(!ArrayBuffer)throw new Error("Can't convert to ArrayBuffer: browser does not support the necessary types");if(i instanceof ArrayBuffer)return i;if(ArrayBuffer.isView(i))return i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength);throw new Error("BufferUtils.toArrayBuffer expected an ArrayBuffer or a view onto one")}base64Encode(i){return this.uint8ViewToBase64(this.toBuffer(i))}base64Decode(i){if(ArrayBuffer&&T.Config.atob)return this.base64ToArrayBuffer(i);throw new Error("Expected ArrayBuffer to exist and Platform.Config.atob to be configured")}hexEncode(i){return this.toBuffer(i).reduce((l,c)=>l+c.toString(16).padStart(2,"0"),"")}hexDecode(i){if(i.length%2!==0)throw new Error("Can't create a byte array from a hex string of odd length");const o=new Uint8Array(i.length/2);for(let l=0;l<o.length;l++)o[l]=parseInt(i.slice(2*l,2*(l+1)),16);return this.toArrayBuffer(o)}utf8Encode(i){if(T.Config.TextEncoder){const o=new T.Config.TextEncoder().encode(i);return this.toArrayBuffer(o)}else throw new Error("Expected TextEncoder to be configured")}utf8Decode(i){if(!this.isBuffer(i))throw new Error("Expected input of utf8decode to be an arraybuffer or typed array");if(TextDecoder)return new TextDecoder().decode(i);throw new Error("Expected TextDecoder to be configured")}areBuffersEqual(i,o){if(!i||!o)return!1;const l=this.toArrayBuffer(i),c=this.toArrayBuffer(o);if(l.byteLength!=c.byteLength)return!1;const d=new Uint8Array(l),g=new Uint8Array(c);for(var R=0;R<d.length;R++)if(d[R]!=g[R])return!1;return!0}byteLength(i){return i instanceof ArrayBuffer||ArrayBuffer.isView(i)?i.byteLength:-1}arrayBufferViewToBuffer(i){return this.toArrayBuffer(i)}hmacSha256(i,o){const l=sR(this.toBuffer(o),this.toBuffer(i));return this.toArrayBuffer(l)}},xm=new oR,aR=function(i,o){var l="aes",c=256,d="cbc",g=16;function R(q){if(q.algorithm==="aes"&&q.mode==="cbc"){if(q.keyLength===128||q.keyLength===256)return;throw new Error("Unsupported key length "+q.keyLength+" for aes-cbc encryption. Encryption key must be 128 or 256 bits (16 or 32 ASCII characters)")}}function O(q){return q.replace("_","/").replace("-","+")}function b(q){return q instanceof I}class I{constructor(j,K,ee,ce){this.algorithm=j,this.keyLength=K,this.mode=ee,this.key=ce}}class U{static getDefaultParams(j){var K;if(!j.key)throw new Error("Crypto.getDefaultParams: a key is required");typeof j.key=="string"?K=o.toArrayBuffer(o.base64Decode(O(j.key))):j.key instanceof ArrayBuffer?K=j.key:K=o.toArrayBuffer(j.key);var ee=j.algorithm||l,ce=K.byteLength*8,Pe=j.mode||d,_e=new I(ee,ce,Pe,K);if(j.keyLength&&j.keyLength!==_e.keyLength)throw new Error("Crypto.getDefaultParams: a keyLength of "+j.keyLength+" was specified, but the key actually has length "+_e.keyLength);return R(_e),_e}static async generateRandomKey(j){try{return i.getRandomArrayBuffer((j||c)/8)}catch(K){throw new N("Failed to generate random key: "+K.message,400,5e4,K)}}static getCipher(j,K){var ee,ce=b(j)?j:this.getDefaultParams(j);return{cipherParams:ce,cipher:new B(ce,(ee=j.iv)!=null?ee:null,K)}}}U.CipherParams=I;class B{constructor(j,K,ee){if(this.logger=ee,!crypto.subtle)throw isSecureContext?new Error("Crypto operations are not possible since the browser’s SubtleCrypto class is unavailable (reason unknown)."):new Error("Crypto operations are is not possible since the current environment is a non-secure context and hence the browser’s SubtleCrypto class is not available.");this.algorithm=j.algorithm+"-"+String(j.keyLength)+"-"+j.mode,this.webCryptoAlgorithm=j.algorithm+"-"+j.mode,this.key=o.toArrayBuffer(j.key),this.iv=K?o.toArrayBuffer(K):null}concat(j,K){const ee=new ArrayBuffer(j.byteLength+K.byteLength),ce=new DataView(ee),Pe=new DataView(o.toArrayBuffer(j));for(let De=0;De<Pe.byteLength;De++)ce.setInt8(De,Pe.getInt8(De));const _e=new DataView(o.toArrayBuffer(K));for(let De=0;De<_e.byteLength;De++)ce.setInt8(Pe.byteLength+De,_e.getInt8(De));return ee}async encrypt(j){m.logAction(this.logger,m.LOG_MICRO,"CBCCipher.encrypt()","");const K=await this.getIv(),ee=await crypto.subtle.importKey("raw",this.key,this.webCryptoAlgorithm,!1,["encrypt"]),ce=await crypto.subtle.encrypt({name:this.webCryptoAlgorithm,iv:K},ee,j);return this.concat(K,ce)}async decrypt(j){m.logAction(this.logger,m.LOG_MICRO,"CBCCipher.decrypt()","");const K=o.toArrayBuffer(j),ee=K.slice(0,g),ce=K.slice(g),Pe=await crypto.subtle.importKey("raw",this.key,this.webCryptoAlgorithm,!1,["decrypt"]);return crypto.subtle.decrypt({name:this.webCryptoAlgorithm,iv:ee},Pe,ce)}async getIv(){if(this.iv){var j=this.iv;return this.iv=null,j}const K=await i.getRandomArrayBuffer(g);return o.toArrayBuffer(K)}}return U},Mm=(i=>(i[i.REQ_SEND=0]="REQ_SEND",i[i.REQ_RECV=1]="REQ_RECV",i[i.REQ_RECV_POLL=2]="REQ_RECV_POLL",i[i.REQ_RECV_STREAM=3]="REQ_RECV_STREAM",i))(Mm||{}),Yn=Mm;function Im(){return new N("No HTTP request plugin provided. Provide at least one of the FetchRequest or XHRRequest plugins.",400,4e4)}var Eo,bm=(Eo=class{constructor(i){this.checksInProgress=null,this.checkConnectivity=void 0,this.supportsAuthHeaders=!1,this.supportsLinkHeaders=!1;var o;this.client=i??null;const l=(i==null?void 0:i.options.connectivityCheckUrl)||ae.connectivityCheckUrl,c=(o=i==null?void 0:i.options.connectivityCheckParams)!=null?o:null,d=!(i!=null&&i.options.connectivityCheckUrl),g=P(P({},bm.bundledRequestImplementations),i==null?void 0:i._additionalHTTPRequestImplementations),R=g.XHRRequest,O=g.FetchRequest,b=!!(R||O);if(!b)throw Im();T.Config.xhrSupported&&R?(this.supportsAuthHeaders=!0,this.Request=async function(I,U,B,q,j){return new Promise(K=>{var ee;const ce=R.createRequest(U,B,q,j,Yn.REQ_SEND,(ee=i&&i.options.timeouts)!=null?ee:null,this.logger,I);ce.once("complete",(Pe,_e,De,fe,zt)=>K({error:Pe,body:_e,headers:De,unpacked:fe,statusCode:zt})),ce.exec()})},i!=null&&i.options.disableConnectivityCheck?this.checkConnectivity=async function(){return!0}:this.checkConnectivity=async function(){var I;m.logAction(this.logger,m.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Sending; "+l);const U=await this.doUri(le.Get,l,null,null,c);let B=!1;return d?B=!U.error&&((I=U.body)==null?void 0:I.replace(/\n/,""))=="yes":B=!U.error&&Qe(U.statusCode),m.logAction(this.logger,m.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Result: "+B),B}):T.Config.fetchSupported&&O?(this.supportsAuthHeaders=!0,this.Request=async(I,U,B,q,j)=>O(I,i??null,U,B,q,j),this.checkConnectivity=async function(){var I;m.logAction(this.logger,m.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Sending; "+l);const U=await this.doUri(le.Get,l,null,null,null),B=!U.error&&((I=U.body)==null?void 0:I.replace(/\n/,""))=="yes";return m.logAction(this.logger,m.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Result: "+B),B}):this.Request=async()=>({error:b?new ue("no supported HTTP transports available",null,400):Im()})}get logger(){var i,o;return(o=(i=this.client)==null?void 0:i.logger)!=null?o:m.defaultLogger}async doUri(i,o,l,c,d){return this.Request?this.Request(i,o,l,d,c):{error:new ue("Request invoked before assigned to",null,500)}}shouldFallback(i){const o=i.statusCode;return o===408&&!i.code||o===400&&!i.code||o>=500&&o<=504}},Eo.methods=[le.Get,le.Delete,le.Post,le.Put,le.Patch],Eo.methodsWithoutBody=[le.Get,le.Delete],Eo.methodsWithBody=[le.Post,le.Put,le.Patch],Eo),Lm=bm,ts="ablyjs-storage-test",ns=typeof Xn<"u"?Xn:typeof window<"u"?window:self,lR=class{constructor(){try{ns.sessionStorage.setItem(ts,ts),ns.sessionStorage.removeItem(ts),this.sessionSupported=!0}catch{this.sessionSupported=!1}try{ns.localStorage.setItem(ts,ts),ns.localStorage.removeItem(ts),this.localSupported=!0}catch{this.localSupported=!1}}get(i){return this._get(i,!1)}getSession(i){return this._get(i,!0)}remove(i){return this._remove(i,!1)}removeSession(i){return this._remove(i,!0)}set(i,o,l){return this._set(i,o,l,!1)}setSession(i,o,l){return this._set(i,o,l,!0)}_set(i,o,l,c){const d={value:o};return l&&(d.expires=Date.now()+l),this.storageInterface(c).setItem(i,JSON.stringify(d))}_get(i,o){if(o&&!this.sessionSupported)throw new Error("Session Storage not supported");if(!o&&!this.localSupported)throw new Error("Local Storage not supported");const l=this.storageInterface(o).getItem(i);if(!l)return null;const c=JSON.parse(l);return c.expires&&c.expires<Date.now()?(this.storageInterface(o).removeItem(i),null):c.value}_remove(i,o){return this.storageInterface(o).removeItem(i)}storageInterface(i){return i?ns.sessionStorage:ns.localStorage}},Dm=new lR,ze=li(),uR=typeof EdgeRuntime=="string";typeof Window>"u"&&typeof WorkerGlobalScope>"u"&&!uR&&console.log("Warning: this distribution of Ably is intended for browsers. On nodejs, please use the 'ably' package on npm");function cR(){const i=ze.location;return!ze.WebSocket||!i||!i.origin||i.origin.indexOf("http")>-1}function hR(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}var fR=ze.navigator&&ze.navigator.userAgent.toString(),dR=ze.location&&ze.location.href,pR={agent:"browser",logTimestamps:!0,userAgent:fR,currentUrl:dR,binaryType:"arraybuffer",WebSocket:ze.WebSocket,fetchSupported:!!ze.fetch,xhrSupported:ze.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,allowComet:cR(),useProtocolHeartbeats:!0,supportsBinary:!!ze.TextDecoder,preferBinary:!1,ArrayBuffer:ze.ArrayBuffer,atob:ze.atob,nextTick:typeof ze.setImmediate<"u"?ze.setImmediate.bind(ze):function(i){setTimeout(i,0)},addEventListener:ze.addEventListener,inspect:JSON.stringify,stringByteSize:function(i){return ze.TextDecoder&&new ze.TextEncoder().encode(i).length||i.length},TextEncoder:ze.TextEncoder,TextDecoder:ze.TextDecoder,getRandomArrayBuffer:async function(i){const o=new Uint8Array(i);return ze.crypto.getRandomValues(o),o.buffer},isWebworker:hR(),push:{platform:"browser",formFactor:"desktop",storage:Dm}},Nm=pR;function mR(i){const o=[80015,80017,80030];return i.code?$n.isTokenErr(i)?!1:o.includes(i.code)?!0:i.code>=4e4&&i.code<5e4:!1}function Dc(i){return mR(i)?[kn({action:de.ERROR,error:i})]:[kn({action:de.DISCONNECTED,error:i})]}var gR=class extends es{constructor(i,o,l){super(i,o,l,!0),this.onAuthUpdated=c=>{this.authParams={access_token:c.token}},this.stream="stream"in l?l.stream:!0,this.sendRequest=null,this.recvRequest=null,this.pendingCallback=null,this.pendingItems=null}connect(){m.logAction(this.logger,m.LOG_MINOR,"CometTransport.connect()","starting"),es.prototype.connect.call(this);const i=this.params,o=i.options,l=ae.getHost(o,i.host),c=ae.getPort(o),d=o.tls?"https://":"http://";this.baseUri=d+l+":"+c+"/comet/";const g=this.baseUri+"connect";m.logAction(this.logger,m.LOG_MINOR,"CometTransport.connect()","uri: "+g),tt(this.auth.getAuthParams(),(R,O)=>{if(R){this.disconnect(R);return}if(this.isDisposed)return;this.authParams=O;const b=this.params.getConnectParams(O);"stream"in b&&(this.stream=b.stream),m.logAction(this.logger,m.LOG_MINOR,"CometTransport.connect()","connectParams:"+Pn(b));let I=!1;const U=this.recvRequest=this.createRequest(g,null,b,null,this.stream?Yn.REQ_RECV_STREAM:Yn.REQ_RECV);U.on("data",B=>{this.recvRequest&&(I||(I=!0,this.emit("preconnect")),this.onData(B))}),U.on("complete",B=>{if(this.recvRequest||(B=B||new N("Request cancelled",80003,400)),this.recvRequest=null,!I&&!B&&(I=!0,this.emit("preconnect")),this.onActivity(),B){B.code?this.onData(Dc(B)):this.disconnect(B);return}T.Config.nextTick(()=>{this.recv()})}),U.exec()})}requestClose(){m.logAction(this.logger,m.LOG_MINOR,"CometTransport.requestClose()"),this._requestCloseOrDisconnect(!0)}requestDisconnect(){m.logAction(this.logger,m.LOG_MINOR,"CometTransport.requestDisconnect()"),this._requestCloseOrDisconnect(!1)}_requestCloseOrDisconnect(i){const o=i?this.closeUri:this.disconnectUri;if(o){const l=this.createRequest(o,null,this.authParams,null,Yn.REQ_SEND);l.on("complete",c=>{c&&(m.logAction(this.logger,m.LOG_ERROR,"CometTransport.request"+(i?"Close()":"Disconnect()"),"request returned err = "+xe(c)),this.finish("disconnected",c))}),l.exec()}}dispose(){m.logAction(this.logger,m.LOG_MINOR,"CometTransport.dispose()",""),this.isDisposed||(this.isDisposed=!0,this.recvRequest&&(m.logAction(this.logger,m.LOG_MINOR,"CometTransport.dispose()","aborting recv request"),this.recvRequest.abort(),this.recvRequest=null),this.finish("disconnected",Er.disconnected()),T.Config.nextTick(()=>{this.emit("disposed")}))}onConnect(i){var o;if(this.isDisposed)return;const l=(o=i.connectionDetails)==null?void 0:o.connectionKey;es.prototype.onConnect.call(this,i);const c=this.baseUri+l;m.logAction(this.logger,m.LOG_MICRO,"CometTransport.onConnect()","baseUri = "+c),this.sendUri=c+"/send",this.recvUri=c+"/recv",this.closeUri=c+"/close",this.disconnectUri=c+"/disconnect"}send(i){if(this.sendRequest){this.pendingItems=this.pendingItems||[],this.pendingItems.push(i);return}const o=this.pendingItems||[];o.push(i),this.pendingItems=null,this.sendItems(o)}sendAnyPending(){const i=this.pendingItems;i&&(this.pendingItems=null,this.sendItems(i))}sendItems(i){const o=this.sendRequest=this.createRequest(this.sendUri,null,this.authParams,this.encodeRequest(i),Yn.REQ_SEND);o.on("complete",(l,c)=>{if(l&&m.logAction(this.logger,m.LOG_ERROR,"CometTransport.sendItems()","on complete: err = "+xe(l)),this.sendRequest=null,l){l.code?this.onData(Dc(l)):this.disconnect(l);return}c&&this.onData(c),this.pendingItems&&T.Config.nextTick(()=>{this.sendRequest||this.sendAnyPending()})}),o.exec()}recv(){if(this.recvRequest||!this.isConnected)return;const i=this.recvRequest=this.createRequest(this.recvUri,null,this.authParams,null,this.stream?Yn.REQ_RECV_STREAM:Yn.REQ_RECV_POLL);i.on("data",o=>{this.onData(o)}),i.on("complete",o=>{if(this.recvRequest=null,this.onActivity(),o){o.code?this.onData(Dc(o)):this.disconnect(o);return}T.Config.nextTick(()=>{this.recv()})}),i.exec()}onData(i){try{const o=this.decodeResponse(i);if(o&&o.length)for(let l=0;l<o.length;l++)this.onProtocolMessage(Sc(o[l],this.connectionManager.realtime._RealtimePresence))}catch(o){m.logAction(this.logger,m.LOG_ERROR,"CometTransport.onData()","Unexpected exception handing channel event: "+o.stack)}}encodeRequest(i){return JSON.stringify(i)}decodeResponse(i){return typeof i=="string"?JSON.parse(i):i}},yR=gR;function vR(i,o){return qi(Gn(o)).includes("x-ably-errorcode")}function wR(i,o){if(vR(i,o))return i.error&&N.fromValues(i.error)}var SR=function(){},CR=0,Um={};function TR(i,o){return i.getResponseHeader&&i.getResponseHeader(o)}function RR(i){return i.getResponseHeader&&(i.getResponseHeader("transfer-encoding")||!i.getResponseHeader("content-length"))}function ER(i){const o=i.getAllResponseHeaders().trim().split(`\r
`),l={};for(let c=0;c<o.length;c++){const d=o[c].split(":").map(g=>g.trim());l[d[0].toLowerCase()]=d[1]}return l}var PR=class b1 extends ct{constructor(o,l,c,d,g,R,O,b){super(O),c=c||{},c.rnd=An(),this.uri=o+Pn(c),this.headers=l||{},this.body=d,this.method=b?b.toUpperCase():re(d)?"GET":"POST",this.requestMode=g,this.timeouts=R,this.timedOut=!1,this.requestComplete=!1,this.id=String(++CR),Um[this.id]=this}static createRequest(o,l,c,d,g,R,O,b){const I=R||ae.TIMEOUTS;return new b1(o,l,W(c),d,g,I,O,b)}complete(o,l,c,d,g){this.requestComplete||(this.requestComplete=!0,!o&&l&&this.emit("data",l),this.emit("complete",o,l,c,d,g),this.dispose())}abort(){this.dispose()}exec(){let o=this.headers;const l=this.requestMode==Yn.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout,c=this.timer=setTimeout(()=>{this.timedOut=!0,g.abort()},l),d=this.method,g=this.xhr=new XMLHttpRequest,R=o.accept;let O=this.body,b="text";R?R.indexOf("application/x-msgpack")===0&&(b="arraybuffer"):o.accept="application/json",O&&(o["content-type"]||(o["content-type"]="application/json")).indexOf("application/json")>-1&&typeof O!="string"&&(O=JSON.stringify(O)),g.open(d,this.uri,!0),g.responseType=b,"authorization"in o&&(g.withCredentials=!0);for(const fe in o)g.setRequestHeader(fe,o[fe]);const I=(fe,zt,ht,Oo)=>{var rs;let Bc=zt+" (event type: "+fe.type+")";(rs=this==null?void 0:this.xhr)!=null&&rs.statusText&&(Bc+=", current statusText is "+this.xhr.statusText),m.logAction(this.logger,m.LOG_ERROR,"Request.on"+fe.type+"()",Bc),this.complete(new ue(Bc,ht,Oo))};g.onerror=function(fe){I(fe,"XHR error occurred",null,400)},g.onabort=fe=>{this.timedOut?I(fe,"Request aborted due to request timeout expiring",null,408):I(fe,"Request cancelled",null,400)},g.ontimeout=function(fe){I(fe,"Request timed out",null,408)};let U,B,q,j=0,K=!1;const ee=()=>{if(clearTimeout(c),q=B<400,B==204){this.complete(null,null,null,null,B);return}U=this.requestMode==Yn.REQ_RECV_STREAM&&q&&RR(g)},ce=()=>{let fe;try{const ht=TR(g,"content-type");if(ht?ht.indexOf("application/json")>=0:g.responseType=="text"){const rs=g.responseType==="arraybuffer"?T.BufferUtils.utf8Decode(g.response):String(g.responseText);rs.length?fe=JSON.parse(rs):fe=rs,K=!0}else fe=g.response;fe.response!==void 0?(B=fe.statusCode,q=B<400,o=fe.headers,fe=fe.response):o=ER(g)}catch(ht){this.complete(new ue("Malformed response body from server: "+ht.message,null,400));return}if(q||Array.isArray(fe)){this.complete(null,fe,o,K,B);return}let zt=wR(fe,o);zt||(zt=new ue("Error response received from server: "+B+" body was: "+T.Config.inspect(fe),null,B)),this.complete(zt,fe,o,K,B)};function Pe(){const fe=g.responseText,zt=fe.length-1;let ht,Oo;for(;j<zt&&(ht=fe.indexOf(`
`,j))>-1;)Oo=fe.slice(j,ht),j=ht+1,_e(Oo)}const _e=fe=>{try{fe=JSON.parse(fe)}catch(zt){this.complete(new ue("Malformed response body from server: "+zt.message,null,400));return}this.emit("data",fe)},De=()=>{Pe(),this.streamComplete=!0,T.Config.nextTick(()=>{this.complete()})};g.onreadystatechange=function(){const fe=g.readyState;fe<3||g.status!==0&&(B===void 0&&(B=g.status,ee()),fe==3&&U?Pe():fe==4&&(U?De():ce()))},g.send(O)}dispose(){const o=this.xhr;if(o){o.onreadystatechange=o.onerror=o.onabort=o.ontimeout=SR,this.xhr=null;const l=this.timer;l&&(clearTimeout(l),this.timer=null),this.requestComplete||o.abort()}delete Um[this.id]}},Fm=PR,Bm=bt.XhrPolling,AR=class extends yR{constructor(i,o,l){super(i,o,l),this.shortName=Bm,l.stream=!1,this.shortName=Bm}static isAvailable(){return!!(T.Config.xhrSupported&&T.Config.allowComet)}toString(){return"XHRPollingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected}createRequest(i,o,l,c,d){return Fm.createRequest(i,o,l,c,d,this.timeouts,this.logger)}},_R=AR,OR=["xhr_polling"],kR={order:OR,bundledImplementations:{web_socket:Am,xhr_polling:_R}},xR=kR,MR={connectivityCheckUrl:"https://internet-up.ably-realtime.com/is-the-internet-up.txt",wsConnectivityUrl:"wss://ws-up.ably-realtime.com",defaultTransports:[bt.XhrPolling,bt.WebSocket]},IR=MR;function bR(i){if(i===void 0)return"undefined";let o,l;if(i instanceof ArrayBuffer?(l="ArrayBuffer",o=new DataView(i)):i instanceof DataView&&(l="DataView",o=i),!o)return JSON.stringify(i);const c=[];for(let d=0;d<i.byteLength;d++){if(d>20){c.push("...");break}let g=o.getUint8(d).toString(16);g.length===1&&(g="0"+g),c.push(g)}return"<"+l+" "+c.join(" ")+">"}function Po(i,o,l){for(let c=0,d=l.length;c<d;c++){const g=l.charCodeAt(c);if(g<128){i.setUint8(o++,g>>>0&127|0);continue}if(g<2048){i.setUint8(o++,g>>>6&31|192),i.setUint8(o++,g>>>0&63|128);continue}if(g<65536){i.setUint8(o++,g>>>12&15|224),i.setUint8(o++,g>>>6&63|128),i.setUint8(o++,g>>>0&63|128);continue}if(g<1114112){i.setUint8(o++,g>>>18&7|240),i.setUint8(o++,g>>>12&63|128),i.setUint8(o++,g>>>6&63|128),i.setUint8(o++,g>>>0&63|128);continue}throw new Error("bad codepoint "+g)}}function Vm(i,o,l){let c="";for(let d=o,g=o+l;d<g;d++){const R=i.getUint8(d);if(!(R&128)){c+=String.fromCharCode(R);continue}if((R&224)===192){c+=String.fromCharCode((R&15)<<6|i.getUint8(++d)&63);continue}if((R&240)===224){c+=String.fromCharCode((R&15)<<12|(i.getUint8(++d)&63)<<6|(i.getUint8(++d)&63)<<0);continue}if((R&248)===240){c+=String.fromCharCode((R&7)<<18|(i.getUint8(++d)&63)<<12|(i.getUint8(++d)&63)<<6|(i.getUint8(++d)&63)<<0);continue}throw new Error("Invalid byte "+R.toString(16))}return c}function Nc(i){let o=0;for(let l=0,c=i.length;l<c;l++){const d=i.charCodeAt(l);if(d<128){o+=1;continue}if(d<2048){o+=2;continue}if(d<65536){o+=3;continue}if(d<1114112){o+=4;continue}throw new Error("bad codepoint "+d)}return o}function LR(i,o){const l=_o(i,o);if(l===0)return;const c=new ArrayBuffer(l),d=new DataView(c);return Ao(i,d,0,o),c}var Uc=65536*65536,jm=1/Uc;function DR(i,o){return o=o||0,i.getInt32(o)*Uc+i.getUint32(o+4)}function NR(i,o){return o=o||0,i.getUint32(o)*Uc+i.getUint32(o+4)}function UR(i,o,l){l<9223372036854776e3?(i.setInt32(o,Math.floor(l*jm)),i.setInt32(o+4,l&-1)):(i.setUint32(o,2147483647),i.setUint32(o+4,2147483647))}function FR(i,o,l){l<18446744073709552e3?(i.setUint32(o,Math.floor(l*jm)),i.setInt32(o+4,l&-1)):(i.setUint32(o,4294967295),i.setUint32(o+4,4294967295))}var BR=class{constructor(i,o){this.map=l=>{const c={};for(let d=0;d<l;d++){const g=this.parse();c[g]=this.parse()}return c},this.bin=l=>{const c=new ArrayBuffer(l);return new Uint8Array(c).set(new Uint8Array(this.view.buffer,this.offset,l),0),this.offset+=l,c},this.buf=this.bin,this.str=l=>{const c=Vm(this.view,this.offset,l);return this.offset+=l,c},this.array=l=>{const c=new Array(l);for(let d=0;d<l;d++)c[d]=this.parse();return c},this.ext=l=>(this.offset+=l,{type:this.view.getInt8(this.offset),data:this.buf(l)}),this.parse=()=>{const l=this.view.getUint8(this.offset);let c,d;if(!(l&128))return this.offset++,l;if((l&240)===128)return d=l&15,this.offset++,this.map(d);if((l&240)===144)return d=l&15,this.offset++,this.array(d);if((l&224)===160)return d=l&31,this.offset++,this.str(d);if((l&224)===224)return c=this.view.getInt8(this.offset),this.offset++,c;switch(l){case 192:return this.offset++,null;case 193:this.offset++;return;case 194:return this.offset++,!1;case 195:return this.offset++,!0;case 196:return d=this.view.getUint8(this.offset+1),this.offset+=2,this.bin(d);case 197:return d=this.view.getUint16(this.offset+1),this.offset+=3,this.bin(d);case 198:return d=this.view.getUint32(this.offset+1),this.offset+=5,this.bin(d);case 199:return d=this.view.getUint8(this.offset+1),this.offset+=2,this.ext(d);case 200:return d=this.view.getUint16(this.offset+1),this.offset+=3,this.ext(d);case 201:return d=this.view.getUint32(this.offset+1),this.offset+=5,this.ext(d);case 202:return c=this.view.getFloat32(this.offset+1),this.offset+=5,c;case 203:return c=this.view.getFloat64(this.offset+1),this.offset+=9,c;case 204:return c=this.view.getUint8(this.offset+1),this.offset+=2,c;case 205:return c=this.view.getUint16(this.offset+1),this.offset+=3,c;case 206:return c=this.view.getUint32(this.offset+1),this.offset+=5,c;case 207:return c=NR(this.view,this.offset+1),this.offset+=9,c;case 208:return c=this.view.getInt8(this.offset+1),this.offset+=2,c;case 209:return c=this.view.getInt16(this.offset+1),this.offset+=3,c;case 210:return c=this.view.getInt32(this.offset+1),this.offset+=5,c;case 211:return c=DR(this.view,this.offset+1),this.offset+=9,c;case 212:return d=1,this.offset++,this.ext(d);case 213:return d=2,this.offset++,this.ext(d);case 214:return d=4,this.offset++,this.ext(d);case 215:return d=8,this.offset++,this.ext(d);case 216:return d=16,this.offset++,this.ext(d);case 217:return d=this.view.getUint8(this.offset+1),this.offset+=2,this.str(d);case 218:return d=this.view.getUint16(this.offset+1),this.offset+=3,this.str(d);case 219:return d=this.view.getUint32(this.offset+1),this.offset+=5,this.str(d);case 220:return d=this.view.getUint16(this.offset+1),this.offset+=3,this.array(d);case 221:return d=this.view.getUint32(this.offset+1),this.offset+=5,this.array(d);case 222:return d=this.view.getUint16(this.offset+1),this.offset+=3,this.map(d);case 223:return d=this.view.getUint32(this.offset+1),this.offset+=5,this.map(d)}throw new Error("Unknown type 0x"+l.toString(16))},this.offset=o||0,this.view=i}};function VR(i){const o=new DataView(i),l=new BR(o),c=l.parse();if(l.offset!==i.byteLength)throw new Error(i.byteLength-l.offset+" trailing bytes");return c}function zm(i,o){return Object.keys(i).filter(function(l){const c=i[l],d=typeof c;return(!o||c!=null)&&(d!=="function"||!!c.toJSON)})}function Ao(i,o,l,c){const d=typeof i;if(typeof i=="string"){const g=Nc(i);if(g<32)return o.setUint8(l,g|160),Po(o,l+1,i),1+g;if(g<256)return o.setUint8(l,217),o.setUint8(l+1,g),Po(o,l+2,i),2+g;if(g<65536)return o.setUint8(l,218),o.setUint16(l+1,g),Po(o,l+3,i),3+g;if(g<4294967296)return o.setUint8(l,219),o.setUint32(l+1,g),Po(o,l+5,i),5+g}if(ArrayBuffer.isView&&ArrayBuffer.isView(i)&&(i=i.buffer),i instanceof ArrayBuffer){const g=i.byteLength;if(g<256)return o.setUint8(l,196),o.setUint8(l+1,g),new Uint8Array(o.buffer).set(new Uint8Array(i),l+2),2+g;if(g<65536)return o.setUint8(l,197),o.setUint16(l+1,g),new Uint8Array(o.buffer).set(new Uint8Array(i),l+3),3+g;if(g<4294967296)return o.setUint8(l,198),o.setUint32(l+1,g),new Uint8Array(o.buffer).set(new Uint8Array(i),l+5),5+g}if(typeof i=="number"){if(Math.floor(i)!==i)return o.setUint8(l,203),o.setFloat64(l+1,i),9;if(i>=0){if(i<128)return o.setUint8(l,i),1;if(i<256)return o.setUint8(l,204),o.setUint8(l+1,i),2;if(i<65536)return o.setUint8(l,205),o.setUint16(l+1,i),3;if(i<4294967296)return o.setUint8(l,206),o.setUint32(l+1,i),5;if(i<18446744073709552e3)return o.setUint8(l,207),FR(o,l+1,i),9;throw new Error("Number too big 0x"+i.toString(16))}if(i>=-32)return o.setInt8(l,i),1;if(i>=-128)return o.setUint8(l,208),o.setInt8(l+1,i),2;if(i>=-32768)return o.setUint8(l,209),o.setInt16(l+1,i),3;if(i>=-2147483648)return o.setUint8(l,210),o.setInt32(l+1,i),5;if(i>=-9223372036854776e3)return o.setUint8(l,211),UR(o,l+1,i),9;throw new Error("Number too small -0x"+(-i).toString(16).substr(1))}if(d==="undefined")return c?0:(o.setUint8(l,212),o.setUint8(l+1,0),o.setUint8(l+2,0),3);if(i===null)return c?0:(o.setUint8(l,192),1);if(d==="boolean")return o.setUint8(l,i?195:194),1;if(typeof i.toJSON=="function")return Ao(i.toJSON(),o,l,c);if(d==="object"){let g,R=0,O;const b=Array.isArray(i);if(b?g=i.length:(O=zm(i,c),g=O.length),g<16?(o.setUint8(l,g|(b?144:128)),R=1):g<65536?(o.setUint8(l,b?220:222),o.setUint16(l+1,g),R=3):g<4294967296&&(o.setUint8(l,b?221:223),o.setUint32(l+1,g),R=5),b)for(let I=0;I<g;I++)R+=Ao(i[I],o,l+R,c);else if(O)for(let I=0;I<g;I++){const U=O[I];R+=Ao(U,o,l+R),R+=Ao(i[U],o,l+R,c)}return R}if(d==="function")return 0;throw new Error("Unknown type "+d)}function _o(i,o){const l=typeof i;if(l==="string"){const c=Nc(i);if(c<32)return 1+c;if(c<256)return 2+c;if(c<65536)return 3+c;if(c<4294967296)return 5+c}if(ArrayBuffer.isView&&ArrayBuffer.isView(i)&&(i=i.buffer),i instanceof ArrayBuffer){const c=i.byteLength;if(c<256)return 2+c;if(c<65536)return 3+c;if(c<4294967296)return 5+c}if(typeof i=="number"){if(Math.floor(i)!==i)return 9;if(i>=0){if(i<128)return 1;if(i<256)return 2;if(i<65536)return 3;if(i<4294967296)return 5;if(i<18446744073709552e3)return 9;throw new Error("Number too big 0x"+i.toString(16))}if(i>=-32)return 1;if(i>=-128)return 2;if(i>=-32768)return 3;if(i>=-2147483648)return 5;if(i>=-9223372036854776e3)return 9;throw new Error("Number too small -0x"+i.toString(16).substr(1))}if(l==="boolean")return 1;if(i===null)return o?0:1;if(i===void 0)return o?0:3;if(typeof i.toJSON=="function")return _o(i.toJSON(),o);if(l==="object"){let c,d=0;if(Array.isArray(i)){c=i.length;for(let g=0;g<c;g++)d+=_o(i[g],o)}else{const g=zm(i,o);c=g.length;for(let R=0;R<c;R++){const O=g[R];d+=_o(O)+_o(i[O],o)}}if(c<16)return 1+d;if(c<65536)return 3+d;if(c<4294967296)return 5+d;throw new Error("Array or object too long 0x"+c.toString(16))}if(l==="function")return 0;throw new Error("Unknown type "+l)}var Fc={encode:LR,decode:VR,inspect:bR,utf8Write:Po,utf8Read:Vm,utf8ByteCount:Nc};function jR(i,o){return!!o.get("x-ably-errorcode")}function zR(i,o){if(jR(i,o))return i.error&&N.fromValues(i.error)}function GR(i){const o={};return i.forEach((l,c)=>{o[c]=l}),o}async function HR(i,o,l,c,d,g){const R=new Headers(c||{}),O=i?i.toUpperCase():re(g)?"GET":"POST",b=new AbortController;let I;const U=new Promise(j=>{I=setTimeout(()=>{b.abort(),j({error:new ue("Request timed out",null,408)})},o?o.options.timeouts.httpRequestTimeout:ae.TIMEOUTS.httpRequestTimeout)}),B={method:O,headers:R,body:g,signal:b.signal};T.Config.isWebworker||(B.credentials=R.has("authorization")?"include":"same-origin");const q=(async()=>{try{const j=await li().fetch(l+"?"+new URLSearchParams(d||{}),B);if(clearTimeout(I),j.status==204)return{error:null,statusCode:j.status};const K=j.headers.get("Content-Type");let ee;K&&K.indexOf("application/x-msgpack")>-1?ee=await j.arrayBuffer():K&&K.indexOf("application/json")>-1?ee=await j.json():ee=await j.text();const ce=!!K&&K.indexOf("application/x-msgpack")===-1,Pe=GR(j.headers);return j.ok?{error:null,body:ee,headers:Pe,unpacked:ce,statusCode:j.status}:{error:zR(ee,j.headers)||new ue("Error response received from server: "+j.status+" body was: "+T.Config.inspect(ee),null,j.status),body:ee,headers:Pe,unpacked:ce,statusCode:j.status}}catch(j){return clearTimeout(I),{error:j}}})();return Promise.race([U,q])}var WR={XHRRequest:Fm,FetchRequest:HR},Gm=aR(Nm,xm);T.Crypto=Gm,T.BufferUtils=xm,T.Http=Lm,T.Config=Nm,T.Transports=xR,T.WebStorage=Dm;for(const i of[vc,kc])i.Crypto=Gm,i._MsgPack=Fc;Lm.bundledRequestImplementations=WR,m.initLogHandlers(),T.Defaults=te(IR),T.Config.agent&&(T.Defaults.agent+=" "+T.Config.agent);var qR={ErrorInfo:N,Rest:vc,Realtime:kc,msgpack:Fc};if(typeof r.exports=="object"&&typeof n=="object"){var $R=(i,o,l,c)=>{if(o&&typeof o=="object"||typeof o=="function")for(let d of Object.getOwnPropertyNames(o))!Object.prototype.hasOwnProperty.call(i,d)&&d!==l&&Object.defineProperty(i,d,{get:()=>o[d],enumerable:!(c=Object.getOwnPropertyDescriptor(o,d))||c.enumerable});return i};r.exports=$R(r.exports,n)}return r.exports})})(_1);var Wb=_1.exports;export{Hb as A,Mb as B,Vb as C,Ub as F,Lb as Q,xb as R,nk as T,eO as a,Ib as b,op as c,Nb as d,Wb as e,TA as f,Bb as g,Db as h,h_ as i,an as j,Gb as m,bb as p,D as r,Fb as u};
